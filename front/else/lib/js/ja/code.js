var Code_Lib_Ext = Class.create({insRequest  : null,_extRequest : function (){this.insRequest = new Code_Lib_Request({insRoot: this.insRoot});},insCake : null,_extCake : function(obj){this.insCake = new Code_Lib_Cake({insRoot  : this.insSelf,idSelf   : (obj.id)? 'Cake' + obj.id : 'Cake',pathSelf : obj.pathSelf});},insBrowser : null,_extBrowser : function () {this.insBrowser = new Code_Lib_Browser();var flag = this.insBrowser.iniLoad({insRoot  : this.insSelf,idSelf   : 'Browser'});return flag;},insSelf : null, insRoot : null,_extVars : function (){this.insSelf = this;this.insRoot = this;},insListener : null,_extListener : function(){this.insListener = new Code_Lib_Listener();},_extKey : function(){this._setKeyLisener();},_setKeyLisener : function(){this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'keydown',strFunc : '_keydownKey', ele : document, vars : ''});},_keydownKey : function(evt){this._resetLogout();if (evt.keyCode == 13) {if (!evt.findElement('textarea')) {evt.stop();}}},setZIndex : function(){this._resetLogout();this.vars.varsSystem.num.zIndex++;return this.vars.varsSystem.num.zIndex;},getZIndex : function(){return this.vars.varsSystem.num.zIndex;},_varsLogout : null,_resetLogout : function(){},_extTimeZone : function(obj){this.insTimeZone = new Code_Lib_TimeZone({numTimeZone : obj.numTimeZone});},insWindow  : null,_extWindow : function (obj){this.insWindow = new Code_Lib_Window();this.insWindow.iniLoad({eleInsert  : obj.eleInsert,insRoot    : this.insRoot,insCurrent : this.insSelf,idSelf     : 'Window',allot      : this._getWindowAllot(),vars       : obj.vars});},insLayout : null,_extLayout : function(obj){this.insLayout = new Code_Lib_TemplateLayout({eleInsert  : $(this.insWindow.idWindow).down('.codeLibWindowBodyTopMiddleWrap', 0),idWindow   : this.insWindow.idWindow,insRoot    : this.insRoot,insCurrent : this.insSelf,idSelf     : 'Layout',allot      : function(){},vars       : obj.vars});},_varsValue : null,_eventValue : function(obj){this._varsValue = {vars     : (obj.vars)? obj.vars : '',idTarget : (obj.idTarget)? obj.idTarget : ''};}});var Code_Lib_ExtLib = Class.create({_extVars : function(obj){this.insRoot = (obj.insRoot)? obj.insRoot : null;this.insCurrent = (obj.insCurrent)? obj.insCurrent : null;this.insSelf = this;this.idSelf = (obj.idSelf)? obj.idSelf : null;this.varsTarget = (obj.varsTarget)? obj.varsTarget : null;this.vars = (obj.vars)? (Object.toJSON(obj.vars)).evalJSON() : null;this.eleInsert = (obj.eleInsert)? obj.eleInsert : null;this.eleInsertBtnLeft = (obj.eleInsertBtnLeft)? obj.eleInsertBtnLeft : null;this.eleInsertBtnRight = (obj.eleInsertBtnRight)? obj.eleInsertBtnRight : null;this.idWindow = (obj.idWindow)? obj.idWindow : null;this._varsSatmp = {};},_getCake : function(){if (!this.insRoot.insCake) return;this.insRoot.insCake.getStorageCake({parentKey  : this.idSelf,funcReturn : this._getCakeVars,insReturn  : this});},_getCakeVars : function(obj){var insCurrent = obj.insReturn;if(obj.data) {insCurrent._getCakeVarsUpdate({data : obj.data});}},_varsScroll : {numTop : 0, numLeft : 0},getScroll : function(){this.resetScroll();if (this.insFormat) {if (this.insFormat.eleTemplate.body) {this._varsScroll = {numTop  : this.insFormat.eleTemplate.body.scrollTop,numLeft : this.insFormat.eleTemplate.body.scrollLeft};}}},resetScroll : function(){this._varsScroll = {numTop  : 0,numLeft : 0};},setScroll : function(){if (this.insFormat) {if (this.insFormat.eleTemplate.body) {this.insFormat.eleTemplate.body.scrollTop = this._varsScroll.numTop;this.insFormat.eleTemplate.body.scrollLeft = this._varsScroll.numLeft;}}},_getCakeVarsUpdate : function(obj){},_varsCake : {},setCake : function(){if (!this.insRoot.insCake) return;this._varsCake = {};this._setCakeVars();this.insRoot.insCake.setStorageCake({parentKey  : this.idSelf,value      : this._varsCake,numExpires : 0});},_setCakeVars : function(){},insListener : null,_extListener : function(){this.insListener = new Code_Lib_Listener();this._varsListener = [];},_varsListener : null,_setListener : function(obj){var data = {ins : obj.ins};this._varsListener.push(data);},stopListener : function(){this.insListener.stop();this._stopListenerChild({arr : this._varsListener});if (this.insPage) this.insPage.stopListener();this._resetListener();},_stopListenerChild : function(obj){for (var i = 0; i < obj.arr.length; i++) {obj.arr[i].ins.insListener.stop();}},_resetListener : function(){this._varsListener = [];},eleWrap : null,_extWrap : function(){var ele = $(document.createElement('div'));ele.id = this.idSelf;this.eleInsert.insert(ele);this.eleWrap = ele;},_getWrapWidth : function(obj){var array = this.eleInsert.style.width.split('px');var data = parseFloat(array[0]);return  data;},_getWrapHeight : function(){var array = this.eleInsert.style.height.split('px');var data = parseFloat(array[0]);return  data;},removeWrap : function(){if ($(this.idSelf)) $(this.idSelf).remove();if (this.eleInsertBtnLeft) this.eleInsertBtnLeft.innerHTML = '';if (this.eleInsertBtnRight) this.eleInsertBtnRight.innerHTML = '';},_varsBlock : {},_getBlock : function(obj){for (var i = 0; i < obj.arr.length; i++) {if(obj.arr[i].id == obj.idTarget) {this._varsBlock = obj.arr[i];}}},_removeBlock : function(obj){var num = 0;for (var i = 0; i < obj.arr.length; i++) {if(obj.arr[i].id == obj.idTarget) num = i;}obj.arr = obj.arr.slice(0, num).concat(obj.arr.slice((num + 1), obj.arr.length));return obj.arr;},_setBlock : function(obj){var num = 0;for (var i = 0; i < obj.arr.length; i++) {if(obj.arr[i].id == obj.idTarget) num = i;}var array = [obj.block];obj.arr = obj.arr.slice(0, num + 1).concat(array.concat(obj.arr.slice((num + 1), obj.arr.length)));return obj.arr;},_setBlockMove : function(obj){var num = 0;for (var i = 0; i < obj.arr.length; i++) {if (obj.arr[i].id == obj.idTarget) num = i;}var array = [obj.block];obj.arr = obj.arr.slice(0, num + 1).concat(array.concat(obj.arr.slice((num + 1), obj.arr.length)));return obj.arr;},insFormat : null,_extFormat : function(){this._setFormat();},_setFormat : function(obj){this.insFormat = new Code_Lib_TemplateFormat({eleInsert  : this.eleWrap,insRoot    : this.insRoot,insCurrent : this.insSelf,idSelf     : this.idSelf + 'Format',vars       : this.vars.varsFormat});},_updateFormatStyle : function(){this.insFormat.updateTemplateStyle();},_staticBtnBottom : {numMargin : 5},_extBtnBottom : function(){if (!this.vars.varsStatus.flagBtnBottomUse) return;if (!this.eleInsertBtnLeft && this.eleInsertBtnRight) return;if (this.eleInsertBtnLeft) {this.eleInsertBtnLeft.innerHTML = '';this.eleInsertBtnLeft.style.marginTop = this._staticBtnBottom.numMargin + 'px';}if (this.eleInsertBtnRight) {this.eleInsertBtnRight.innerHTML = '';this.eleInsertBtnRight.style.marginTop = this._staticBtnBottom.numMargin + 'px';}this._setBtnBottom({arr : this.vars.varsBtn});},_setBtnBottom : function(obj){for (var i = 0; i < obj.arr.length; i++) {if (!obj.arr[i].flagUse) continue;if (obj.arr[i].flagBtnUse) this._setBtnBottomBtn({vars : obj.arr[i]});else if (obj.arr[i].flagTextUse) this._setBtnBottomText({vars : obj.arr[i]});}},_setBtnBottomBtn : function(obj){var insBtn = new Code_Lib_Btn();insBtn.iniBtn({eleInsert  : (obj.vars.flagLeftUse)? this.eleInsertBtnLeft : this.eleInsertBtnRight,id         : this.idSelf + 'BtnBottom' + obj.vars.id,strFunc    : '_mousedownBtnBottom',strTitle   : obj.vars.strTitle,insCurrent : this,flagATag   : (obj.vars.flagATag)? obj.vars.flagATag : null,path       : (obj.vars.path)? obj.vars.path : null,vars       : obj.vars});this._setListener({ins : insBtn});$(this.idSelf + 'BtnBottom' + obj.vars.id).style.marginRight = this._staticBtnBottom.numMargin + 'px';},_setBtnBottomText : function(obj){var insBtn = new Code_Lib_Btn();insBtn.iniBtnText({eleInsert : (obj.vars.flagLeftUse)? this.eleInsertBtnLeft : this.eleInsertBtnRight,id         : this.idSelf + 'BtnBottom' + obj.vars.id,strFunc    : '_mousedownBtnBottom',strTitle   : obj.vars.strTitle,insCurrent : this,vars       : obj.vars});this._setListener({ins : insBtn});$(this.idSelf + 'BtnBottom' + obj.vars.id).style.marginRight = this._staticBtnBottom.numMargin + 'px';},removeBtnBottom : function(){if (this.eleInsertBtnLeft) this.eleInsertBtnLeft.innerHTML = '';if (this.eleInsertBtnRight) this.eleInsertBtnRight.innerHTML = '';},showBtnBottom : function(){this._showBtnBottomChild({arr : this.vars.varsBtn});},_showBtnBottomChild : function(obj){for (var i = 0; i < obj.arr.length; i++) {if ($(this.idSelf + 'BtnBottom' + obj.arr[i].id)) $(this.idSelf + 'BtnBottom' + obj.arr[i].id).show();}},hideBtnBottom : function(){this._hideBtnBottom({arr : this.vars.varsBtn});},_hideBtnBottom : function(obj){for (var i = 0; i < obj.arr.length; i++) {if (obj.arr[i].flagATag) continue;if ($(this.idSelf + 'BtnBottom' + obj.arr[i].id)) $(this.idSelf + 'BtnBottom' + obj.arr[i].id).hide();}},_mousedownBtnBottom : function(obj){this.hideBtnBottom({arr : this.vars.varsBtn});this.allot({insCurrent : this.insCurrent,from       : 'eventBtnBottom',vars       : obj.vars});},insPage : null,_extPage : function(){this._setPage();},_getPageWidth : function(){var array = this.eleInsert.style.width.split('px');var data = parseFloat(array[0]);return data;},_setPage : function(){if (!this.vars.varsStatus.flagPageUse) return;if (this.vars.varsStatus.flagInnerPageUse) {this.insFormat.eleTemplate.fooder.setStyle({width : this._getPageWidth() + 'px'});}this.insPage = new Code_Lib_BtnPage({eleInsertBtnLeft  : (this.vars.varsStatus.flagInnerPageUse)?  this.insFormat.eleTemplate.fooder.down('.codeLibBaseMarginLeftFive',0): this.eleInsertBtnLeft ,eleInsertBtnRight : (this.vars.varsStatus.flagInnerPageUse)?  this.insFormat.eleTemplate.fooder.down('.codeLibBaseMarginRightFive',0): this.eleInsertBtnRight,insRoot           : this.insRoot,insCurrent        : this.insSelf,idSelf            : this.idSelf + 'Page',allot             : this._getPageAllot(),vars              : this.vars.varsPage});},_getPageAllot : function(){var allot =  function(obj){var insCurrent = obj.insCurrent;if (obj.from == 'eventPage') {var flag = insCurrent.allot({insCurrent : insCurrent.insCurrent,from       : 'eventPage',vars       : obj.vars});if (flag) insCurrent.iniReload();}};return allot;},allot : {},_extAllot : function(obj){this.allot = obj.allot;}});var Code_Lib_ExtControl = Class.create({insRoot : null,idSelf : null,insSelf : null,insCurrent : null,eleInsertBtnLeft : null,eleInsertBtnRight : null,eleInsert : null,vars : null,insTool : null,insUnder : null,_extVars : function(obj){this.insUnder = obj.insUnder;this.insTool = obj.insTool;this.insRoot = obj.insRoot;this.insCurrent = obj.insCurrent;this.insSelf = this;this.idSelf = obj.idSelf;this.vars = (Object.toJSON(obj.vars)).evalJSON();},_getCake : function(){if (!this.insRoot.insCake) return;this.insRoot.insCake.getStorageCake({parentKey  : this.idSelf,funcReturn : this._getCakeVars,insReturn  : this});},_getCakeVars : function(obj){var insCurrent = obj.insReturn;if(obj.data) {insCurrent._getCakeVarsUpdate({data : obj.data});}},_getCakeVarsUpdate : function(obj){},_varsCake : {},setCake : function(){if (!this.insRoot.insCake) return;this._varsCake = {};this._setCakeVars();this.insRoot.insCake.setStorageCake({parentKey  : this.idSelf,value      : this._varsCake,numExpires : 0});},_setCakeVars : function(){},insListener : null,_extListener : function(){this.insListener = new Code_Lib_Listener();this._varsListener = [];},_varsListener : null,_setListener : function(obj){var data = {ins : obj.ins};this._varsListener.push(data);},stopListener : function(){this.insListener.stop();this._stopListenerChild({arr : this._varsListener});this._resetListener();},_stopListenerChild : function(obj){for (var i = 0; i < obj.arr.length; i++) {obj.arr[i].ins.insListener.stop();}},_resetListener : function(){this._varsListener = [];},insUnder : null,_extUnder : function(obj){this.insUnder.vars.varsFormat = obj.vars;this.insUnder.iniReload();},eleWrap : null,_extWrap : function(){this.eleWrap = (Object.toJSON(this.insUnder.vars.varsFormat)).evalJSON();},removeWrap : function(){this.insUnder.vars.varsFormat = this.eleWrap;this.insUnder.iniReload();},insTool : null,_varsTool : null,_extTool : function(){this._updateTool({arr : this.insTool.vars.varsDetail});this.insTool.iniReload();},_updateTool : function(obj){this.insEscape = new Code_Lib_Escape();for (var i = 0; i < obj.arr.length; i++) {var strId = this.insEscape.strCapitalize({data : obj.arr[i].id});var str = 'flag' + strId + 'Use';obj.arr[i].flagNow = 0;if(this._varsTool[str]) obj.arr[i].flagNow = 1;}},setToolLock : function(obj){this.insTool.setLock({idAttest : obj.idAttest});},cancelToolLock : function(obj){this.insTool.cancelLock({idAttest : obj.idAttest});},_extEventTool : function(obj){this._iniSwitch(obj);if (!obj.flagStr) {this.iniReload();}},_extSwitch : function(obj){var arr = [];if (obj.flagStr) {var str = 'switch' + obj.flagStr + 'List';arr = this.vars.varsStatus[str];} else {arr = this.vars.varsStatus.switchList;}this._updateSwitch({arr : arr, flagStr : obj.flagStr, idTarget : obj.idTarget, flagLoop : obj.flagLoop});},_updateSwitch : function(obj){var str = 'flagNow';if (obj.flagStr) {str = 'flag' + obj.flagStr + 'Now';}if (obj.flagLoop) {var now = 0;for (var i = 0; i < obj.arr.length; i++) {if(obj.arr[i] == this.vars.varsStatus[str]) now = i;}now++;if((obj.arr.length) == now) {now = 0;}this.vars.varsStatus[str] = obj.arr[now];} else {this.vars.varsStatus[str] = obj.idTarget;}this.setCake();},_extReload : function(){this.insEscape = new Code_Lib_Escape();this.eventRemove();this._iniUnder({vars : this.vars[this.vars.varsStatus.flagNow].varsFormat});this.insEscape = new Code_Lib_Escape();var str = '_ini' + this.insEscape.strCapitalize({data : this.vars.varsStatus.flagNow});if (this.vars.varsStatus.flagNow.match(/^folder/)) {this._iniFolder();}else this[str]();if(this.insTool) {this._varsTool = this.vars[this.vars.varsStatus.flagNow].varsEdit;this._iniTool();}},showFormAttestError : function(obj){if (this.insForm) {this.insForm.showValueAttestError({flagType : obj.flagType,str      : (obj.str)? obj.str : ''});}},resetFormError : function(){if (this.insForm) {this.insForm.resetValueError();}},allot : {},_extAllot : function(obj){this.allot = obj.allot;}});var Code_Lib_ExtPortal = Class.create({insRoot : null,idSelf : null,insSelf : null,insTop : null,insCurrent : null,insWindow : null,eleInsert : null,strClass : null,idModule : null,strExt : null,strChild : null,varsChild : null,_varsStamp : {},_varsStampCheck : {},_extVars : function(obj){this.eleInsert = (obj.eleInsert)? obj.eleInsert : null;this.insRoot = (obj.insRoot)? obj.insRoot : null;this.idSelf = (obj.idSelf)? obj.idSelf : null;this.insSelf = this;this.insTop = (obj.insTop)? obj.insTop : null;this.strClass = (obj.strClass)? obj.strClass : null;this.idModule = (obj.idModule)? obj.idModule : null;this.strExt = (obj.strExt)? obj.strExt : null;this.strChild = (obj.strChild)? obj.strChild : '';this.insWindow = (obj.insWindow)? obj.insWindow : null;this.insCurrent = (obj.insCurrent)? obj.insCurrent : null;this.varsChild = (obj.varsChild)? (Object.toJSON(obj.varsChild)).evalJSON() : null;this._resetVarChild();this._iniSearch();if (this.stamp) this.insRoot.updateStamp({arr : this.stamp});this._varsStamp = {};this._varsStampCheck = {};},insLayout : null,_extLayout : function(){this.insLayout = new Code_Lib_TemplateLayout({eleInsert  : this.eleInsert,idWindow   : this.insWindow.idWindow,insRoot    : this.insRoot,insCurrent : this.insSelf,idSelf     : this.idSelf + 'Layout',allot      : this._getLayoutAllot(),vars       : this.vars.portal.varsTemplateLayout});},_getLayoutAllot : function(){var allot =  function(obj){var insCurrent = obj.insCurrent;if (obj.from == 'eventLayout') {if (insCurrent.insNavi) insCurrent.insNavi.eventLayout();if (insCurrent.insList) insCurrent.insList.eventLayout();if (insCurrent.insDetail) insCurrent.insDetail.eventLayout();} else if (obj.from == 'preEventLayout') {insCurrent._preEventLayout({flag : 'dummy'});} else if (obj.from == 'navi-_mousedownNavi') {if (obj.vars.id == 'Switch') {insCurrent.insNavi.eventTool({idTarget : insCurrent.insNavi.vars.varsStatus.flagNow,flagLoop : 1});} else if (obj.vars.id == 'Reload') {insCurrent._preEventLayout({flag : 'reset'});insCurrent._eventNaviConnect({vars : obj.vars, flag : insCurrent.insNavi.vars.varsStatus.flagNow + '-reload'});} else if (obj.vars.id == 'Preference') {insCurrent._iniChild({strTitleParent  : insCurrent.insWindow.vars.strTitle,strTitleChild   : insCurrent.vars.child.varsTitle[obj.vars.id],strExt          : obj.vars.id,strChild        : '',strClass        : insCurrent.strClass,idModule        : insCurrent.idModule});}} else if (obj.from == 'navi-_mousedownMenu') {return insCurrent.insNavi.vars.varsStatus.flagNow;} else if (obj.from == 'navi-_mousedownLine') {insCurrent.insNavi.eventTool({idTarget : obj.vars});} else if (obj.from == 'list-_mousedownNavi') {if (obj.vars.id == 'Switch') {insCurrent.insList.eventTool({idTarget : insCurrent.insList.vars.varsStatus.flagNow,flagLoop : 1});} else if (obj.vars.id == 'Reload') {insCurrent._preEventLayout({flag : 'reset'});insCurrent._eventListConnect({flag : obj.vars.id});} else if (obj.vars.id == 'Output') {insCurrent._eventListConnect({flag : obj.vars.id, flagType : insCurrent.insList.vars.varsStatus.flagOutputNow});} else if (obj.vars.id == 'Print') {insCurrent._eventListConnect({flag : obj.vars.id, flagType : insCurrent.insList.vars.varsStatus.flagPrintNow});}} else if (obj.from == 'list-_mousedownMenu') {if (obj.vars.id == 'Switch') {return insCurrent.insList.vars.varsStatus.flagNow;} else if (obj.vars.id == 'Output') {return insCurrent.insList.vars.varsStatus.flagOutputNow;} else if (obj.vars.id == 'Print') {return insCurrent.insList.vars.varsStatus.flagPrintNow;}} else if (obj.from == 'list-_mousedownLine') {if (obj.varsTarget == 'Switch') {return insCurrent.insList.eventTool({idTarget : obj.vars});} else if (obj.varsTarget) {insCurrent.insList.eventTool({idTarget : obj.vars, flagStr : obj.varsTarget});insCurrent._eventListConnect({flag : obj.varsTarget, flagType : obj.vars});return;}} else if (obj.from == 'detail-_mousedownNavi') {if (obj.vars.id == 'Reload') {insCurrent._preEventLayout({flag : 'reset'});insCurrent._eventDetailConnect({flag : 'reload'});} else if (obj.vars.id == 'Output') {insCurrent._eventDetailConnect({flag : 'output', flagType : insCurrent.insDetail.vars.varsStatus.flagOutputNow});} else if (obj.vars.id == 'Print') {insCurrent._eventDetailConnect({flag : obj.vars.id, flagType : insCurrent.insDetail.vars.varsStatus.flagPrintNow});} else if (obj.vars.id == 'Add'|| obj.vars.id == 'Copy'|| obj.vars.id == 'Edit') {insCurrent._setDetailChild({flag : obj.vars.id.toLowerCase()});} else if (obj.vars.id == 'Preference') {insCurrent._iniChild({strTitleParent  : insCurrent.insWindow.vars.strTitle,strTitleChild   : insCurrent.vars.child.varsTitle[obj.vars.id],strExt          : obj.vars.id,flagMenuShowUse : 1,strChild        : '',strClass        : insCurrent.strClass,idModule        : insCurrent.idModule});}} else if (obj.from == 'detail-_mousedownMenu') {if (obj.vars.id == 'Switch') {return insCurrent.insDetail.vars.varsStatus.flagNow;} else if (obj.vars.id == 'Output') {return insCurrent.insDetail.vars.varsStatus.flagOutputNow;} else if (obj.vars.id == 'Print') {return insCurrent.insDetail.vars.varsStatus.flagPrintNow;}} else if (obj.from == 'detail-_mousedownLine') {if (obj.varsTarget == 'Switch') {return insCurrent.insDetail.eventTool({idTarget : obj.vars});} else if (obj.varsTarget) {insCurrent.insDetail.eventTool({idTarget : obj.vars, flagStr : obj.varsTarget});if (obj.varsTarget == 'Output') {insCurrent._eventDetailConnect({flag : 'output', flagType : obj.vars});} else {insCurrent._eventDetailConnect({flag : obj.varsTarget, flagType : obj.vars});}return;}}};return allot;},_preEventLayout : function(obj){if (this.insNavi) this.insNavi.preEventLayout(obj);if (this.insList) this.insList.preEventLayout(obj);if (this.insDetail) this.insDetail.preEventLayout(obj);},_extNavi : function(){this._setNaviVars({arr : this.vars.portal.varsNavi.varsStatus.switchList});this._setNavi();},_setNaviVars : function(obj){for (var i = 0; i < obj.arr.length; i++) {if (obj.arr[i].match(/^folder/)) {var str = obj.arr[i];var cut = this.vars.portal.varsNavi.varsFolder[str];var varsTmpl = (Object.toJSON(this.vars.portal.varsNavi.templateFolder)).evalJSON();varsTmpl.varsFormat.strTitleHeaderLeft = cut.strTitle;varsTmpl.varsDetail.varsDetail = cut.varsDetail;this.vars.portal.varsNavi[str] = varsTmpl;}}},insNavi : null,_setNavi : function(){this.insNavi = new Code_Lib_ControlNavi({insUnder   : this.insLayout.insNaviUnder,insTool    : this.insLayout.insNaviTool,insRoot    : this.insRoot,insCurrent : this,idSelf     : this.idSelf + 'Navi',allot      : this._getNaviAllot(),vars       : this.vars.portal.varsNavi});},_getNaviAllot : function(){var allot = function(obj){var insCurrent = obj.insCurrent;var array = obj.from.split('-');var flagNow = array[0];var flagType = array[1];if (obj.from == 'search-eventBtn') insCurrent._eventNaviConnect({vars : obj.vars, flag : 'search'});else if (obj.from == 'search-eventBtnSave') insCurrent._eventNaviConnect({vars : obj.vars, flag : 'search-save'});else if (obj.from == 'search-eventBtnDelete') insCurrent._eventNaviConnect({vars : obj.vars, flag : 'search-delete'});else if (flagNow.match(/^folder/)) {if (flagType == '_mousedownBtn') insCurrent._eventNaviConnect({vars : obj.vars, flag : flagNow + '-search'});else if (flagType == 'eventBtnBottom') insCurrent._eventNaviConnect({vars : obj.vars, flag : flagNow + '-save'});}else if (obj.from == 'tree-_mousedownBtn') insCurrent._eventNaviDetail({vars : obj.vars});else if (obj.from == 'tree-_dblclickBtn') insCurrent._eventNaviDetail({flag : 'dblclick', vars : obj.vars});else if (obj.from == 'tree-eventPage') insCurrent._eventNaviConnect({vars : obj.vars, flag : 'tree-search'});};return allot;},_varsValue : null,_eventValue : function(obj){if (!obj) return;this._varsValue = {vars     : (obj.vars)? obj.vars : '',idTarget : (obj.idTarget)? obj.idTarget : ''};},_eventNaviConnect : function(obj){if (obj.flag == 'search') {this._eventSearch({numLotNow : 0,ph : {arrWhere : obj.vars.arrWhere,arrOrder : obj.vars.arrOrder}});} else if (obj.flag.match(/^folder(.*?)-search$/)) {this._eventSearch({numLotNow : 0,ph : {arrWhere : obj.vars.arrWhere,arrOrder : obj.vars.arrOrder}});}this._varsNaviConnect = obj;this._sendNaviConnect();},_getJsonStamp : function(obj){var str = this.strClass+ '-' + this.idModule+ '-' + this.strExt+ '-' + this.strChild+ '-' + obj.strFunc;var stamp = (this._varsStamp[str])? this._varsStamp[str] : 0;var objStamp = {id    : str,stamp : stamp};var jsonStamp = (Object.toJSON(objStamp));return jsonStamp;},_varsNaviConnectLock : 0,_varsNaviConnect : null,_sendNaviConnect : function(){var jsonStamp = {};var flag = this._varsNaviConnect.flag;var arrayKey = [], arrayValue = [];var jsonSearch = Object.toJSON(this._varsSearch);var insEscape = new Code_Lib_Escape();if (this._varsNaviConnect.flag == 'search' || this._varsNaviConnect.flag.match(/^folder(.*?)-search$/)) {var strFunc = 'NaviSearch';jsonStamp = this._getJsonStamp({strFunc : strFunc});arrayKey = ['class', 'module', 'ext', 'child', 'func', 'db', 'jsonStamp', 'jsonSearch'];arrayValue = [this.strClass, this.idModule, this.strExt, this.strChild, strFunc, 'slave', jsonStamp, jsonSearch];} else if (this._varsNaviConnect.flag.match(/^folder(.*?)-reload$/)) {var strFunc = '';if (RegExp.$1) strFunc = 'NaviFolder' + insEscape.strCapitalize({data : RegExp.$1}) + 'Reload';else strFunc = 'NaviFolderReload';jsonStamp = this._getJsonStamp({strFunc : strFunc});arrayKey = ['class', 'module', 'ext', 'child', 'func', 'db', 'jsonStamp'];arrayValue = [this.strClass, this.idModule, this.strExt, this.strChild, strFunc, 'slave', jsonStamp];this.insLayout.updateTool({flagLock : 1, from : 'navi', idTarget : 'Reload'});} else if (this._varsNaviConnect.flag.match(/^folder(.*?)-save$/)) {var strFunc = '';if (RegExp.$1) strFunc = 'NaviFolder' + insEscape.strCapitalize({data : RegExp.$1}) + 'Save';else strFunc = 'NaviFolderSave';this._eventValue({vars : this._varsNaviConnect.vars});var jsonValue = Object.toJSON(this._varsValue);arrayKey = ['class', 'module', 'ext', 'child', 'func', 'db', 'jsonStamp', 'jsonValue'];arrayValue = [this.strClass, this.idModule, this.strExt, this.strChild, strFunc, 'master', jsonStamp, jsonValue];} else if (this._varsNaviConnect.flag.match(/^format(.*?)-reload$/)) {var strFunc = '';if (RegExp.$1) strFunc = 'NaviFormat' + insEscape.strCapitalize({data : RegExp.$1}) + 'Reload';else strFunc = 'NaviFormatReload';jsonStamp = this._getJsonStamp({strFunc : strFunc});arrayKey = ['class', 'module', 'ext', 'child', 'func', 'db', 'jsonStamp'];arrayValue = [this.strClass, this.idModule, this.strExt, this.strChild, strFunc, 'slave', jsonStamp];this.insLayout.updateTool({flagLock : 1, from : 'navi', idTarget : 'Reload'});} else if (this._varsNaviConnect.flag.match(/^format(.*?)-save$/)) {var strFunc = '';if (RegExp.$1) strFunc = 'NaviFormat' + insEscape.strCapitalize({data : RegExp.$1}) + 'Save';else strFunc = 'NaviFormatSave';this._eventValue({vars : this._varsNaviConnect.vars});var jsonValue = Object.toJSON(this._varsValue);arrayKey = ['class', 'module', 'ext', 'child', 'func', 'db', 'jsonStamp', 'jsonValue'];arrayValue = [this.strClass, this.idModule, this.strExt, this.strChild, strFunc, 'master', jsonStamp, jsonValue];} else if (this._varsNaviConnect.flag == 'search-reload') {var strFunc = 'NaviSearchReload';jsonStamp = this._getJsonStamp({strFunc : strFunc});arrayKey = ['class', 'module', 'ext', 'child', 'func', 'db', 'jsonStamp'];arrayValue = [this.strClass, this.idModule, this.strExt, this.strChild, strFunc, 'slave', jsonStamp];this.insLayout.updateTool({flagLock : 1, from : 'navi', idTarget : 'Reload'});} else if (this._varsNaviConnect.flag == 'search-save') {this._eventValue({vars : this._varsNaviConnect.vars});var jsonValue = Object.toJSON(this._varsValue);var strFunc = 'NaviSearchSave';arrayKey = ['class', 'module', 'ext', 'child', 'func', 'db', 'jsonStamp', 'jsonValue'];arrayValue = [this.strClass, this.idModule, this.strExt, this.strChild, strFunc, 'master', jsonStamp, jsonValue];} else if (this._varsNaviConnect.flag == 'search-delete') {this._eventValue({vars : this._varsNaviConnect.vars});var jsonValue = Object.toJSON(this._varsValue);var strFunc = 'NaviSearchDelete';jsonStamp = this._getJsonStamp({strFunc : strFunc});arrayKey = ['class', 'module', 'ext', 'child', 'func', 'db', 'jsonStamp', 'jsonValue'];arrayValue = [this.strClass, this.idModule, this.strExt, this.strChild, strFunc, 'master', jsonStamp, jsonValue];} else if (this._varsNaviConnect.flag == 'tree-reload') {var strFunc = 'NaviReload';jsonStamp = this._getJsonStamp({strFunc : strFunc});arrayKey = ['class', 'module', 'ext', 'child', 'func', 'db', 'jsonStamp', 'jsonSearch'];arrayValue = [this.strClass, this.idModule, this.strExt, this.strChild, strFunc, 'slave', jsonStamp, jsonSearch];this.insLayout.updateTool({flagLock : 1, from : 'navi', idTarget : 'Reload'});} else if (this._varsNaviConnect.flag == 'tree-search') {var strFunc = 'NaviSearch';arrayKey = ['class', 'module', 'ext', 'child', 'func', 'db', 'jsonStamp', 'jsonSearch'];arrayValue = [this.strClass, this.idModule, this.strExt, this.strChild, strFunc, 'slave', jsonStamp, jsonSearch];}this.insRoot.insRequest.set({flagLock        : 0,numZIndex       : this.insRoot.getZIndex(),insCurrent      : this,flagEscape      : 1,path            : this.insRoot.vars.varsSystem.path.post,querysKey       : arrayKey,querysValue     : arrayValue,functionSuccess : '_sendNaviConnectSuccess',functionFail    : '_sendNaviConnectFail',eleLoadStatus   : this.insNavi.insUnder.eleFormat.header.down('.codeLibBaseMarginRightFive', 0)});},_sendNaviConnectFail : function(obj){alert(this.insRoot.vars.varsSystem.str.errorConnect);},_sendNaviConnectSuccess : function(obj){if (obj.response.responseText.isJSON()) {var json = obj.response.responseText.evalJSON();if (json.stamp) {if (json.stamp.id) this._varsStamp[json.stamp.id] = json.stamp.stamp;}this.insNavi.showBtn();if (json.flag) {if (json.numNews) this.insRoot.iniPopup({flag : 'news', numNews : json.numNews});this._eventNaviConnectSuccess({json : json});}else if (json.flag == 0) alert(this.insRoot.vars.varsSystem.str.errorSession);}else alert(this.insRoot.vars.varsSystem.str.errorRequest);},_eventNaviConnectSuccess : function(obj){var insEscape = new Code_Lib_Escape();if (obj.json.flag == 1){if (this._varsNaviConnect.flag == 'search') {this.insList.resetVars({vars : obj.json.data, numLotNow : this._varsSearch.numLotNow});this.insList.eventNavi({strTitle : null, strClass : null});} else if (this._varsNaviConnect.flag.match(/^folder(.*?)-search$/)) {this.insList.resetVars({vars : obj.json.data, numLotNow : this._varsSearch.numLotNow});this.insList.eventNavi({strTitle : null, strClass : null});if (obj.json.data.numRows) {this._eventDetailList({vars : obj.json.data.varsDetail[0]});}} else if (this._varsNaviConnect.flag.match(/^folder(.*?)-save$/)|| this._varsNaviConnect.flag.match(/^format(.*?)-save$/)) {this.insNavi.updateFolderVars({vars : obj.json.data});} else if (this._varsNaviConnect.flag.match(/^folder(.*?)-reload$/)|| this._varsNaviConnect.flag.match(/^format(.*?)-reload$/)) {this.insLayout.updateTool({flagLock : 0, from : 'navi', idTarget : 'Reload'});this.insNavi.updateFolderVars({vars : obj.json.data});if (obj.json.stamp) {var data = (Object.toJSON(obj.json.data)).evalJSON();if (obj.json.stamp.id) this._varsStampCheck[obj.json.stamp.id] = data;}} else if (this._varsNaviConnect.flag == 'search-save' || this._varsNaviConnect.flag == 'search-delete') {this.insNavi.updateSearchVarsSave({vars : obj.json.data});} else if (this._varsNaviConnect.flag == 'search-reload') {this.insLayout.updateTool({flagLock : 0, from : 'navi', idTarget : 'Reload'});this.insNavi.updateSearchVars({vars : obj.json.data});if (obj.json.stamp) {var data = (Object.toJSON(obj.json.data)).evalJSON();if (obj.json.stamp.id) this._varsStampCheck[obj.json.stamp.id] = data;}} else if (this._varsNaviConnect.flag == 'tree-reload') {this.insLayout.updateTool({flagLock : 0, from : 'navi', idTarget : 'Reload'});this.insNavi.updateTreeVars({vars : obj.json.data});if (obj.json.stamp) {var data = (Object.toJSON(obj.json.data)).evalJSON();if (obj.json.stamp.id) this._varsStampCheck[obj.json.stamp.id] = data;}}} else if (obj.json.flag == 10) {if (this._varsNaviConnect.flag.match(/^folder(.*?)-reload$/)|| this._varsNaviConnect.flag.match(/^format(.*?)-reload$/)|| this._varsNaviConnect.flag == 'tree-reload') {this.insLayout.updateTool({flagLock : 0, from : 'navi', idTarget : 'Reload'});if (obj.json.stamp) {this.insNavi.updateFolderVars({vars : this._varsStampCheck[obj.json.stamp.id]});}} else if (this._varsNaviConnect.flag == 'search-reload') {this.insLayout.updateTool({flagLock : 0, from : 'navi', idTarget : 'Reload'});if (obj.json.stamp) {this.insNavi.updateSearchVars({vars : this._varsStampCheck[obj.json.stamp.id]});}}} else {if (obj.json) {if (obj.json.flag) {if (this.insRoot.vars.varsSystem.str[obj.json.flag]) {alert(this.insRoot.vars.varsSystem.str[obj.json.flag]);}}}}},_extList : function(){this._checkListBtn({varsDetail : this.vars.portal.varsList.varsDetail,varsBtn    : this.vars.portal.varsList.varsBtn});if (this.vars.portal.varsList.varsEdit) {this._checkListToolEdit({varsDetail : this.vars.portal.varsList.varsDetail,varsEdit   : this.vars.portal.varsList.varsEdit});}this._setList();this._setListStart();},_checkListToolEdit : function(obj){},insList : null,_setList : function(){this.insList = new Code_Lib_ControlList({insUnder   : this.insLayout.insListUnder,insTool    : this.insLayout.insListTool,insRoot    : this.insRoot,insCurrent : this,idSelf     : this.idSelf + 'List',allot      : this._getListAllot(),vars       : this.vars.portal.varsList});this.insList.resetVarsChild({arr : this.insList.vars.varsStatus.switchList});},_setListStart : function(){var cut = this.vars.portal.varsList.varsStart;this.insList.eventNavi({strTitle : cut.varsStatus.strTitle,strClass : cut.varsStatus.strClass,varsEdit : (cut.varsEdit)? cut.varsEdit : {}});},_eventListNavi : function(obj){var objData = this._updateListNaviVars({vars : obj.vars});this.insDetail.eventList(objData);},_checkListBtn : function(obj){var flag = this._checkListBtnChild({arr : obj.varsDetail});this._updateVarsBtnHide({arr     : obj.varsBtn,flagUse : flag});},_checkListBtnChild : function(obj){for (var i = 0; i < obj.arr.length; i++) {if (!obj.arr[i].flagDefault) return 1;}return 0;},_updateVarsBtnHide : function(obj){for (var i = 0; i < obj.arr.length; i++) {if (obj.arr[i].vars.idTarget == 'Delete') {obj.arr[i].flagUse = obj.flagUse;return;}}},_getListAllot : function(){var allot = function(obj){var insCurrent = obj.insCurrent;var array = obj.from.split('-');if (array[0] == 'table') {if (array[1] == '_mousedownMove') insCurrent.insNavi.eventMove({vars : obj.vars});else if (array[1] == '_mousedownBtn') insCurrent._eventDetailList({vars : obj.vars[0]});else if (array[1] == 'eventPage') insCurrent._eventListConnect({vars : obj.vars, flag : 'Search'});else if (array[1] == 'eventBtnBottom') insCurrent._eventListConnect({flag : obj.vars.vars.vars.idTarget});} else if (array[0] == 'schedule') {if (array[1] == 'eventPage') insCurrent._eventListConnect({vars : obj.vars, flag : 'Search'});else if (array[1] == '_mousedownLogBtn') insCurrent._eventDetailList({vars : obj.vars.detailLog});else if (array[1] == 'mousedownMove') insCurrent.insNavi.eventMove({vars : obj.vars});} else if (array[0] == 'tableTree') {if (array[1] == '_mousedownBtn') insCurrent._eventDetailList({vars : obj.vars[0]});else if (array[1] == 'eventPage') insCurrent._eventListConnect({vars : obj.vars, flag : 'Search'});else if (array[1] == 'eventBtnBottom') insCurrent._eventListConnect({flag : obj.vars.vars.vars.idTarget});} else if (array[0] == 'tree') {if (array[1] == '_mousedownBtn') insCurrent._eventDetailList({vars : obj.vars});else if (array[1] == 'eventPage') insCurrent._eventListConnect({vars : obj.vars, flag : 'Search'});else if (array[1] == 'eventBtnBottom') insCurrent._eventListConnect({flag : obj.vars.vars.vars.idTarget});} else if (array[0] == 'resetVars') {insCurrent._checkListBtn({varsDetail : obj.vars.varsDetail,varsBtn    : obj.vars.varsBtn});insCurrent._checkListToolEdit({varsDetail : obj.vars.varsDetail,varsEdit   : obj.vars.varsEdit});}};return allot;},_eventListConnect : function(obj){if (obj.flag == 'Reload' || obj.flag == 'Output' || obj.flag == 'Print') {this._eventSearch({numLotNow : this._varsSearch.numLotNow,ph : {arrWhere : this._varsSearch.ph.arrWhere,arrOrder : this._varsSearch.ph.arrOrder}});} else if (obj.flag == 'Search') {this._eventSearch({numLotNow : obj.vars.numLotNow,ph : {arrWhere : this._varsSearch.ph.arrWhere,arrOrder : this._varsSearch.ph.arrOrder}});} else if (obj.flag == 'Delete') {var arrId = this.insList.getTableCheckBoxArrId();if (!arrId.length) {alert(this.insRoot.vars.varsSystem.str.selectRequire);this.insList.eventNavi({strTitle : null, strClass : null});return;}this._eventValue({vars     : this.insList.getTableCheckBoxArrId(),idTarget : ''});}this._varsListConnect = obj;this._sendListConnect();},_varsListConnect : null,_sendListConnect : function(obj){var arrayKey = [], arrayValue = [];var jsonSearch = Object.toJSON(this._varsSearch);var jsonStamp = {};var jsonValue = Object.toJSON(this._varsValue);var insEscape = new Code_Lib_Escape();if (this._varsListConnect.flag == 'Search') {var strFunc = 'ListReload';jsonStamp = this._getJsonStamp({strFunc : strFunc});arrayKey = ['class', 'module', 'ext', 'child', 'func', 'db', 'jsonStamp', 'jsonValue', 'jsonSearch'];arrayValue = [this.strClass, this.idModule, this.strExt, this.strChild, strFunc, 'slave', jsonStamp, jsonValue, jsonSearch];} else if (this._varsListConnect.flag == 'Reload') {var strFunc = 'ListReload';jsonStamp = this._getJsonStamp({strFunc : strFunc});this.insLayout.updateTool({flagLock : 1, from : 'list', idTarget : 'Reload'});arrayKey = ['class', 'module', 'ext', 'child', 'func', 'db', 'jsonStamp', 'jsonValue', 'jsonSearch'];arrayValue = [this.strClass, this.idModule, this.strExt, this.strChild, strFunc, 'slave', jsonStamp, jsonValue, jsonSearch];} else {if (this._varsListConnect.flag == 'Print') {this.insLayout.updateTool({flagLock : 1, from : 'list', idTarget : this._varsListConnect.flag});}var strFunc = 'List' + insEscape.strCapitalize({data : this._varsListConnect.flag});arrayKey = ['class', 'module', 'ext', 'child', 'func', 'db', 'jsonStamp', 'jsonValue', 'jsonSearch'];arrayValue = [this.strClass, this.idModule, this.strExt, this.strChild, strFunc, 'master', jsonStamp, jsonValue, jsonSearch];}if (this._varsListConnect.flag == 'Output') {if (this._varsListConnect.flagType) {arrayKey.push('flagType');arrayValue.push(this._varsListConnect.flagType);}this.insRoot.setOutput({querysKey   : arrayKey,querysValue : arrayValue});this.insLayout.updateTool({flagLock : 0, from : 'list', idTarget : 'Output'});} else {this.insRoot.insRequest.set({flagLock        : 0,numZIndex       : this.insRoot.getZIndex(),insCurrent      : this,flagEscape      : 1,path            : this.insRoot.vars.varsSystem.path.post,querysKey       : arrayKey,querysValue     : arrayValue,functionSuccess : '_sendListConnectSuccess',functionFail    : '_sendListConnectFail',eleLoadStatus   : this.insList.insUnder.eleFormat.header.down('.codeLibBaseMarginRightFive', 0)});}},_sendListConnectFail : function(obj){alert(this.insRoot.vars.varsSystem.str.errorConnect);},_sendListConnectSuccess : function(obj){if (obj.response.responseText.isJSON()) {var json = obj.response.responseText.evalJSON();if (json.stamp) {if (json.stamp.id) this._varsStamp[json.stamp.id] = json.stamp.stamp;}this.insList.showBtnBottom();if (this._varsListConnect.strBackFunc != undefined) {this._varsListConnect.insBack[this._varsListConnect.strBackFunc]();}if (json.flag) {if (json.numNews) this.insRoot.iniPopup({flag : 'news', numNews : json.numNews});this._eventListConnectSuccess({json : json});}else if (json.flag == 0) alert(this.insRoot.vars.varsSystem.str.errorSession);}else alert(this.insRoot.vars.varsSystem.str.errorRequest);},_eventListConnectSuccess : function(obj){if (obj.json.flag == 1){if (this._varsListConnect.flag == 'Search'|| this._varsListConnect.flag == 'Reload') {this.insLayout.updateTool({flagLock : 0, from : 'list', idTarget : 'Reload'});this.insList.resetVars({vars : obj.json.data, numLotNow : this._varsSearch.numLotNow});this.insList.eventNavi({strTitle : null, strClass : null});} else if (this._varsListConnect.flag == 'Delete' ) {this.insList.resetVars({vars : obj.json.data, numLotNow : 0});this.insList.eventNavi({strTitle : null, strClass : null});this._resetDetail();} else if (this._varsListConnect.flag == 'Print' ) {this.insRoot.setPrint({data : obj.json.data, insCurrent : this, strFunc : 'eventListConnectSuccessPrint'});}} else if (obj.json.flag == 10) {if (this._varsListConnect.flag == 'Search'|| this._varsListConnect.flag == 'Reload') {this.insLayout.updateTool({flagLock : 0, from : 'list', idTarget : 'Reload'});this.insList.eventNavi({strTitle : null, strClass : null});}} else if (obj.json.flag == 40) {this.insList.resetVars({vars : obj.json.data, numLotNow : this._varsSearch.numLotNow});this.insList.eventNavi({strTitle : null, strClass : null});} else {if (obj.json) {if (obj.json.flag) {if (this.insRoot.vars.varsSystem.str[obj.json.flag]) {alert(this.insRoot.vars.varsSystem.str[obj.json.flag]);}}}}},eventListConnectSuccessPrint : function(){this.insLayout.updateTool({flagLock : 0, from : 'list', idTarget : this._varsListConnect.flag});},_resetDetail : function(){var flag = 0;if (this.vars.portal.varsDetail.varsStart) {if (this.vars.portal.varsDetail.varsStart.varsEdit) flag = 1;}this.insDetail.eventList({strTitle : '',strClass : '',vars     : {varsDetail : [],varsBtn    : [],varsEdit   : (flag)? this.vars.portal.varsDetail.varsStart.varsEdit : {},vars       : {}}});},_extDetail : function(){this._setDetail();this._setDetailStart();},insDetail : null,_setDetail : function(){this.insDetail = new Code_Lib_ControlDetail({insUnder   : this.insLayout.insDetailUnder,insTool    : this.insLayout.insDetailTool,insRoot    : this.insRoot,insCurrent : this,idSelf     : this.idSelf + 'Detail',allot      : this._getDetailAllot(),vars       : this.vars.portal.varsDetail});},_getDetailAllot : function(){var allot = function(obj){var insCurrent = obj.insCurrent;if (obj.from == 'form-preEventLayout') insCurrent._preEventLayoutDetailContent();else if (obj.from == '_mousedownMove') insCurrent.insNavi.eventMove({vars : obj.vars});else if (obj.from == 'form-eventLayout') insCurrent._eventLayoutDetailContent();else if (obj.from == 'view-eventLayout') insCurrent._eventLayoutDetailContent();else if (obj.from == 'view-checkTextBtn') insCurrent._checkDetailContentTextBtn({vars : obj.vars});else if (obj.from == 'view-eventBtnBottom') insCurrent._eventDetailConnect({flag : obj.vars.vars.vars.idTarget});else if (obj.from == 'form-eventBtnBottom') {if (obj.vars.vars.vars.flagBack) {insCurrent._backDetailEnd();} else if (obj.vars.vars.vars.flagHide) {if (!insCurrent.insWindow.vars.flagHideNow) insCurrent.insWindow.updateHide({ flagEffect : 1 });} else {if (obj.vars.vars.vars.idTarget == 'save') {insCurrent._eventDetailConnect({flag : insCurrent.varsChild.flagType});}}}};return allot;},_checkDetailContentTextBtn : function(obj){},_preEventLayoutDetailContent : function(){},_eventLayoutDetailContent : function(){},_setDetailStart : function(){var flag = 0;if (this.vars.portal.varsDetail.varsStart) {if (this.vars.portal.varsDetail.varsStart.varsEdit) flag = 1;}this.insDetail.eventList({strTitle : '',strClass : '',vars     : {varsDetail : [],varsBtn    : null,varsEdit   : (flag)? this.vars.portal.varsDetail.varsStart.varsEdit : {},vars       : {}}});},_eventDetailList : function(obj){var objData = this._updateDetailListVars({vars : obj.vars});this.insDetail.eventList(objData);this._setDetailContent({idTarget : obj.vars.vars.idTarget});},_setDetailChild : function(obj){var objDetail = (Object.toJSON(this.vars.portal.varsDetail.templateDetail)).evalJSON();var varsDetail = [];var varsIni = null;var vars = {};if (obj.flag == 'add') {varsDetail = this._getDetailChildVars({arr  : objDetail,flag : obj.flag});} else if (obj.flag == 'copy') {varsIni = this._getDetailChildVars({flag    : 'add',arr     : (Object.toJSON(objDetail)).evalJSON(),vars    : this.insDetail.varsEventList.vars});varsDetail = this._getDetailChildVars({flag : obj.flag,arr  : objDetail,vars : this.insDetail.varsEventList.vars});obj.flag = 'add';vars = this.insDetail.varsEventList.vars;} else if (obj.flag == 'edit') {varsIni = this._getDetailChildVars({flag    : 'add',arr     : (Object.toJSON(objDetail)).evalJSON(),vars    : this.insDetail.varsEventList.vars});varsDetail = this._getDetailChildVars({flag : obj.flag,arr  : objDetail,vars : this.insDetail.varsEventList.vars});vars = this.insDetail.varsEventList.vars;}var idTarget = 0;if (this.insDetail.varsEventList.vars) {if (this.insDetail.varsEventList.vars.vars) {idTarget = this.insDetail.varsEventList.vars.vars.idTarget;}}this._extChild({strTitleParent : this.insWindow.vars.strTitle,strTitleChild  : this.vars.child.varsTitle.editor,strExt         : this.strExt,strChild       : 'Editor',strClass       : this.strClass,idModule       : this.idModule,varsChild      : {flagType   : obj.flag,idTarget   : idTarget,varsDetail : varsDetail,varsIni    : varsIni,vars       : vars}});},_getDetailChildVars : function(obj){return obj.arr;},_setDetailContent : function(obj){},_updateDetailListVars : function(obj){var objDetail = (Object.toJSON(this.vars.portal.varsDetail.templateDetail)).evalJSON();var varsBtn = (Object.toJSON(this.vars.portal.varsDetail.varsBtn)).evalJSON();var objData = {flagMoveUse : 1,strTitle    : this.insDetail.vars.varsStart.strTitle,strClass    : obj.vars.strClass,vars        : {varsDetail : this._updateDetailListVarsChild({arr : objDetail, vars : obj.vars }),varsBtn    : this._updateDetailListVarsBtn({arr  : varsBtn,flag : obj.vars.flagDefault}),varsEdit   : this._updateDetailListVarsEdit({arr  : this.insDetail.vars.view.varsEdit,flag : obj.vars.flagDefault}),vars       : obj.vars}};return objData;},_updateDetailListVarsEdit : function(obj){if (obj.flag) obj.arr.flagEditUse = 0;else obj.arr.flagEditUse = 1;return obj.arr;},_updateDetailListVarsBtn : function(obj){for (var i = 0; i < obj.arr.length; i++) {if (obj.flag) obj.arr[i].flagUse = 0;else obj.arr[i].flagUse = 1;}return obj.arr;},_updateDetailListVarsChild : function(obj){},_varsDetailFormCalender : [],_extDetailFormCalender : function(){this._varsDetailFormCalender = [];this._setDetailFormCalender({arr : this.insDetail.insForm.vars.varsDetail});},_setDetailFormCalender : function(obj){var num = 0;for (var i = 0; i < obj.arr.length; i++) {if (!obj.arr[i].varsFormCalender) continue;var insCalender = new Code_Lib_CalenderFormNavi({eleInsert  : $(this.insDetail.insForm.idSelf + obj.arr[i].id),insRoot    : this.insRoot,insCurrent : this,idSelf     : this.idSelf + 'Calender' + obj.arr[i].id,allot      : this._getDetailFormCalenderAllot(),vars       : obj.arr[i].varsFormCalender});this._varsDetailFormCalender.push({id          : obj.arr[i].id,insCalender : insCalender});num++;}},_getDetailFormCalenderAllot : function(){var allot = function(obj){var insCurrent = obj.insCurrent;if (obj.from == '_mousedownDate') {}};return allot;},_eventRemoveDetailFormCalender : function(obj){var num = 0;for (var i = 0; i < obj.arr.length; i++) {if (!obj.arr[i].varsFormCalender) continue;this._varsDetailFormCalender[num].insCalender.removeWrap();num++;}},_varsDetailFormCalenderNum : [],_extDetailFormCalenderNum : function(){this._varsDetailFormCalenderNum = [];this._setDetailFormCalenderNum({arr : this.insDetail.insForm.vars.varsDetail});},_setDetailFormCalenderNum : function(obj){var num = 0;for (var i = 0; i < obj.arr.length; i++) {if (!obj.arr[i].varsCalenderFormNum) continue;var insCalender = new Code_Lib_CalenderFormNum({eleInsert  : this.insDetail.insForm.eleWrap.down('.codeLibFormContent', num),insRoot    : this.insRoot,insCurrent : this,idSelf     : this.idSelf + 'CalenderNum' + obj.arr[i].id,allot      : this._getDetailFormCalenderNumAllot(),vars       : obj.arr[i].varsCalenderFormNum});this._varsDetailFormCalenderNum.push({id          : obj.arr[i].id,insCalender : insCalender});num++;}},_setDetailFormCalenderNumValue : function(obj){var num = 0;for (var i = 0; i < obj.arr.length; i++) {if (!obj.arr[i].varsCalenderFormNum) continue;var str = this._varsDetailFormCalenderNum[num].insCalender.getValue();this.insDetail.setFormValue({idTarget : obj.arr[i].id,value    : str});num++;}},_getDetailFormCalenderNumAllot : function(){var allot = function(obj){var insCurrent = obj.insCurrent;};return allot;},_eventRemoveDetailFormCalenderNum : function(obj){var num = 0;for (var i = 0; i < obj.arr.length; i++) {if (!obj.arr[i].varsCalenderFormNum) continue;this._varsDetailFormCalenderNum[num].insCalender.removeWrap();num++;}},_varsDetailFormList : [],_extDetailFormList : function(){this._varsDetailFormList = [];this._setDetailFormList({arr : this.insDetail.insForm.vars.varsDetail});},_setDetailFormList : function(obj){var num = 0;for (var i = 0; i < obj.arr.length; i++) {if (!obj.arr[i].varsFormList) continue;var ele = this.insDetail.insForm.eleWrap.down('.codeLibFormContent', num);ele.setStyle({width : this._getDetailFormListWidth() + 'px'});var insList = new Code_Lib_FormList({eleInsert  : ele,insRoot    : this.insRoot,insCurrent : this,idSelf     : this.insDetail.insForm.idSelf + 'DetailFormList' + obj.arr[i].id,allot      : this._getDetailFormListAllot(),vars       : obj.arr[i].varsFormList});this._varsDetailFormList.push({id       : obj.arr[i].id,insList  : insList});num++;}},_getDetailFormListAllot : function(){var allot = function(obj){var insCurrent = obj.insCurrent;};return allot;},_getDetailFormListVars : function(obj){var num = 0;for (var i = 0; i < obj.arr.length; i++) {if (!obj.arr[i].varsFormList) continue;this._varsDetailFormList[num].insList.updateVarsValue();obj.arr[i].varsFormList.varsDetail = this._varsDetailFormList[num].insList.vars.varsDetail;num++;}},_staticDetailFormList : { numMarginLeft : 30, numBar : 17, numTop : 30, numLeft : 10 },_getDetailFormListWidth : function(){var array = (this.insDetail.insUnder.eleFormat.body).style.width.split('px');var width = parseFloat(array[0]) - this._staticDetailFormList.numMarginLeft - this._staticDetailFormList.numBar;return  width;},_eventRemoveDetailFormList : function(obj){var num = 0;for (var i = 0; i < obj.arr.length; i++) {if (!obj.arr[i].varsFormList) continue;this._varsDetailFormList[num].insList.stopListener();num++;}},_setDetailFormListValue : function(obj){var num = 0;for (var i = 0; i < obj.arr.length; i++) {if (!obj.arr[i].varsFormList) continue;var str = this._varsDetailFormList[num].insList.getValueJson();this.insDetail.setFormValue({idTarget : obj.arr[i].id,value    : str});num++;}},_varsDetailFormArea : [],_extDetailFormArea : function(){this._varsDetailFormArea = [];this._setDetailFormAreaVars({arr : this.insDetail.insForm.vars.varsDetail});this._setDetailFormArea({arr : this.insDetail.insForm.vars.varsDetail});},_setDetailFormAreaVars : function(obj){for (var i = 0; i < obj.arr.length; i++) {if (!obj.arr[i].varsFormArea) continue;obj.arr[i].varsFormArea.varsStatus.numWidth = this._getDetailFormAreaWidth();}},_getDetailFormAreaVars : function(obj){var num = 0;for (var i = 0; i < obj.arr.length; i++) {if (!obj.arr[i].varsFormArea) continue;obj.arr[i].varsFormArea.varsDetail = this._varsDetailFormArea[num].insArea.vars.varsDetail;num++;}},_staticDetailFormArea : {numMarginLeft : 20,numPadding    : 5,numBorder     : 1,numBar        : 17,numLeft       : 10,numTop        : 30,numIdle       : 10},_getDetailFormAreaWidth : function(){var array = this.insDetail.insUnder.eleFormat.body.style.width.split('px');var data = parseFloat(array[0]) - this._staticDetailFormArea.numMarginLeft - this._staticDetailFormArea.numPadding * 6 - this._staticDetailFormArea.numBorder * 2 - this._staticDetailFormArea.numIdle - this._staticDetailFormArea.numBar;return  data;},_setDetailFormArea : function(obj){var num = 0;for (var i = 0; i < obj.arr.length; i++) {if (!obj.arr[i].varsFormArea) continue;var insArea = new Code_Lib_FormArea({eleInsert  : this.insDetail.insForm.eleWrap.down('.codeLibFormContent', num),insRoot    : this.insRoot,insCurrent : this,idSelf     : this.insDetail.insForm.idSelf + 'DetailFormArea' + obj.arr[i].id,allot      : this._getDetailFormAreaAllot(),vars       : obj.arr[i].varsFormArea});this._varsDetailFormArea.push({id       : obj.arr[i].id,insArea  : insArea});num++;}},_getDetailFormAreaAllot : function(){var allot = function(obj){var insCurrent = obj.insCurrent;if (obj.from == '_mousedownBarAdd' || obj.from == '_mousedownBarLink') {insCurrent._setDetailFormAreaChoice({idTarget     : obj.vars.insCurrent.vars.varsChoice.idTarget,idModule     : obj.vars.insCurrent.vars.varsChoice.idModule,flagCheckUse : obj.vars.insCurrent.vars.varsChoice.flagCheckUse,flagId       : obj.vars.insCurrent.vars.varsChoice.flagId,strFunc      : obj.vars.insCurrent.vars.varsChoice.strFunc});}};return allot;},_setDetailFormAreaChoice : function(obj){this.insRoot.insChoice.setBoot({flagId       : obj.flagId,idTarget     : obj.idTarget,idModule     : obj.idModule,flagCheckUse : obj.flagCheckUse,strClassTitle: obj.strClassTitle,strFunc      : 'setDetailFormAreaChoiceValue',numTop       : this._staticDetailFormArea.numTop + $(this.insWindow.idWindow).offsetTop,numLeft      : this._staticDetailFormArea.numLeft + $(this.insWindow.idWindow).offsetLeft,insCurrent   : this});},setDetailFormAreaChoiceValue : function(obj){if (!obj.vars) return;this._setDetailFormAreaChoiceValue({idTarget : obj.flagId,vars     : obj.vars,arr      : this.insDetail.insForm.vars.varsDetail});},_setDetailFormAreaChoiceValue : function(obj){var num = 0;for (var i = 0; i < obj.arr.length; i++) {if (!obj.arr[i].varsFormArea) continue;if (obj.idTarget == obj.arr[i].id) {var varsDetail = this._setDetailFormAreaChoiceValueChild({insArea   : this._varsDetailFormArea[num].insArea,arr       : obj.vars,arrDetail : this._varsDetailFormArea[num].insArea.vars.varsDetail});this._varsDetailFormArea[num].insArea.vars.varsDetail = varsDetail;this._varsDetailFormArea[num].insArea.iniReload();}num++;}},_setDetailFormAreaChoiceValueChild : function(obj){var array = [];var objCheck = {};for (var i = 0; i < obj.arr.length; i++) {var varsTmpl = (Object.toJSON(obj.insArea.vars.templateDetail)).evalJSON();if (obj.arr[i].strClass) {varsTmpl.strClass = obj.arr[i].strClass;}varsTmpl.strTitle = obj.arr[i].strTitle;varsTmpl.vars.idTarget = obj.arr[i].vars.idTarget;array[i] = varsTmpl;var str = 'id' + varsTmpl.vars.idTarget;objCheck[str] = 1;}for (var i = 0, j = array.length; i < obj.arrDetail.length; i++) {var str = 'id' + obj.arrDetail[i].vars.idTarget;if (objCheck[str]) continue;array[j] = obj.arrDetail[i];j++;}return array;},_setDetailFormAreaValue : function(obj){var num = 0;for (var i = 0; i < obj.arr.length; i++) {if (!obj.arr[i].varsFormArea) continue;var str = this._varsDetailFormArea[num].insArea.getTreeValueToConmmaArr();this.insDetail.setFormValue({idTarget : obj.arr[i].id,value    : str});num++;}},_eventRemoveDetailFormArea : function(obj){var num = 0;for (var i = 0; i < obj.arr.length; i++) {if (!obj.arr[i].varsFormArea) continue;this._varsDetailFormArea[num].insArea.stopListener();num++;}},_varsDetailFormCheck : [],_extDetailFormCheck : function(){this._varsDetailFormCheck = [];this._setDetailFormCheck({arr : this.insDetail.insForm.vars.varsDetail});},_staticDetailFormCheck : { numTop : 30, numLeft : 10 },_setDetailFormCheck : function(obj){var num = 0;for (var i = 0; i < obj.arr.length; i++) {if (!obj.arr[i].varsFormCheck) continue;var ele = this.insDetail.insForm.eleWrap.down('.codeLibFormContent', num);var insFormCheck = new Code_Lib_FormCheck({eleInsert  : ele,insRoot    : this.insRoot,insCurrent : this,idSelf     : this.idSelf + 'FormCheck' + obj.arr[i].id,allot      : this._getDetailFormCheckAllot(),vars       : obj.arr[i].varsFormCheck});this._varsDetailFormCheck.push({id           : obj.arr[i].id,insFormCheck : insFormCheck,});num++;}},_getDetailFormCheckAllot : function(){var allot = function(obj){var insCurrent = obj.insCurrent;};return allot;},_eventRemoveDetailFormCheck : function(obj){var num = 0;for (var i = 0; i < obj.arr.length; i++) {if (!obj.arr[i].varsFormCheck) continue;this._varsDetailFormCheck[num].insFormCheck.stopListener();num++;}},_getDetailFormCheckVars : function(obj){var num = 0;for (var i = 0; i < obj.arr.length; i++) {if (!obj.arr[i].varsFormCheck) continue;obj.arr[i].varsFormCheck.varsDetail = this._varsDetailFormCheck[num].insFormCheck.vars.varsDetail;num++;}},_setDetailFormCheckValue : function(obj){var num = 0;for (var i = 0; i < obj.arr.length; i++) {if (!obj.arr[i].varsFormCheck) continue;this.insDetail.setFormValue({idTarget : obj.arr[i].id,value    : this._varsDetailFormCheck[num].insFormCheck.vars.varsDetail});num++;}},_eventDetailConnect : function(obj){if (obj.flag == 'reload' || obj.flag == 'delete') {this._eventValue({vars     : '',idTarget : this.insDetail.varsEventList.vars.vars.idTarget});} else if (obj.flag == 'edit') {if (this.insDetail.checkForm({flagType : 'common'})) return;this._eventValue({vars     : this.insDetail.getFormValue(),idTarget : obj.idTarget});} else if (obj.flag == 'output') {var vars = {};if (obj.flagType) {vars.FlagType = obj.flagType;}if (this.insDetail.varsEventList) {if (this.insDetail.varsEventList.vars) {vars.numVersion = this.insDetail.varsEventList.vars.numVersion;}}this._eventValue({vars     : vars,idTarget : this.insDetail.varsEventList.vars.vars.idTarget});} else if (obj.flag == 'Print') {var vars = {};if (obj.flagType) {vars.FlagType = obj.flagType;}this._eventValue({vars     : vars,idTarget : this.insDetail.varsEventList.vars.vars.idTarget});}this._varsDetailConnect = obj;this._sendDetailConnect();},_varsDetailConnect : null,_sendDetailConnect : function(obj){var strExt = this.strExt;var strClass = this.strClass;var idModule = this.idModule;var strChild = this.strChild;var jsonSearch = Object.toJSON(this._varsSearch);var jsonValue = Object.toJSON(this._varsValue);var arrayKey = [], arrayValue = [];var jsonStamp = {};var insEscape = new Code_Lib_Escape();if (this._varsDetailConnect.flag == 'reload') {var strFunc = 'DetailReload';jsonStamp = this._getJsonStamp({strFunc : strFunc});this.insLayout.updateTool({flagLock : 1, from : 'detail', idTarget : 'Reload'});arrayKey = ['class', 'module', 'ext', 'child', 'func', 'db', 'jsonStamp', 'jsonValue', 'jsonSearch'];arrayValue = [strClass, idModule, strExt, strChild, strFunc, 'slave', jsonStamp, jsonValue, jsonSearch];} else {var strDb = 'master';if (this._varsDetailConnect.flag == 'estimate') {strDb = 'slave';}var strFunc = 'Detail' + insEscape.strCapitalize({data : this._varsDetailConnect.flag});if (this._varsDetailConnect.flag == 'output') {strChild = 'Output';strDb = 'slave';} else if (this._varsDetailConnect.flag == 'Print') {strChild = 'Output';strDb = 'slave';this.insLayout.updateTool({flagLock : 1, from : 'detail', idTarget : this._varsDetailConnect.flag});}arrayKey = ['class', 'module', 'ext', 'child', 'func', 'db', 'jsonStamp', 'jsonValue', 'jsonSearch'];arrayValue = [strClass, idModule, strExt, strChild, strFunc, strDb, jsonStamp, jsonValue, jsonSearch];}if (this._varsDetailConnect.flag == 'output') {this.insRoot.setOutput({querysKey   : arrayKey,querysValue : arrayValue,});this.insDetail.showBtnBottom();this.insLayout.updateTool({flagLock : 0, from : 'list', idTarget : 'Output'});} else {this.insRoot.insRequest.set({flagLock        : 0,numZIndex       : this.insRoot.getZIndex(),insCurrent      : this,flagEscape      : 1,path            : this.insRoot.vars.varsSystem.path.post,querysKey       : arrayKey,querysValue     : arrayValue,functionSuccess : '_sendDetailConnectSuccess',functionFail    : '_sendDetailConnectFail',eleLoadStatus   : this.insDetail.insUnder.eleFormat.header.down('.codeLibBaseMarginRightFive', 0)});}},_sendDetailConnectSuccess : function(obj){if (obj.response.responseText.isJSON()) {var json = obj.response.responseText.evalJSON();if (json.stamp) {if (json.stamp.id) this._varsStamp[json.stamp.id] = json.stamp.stamp;}if (json.flag) {if (json.numNews) this.insRoot.iniPopup({flag : 'news', numNews : json.numNews});this._eventDetailConnectSuccess({json : json});}else if (json.flag == 0) alert(this.insRoot.vars.varsSystem.str.errorSession);}else alert(this.insRoot.vars.varsSystem.str.errorRequest);},_sendDetailConnectFail : function(obj){alert(this.insRoot.vars.varsSystem.str.errorRequest);},_eventDetailConnectSuccess : function(obj){if (obj.json.flag == 1) {if (this._varsDetailConnect.flag == 'reload') {this.eventDetailConnectSuccessDetailUpdate(obj);if (obj.json.stamp) {var data = (Object.toJSON(obj.json)).evalJSON();if (obj.json.stamp.id) this._varsStampCheck[obj.json.stamp.id] = data;}} else if (this._varsDetailConnect.flag == 'delete') {this.eventDetailConnectSuccessListUpdateDetailReset(obj);} else if (this._varsDetailConnect.flag == 'Print') {this.insRoot.setPrint({data : obj.json.data, insCurrent : this, strFunc : 'eventDetailConnectSuccessPrint'});}} else if (obj.json.flag == 10) {if (obj.json.stamp) {this.eventDetailConnectSuccessDetailUpdate({json : this._varsStampCheck[obj.json.stamp.id]});}} else if (obj.json.flag == 40) {this.eventDetailConnectSuccessLost(obj);} else {if (obj.json) {if (obj.json.flag) {if (this.insRoot.vars.varsSystem.str[obj.json.flag]) {alert(this.insRoot.vars.varsSystem.str[obj.json.flag]);}}}}},eventDetailConnectSuccessPrint : function(){this.insLayout.updateTool({flagLock : 0, from : 'detail', idTarget : this._varsDetailConnect.flag});},_varsDetailEnd : null,_setDetailEnd : function(){this._varsDetailEnd = (Object.toJSON(this.insDetail.varsEventList)).evalJSON();var objData = {strTitle : null,strClass : null,vars     : {varsDetail : this.vars.portal.varsDetail.varsEnd.varsDetail,varsBtn    : this.vars.portal.varsDetail.varsEnd.varsBtn,varsEdit   : {},vars       : {}}};this.insDetail.eventList(objData);},_backDetailEnd : function(){this.insDetail.eventList({strTitle : null,strClass : null,vars     : this._varsDetailEnd});this._varsDetailEnd = null;},eventDetailConnectSuccessDetailUpdate : function(obj){this.insLayout.updateTool({flagLock : 0, from : 'detail', idTarget : 'Reload'});if (obj.json.data) {this.insList.updateVarsDetailLine({vars : obj.json.data});this.insList.eventNavi({strTitle : null, strClass : null});if (this.insDetail.varsEventList.vars.vars.idTarget == obj.json.data.varsDetail.vars.idTarget) {this._eventDetailList({vars : obj.json.data.varsDetail});}} else {this._resetDetail();}},eventDetailConnectSuccessListDetailUpdate : function(obj){this.insList.updateVarsDetailLine({vars : obj.json.data});this.insList.eventNavi({strTitle : null, strClass : null});if (this.insDetail.varsEventList.vars.vars.idTarget == obj.json.data.varsDetail.vars.idTarget) {this._eventDetailList({vars : obj.json.data.varsDetail});}},eventDetailConnectSuccessListUpdate : function(obj){this._varsSearch.numLotNow = 0;this.insList.resetVars({vars : obj.json.data, numLotNow : 0});this.insList.eventNavi({strTitle : null, strClass : null});},eventDetailConnectSuccessListUpdateDetailReset : function(obj){this.eventDetailConnectSuccessListUpdate(obj);this._resetDetail();},eventDetailConnectSuccessDetailReset : function(obj){this.insLayout.updateTool({flagLock : 0, from : 'detail', idTarget : 'Reload'});if (this.insDetail.varsEventList.vars.vars.idTarget == this._varsValue.idTarget) {this._eventDetailList({vars : this.insDetail.varsEventList.vars});}},eventDetailConnectSuccessLost : function(obj){this.insLayout.updateTool({flagLock : 0, from : 'detail', idTarget : 'Reload'});this.eventDetailConnectSuccessListUpdateDetailReset(obj);},getVarsSearch : function(){return this._varsSearch;},_varsChild : {strTitleChild : '',strTitleParent : '',strExt : '',strChild : '',eleLoading : {},strClass : '',idModule : '',insBack : {},strBackFunc : '',arrIns : [],varsWindow : {},varsChild : {}},_extChild : function(obj){this._setVarChild(obj);var strExt = this._varsChild.strExt;var strChild = this._varsChild.strChild;if (this['ins' + strExt + strChild]) {if (this['ins' + strExt + strChild].vars.flagHideNow) {if (this['ins' + strExt + strChild + 'Class']) {this['ins' + strExt + strChild + 'Class'].eventWindowAppear({vars : this._varsChild.varsChild});this['ins' + strExt + strChild].updateHide({ flagEffect : 1 });}} else {this.eventHide();}} else {this._setVarChild(obj);this._varChild();this._setChild();}},eventWindowAppear : function(obj){},_resetVarChild : function(){this._varsChild = {strTitleChild : '',strTitleParent : '',strExt : '',strChild : '',eleLoading : {},strClass : '',idModule : '',insBack : {},strBackFunc : '',flagHideWindow : 0,arrIns : [],varsWindow : {},varsCall : {},varsChild : {}};},_setVarChild : function(obj){this._varsChild.strExt = obj.strExt;this._varsChild.strChild = obj.strChild;this._varsChild.strClass = obj.strClass;this._varsChild.idModule = obj.idModule;this._varsChild.strTitleChild = obj.strTitleChild;this._varsChild.strTitleParent = obj.strTitleParent;this._varsChild.varsCall = (obj.varsCall)? obj.varsCall : {};this._varsChild.varsChild = (obj.varsChild)? obj.varsChild : {};this._varsChild.strBackFunc = (obj.strBackFunc)? obj.strBackFunc : '';this._varsChild.insBack = (obj.strBackFunc)? obj.insBack : {};this._varsChild.flagHideWindow = (obj.flagHideWindow)? obj.flagHideWindow : 0;},_varChild : function(){var vars = (Object.toJSON(this.vars.child.templateWindow)).evalJSON();var strExt = this._varsChild.strExt;var strChild = this._varsChild.strChild;vars.id =  strExt + strChild;vars.strTitle = vars.strTitle.replace(/<%child%>/, this._varsChild.strTitleChild);vars.strTitle = vars.strTitle.replace(/<%parent%>/, this._varsChild.strTitleParent);if (this._varsChild.strExt == 'Preference') {vars.flagMenuShowUse = 1;}if (this._varsChild.varsCall) {if (this._varsChild.varsCall.vars) {if (this._varsChild.varsCall.vars) {if (this._varsChild.varsCall.vars.numHeight) {vars.numHeight = this._varsChild.varsCall.vars.numHeight;}if (this._varsChild.varsCall.vars.numWidth) {vars.numWidth = this._varsChild.varsCall.vars.numWidth;}}}}this._varsChild.varsWindow[strExt + strChild] = vars;},_setChild : function(){var strExt = this._varsChild.strExt;var strChild = this._varsChild.strChild;this['ins' + strExt + strChild] = new Code_Lib_Window();this['ins' + strExt + strChild].iniLoad({eleInsert  : $(this.insRoot.vars.varsSystem.id.root),insRoot    : this.insRoot,insCurrent : this,insTop     : this.insTop,idSelf     : this.insRoot.vars.varsSystem.id.window + this.idSelf + strExt + strChild,allot      : this._getChildAllot(),vars       : this._varsChild.varsWindow[strExt + strChild],varsTarget : strExt + strChild});this._varsChild.arrIns.push({insWindow : this['ins' + strExt + strChild],idWindow  : this['ins' + strExt + strChild].idWindow,insClass  : null,idTarget  : strExt + strChild});},_getChildAllot : function(){var allot = function(obj){var insCurrent = obj.insCurrent;if (obj.from == '_iniVars') insCurrent._updateChild();else if (obj.from == '_mousedownBoot') insCurrent.insCurrent._sendChild();else if (obj.from.match(/^_mouseupResize|_mousedownCover|_resizeCover$/)) {obj.arr = insCurrent.insCurrent._varsChild.arrIns;insCurrent.insCurrent._eventWindow(obj);} else if (obj.from == '_mousedownHide') {if (!insCurrent.vars.flagHideNow) {obj.arr = insCurrent.insCurrent._varsChild.arrIns;insCurrent.insCurrent._hideWindow(obj);}} else if (obj.from == 'hideLockWindow') {insCurrent.insCurrent._hideLockWindow(obj);}};return allot;},_hideLockWindow : function(obj){},_eventWindow : function(obj){for (var i = 0; i < obj.arr.length; i++) {if (obj.arr[i].idTarget == obj.insCurrent.varsTarget && obj.arr[i].insClass) {obj.arr[i].insClass.eventWindow();}}},_hideWindow : function(obj){for (var i = 0; i < obj.arr.length; i++) {if (obj.arr[i].idTarget == obj.insCurrent.varsTarget && obj.arr[i].insClass) {obj.arr[i].insClass.eventHide();}}},_staticChild : { numTop : 30, numLeft : 10 },_updateChild : function(){var strExt = this._varsChild.strExt;var strChild = this._varsChild.strChild;var array = $(this.insWindow.idWindow).style.top.split('px');var numTop = parseFloat(array[0]);array = $(this.insWindow.idWindow).style.left.split('px');var numLeft = parseFloat(array[0]);this['ins' + strExt + strChild].vars.numZIndex = this.insRoot.setZIndex();this['ins' + strExt + strChild].vars.numTop = numTop + this._staticChild.numTop;this['ins' + strExt + strChild].vars.numLeft = numLeft + this._staticChild.numLeft;this['ins' + strExt + strChild].vars.flagHideNow = 0;if (this._varsChild.flagHideWindow) {this['ins' + strExt + strChild].vars.flagHideNow = 1;this._varsChild.flagHideWindow = 0;}},_sendChild : function(){var strChild = this._varsChild.strChild;var strExt = this._varsChild.strExt;var strClass = this._varsChild.strClass;var idModule = this._varsChild.idModule;var jsonStamp = {};var arrayKey = [], arrayValue = [];arrayKey = ['class', 'module', 'ext', 'child', 'func', 'db', 'jsonStamp'];arrayValue = [strClass, idModule, strExt, strChild, 'Js', 'slave', jsonStamp];this.insRoot.insRequest.set({flagLock        : 0,numZIndex       : this.insRoot.getZIndex(),insCurrent      : this,flagEscape      : 1,path            : this.insRoot.vars.varsSystem.path.post,querysKey       : arrayKey,querysValue     : arrayValue,functionSuccess : '_sendChildSuccess',functionFail    : '_sendChildFail'});var ele = $(document.createElement('span'));$(this['ins' + strExt + strChild].idWindow).down('.codeLibWindowBodyTopMiddleWrap', 0).insert(ele);ele.addClassName('codeLibRequestImgLoading');ele.addClassName('codeLibRequestImgLoadingPos');this._varsChild.eleLoading[strExt + strChild] = ele;},_sendChildSuccess : function(obj){var strChild = this._varsChild.strChild;var strExt = this._varsChild.strExt;var strClass = this._varsChild.strClass;var idModule = this._varsChild.idModule;if (obj.response.responseText.isJSON()) {var json = obj.response.responseText.evalJSON();if (json.flag == 0) {alert(this.insRoot.vars.varsSystem.str.errorSession);return;} else if (json.flag == 4) {alert(this.insRoot.vars.varsSystem.str.maintenance);return;} else if (json.flag == 8) {alert(this.insRoot.vars.varsSystem.str.oldData);return;}}var eleScript = $(document.createElement('script'));eleScript.type = 'text/javascript';eleScript.text = obj.response.responseText;var eleHead = document.getElementsByTagName('head').item(0);eleHead.appendChild(eleScript);var newClass = eval('Code_' + strClass + '_' + idModule + '_' + strExt + strChild);this['ins' + strExt + strChild + 'Class'] = new newClass();this['ins' + strExt + strChild + 'Class'].iniLoad({eleInsert  : $(this['ins' + strExt + strChild].idWindow).down('.codeLibWindowBodyTopMiddleWrap', 0),insRoot    : this.insRoot,insCurrent : this,insTop     : this.insTop,strExt     : strExt,strChild   : strChild,strClass   : strClass,idModule   : idModule,idSelf     : this.idSelf + strExt + strChild,insWindow  : this['ins' + strExt + strChild],varsChild  : this._varsChild.varsChild});for (var i = 0; i < this._varsChild.arrIns.length; i++) {if (this._varsChild.arrIns[i].idTarget == this['ins' + strExt + strChild].varsTarget) {this._varsChild.arrIns[i].insClass = this['ins' + strExt + strChild + 'Class'];}}this._varsChild.eleLoading[strExt + strChild].remove();this._varsChild.eleLoading[strExt + strChild] = null;if (this._varsChild.strBackFunc) {this._varsChild.insBack[this._varsChild.strBackFunc]();}},checkChildData : function(obj){for (var i = 0; i < this._varsChild.arrIns.length; i++) {if (this._varsChild.arrIns[i].idTarget == obj.idTarget) {return this._varsChild.arrIns[i];}}},_sendChildFail : function(obj){var strExt = this._varsChild.strExt;var strChild = this._varsChild.strChild;this._varsChild.eleLoading[strExt + strChild].remove();this._varsChild.eleLoading[strExt + strChild] = null;alert(this.insRoot.vars.varsSystem.str.errorConnect);},_varsBlock : null,_getBlock : function(obj){for (var i = 0; i < obj.arr.length; i++) {if (obj.arr[i].vars.idTarget == obj.idTarget) {var objTemp = {};objTemp = obj.arr[i];if (obj.arr[i].child.length) objTemp.child = this._getBlockChild({arr : obj.arr[i].child});else objTemp.child = [];this._varsBlock = objTemp;}else this._getBlock({arr : obj.arr[i].child, idTarget : obj.idTarget});}},_getBlockChild : function(obj){for (var i = 0; i < obj.arr.length; i++) {this._getBlockChild({arr : obj.arr[i].child});}return obj.arr;},_iniSearch : function(){this._resetSearch();},_resetSearch : function(){this._varsSearch = {flagReload : 0,numLotNow  : 0,ph : {arrWhere   : [],arrOrder   : {}},};},_eventSearch : function(obj){var jsonNext = Object.toJSON(obj.ph);var jsonBefore = Object.toJSON(this._varsSearch.ph);if (jsonNext == jsonBefore) {this._varsSearch.flagReload = 0;if (obj.numLotNow == this._varsSearch.numLotNow) this._varsSearch.flagReload = 1;this._varsSearch.numLotNow = obj.numLotNow;} else {this._varsSearch.numLotNow = 0;this._varsSearch.flagReload = 0;}this._varsSearch.ph = obj.ph;},_varsSearch : {flagReload : 0,numLotNow  : 0,ph : {arrWhere   : [],arrOrder   : {}}},_extPopup : function(){if (this.numNews) this.insRoot.iniPopup({flag : 'news', numNews : this.numNews});},_extCss : function(){if(!this.vars.pathCss) return;new Code_Lib_Css({path : this.vars.pathCss});},eventHide : function(){var array = this._varsChild.arrIns;for (var i = 0; i < array.length; i++) {if (array[i].insWindow) {if (!array[i].insWindow.vars.flagHideNow) {array[i].insWindow.updateHide({ flagEffect : 1 });}}if (array[i].insClass) {array[i].insClass.eventHide();}}},eventWindowRemove : function(){this.insLayout.allot({from       : 'eventWindowRemove',insCurrent : this});},_getOptionTitle : function(obj){for (var i = 0; i < obj.arr.length; i++) {if (obj.idTarget == obj.arr[i].value) {return obj.arr[i].strTitle;}}return '';},_getOptionFirstValue : function(obj){for (var i = 0; i < obj.arr.length; i++) {if (!obj.arr[i].flagDisabled) {return obj.arr[i].value;}}return '';},eventWindow : function(){this.insLayout.eventWindow();}});var Code_Lib_ExtPreference = Class.create(Code_Lib_ExtPortal,{_sendNaviConnect : function() {var str = this.strClass+ '-' + this.idModule+ '-' + this.strExt+ '-' + this.strChild+ '-' + 'NaviReload';var objStamp = {id    : str,stamp : (this._varsStamp[str])? this._varsStamp[str] : 0};var jsonStamp = (Object.toJSON(objStamp));var arrayKey = [], arrayValue = [];arrayKey = ['class', 'module', 'ext', 'child', 'func', 'db', 'jsonStamp'];arrayValue = [this.strClass, this.idModule, this.strExt, this.strChild, 'NaviReload', 'slave', jsonStamp];this.insRoot.insRequest.set({flagLock        : 0,numZIndex       : this.insRoot.getZIndex(),insCurrent      : this,flagEscape      : 1,path            : this.insRoot.vars.varsSystem.path.post,querysKey       : arrayKey,querysValue     : arrayValue,functionSuccess : '_sendNaviConnectSuccess',functionFail    : '_sendNaviConnectFail',eleLoadStatus   : this.insNavi.insUnder.eleFormat.header.down('.codeLibBaseMarginRightFive', 0)});},_eventNaviConnectSuccess : function(obj){this.insLayout.updateTool({flagLock : 0, from : 'navi', idTarget : 'Reload'});if (obj.json.flag == 1) this.insNavi.updateTreeVars({vars : obj.json.data});else if (obj.json.flag == 0) alert(this.insRoot.vars.varsSystem.str.errorSession);else if (obj.json.flag == 4) alert(this.insRoot.vars.varsSystem.str.maintenance);else if (obj.json.flag == 8) alert(this.insRoot.vars.varsSystem.str.oldData);else {if (obj.json) {if (obj.json.flag) {if (this.insRoot.vars.varsSystem.str[obj.json.flag]) {alert(this.insRoot.vars.varsSystem.str[obj.json.flag]);}}}}},_varsDetailEnd : null,_setDetailEnd : function(){this._varsDetailEnd = (Object.toJSON(this.insDetail.varsEventNavi)).evalJSON();var objData = {strTitle : null,strClass : null,vars     : {varsDetail : this.vars.portal.varsDetail.varsEnd.varsDetail,varsBtn    : this.vars.portal.varsDetail.varsEnd.varsBtn,varsEdit   : {},vars       : {}}};this.insDetail.eventNavi(objData);},_setDetailReset : function(){var objData = {strTitle : null,strClass : null,vars     : {varsDetail : this.vars.portal.varsDetail.varsEnd.varsDetail,varsBtn    : [],varsEdit   : {},vars       : {}}};this.insDetail.eventNavi(objData);},_backDetailEnd : function(){this._setNaviDetail({vars : this._varsDetailEnd.vars});this._varsDetailEnd = null;}});var Code_Lib_ExtChoice = Class.create(Code_Lib_ExtPortal,{strFunc : null,insReturn : null,flagCheckUse : null,varsValue : null,_extReload : function(obj){this.flagId = (obj.flagId)? obj.flagId : null;this.flagCheckUse = (obj.flagCheckUse)? obj.flagCheckUse : null;this.insReturn = (obj.insReturn)? obj.insReturn : null;this.strFunc = (obj.strFunc)? obj.strFunc : null;this.varsValue = (obj.varsValue)? obj.strFunc : null;this._setVarsFlagCheckUse();this.insList.insTree.iniReload();},_setVarsFlagCheckUse : function(){if (this.flagCheckUse) {this.vars.portal.varsList.tree.varsDetail.varsStatus.flagCheckUse = 1;this.vars.portal.varsList.tree.varsDetail.varsStatus.flagBtnUse = 0;if (this.insList) {this.insList.vars.tree.varsDetail.varsStatus.flagCheckUse = 1;this.insList.vars.tree.varsDetail.varsStatus.flagBtnUse = 0;this.insList.insTree.vars.varsStatus.flagCheckUse = 1;this.insList.insTree.vars.varsStatus.flagBtnUse = 0;}} else {this.vars.portal.varsList.tree.varsDetail.varsStatus.flagCheckUse = 0;this.vars.portal.varsList.tree.varsDetail.varsStatus.flagBtnUse = 1;if (this.insList) {this.insList.vars.tree.varsDetail.varsStatus.flagCheckUse = 0;this.insList.vars.tree.varsDetail.varsStatus.flagBtnUse = 1;this.insList.insTree.vars.varsStatus.flagCheckUse = 0;this.insList.insTree.vars.varsStatus.flagBtnUse = 1;}}},_getLayoutAllot : function(){var allot =  function(obj){var insCurrent = obj.insCurrent;if (obj.from == 'eventLayout') {if (insCurrent.insNavi) insCurrent.insNavi.eventLayout();if (insCurrent.insList) insCurrent.insList.eventLayout();} else if (obj.from == 'navi-_mousedownNavi') {if (obj.vars.id == 'Switch') {insCurrent.insNavi.eventTool({idTarget : insCurrent.insNavi.vars.varsStatus.flagNow,flagLoop : 1});} else if (obj.vars.id == 'Reload') {insCurrent._eventNaviConnect({vars : obj.vars, flag : insCurrent.insNavi.vars.varsStatus.flagNow + '-reload'});}} else if (obj.from == 'navi-_mousedownMenu') {return insCurrent.insNavi.vars.varsStatus.flagNow;} else if (obj.from == 'navi-_mousedownLine') {insCurrent.insNavi.eventTool({idTarget : obj.vars});} else if (obj.from == 'list-_mousedownNavi') {if (obj.vars.id == 'Reload') {insCurrent._eventListConnect({flag : obj.vars.id});}}};return allot;},_sendNaviConnect : function(){var jsonStamp = {};var flag = this._varsNaviConnect.flag;var arrayKey = [], arrayValue = [];var jsonSearch = Object.toJSON(this._varsSearch);var insEscape = new Code_Lib_Escape();if (this._varsNaviConnect.flag == 'search' || this._varsNaviConnect.flag.match(/^folder(.*?)-search$/)) {var strFunc = 'NaviSearch';jsonStamp = this._getJsonStamp({strFunc : strFunc});if (this.varsValue) this._eventValue(this.varsValue);var jsonValue = Object.toJSON(this._varsValue);arrayKey = ['class', 'module', 'ext', 'child', 'func', 'db', 'jsonStamp', 'jsonSearch', 'jsonValue'];arrayValue = [this.strClass, this.idModule, this.strExt, this.strChild, strFunc, 'slave', jsonStamp, jsonSearch, jsonValue];} else if (this._varsNaviConnect.flag.match(/^folder(.*?)-reload$/)) {var strFunc = '';if (RegExp.$1) strFunc = 'NaviFolder' + insEscape.strCapitalize({data : RegExp.$1}) + 'Reload';else strFunc = 'NaviFolderReload';jsonStamp = this._getJsonStamp({strFunc : strFunc});arrayKey = ['class', 'module', 'ext', 'child', 'func', 'db', 'jsonStamp'];arrayValue = [this.strClass, this.idModule, this.strExt, this.strChild, strFunc, 'slave', jsonStamp];this.insLayout.updateTool({flagLock : 1, from : 'navi', idTarget : 'Reload'});} else if (this._varsNaviConnect.flag.match(/^folder(.*?)-save$/)) {var strFunc = '';if (RegExp.$1) strFunc = 'NaviFolder' + insEscape.strCapitalize({data : RegExp.$1}) + 'Save';else strFunc = 'NaviFolderSave';this._eventValue({vars : this._varsNaviConnect.vars});var jsonValue = Object.toJSON(this._varsValue);arrayKey = ['class', 'module', 'ext', 'child', 'func', 'db', 'jsonStamp', 'jsonValue'];arrayValue = [this.strClass, this.idModule, this.strExt, this.strChild, strFunc, 'master', jsonStamp, jsonValue];} else if (this._varsNaviConnect.flag == 'search-reload') {var strFunc = 'NaviSearchReload';jsonStamp = this._getJsonStamp({strFunc : strFunc});arrayKey = ['class', 'module', 'ext', 'child', 'func', 'db', 'jsonStamp'];arrayValue = [this.strClass, this.idModule, this.strExt, this.strChild, strFunc, 'slave', jsonStamp];this.insLayout.updateTool({flagLock : 1, from : 'navi', idTarget : 'Reload'});} else if (this._varsNaviConnect.flag == 'search-save') {this._eventValue({vars : this._varsNaviConnect.vars});var jsonValue = Object.toJSON(this._varsValue);var strFunc = 'NaviSearchSave';arrayKey = ['class', 'module', 'ext', 'child', 'func', 'db', 'jsonStamp', 'jsonValue'];arrayValue = [this.strClass, this.idModule, this.strExt, this.strChild, strFunc, 'master', jsonStamp, jsonValue];} else if (this._varsNaviConnect.flag == 'search-delete') {this._eventValue({vars : this._varsNaviConnect.vars});var jsonValue = Object.toJSON(this._varsValue);var strFunc = 'NaviSearchDelete';arrayKey = ['class', 'module', 'ext', 'child', 'func', 'db', 'jsonStamp', 'jsonValue'];arrayValue = [this.strClass, this.idModule, this.strExt, this.strChild, strFunc, 'master', jsonStamp, jsonValue];}this.insRoot.insRequest.set({flagLock        : 0,numZIndex       : this.insRoot.getZIndex(),insCurrent      : this,flagEscape      : 1,path            : this.insRoot.vars.varsSystem.path.post,querysKey       : arrayKey,querysValue     : arrayValue,functionSuccess : '_sendNaviConnectSuccess',functionFail    : '_sendNaviConnectFail',eleLoadStatus   : this.insNavi.insUnder.eleFormat.header.down('.codeLibBaseMarginRightFive', 0)});},_eventNaviConnectSuccess : function(obj){var insEscape = new Code_Lib_Escape();if (obj.json.flag == 1){if (this._varsNaviConnect.flag == 'search') {this.insList.resetVars({vars : obj.json.data, numLotNow : this._varsSearch.numLotNow});this.insList.eventNavi({strTitle : null, strClass : null});} else if (this._varsNaviConnect.flag.match(/^folder(.*?)-search$/)) {this.insList.resetVars({vars : obj.json.data, numLotNow : this._varsSearch.numLotNow});this.insList.eventNavi({strTitle : null, strClass : null});} else if (this._varsNaviConnect.flag.match(/^folder(.*?)-save$/)|| this._varsNaviConnect.flag.match(/^format(.*?)-save$/)) {this.insNavi.updateFolderVars({vars : obj.json.data});} else if (this._varsNaviConnect.flag.match(/^folder(.*?)-reload$/)|| this._varsNaviConnect.flag.match(/^format(.*?)-reload$/)) {this.insLayout.updateTool({flagLock : 0, from : 'navi', idTarget : 'Reload'});this.insNavi.updateFolderVars({vars : obj.json.data});if (obj.json.stamp) {var data = (Object.toJSON(obj.json.data)).evalJSON();if (obj.json.stamp.id) this._varsStampCheck[obj.json.stamp.id] = data;}} else if (this._varsNaviConnect.flag == 'search-save' || this._varsNaviConnect.flag == 'search-delete') {this.insNavi.updateSearchVarsSave({vars : obj.json.data});} else if (this._varsNaviConnect.flag == 'search-reload') {this.insLayout.updateTool({flagLock : 0, from : 'navi', idTarget : 'Reload'});this.insNavi.updateSearchVars({vars : obj.json.data});if (obj.json.stamp) {var data = (Object.toJSON(obj.json.data)).evalJSON();if (obj.json.stamp.id) this._varsStampCheck[obj.json.stamp.id] = data;}} else if (this._varsNaviConnect.flag == 'tree-reload') {this.insLayout.updateTool({flagLock : 0, from : 'navi', idTarget : 'Reload'});this.insNavi.updateTreeVars({vars : obj.json.data});if (obj.json.stamp) {var data = (Object.toJSON(obj.json.data)).evalJSON();if (obj.json.stamp.id) this._varsStampCheck[obj.json.stamp.id] = data;}}} else if (obj.json.flag == 10) {if (this._varsNaviConnect.flag.match(/^folder(.*?)-reload$/)|| this._varsNaviConnect.flag.match(/^format(.*?)-reload$/)|| this._varsNaviConnect.flag == 'tree-reload') {this.insLayout.updateTool({flagLock : 0, from : 'navi', idTarget : 'Reload'});if (obj.json.stamp) {this.insNavi.updateFolderVars({vars : this._varsStampCheck[obj.json.stamp.id]});}} else if (this._varsNaviConnect.flag == 'search-reload') {this.insLayout.updateTool({flagLock : 0, from : 'navi', idTarget : 'Reload'});if (obj.json.stamp) {this.insNavi.updateSearchVars({vars : this._varsStampCheck[obj.json.stamp.id]});}}} else {if (obj.json) {if (obj.json.flag) {if (this.insRoot.vars.varsSystem.str[obj.json.flag]) {alert(this.insRoot.vars.varsSystem.str[obj.json.flag]);}}}}},_getListAllot : function(){var allot = function(obj){var insCurrent = obj.insCurrent;var array = obj.from.split('-');if (array[0] == 'tree') {if (array[1] == '_mousedownMove') insCurrent.insNavi.eventMove({vars : obj.vars});else if (array[1] == 'eventPage') insCurrent._eventListConnect({vars : obj.vars, flag : 'Search'});else if (array[1] == '_dblclickBtn') insCurrent._getListVars();else if (array[1] == 'eventBtnBottom') insCurrent._getListVars();}};return allot;},_getListVars : function(obj){this.insWindow.hideLockWindow();var vars;if (this.flagCheckUse) {this.insList.insTree.setCheckAllValue();vars = this._getListVarsChild({arr : this.insList.insTree.vars.varsDetail});} else {vars = this.insList.insTree.getBtnSelect();}this.insReturn[this.strFunc]({vars : vars, flagId : this.flagId});},_getListVarsChild : function(obj){var array = [];for (var i = 0; i < obj.arr.length; i++) {if (!obj.arr[i].flagUse) continue;if (obj.arr[i].flagCheckUse) {if (obj.arr[i].flagCheckNow) {array.push(obj.arr[i]);}}}return array;},_sendListConnect : function(obj){var arrayKey = [], arrayValue = [];var jsonSearch = Object.toJSON(this._varsSearch);var jsonStamp = {};this._eventValue(this.varsValue);var jsonValue = Object.toJSON(this._varsValue);if (this._varsListConnect.flag == 'Delete') {var strFunc = 'ListDelete';arrayKey = ['class', 'module', 'ext', 'child', 'func', 'db', 'jsonStamp', 'jsonValue', 'jsonSearch'];arrayValue = [this.strClass, this.idModule, this.strExt, this.strChild, strFunc, 'master', jsonStamp, jsonValue, jsonSearch];} else if (this._varsListConnect.flag == 'Search') {var strFunc = 'ListReload';jsonStamp = this._getJsonStamp({strFunc : strFunc});arrayKey = ['class', 'module', 'ext', 'child', 'func', 'db', 'jsonStamp', 'jsonValue', 'jsonSearch'];arrayValue = [this.strClass, this.idModule, this.strExt, this.strChild, strFunc, 'slave', jsonStamp, jsonValue, jsonSearch];} else if (this._varsListConnect.flag == 'Reload') {var strFunc = 'ListReload';jsonStamp = this._getJsonStamp({strFunc : strFunc});this.insLayout.updateTool({flagLock : 1, from : 'list', idTarget : 'Reload'});arrayKey = ['class', 'module', 'ext', 'child', 'func', 'db', 'jsonStamp', 'jsonValue', 'jsonSearch'];arrayValue = [this.strClass, this.idModule, this.strExt, this.strChild, strFunc, 'slave', jsonStamp, jsonValue, jsonSearch];}this.insRoot.insRequest.set({flagLock        : 0,numZIndex       : this.insRoot.getZIndex(),insCurrent      : this,flagEscape      : 1,path            : this.insRoot.vars.varsSystem.path.post,querysKey       : arrayKey,querysValue     : arrayValue,functionSuccess : '_sendListConnectSuccess',functionFail    : '_sendListConnectFail',eleLoadStatus   : this.insList.insUnder.eleFormat.header.down('.codeLibBaseMarginRightFive', 0)});}});var Code_Lib_ExtEditor = Class.create(Code_Lib_ExtPortal,{_getLayoutAllot : function(){var allot =  function(obj){var insCurrent = obj.insCurrent;if (obj.from == 'eventLayout') {if (insCurrent.insNavi) insCurrent.insNavi.eventLayout();if (insCurrent.insDetail) insCurrent.insDetail.eventLayout();} else if (obj.from == 'preEventLayout') {if (insCurrent.insNavi) insCurrent.insNavi.preEventLayout({flag : 'dummy'});if (insCurrent.insDetail) insCurrent.insDetail.preEventLayout({flag : 'dummy'});} else if (obj.from == 'navi-_mousedownNavi') {if (obj.vars.id == 'Switch') {insCurrent.insNavi.eventTool({idTarget : insCurrent.insNavi.vars.varsStatus.flagNow,flagLoop : 1});} else if (obj.vars.id == 'Reload') {if (insCurrent.insNavi.vars.varsStatus.flagNow.match(/^folder(.*?)$/)) {var flag = '';if (RegExp.$1) flag = 'format' + RegExp.$1 + '-reload';else flag = 'format-reload';insCurrent._eventNaviConnect({vars : obj.vars, flag : flag});}}} else if (obj.from == 'navi-_mousedownMenu') {return insCurrent.insNavi.vars.varsStatus.flagNow;} else if (obj.from == 'navi-_mousedownLine') {insCurrent.insNavi.eventTool({idTarget : obj.vars});} else if (obj.from == 'detail-_mousedownNavi') {var insEscape = new Code_Lib_Escape();var id = insEscape.strLowCapitalize({data : obj.vars.id});if (obj.vars.id == 'Reload') {insCurrent._eventDetailConnect({flag : id, flagType : insCurrent.insDetail.vars.varsStatus.flagReloadNow});}} else if (obj.from == 'detail-_mousedownMenu') {if (obj.vars.id == 'Reload') {return insCurrent.insDetail.vars.varsStatus.flagReloadNow;}} else if (obj.from == 'detail-_mousedownLine') {if (obj.varsTarget) {var insEscape = new Code_Lib_Escape();var id = insEscape.strLowCapitalize({data : obj.varsTarget});insCurrent.insDetail.eventTool({idTarget : obj.vars, flagStr : obj.varsTarget});insCurrent._eventDetailConnect({flag : id, flagType : obj.vars});return;}}};return allot;},_getNaviAllot : function(){var allot = function(obj){var insCurrent = obj.insCurrent;var array = obj.from.split('-');var flagNow = array[0];var flagType = array[1];var flagBtn = array[2];if (flagNow.match(/^folder(.*?)$/)) {if (flagType == '_mousedownBtn') {var flag = '';if (RegExp.$1) flag = 'format' + RegExp.$1;else flag = 'format';insCurrent._eventDetailConnect({vars : obj.vars, flag : flag});insCurrent.insNavi.showBtn();} else if (flagType == 'eventBtnBottom') {if (flagBtn == 'eventFormBtnAdd') {return insCurrent.eventNaviBtnSave();} else {var flag = '';if (RegExp.$1) flag = 'format' + RegExp.$1 + '-save';else flag = 'format-save';insCurrent._eventNaviConnect({vars : obj.vars, flag : flag});}}}};return allot;},eventNaviBtnSave : function(){},_eventListConnect : function(obj){if (obj.flag == 'Reload') {this._eventSearch({numLotNow : this._varsSearch.numLotNow,ph : {arrWhere : this._varsSearch.ph.arrWhere,arrOrder : this._varsSearch.ph.arrOrder}});} else if (obj.flag == 'Search') {this._eventSearch({numLotNow : obj.vars.numLotNow,ph : {arrWhere : this._varsSearch.ph.arrWhere,arrOrder : this._varsSearch.ph.arrOrder}});} else if (obj.flag == 'Refresh') {obj.flag = 'Search';this._eventSearch({numLotNow : 0,ph : {arrWhere : [],arrOrder : {}}});}this._varsListConnect = obj;this._sendListConnect();},eventWindowAppear : function(obj){this.varsChild = (Object.toJSON(obj.vars)).evalJSON();this._varsSearch = this.insCurrent.getVarsSearch();this.vars.portal.varsDetail.varsDetail = this.varsChild.varsDetail;this.vars.portal.varsDetail.varsIni = this.varsChild.varsIni;this._setDetailStart();},_getDetailAllot : function(){var allot = function(obj){var insCurrent = obj.insCurrent;if (obj.from == 'eventRemove-detail') insCurrent._eventRemoveDetailContent();else if (obj.from == '_mousedownMove') {insCurrent.insDetail.setValue();insCurrent._setDetailContentValue();insCurrent.insNavi.eventMove({vars : insCurrent._getDetailFormFormat()});}else if (obj.from == 'form-preEventLayout') insCurrent._preEventLayoutDetailContent();else if (obj.from == 'form-_resetSelectShortCut') insCurrent._eventSelectShortCut();else if (obj.from == 'form-eventLayout') insCurrent._eventLayoutDetailContent();else if (obj.from == 'form-eventBtnBottom') {if (obj.vars.vars.vars.flagBack) {insCurrent._backDetailEnd();} else if (obj.vars.vars.vars.flagHide) {if (!insCurrent.insWindow.vars.flagHideNow) insCurrent.insWindow.updateHide({ flagEffect : 1 });} else {if (obj.vars.vars.vars.idTarget == 'save') {insCurrent._eventDetailConnect({flag : insCurrent.varsChild.flagType});} else if (obj.vars.vars.vars.idTarget == 'folder') {insCurrent.insDetail.setValue();insCurrent._setDetailContentValue();var varsFormat = insCurrent._getDetailFormFormat();insCurrent.insNavi.addVars({vars : {vars : varsFormat, strTitle : varsFormat.StrTitle}});insCurrent.insDetail.showBtnBottom();}}}};return allot;},_eventSelectShortCut : function(){},_getDetailFormFormat : function(){var vars = this.insDetail.getFormValue();arr = this.insDetail.insForm.vars.varsDetail;for (var i = 0; i < arr.length; i++) {if (arr[i].varsFormArea) {var data = {};data = this._getDetailFormAreaFormat({arr : arr, idTarget : arr[i].id});vars[arr[i].id] = data;} else if (arr[i].varsFormCheck) {var data = {};data = this._getDetailFormCheckFormat({arr : arr, idTarget : arr[i].id});vars[arr[i].id] = data;} else if (arr[i].varsFormList) {var data = {};data = this._getDetailFormListFormat({arr : arr, idTarget : arr[i].id});vars[arr[i].id] = data;} else if (arr[i].varsCalenderFormNum) {var data = {};data = this._getDetailCalenderFormNumFormat({arr : arr, idTarget : arr[i].id});vars[arr[i].id] = data;}}return vars;},_getDetailCalenderFormNumFormat : function(obj){var num = 0;for (var i = 0; i < obj.arr.length; i++) {if (!obj.arr[i].varsCalenderFormNum) continue;if (obj.idTarget == obj.arr[i].id) {return this._varsDetailFormCalenderNum[num].insCalender.vars;}num++;}},_getDetailFormAreaFormat : function(obj){var num = 0;for (var i = 0; i < obj.arr.length; i++) {if (!obj.arr[i].varsFormArea) continue;if (obj.idTarget == obj.arr[i].id) {return this._varsDetailFormArea[num].insArea.vars.varsDetail;}num++;}},_getDetailFormCheckFormat : function(obj){var num = 0;for (var i = 0; i < obj.arr.length; i++) {if (!obj.arr[i].varsFormCheck) continue;if (obj.idTarget == obj.arr[i].id) {return this._varsDetailFormCheck[num].insFormCheck.vars.varsDetail;}num++;}},_getDetailFormListFormat : function(obj){var num = 0;for (var i = 0; i < obj.arr.length; i++) {if (!obj.arr[i].varsFormList) continue;if (obj.idTarget == obj.arr[i].id) {var data = {value      : obj.arr[i].value,varsDetail : this._varsDetailFormList[num].insList.vars.varsDetail};return data;}num++;}},_varsDetailEnd : null,_setDetailEnd : function(){this._varsDetailEnd = (Object.toJSON(this.insDetail.varsEventList)).evalJSON();this._getDetailFormContentVars({arr : this.insDetail.insForm.vars.varsDetail});this._varsDetailEnd.varsDetail = (Object.toJSON(this.insDetail.insForm.vars.varsDetail)).evalJSON();var objData = {strTitle : null,strClass : null,vars     : {varsDetail : this.vars.portal.varsDetail.varsEnd.varsDetail,varsBtn    : this.vars.portal.varsDetail.varsEnd.varsBtn,varsEdit   : {},vars       : {}}};this.insDetail.eventList(objData);},_getDetailFormContentVars : function(obj){},_backDetailEnd : function(){this.insDetail.eventList({flagMoveUse : 1,strTitle    : null,strClass    : null,vars        : this._varsDetailEnd});this._setDetailContent();this._varsDetailEnd = null;},_setDetailContentValue : function(){},_eventDetailConnectSuccess : function(obj){if (obj.json.flag == 1) {if (this._varsDetailConnect.flag == 'add') {this.insCurrent.eventDetailConnectSuccessListUpdate(obj);this._setDetailEnd();} else if (this._varsDetailConnect.flag.match(/^edit/)) {this.insCurrent.eventDetailConnectSuccessListDetailUpdate(obj);this._setDetailEnd();}} else if (obj.json.flag == 40) {this.insCurrent.eventDetailConnectSuccessListUpdateDetailReset(obj);alert(this.insRoot.vars.varsSystem.str.oldData);if (!this.insWindow.vars.flagHideNow) this.insWindow.updateHide({ flagEffect : 1 });} else if (obj.json.flag == 42) {alert(this.insRoot.vars.varsSystem.str.errorMail);} else if (obj.json.flag == 8) {alert(this.insRoot.vars.varsSystem.str.oldData);} else {this.insDetail.showFormAttestError({flagType : obj.json.flag});if (obj.json) {if (obj.json.flag) {if (this.insRoot.vars.varsSystem.str[obj.json.flag]) {alert(this.insRoot.vars.varsSystem.str[obj.json.flag]);}}}}}});var Code_Lib_Browser = Class.create(Code_Lib_Ext, {varsLoad : {"strNone":"\u304a\u4f7f\u3044\u306e\u30d6\u30e9\u30a6\u30b6\u306b\u5bfe\u5fdc\u3057\u3066\u304a\u308a\u307e\u305b\u3093\u3002\u4ee5\u4e0b\u306e\u30d6\u30e9\u30a6\u30b6\u3092\u304a\u4f7f\u3044\u304f\u3060\u3055\u3044\u3002Chrome(\u63a8\u5968)\u3000Firefox(\u6e96\u63a8\u5968)\u3000Safari5\u3000IE8\u3002"},iniLoad : function(obj){this._iniVars(obj);if (this._checkBrowser()) return 1;return 0;},insRoot : null, idSelf : null,_iniVars : function(obj){this.insRoot = obj.insRoot;this.idSelf = obj.idSelf;},_checkBrowser : function(){var userAgent = window.navigator.userAgent.toLowerCase();var appVersion = window.navigator.appVersion.toLowerCase();var ieModern = (typeof document.documentElement.style.msInterpolationMode != "undefined")? 1 : 0;if (userAgent.indexOf("opera") > -1) {alert(this.varsLoad.strNone);return 1;} else if (userAgent.indexOf("msie") > -1) {if (appVersion.indexOf("msie 7.0") > -1 || !ieModern) {alert(this.varsLoad.strNone);return 1;}}}});var Code_Lib_Btn = Class.create({insListener : null,_iniListener : function(){this.insListener = new Code_Lib_Listener();},iniBtnTextTarget : function(obj){this._iniListener();this._setBtnTextTarget(obj);this._setBtnTextTargetListener(obj);},_setBtnTextTarget : function(obj){obj.eleInsert.addClassName('codeLibBtnText');obj.eleInsert.addClassName('codeLibBaseCursorPointer');obj.eleInsert.addClassName('unselect');obj.eleInsert.unselectable = 'on';obj.eleInsert.insert(obj.strTitle);},_setBtnTextTargetListener : function(obj){this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'mousedown', strFunc : '_mousedownBtnTextTarget',ele : obj.eleInsert, vars : {vars : obj}});this.insListener.set({bindAsEvent : 0, insCurrent : this, event : 'mouseover', strFunc : '_mouseoverBtnTextTarget',ele : obj.eleInsert, vars : {vars : obj}});this.insListener.set({bindAsEvent : 0, insCurrent : this, event : 'mouseout', strFunc : '_mouseoutBtnTextTarget',ele : obj.eleInsert, vars : {vars : obj}});},_mousedownBtnTextTarget : function(evt,obj) {evt.stop();obj.vars.eleInsert.removeClassName('codeLibBtnTextOver');var insCurrent = obj.vars.insCurrent;var strFunc = obj.vars.strFunc;insCurrent[strFunc]({vars : obj.vars});},_mouseoverBtnTextTarget : function(obj){obj.vars.eleInsert.addClassName('codeLibBtnTextOver');},_mouseoutBtnTextTarget : function(obj){obj.vars.eleInsert.removeClassName('codeLibBtnTextOver');},iniBtnText : function(obj){this._iniListener();this._setBtnText(obj);this._setBtnTextListener(obj);},_setBtnText : function(obj){var eleBtnText = $(document.createElement('span'));eleBtnText.id = obj.id;eleBtnText.addClassName('codeLibBtnText');eleBtnText.addClassName('codeLibBaseCursorPointer');eleBtnText.addClassName('unselect');eleBtnText.unselectable = 'on';eleBtnText.insert(obj.strTitle);$(obj.insCurrent.insRoot.vars.varsSystem.id.root).insert(eleBtnText);var numWidth = $(obj.id).offsetWidth;eleBtnText.style.width = numWidth + 'px';obj.eleInsert.insert(eleBtnText);},_setBtnTextListener : function(obj){this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'mousedown', strFunc : '_mousedownBtnText',ele : $(obj.id), vars : {vars : obj}});this.insListener.set({bindAsEvent : 0, insCurrent : this, event : 'mouseover', strFunc : '_mouseoverBtnText',ele : $(obj.id), vars : {vars : obj}});this.insListener.set({bindAsEvent : 0, insCurrent : this, event : 'mouseout', strFunc : '_mouseoutBtnText',ele : $(obj.id), vars : {vars : obj}});},_mousedownBtnText : function(evt,obj) {evt.stop();$(obj.vars.id).removeClassName('codeLibBtnTextOver');var insCurrent = obj.vars.insCurrent;var strFunc = obj.vars.strFunc;insCurrent[strFunc]({vars : obj.vars});},_mouseoverBtnText : function(obj){$(obj.vars.id).addClassName('codeLibBtnTextOver');},_mouseoutBtnText : function(obj){$(obj.vars.id).removeClassName('codeLibBtnTextOver');},iniBtn : function(obj) {this._iniListener();this._setBtn(obj);},_staticBtn : {numIdle : 10},_setBtn : function(obj){var eleBtnWrap;if (obj.flagATag) {eleBtnWrap = $(document.createElement('a'));eleBtnWrap.id = obj.id;eleBtnWrap.href = 'javascript:void(window.open("' + obj.path + '"));';eleBtnWrap.addClassName('codeLibBaseCursorPointer');eleBtnWrap.addClassName('unselect');eleBtnWrap.unselectable = 'on';eleBtnWrap.rel = 'noreferrer';eleBtnWrap.setStyle({ float : 'left' });} else {eleBtnWrap = $(document.createElement('span'));eleBtnWrap.id = obj.id;eleBtnWrap.addClassName('codeLibBaseCursorPointer');eleBtnWrap.addClassName('unselect');eleBtnWrap.unselectable='on';}var eleBtnMiddle = $(document.createElement('span'));eleBtnMiddle.addClassName('codeLibBtnMiddle');if (obj.strClass) {var eleClass = $(document.createElement('span'));eleClass.addClassName(obj.strClass);eleBtnWrap.title = obj.strTitle;eleBtnMiddle.insert(eleClass);} else {eleBtnMiddle.insert(obj.strTitle);$(obj.insCurrent.insRoot.vars.varsSystem.id.root).insert(eleBtnMiddle);}var width = (obj.numWidth)? obj.numWidth : eleBtnMiddle.offsetWidth + this._staticBtn.numIdle * 2;var eleBtnTop = $(document.createElement('span'));eleBtnTop.addClassName('codeLibBtnTop');eleBtnWrap.insert(eleBtnTop);eleBtnTop.setStyle({width : (width - 2) + 'px'});eleBtnWrap.insert(eleBtnMiddle);eleBtnMiddle.setStyle({width : width + 'px'});var eleBtnBottom = $(document.createElement('span'));eleBtnBottom.addClassName('codeLibBtnBottom');eleBtnWrap.insert(eleBtnBottom);eleBtnBottom.setStyle({width : (width - 2) + 'px'});eleBtnWrap.setStyle({width : width + 'px'});obj.eleInsert.insert(eleBtnWrap);obj.eleBtnTop = eleBtnTop;obj.eleBtnMiddle = eleBtnMiddle;obj.eleBtnBottom = eleBtnBottom;this._setBtnListener(obj);},_setBtnListener : function(obj){this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'mousedown', strFunc : '_mousedownBtn',ele : $(obj.id), vars : {vars : obj}});this.insListener.set({bindAsEvent : 0, insCurrent : this, event : 'mouseover', strFunc : '_mouseoverBtn',ele : $(obj.id), vars : {vars : obj}});this.insListener.set({bindAsEvent : 0, insCurrent : this, event : 'mouseout', strFunc : '_mouseoutBtn',ele : $(obj.id), vars : {vars : obj}});},_mousedownBtn : function(evt,obj) {if (obj.vars.flagATag) return;evt.stop();this._mouseoutBtn(obj);var insCurrent = obj.vars.insCurrent;var strFunc = obj.vars.strFunc;insCurrent[strFunc]({vars : obj.vars});},_mouseoverBtn : function(obj){obj.vars.eleBtnTop.addClassName('codeLibBtnOver');obj.vars.eleBtnMiddle.addClassName('codeLibBtnOver');obj.vars.eleBtnBottom.addClassName('codeLibBtnOver');},_mouseoutBtn : function(obj){obj.vars.eleBtnTop.removeClassName('codeLibBtnOver');obj.vars.eleBtnMiddle.removeClassName('codeLibBtnOver');obj.vars.eleBtnBottom.removeClassName('codeLibBtnOver');},iniBtnSearch : function(obj){this._iniListener();this._templateBtnSearch(obj);this._templateBtnSearchListener(obj);},_templateBtnSearch : function(obj){var eleWrap = $(document.createElement('form'));eleWrap.id = obj.id;eleWrap.addClassName('codeLibBtnSearch');obj.eleInsert.insert(eleWrap);var eleBox = $(document.createElement('span'));eleBox.addClassName('codeLibBtnSearchBox');eleBox.addClassName('codeLibBaseCursorPointer');eleBox.addClassName('unselect');eleBox.title = obj.strTitle;eleBox.unselectable='on';eleWrap.insert(eleBox);var eleTag = $(document.createElement('input'));eleTag.addClassName('codeLibBtnSearchInput');eleTag.type = 'text';eleTag.style.width = obj.numWidth + obj.unitWidth;eleWrap.insert(eleTag);},_templateBtnSearchListener : function(obj){this.insListener.set({ bindAsEvent : 1, insCurrent : this, event : 'mousedown', strFunc : '_mousedownBtnSearch',ele : $(obj.id).down('.codeLibBtnSearchBox',0), vars : {vars : obj}});this.insListener.set({ bindAsEvent : 0, insCurrent : this, event : 'mouseover', strFunc : '_mouseoverBtnSearch',ele : $(obj.id).down('.codeLibBtnSearchBox',0), vars : {vars : obj}});this.insListener.set({ bindAsEvent : 0, insCurrent : this, event : 'mouseout', strFunc : '_mouseoutBtnSearch',ele : $(obj.id).down('.codeLibBtnSearchBox',0), vars : {vars : obj}});},_mousedownBtnSearch : function(evt, obj) {evt.stop();$(obj.vars.id).down('.codeLibBtnSearchBox',0).removeClassName('codeLibBtnSearchBoxOver');var value = $(obj.vars.id).down('.codeLibBtnSearchInput',0).value;var insCurrent = obj.vars.insCurrent;var strFunc = obj.vars.strFunc;insCurrent[strFunc]({value : value});},_mouseoverBtnSearch : function(obj){$(obj.vars.id).down('.codeLibBtnSearchBox',0).addClassName('codeLibBtnSearchBoxOver');},_mouseoutBtnSearch : function(obj){$(obj.vars.id).down('.codeLibBtnSearchBox',0).removeClassName('codeLibBtnSearchBoxOver');}});var Code_Lib_BtnPage = Class.create(Code_Lib_ExtLib,{varsLoad : {"varsWhole":{"str":{"item":"\u4ef6","item1":"\u4ef6\u76ee","btnTop":"\u6700\u521d","btnEnd":"\u6700\u5f8c","btnNext":"\u6b21\u3078","btnPrev":"\u524d\u3078","all":"\u5168","numLeftParen":"(","rightParen":")"}}},initialize : function(obj){this._extAllot(obj);this._iniVars(obj);this._iniListener();this._iniPage();},iniReload : function(){this.stopListener();this.removeWrap();this._iniPage();},_iniListener : function(){this._extListener();},_iniVars : function(obj){this._extVars(obj);},_staticPage : {numLeftIdle : 4, numRightIdle : 6, numLots : 10, numPadding : 5},_varsPage : null,_iniPage : function(){this._setPageWrap();this._varPage();this._setPageStatus();if (!this.vars.varsStatus.numRows) return;this._setPageTop();this._setPagePrev();this._setPage({arr : this._varsPage.arrayLot});this._setPageNext();this._setPageEnd();},setLock : function(){if (this.vars.varsStatus.flagLockUse) {this.vars.varsStatus.flagLockNow = 1;this.iniReload();}},cancelLock : function(){if (this.vars.varsStatus.flagLockUse) {this.vars.varsStatus.flagLockNow = 0;this.iniReload();}},eleWrapPage : {},_setPageWrap : function(){var ele = $(document.createElement('div'));ele.addClassName('codeLibBtnPageWrap');this.eleWrapPage.left = ele;this.eleInsertBtnLeft.innerHTML = '';this.eleInsertBtnLeft.insert(ele);ele = $(document.createElement('div'));ele.addClassName('codeLibBtnPageWrap');this.eleWrapPage.right = ele;this.eleInsertBtnRight.innerHTML = '';this.eleInsertBtnRight.insert(ele);},_varPageLot : function(){var cut = this._varsPage;if (cut.numRows > 0) {cut.lotAll = Math.floor(cut.numRows / cut.items);cut.itemIdle = cut.numRows - cut.lotAll * cut.items;if (cut.itemIdle > 0) {cut.lotAll++;cut.lotIdle = cut.lotAll;}}},_varPageTop : function(){if (!this.vars.varsStatus.flagTopUse) return;var cut = this._varsPage;if (cut.numRows > 0) {if (cut.numLotNow > 0) {cut.flagTop = 1;cut.lotTop = 0;}}},_varPagePrev : function(){if (!this.vars.varsStatus.flagPrevUse) return;var cut = this._varsPage;if (cut.numRows > 0) {if (cut.numLotNow > 0) {cut.flagPrev = 1;cut.lotPrev = cut.numLotNow - 1;}}},_varPageNext : function(){if (!this.vars.varsStatus.flagNextUse) return;var cut = this._varsPage;if (cut.numRows > 0) {if ((cut.lotAll-1) > cut.numLotNow) {cut.flagNext = 1;cut.lotNext = cut.numLotNow + 1;}}},_varPageEnd : function(){if (!this.vars.varsStatus.flagEndUse) return;var cut = this._varsPage;if (cut.numRows > 0) {if ((cut.lotAll-1) != cut.numLotNow) {cut.flagEnd = 1;cut.lotEnd = cut.lotAll-1;}}},_varPageLotNow : function(){var cut = this._varsPage;if (cut.numRows > 0) {if (cut.lotAll <= this._staticPage.numLots) {for (var i=0; i< cut.lotAll; i++) {cut.arrayLot.push(i);}} else {var rest = cut.allLot -1 - cut.numLotNow;if (cut.numLotNow < this._staticPage.numLeftIdle) {for (var i= 0; i<= cut.numLotNow; i++) {cut.arrayLot.push(i);}for (var i = cut.numLotNow + 1; i < this._staticPage.numLots; i++) {cut.arrayLot.push(i);}} else {for (var i = (cut.numLotNow); i >= (cut.numLotNow - this._staticPage.numLeftIdle); i--) {if (i >= cut.lotAll) break;cut.arrayLot.unshift(i);}for (var i = cut.numLotNow + 1; i < (cut.numLotNow + this._staticPage.numRightIdle); i++) {if (i >= cut.lotAll) break;cut.arrayLot.push(i);}}}}},_varPage : function(){this._varsPage = {numRows   : this.vars.varsStatus.numRows,itemIdle  : 0,numLotNow : this.vars.varsStatus.numLotNow,items     : parseFloat(this.insRoot.vars.varsSystem.status.numList),lotAll    : 0,lotIdle   : 0,arrayLot  : [],flagTop   : 0,lotTop    : 0,flagEnd   : 0,lotEnd    : 0,flagPrev  : 0,lotPrev   : 0,flagNext  : 0,lotNext   : 0,};this._varPageLot();this._varPageLotNow();this._varPageTop();this._varPagePrev();this._varPageNext();this._varPageEnd();},_setPageStatus : function(){if (!this.vars.varsStatus.flagStatusUse) return;var cut = this._varsPage;var displayStart = cut.numLotNow * cut.items + 1;var displayEnd = cut.numLotNow * cut.items;if (cut.itemIdle > 0 && !cut.flagNext) {displayEnd += cut.itemIdle;} else {displayEnd += cut.items;}var str = '';if (cut.numRows == 0) str = this.varsLoad.varsWhole.str.all + 0 + this.varsLoad.varsWhole.str.item;else str = displayStart + ' - ' + displayEnd + this.varsLoad.varsWhole.str.item1+ '('+ this.varsLoad.varsWhole.str.all + cut.numRows + this.varsLoad.varsWhole.str.item + ')';var ele = $(document.createElement('span'));ele.insert(str);if (this.vars.varsStatus.flagLockUse && this.vars.varsStatus.flagLockNow) {ele.addClassName('codeLibBaseFontCcc');ele.addClassName('codeLibBaseCursorDefault');}ele.style.paddingTop = this._staticPage.numPadding + 'px';ele.style.paddingLeft = this._staticPage.numPadding + 'px';this.eleWrapPage.right.insert(ele);},_setPageTop : function(){if (!this.vars.varsStatus.flagTopUse) return;var cut = this._varsPage;if (cut.flagTop) {if (this.vars.varsStatus.flagLockUse && this.vars.varsStatus.flagLockNow) {var ele = $(document.createElement('span'));ele.id = this.idSelf + 'BtnTop';ele.addClassName('codeLibBaseFontCcc');ele.addClassName('codeLibBaseCursorDefault');ele.insert(this.varsLoad.varsWhole.str.btnTop);this.eleWrapPage.left.insert(ele);} else {var insBtn = new Code_Lib_Btn();insBtn.iniBtnText({eleInsert  : this.eleWrapPage.left,id         : this.idSelf + 'BtnTop',strFunc    : 'checkPage',strTitle   : this.varsLoad.varsWhole.str.btnTop,insCurrent : this.insSelf,vars       : cut.lotTop});this._setListener({ins : insBtn});}$(this.idSelf + 'BtnTop').style.paddingTop = this._staticPage.numPadding + 'px';$(this.idSelf + 'BtnTop').style.paddingLeft = this._staticPage.numPadding + 'px';}},_setPagePrev : function(){if (!this.vars.varsStatus.flagPrevUse) return;var cut = this._varsPage;if (cut.flagPrev) {if (this.vars.varsStatus.flagLockUse && this.vars.varsStatus.flagLockNow) {var ele = $(document.createElement('span'));ele.id = this.idSelf + 'BtnPrev';ele.addClassName('codeLibBaseFontCcc');ele.addClassName('codeLibBaseCursorDefault');ele.insert(this.varsLoad.varsWhole.str.btnPrev);this.eleWrapPage.left.insert(ele);} else {var insBtn = new Code_Lib_Btn();insBtn.iniBtnText({eleInsert  : this.eleWrapPage.left,id         : this.idSelf + 'BtnPrev',strFunc    : 'checkPage',strTitle   : this.varsLoad.varsWhole.str.btnPrev,insCurrent : this.insSelf,vars       : cut.lotPrev});this._setListener({ins : insBtn});}$(this.idSelf + 'BtnPrev').style.paddingTop = this._staticPage.numPadding + 'px';$(this.idSelf + 'BtnPrev').style.paddingLeft = this._staticPage.numPadding + 'px';}},_setPageNext : function(){if (!this.vars.varsStatus.flagNextUse) return;var cut = this._varsPage;if (cut.flagNext) {if (this.vars.varsStatus.flagLockUse && this.vars.varsStatus.flagLockNow) {var ele = $(document.createElement('span'));ele.id = this.idSelf + 'BtnNext';ele.addClassName('codeLibBaseFontCcc');ele.addClassName('codeLibBaseCursorDefault');ele.insert(this.varsLoad.varsWhole.str.btnNext);this.eleWrapPage.left.insert(ele);} else {var insBtn = new Code_Lib_Btn();insBtn.iniBtnText({eleInsert  : this.eleWrapPage.left,id         : this.idSelf + 'BtnNext',strFunc    : 'checkPage',strTitle   : this.varsLoad.varsWhole.str.btnNext,insCurrent : this.insSelf,vars       : cut.lotNext});this._setListener({ins : insBtn});}$(this.idSelf + 'BtnNext').style.paddingTop = this._staticPage.numPadding + 'px';$(this.idSelf + 'BtnNext').style.paddingLeft = this._staticPage.numPadding + 'px';}},_setPageEnd : function(){if (!this.vars.varsStatus.flagEndUse) return;var cut = this._varsPage;if (cut.flagEnd) {if (this.vars.varsStatus.flagLockUse && this.vars.varsStatus.flagLockNow) {var ele = $(document.createElement('span'));ele.id = this.idSelf + 'BtnEnd';ele.addClassName('codeLibBaseFontCcc');ele.addClassName('codeLibBaseCursorDefault');ele.insert(this.varsLoad.varsWhole.str.btnEnd);this.eleWrapPage.left.insert(ele);} else {var insBtn = new Code_Lib_Btn();insBtn.iniBtnText({eleInsert  : this.eleWrapPage.left,id         : this.idSelf + 'BtnEnd',strFunc    : 'checkPage',strTitle   : this.varsLoad.varsWhole.str.btnEnd,insCurrent : this.insSelf,vars       : cut.lotEnd});this._setListener({ins : insBtn});}$(this.idSelf + 'BtnEnd').style.paddingTop = this._staticPage.numPadding + 'px';$(this.idSelf + 'BtnEnd').style.paddingLeft = this._staticPage.numPadding + 'px';}},_setPage : function(obj){var cut = this._varsPage;for (var i = 0; i < obj.arr.length; i++) {if (obj.arr[i] == cut.numLotNow) {var ele = $(document.createElement('span'));ele.id = this.idSelf + 'Btn' + obj.arr[i];ele.unselectable = 'on';ele.addClassName('unselect');ele.addClassName('codeLibBaseCursorDefault');ele.addClassName('codeLibBtnPageNow');ele.insert(obj.arr[i]+1);ele.style.paddingTop = this._staticPage.numPadding + 'px';ele.style.paddingLeft = this._staticPage.numPadding + 'px';this.eleWrapPage.left.insert(ele);continue;}if (this.vars.varsStatus.flagLockUse && this.vars.varsStatus.flagLockNow) {var ele = $(document.createElement('span'));ele.id = this.idSelf + 'Btn' + obj.arr[i];ele.addClassName('codeLibBaseFontCcc');ele.addClassName('codeLibBaseCursorDefault');ele.insert(obj.arr[i] + 1);this.eleWrapPage.left.insert(ele);} else {var insBtn = new Code_Lib_Btn();insBtn.iniBtnText({eleInsert  : this.eleWrapPage.left,id         : this.idSelf + 'Btn' + obj.arr[i],strFunc    : 'checkPage',strTitle   : obj.arr[i] + 1,insCurrent : this.insSelf,vars       : obj.arr[i]});this._setListener({ins : insBtn});}$(this.idSelf + 'Btn' + obj.arr[i]).style.paddingTop = this._staticPage.numPadding + 'px';$(this.idSelf + 'Btn' + obj.arr[i]).style.paddingLeft = this._staticPage.numPadding + 'px';}},checkPage : function(obj){this.setLock();this.allot({insCurrent : this.insCurrent,from       : 'eventPage',vars   : {numLotPast : this.vars.varsStatus.numLotNow,numLotNow  : obj.vars.vars}});}});var Code_Lib_BtnTool = Class.create(Code_Lib_ExtLib,{initialize : function(obj){this._extAllot(obj);this._iniVars(obj);this._iniListener();this._iniWrap();this._iniTemplate();},iniReload : function(){this.insListener.stop();this.removeWrap();this._iniWrap();this._iniTemplate();},_iniListener : function(){this._extListener();},_iniVars : function(obj){this._extVars(obj);},_iniWrap : function(){this._extWrap();},removeWrap : function(){this.eleWrap.remove();},_iniTemplate : function(){if(!this.vars.varsDetail) return;this._setTemplate({arr : this.vars.varsDetail});},_setTemplate : function(obj){for (var j = 0; j < obj.arr.length; j++) {if (!obj.arr[j].flagUse) continue;var ele = $(document.createElement('span'));ele.id = this.idSelf + obj.arr[j].id;ele.addClassName('codeLibBtnToolImg');ele.title = obj.arr[j].strTitle;var eleTitle = $(document.createElement('span'));eleTitle.addClassName('codeLibBtnToolImgTitle');eleTitle.id = this.idSelf + obj.arr[j].id + '_title';eleTitle.addClassName('unselect');eleTitle.unselectable = 'on';eleTitle.insert(obj.arr[j].strTitle);$(this.insRoot.vars.varsSystem.id.root).insert(eleTitle);var numWidth = eleTitle.offsetWidth;var eleTitleWrap = $(document.createElement('span'));eleTitleWrap.addClassName('unselect');eleTitleWrap.unselectable = 'on';var eleTitleIdleLeft = $(document.createElement('span'));eleTitleIdleLeft.addClassName('unselect');eleTitleIdleLeft.unselectable = 'on';var eleTitleIdleRight = $(document.createElement('span'));eleTitleIdleRight.addClassName('unselect');eleTitleIdleRight.unselectable = 'on';var eleImgWrap = $(document.createElement('span'));eleImgWrap.addClassName('unselect');eleImgWrap.unselectable = 'on';var eleImg = $(document.createElement('span'));eleImg.addClassName('unselect');eleImg.unselectable = 'on';eleImg.id = this.idSelf + obj.arr[j].id + '_img';var eleImgIdleLeft = $(document.createElement('span'));eleImgIdleLeft.addClassName('unselect');eleImgIdleLeft.unselectable = 'on';var eleImgIdleRight = $(document.createElement('span'));eleImgIdleRight.addClassName('unselect');eleImgIdleRight.unselectable = 'on';eleTitleWrap.insert(eleTitleIdleLeft);eleTitleWrap.insert(eleTitle);eleTitleWrap.insert(eleTitleIdleRight);eleImgWrap.insert(eleImgIdleLeft);eleImgWrap.insert(eleImg);eleImgWrap.insert(eleImgIdleRight);ele.insert(eleImgWrap);ele.insert(eleTitleWrap);var numHeightTitle = 10;var numHeightImg = 20;eleTitleWrap.style.height = numHeightTitle + 'px';eleTitle.style.height = numHeightTitle + 'px';eleTitleIdleLeft.style.height = numHeightTitle + 'px';eleTitleIdleRight.style.height = numHeightTitle + 'px';eleImgWrap.style.height = numHeightImg + 'px';eleImg.style.height = numHeightImg + 'px';eleImgIdleLeft.style.height = numHeightImg + 'px';eleImgIdleRight.style.height = numHeightImg + 'px';var numBase = 30;var num = numBase - numWidth;var numIdleLeft = 0;var numIdleRight = 0;if (num > 0) {numIdleLeft = num / 2;numIdleRight = numBase - numWidth - numIdleLeft;ele.style.width = numBase + 'px';eleImgWrap.style.width = numBase + 'px';eleImg.style.width = numBase + 'px';eleTitleWrap.style.width = numBase + 'px';eleTitle.style.width = numWidth + 'px';eleTitleIdleLeft.style.width = numIdleLeft + 'px';eleTitleIdleRight.style.width = numIdleRight + 'px';} else if (num < 0) {numIdleLeft = Math.abs(num) / 2;numIdleRight = numWidth - numIdleLeft;ele.style.width = numWidth + 'px';eleImgWrap.style.width = numWidth + 'px';eleImg.style.width = numBase + 'px';eleImgIdleLeft.style.width = numIdleLeft + 'px';eleImgIdleRight.style.width = numIdleRight + 'px';eleTitleWrap.style.width = numWidth + 'px';eleTitle.style.width = numWidth + 'px';} else {ele.style.width = numBase + 'px';eleTitleWrap.style.width = numBase + 'px';eleTitle.style.width = numBase + 'px';eleImgWrap.style.width = numBase + 'px';eleImg.style.width = numBase + 'px';}var eleList = null;if (obj.arr[j].flagNow) {eleImg.addClassName(obj.arr[j].strClass);ele.addClassName('codeLibBaseCursorPointer');if (obj.arr[j].varsContext) {eleList = $(document.createElement('span'));eleList.addClassName('codeLibBtnImgMenu');eleList.addClassName('codeLibBaseCursorPointer');}} else {eleImg.addClassName(obj.arr[j].strClassNoactive);eleTitle.addClassName('codeLibBtnToolNoactiveTitle');ele.addClassName('codeLibBtnToolNoactive');ele.addClassName('codeLibBaseCursorDefault');}this._setTemplateListener({ele     : ele,eleList : eleList,vars    : obj.arr[j]});this.eleWrap.insert(ele);if (eleList) this.eleWrap.insert(eleList);}},_setTemplateListener : function(obj){this.insListener.set({ bindAsEvent : 1, insCurrent : this, event : 'mousedown', strFunc : '_mousedownNavi',ele : obj.ele, vars : {vars : obj.vars}});this.insListener.set({ bindAsEvent : 0, insCurrent : this, event : 'mouseover', strFunc : '_mouseoverNavi',ele : obj.ele, vars : { vars : obj.vars}});this.insListener.set({ bindAsEvent : 0, insCurrent : this, event : 'mouseout', strFunc : '_mouseoutNavi',ele : obj.ele, vars : { vars : obj.vars}});if (obj.eleList) {this.insListener.set({ bindAsEvent : 1, insCurrent : this, event : 'mousedown', strFunc : '_mousedownMenu',ele : obj.eleList, vars : {vars : obj.vars, ele : obj.eleList}});this.insListener.set({ bindAsEvent : 0, insCurrent : this, event : 'mouseover', strFunc : '_mouseoverMenu',ele : obj.eleList, vars : { vars : obj.vars, ele : obj.eleList}});this.insListener.set({ bindAsEvent : 0, insCurrent : this, event : 'mouseout', strFunc : '_mouseoutMenu',ele : obj.eleList, vars : { vars : obj.vars, ele : obj.eleList}});}},_mousedownNavi : function(evt, obj){evt.stop();if (obj.vars.flagNow) {this.allot({insCurrent : this.insCurrent,from       : '_mousedownNavi',vars       : obj.vars});}},_mousedownMenu : function(evt, obj){evt.stop();if (obj.vars.flagNow) {obj.flagNow = this.allot({insCurrent : this.insCurrent,from       : '_mousedownMenu',vars       : obj.vars});this._setMenuVars(obj);this._setMenu(obj);}},_setMenuVars : function(obj){var cut = obj.vars.varsContext;cut.varsStatus.flagNow = obj.flagNow;obj.arr = cut.varsDetail;for (var i = 0; i < obj.arr.length; i++) {if (!obj.arr[i].flagCheckUse) continue;obj.arr[i].flagCheckNow = 0;if (obj.arr[i].vars.idTarget == cut.varsStatus.flagNow) {obj.arr[i].flagCheckNow = 1;}}cut.varsStatus.numTop = $(this.idSelf).up('.codeLibWindow', 0).offsetTop + obj.ele.offsetTop;cut.varsStatus.numLeft = $(this.idSelf).up('.codeLibWindow', 0).offsetLeft + obj.ele.offsetLeft;},insMenu : null,_setMenu : function(obj){this._updateMenuVars({arr  : obj.vars.varsContext.varsDetail,vars : obj.vars});this.insMenu = new Code_Lib_Context({insRoot    : this.insRoot,eleInsert  : $(this.insRoot.vars.varsSystem.id.root),insCurrent : this.insSelf,idSelf     : this.idSelf + 'Menu',allot      : this._getMenuAllot(),vars       : obj.vars.varsContext});},_updateMenuVars : function(obj){for (var i = 0; i < obj.arr.length; i++) {obj.arr[i].vars.idParent = obj.vars.id;}},_getMenuAllot : function(){var allot = function(obj) {var insCurrent = obj.insCurrent;if (obj.from == '_mousedownLine') {insCurrent.allot({insCurrent : insCurrent.insCurrent,from       : '_mousedownLine',vars       : obj.vars.vars.idTarget,varsTarget : obj.vars.vars.idParent});}};return allot;},_mouseoverMenu : function(obj){if (obj.vars.flagNow) {if (obj.vars.varsContext) {var flagNow = this.allot({insCurrent : this.insCurrent,from       : '_mousedownMenu',vars       : obj.vars});var strTitle = '';for (var k = 0; k < obj.vars.varsContext.varsDetail.length; k++) {if (obj.vars.varsContext.varsDetail[k].vars.idTarget == flagNow) {strTitle = obj.vars.varsContext.varsDetail[k].strTitle;}}obj.ele.title = strTitle;}obj.ele.addClassName('codeLibBtnImgMenuOver');$(this.idSelf + obj.vars.id + '_img').addClassName(obj.vars.strClassOver);$(this.idSelf + obj.vars.id + '_title').addClassName('codeLibBtnToolOverTitle');}},_mouseoutMenu : function(obj){if (obj.vars.flagNow) {obj.ele.removeClassName('codeLibBtnImgMenuOver');$(this.idSelf + obj.vars.id + '_img').removeClassName(obj.vars.strClassOver);$(this.idSelf + obj.vars.id + '_title').removeClassName('codeLibBtnToolOverTitle');}},_mouseoverNavi : function(obj){if (obj.vars.flagNow) {$(this.idSelf + obj.vars.id + '_img').addClassName(obj.vars.strClassOver);$(this.idSelf + obj.vars.id + '_title').addClassName('codeLibBtnToolOverTitle');}},_mouseoutNavi : function(obj){if (obj.vars.flagNow) {$(this.idSelf + obj.vars.id + '_img').removeClassName(obj.vars.strClassOver);$(this.idSelf + obj.vars.id + '_title').removeClassName('codeLibBtnToolOverTitle');}}});var Code_Lib_Cake = Class.create({vars : {"varsWhole":{"flag":{"ssl":0,"pending":0},"path":{"cake":"front\/else\/lib\/flash\/cake.swf","pending":"front\/else\/lib\/flash\/pending.swf"},"id":{"pending":"pending","cake":"cake"},"str":{"pending":"\u30ed\u30fc\u30ab\u30eb\u8a18\u61b6\u9818\u57df\u4e0d\u8db3","errorVar":"\u30b7\u30b9\u30c6\u30e0\u30a8\u30e9\u30fc\uff1a\u4e0d\u6b63\u6587\u5b57","errorPending":"\u5bb9\u91cf\u4e0d\u8db3","fail":"\u5931\u6557"}}},initialize : function(obj){this._iniVars(obj);},_pathSelf : null, insRoot : null, insSelf : null, idSelf : null,_iniVars : function(obj){this.insRoot = obj.insRoot;this.insSelf = this;this.idSelf = obj.idSelf;this._pathSelf = obj.pathSelf;},setStorageCake : function(obj){var data = ({value      : obj.value,numExpires : obj.numExpires});var strJson = Object.toJSON(data);this._varsStorage.idReturn = (obj.idReturn)? obj.idReturn : null;var parentKey = obj.parentKey;if (this.insRoot.vars.varsSystem.status) {parentKey = this._getTitleKey({parentKey : obj.parentKey});}this._varsStorage.cakeParentKey = parentKey ;this._varsStorage.cakeValue = strJson;localStorage.setItem(this._varsStorage.cakeParentKey, this._varsStorage.cakeValue);},getStorageCake : function(obj){this._varsStorage.funcReturn = obj.funcReturn;this._varsStorage.insReturn = obj.insReturn;var parentKey = obj.parentKey;if (this.insRoot.vars.varsSystem.status) {parentKey = this._getTitleKey({parentKey : obj.parentKey});}var data = localStorage.getItem(parentKey);this.checkStorageCake([data]);},checkStorageCake : function(obj){if(obj[0] != null) {var data = this._getStorageCakeData({jsonData : obj[0],insTimeZone : this.insRoot.insTimeZone});this._varsStorage.funcReturn({data      : data,insReturn : this._varsStorage.insReturn});} else {this._varsStorage.funcReturn({data      : '',insReturn : this._varsStorage.insReturn});}},_varsStorage : {id : 'externalstorage',allowScriptAccess : 'sameDomain',numWidth : 1,numHeight : 1,cakeParentKey : null,cakeKey : null,idReturn : null,insLock : null,funcReturn : null ,insReturn : null,flagNumSort : 0},_getStorageCakeData: function(obj){var objData = (obj.jsonData).evalJSON();var stampLimit = parseFloat(objData.numExpires);if(stampLimit){var objTime = obj.insTimeZone.adjustTime({stamp : new Date().getTime()});if( stampLimit < objTime.stamp ) return ''}return objData.value;},removeStorageCake : function(obj){var parentKey = obj.parentKey;if (this.insRoot.vars.varsSystem.status) {parentKey = this._getTitleKey({parentKey : obj.parentKey});}localStorage.setItem(parentKey, '');},_getTitleKey : function(obj){var strUrl = document.URL;var arr = strUrl.split('/');var strKey = arr.join('') + '_' + this.insRoot.vars.varsSystem.status.idAccount + '_' + obj.parentKey;return strKey;},removeStorageAllCake : function(){localStorage.clear();}});var Code_Lib_Calender = Class.create(Code_Lib_ExtLib,{initialize : function(obj){this._extAllot(obj);this._iniVars(obj);this._iniListener();this._iniWrap();this._iniVar();this._iniTemplate();},iniReload : function(){this.stopListener();$(this.idSelf).remove();this._iniWrap();this._iniVar();this._iniTemplate();},_iniListener : function(){this._extListener();},_iniVars : function(obj){var insLoad = new Code_Lib_CalenderVars();this.varsLoad = insLoad.iniLoad();this._extVars(obj);this.insTimeZone = this.insRoot.insTimeZone;this._setVars();},_setVars : function(){var cut = this.vars.varsStatus;var objTime = this.insTimeZone.adjustTime({stamp : new Date().getTime()});if (cut.flagMainUse && cut.flagMainAutoUse) cut.stampMain = objTime.stamp;if (cut.flagMaxUse && cut.flagMaxAutoUse) cut.stampMax = objTime.stamp;if (cut.flagMinUse && cut.flagMinAutoUse) cut.stampMin = objTime.stamp;if (cut.flagMainUse && cut.flagMaxUse && cut.stampMax < cut.stampMain) cut.stampMain = cut.stampMax;if (cut.flagMainUse && cut.flagMinUse && cut.stampMin > cut.stampMain) cut.stampMain = cut.stampMin;},eleWrap : null, eleWrapInsert : null,_staticWrap : {numHeight : 200, numWidth : 213, templateHeight : 6, templateWidth : 6},_iniWrap : function(){this._setWrap();},_setWrap : function(){var eleWrap = $(document.createElement('div'));eleWrap.id = this.idSelf;eleWrap.addClassName('codeLibCalenderWrap');this.eleInsert.insert(eleWrap);var insTemplate = new Code_Lib_Template();var dataSha = insTemplate.get({flagType  : 'menuBox',numWidth  : this._staticWrap.numWidth,numHeight : this._staticWrap.numHeight,id        : ''});eleWrap.insert(dataSha);var dataNor = insTemplate.get({flagType  : 'normalBox',numWidth  : this._staticWrap.numWidth - this._staticWrap.templateWidth,numHeight : this._staticWrap.numHeight - this._staticWrap.templateHeight,id        : ''});eleWrap.setStyle({position : 'absolute',zIndex   : this.insRoot.setZIndex(),left     : this.vars.varsStatus.numLeft + 'px',top      : this.vars.varsStatus.numTop + 'px'});eleWrap.down('.codeLibTemplateMenuBoxMiddleMiddle', 0).insert(dataNor);eleWrap.down('.codeLibTemplateNormalBoxMiddleMiddle', 0).addClassName('codeLibBaseBgFff');this.eleWrapInsert = eleWrap.down('.codeLibTemplateNormalBoxMiddleMiddle', 0);this.eleWrap = eleWrap;},removeWrap : function(){this.stopListener();$(this.idSelf).remove();},_iniVar : function(obj){this._setVarTime();this._setVar();},_varsVarTime : null,_setVarTime : function(){this._varsVarTime = {now   : this.insTimeZone.adjustTime({stamp : new Date().getTime()}),point : this._setVarTimePoint(),main  : this._setVarTime_({str : 'Main'}),max   : this._setVarTime_({str : 'Max'}),min   : this._setVarTime_({str : 'Min'})};},_setVarTimePoint : function(obj){var objTime = null;if (this.vars.varsStatus.stampPoint) {objTime = this.insTimeZone.adjustDate({stamp : this.vars.varsStatus.stampPoint});}return objTime;},_setVarTime_ : function(obj){var objTime = null;if (this.vars.varsStatus['flag' + obj.str + 'Use']) {objTime = this.insTimeZone.adjustDate({stamp : this.vars.varsStatus['stamp' + obj.str]});}return objTime;},_varsVar : null,_setVar : function(){var year = this._varsVarTime.main.numYear;var month = this._varsVarTime.main.numMonth;var date = this._varsVarTime.main.numDate;this._varsVar = {strMain : this._getVarMain({year : year, month : month}),flagMonthPrev : this._getVarMonthPrevFlag({year : year, month : month}),flagMonthNext : this._getVarMonthNextFlag({year : year, month : month}),flagYearPrev : this._getVarYearPrevFlag({year : year, month : month}),flagYearNext : this._getVarYearNextFlag({year : year, month : month}),monthPrev : this._getVarMonthPrev({year : year, month : month}),monthNext : this._getVarMonthNext({year : year, month : month}),yearPrev : this._getVarYearPrev({year : year}),yearNext : this._getVarYearNext({year : year}),prev : [],main : [],next : [],flagDatePoint : 0,flagDateNow   : 0,objTimeMain   : [],flagActive    : [],flagSunday    : [],flagHoliday         : [],flagHolidayTransfer : []};this._getVarDate({year  : year,month : month,date  : date});},_getVarMain : function(obj){var year = obj.year;var month = obj.month;month++;var str = year + '/' + month;return str;},_getVarMonthNextFlag : function(obj){if (this.vars.varsStatus.flagMaxUse) {var year = obj.year;var month = obj.month;month++;if (month == 12) {month = 0;year++;}var objTime = this.insTimeZone.adjustTime({stamp : new Date(year, month ,1).getTime()});if (this._varsVarTime.max.stamp >= objTime.stamp) return 1;else return 0;} else return 1;},_getVarMonthPrevFlag : function(obj){if (this.vars.varsStatus.flagMinUse) {var year = obj.year;var month = obj.month;month--;if (month == -1) {month = 11;year--;}var objTime = this.insTimeZone.adjustTime({stamp : new Date(year, month ,1).getTime()});if (this._varsVarTime.min.stamp <= objTime.stamp) return 1;else return 0;}else return 1;},_getVarYearNextFlag : function(obj){if (this.vars.varsStatus.flagMaxUse) {var year = obj.year;var month = obj.month;year++;var objTime = this.insTimeZone.adjustTime({stamp : new Date(year, month ,1).getTime()});if (this._varsVarTime.max.stamp >= objTime.stamp) return 1;else return 0;} else return 1;},_getVarYearPrevFlag : function(obj){if (this.vars.varsStatus.flagMinUse) {var year = obj.year;var month = obj.month;year--;var objTime = this.insTimeZone.adjustTime({stamp : new Date(year, month ,1).getTime()});if (this._varsVarTime.min.stamp <= objTime.stamp) return 1;else return 0;} else return 1;},_getVarYearNext : function(obj){var year = obj.year;year++;return year;},_getVarYearPrev : function(obj){var year = obj.year;year--;return year;},_getVarMonthNext : function(obj){var year = obj.year;var month = obj.month;month++;if (month == 12) month = 0;return {displayMonth : month+1,varMonth     : month};},_getVarMonthPrev : function(obj){var year = obj.year;var month = obj.month;month--;if (month == -1) month = 11;return {displayMonth : month+1,varMonth     : month};},_getVarDate : function(obj){var year = obj.year;var month = obj.month;var date = obj.date;var objTime = this.insTimeZone.adjustTime({stamp : new Date(year, month ,1).getTime()});var prevSpan = objTime.numDay;objTime = this.insTimeZone.adjustTime({stamp : new Date(year, month , 1 - 1).getTime()});var prevStart = objTime.numDate - prevSpan;objTime = this.insTimeZone.adjustTime({stamp : new Date(year, month + 1 , 1 - 1).getTime()});var mainSpan = objTime.numDate;var i = 0;var p = 0;var num = prevStart;for (i = 1; i <= prevSpan; i++) {num++;if (num >= 7) {p++;}this._varsVar.prev.push(num);}var insCheck = new Code_Lib_CheckTime();var str = this.insRoot.vars.varsSystem.status.strHoliday;var arrayHoliday = [];if (this.varsLoad.varsHoliday[str]) {arrayHoliday = this.varsLoad.varsHoliday[str].varsDetail;}var cut = this._varsVarTime.now;var cutPoint = this._varsVarTime.point;for (var j = 1; j <= mainSpan; j++, i++) {objTime = this.insTimeZone.adjustTime({stamp : new Date(year, month ,j).getTime()});var objStartWrap = (Object.toJSON(objTime)).evalJSON();var objEndWrap = this.insTimeZone.adjustTime({stamp : new Date(year, month , j + 1).getTime()});var flagHoliday = 0;for (k = 0; k < arrayHoliday.length; k++) {var str = arrayHoliday[k].flagType;var strFunc = 'get' + str.capitalize();if (str == 'term') {arrayHoliday[k][str].stampWrapStart = objStartWrap.stamp;arrayHoliday[k][str].stampWrapEnd = objEndWrap.stamp;flagHoliday = insCheck[strFunc](arrayHoliday[k][str]);} else if (str == 'loop') {arrayHoliday[k][str].objStartWrap = objStartWrap;arrayHoliday[k][str].objEndWrap = objEndWrap;arrayHoliday[k][str].insTimeZone = this.insTimeZone;}flagHoliday = insCheck[strFunc](arrayHoliday[k][str]);if (flagHoliday) break;}if (flagHoliday) this._varsVar.flagHoliday.push(arrayHoliday[k]);else this._varsVar.flagHoliday.push(0);this._varsVar.flagHolidayTransfer.push(0);if (objTime.numDay == 0) this._varsVar.flagSunday.push(1);else this._varsVar.flagSunday.push(0);if (objTime.numYear == cut.numYear && objTime.numMonth == cut.numMonth && objTime.numDate == cut.numDate) {this._varsVar.flagDateNow = j;}if (this.vars.varsStatus.stampPoint) {if (objTime.numYear == cutPoint.numYear&& objTime.numMonth == cutPoint.numMonth&& objTime.numDate == cutPoint.numDate) {this._varsVar.flagDatePoint = j;}}this._varsVar.main.push(j);if (this.vars.varsStatus.flagMaxUse && this.vars.varsStatus.flagMinUse) {if (this._varsVarTime.min.stamp <= objTime.stamp && objTime.stamp <= this._varsVarTime.max.stamp) {this._varsVar.flagActive.push(1);} else {this._varsVar.flagActive.push(0);}} else if (this.vars.varsStatus.flagMaxUse) {if (objTime.stamp <= this._varsVarTime.max.stamp) {this._varsVar.flagActive.push(1);} else {this._varsVar.flagActive.push(0);}} else if (this.vars.varsStatus.flagMinUse) {if (objTime.stamp >= this._varsVarTime.min.stamp) {this._varsVar.flagActive.push(1);} else {this._varsVar.flagActive.push(0);}} else {this._varsVar.flagActive.push(1);}this._varsVar.objTimeMain.push(objTime);}if (this.insRoot.vars.varsSystem.status.strHoliday == 'jp') {for (var j = 0; j <= mainSpan + 1; j++) {if (this._varsVar.flagHoliday[j] && this._varsVar.flagSunday[j]) {var num = this._checkVarHolidayTransfer({allNum     : mainSpan,arrHoliday : this._varsVar.flagHoliday,arrSunday  : this._varsVar.flagSunday,num        : j + 1});this._varsVar.flagHolidayTransfer[num] = 1;}}}for (var j = 1; i <= 42; j++, i++) {this._varsVar.next.push(j);}},_checkVarHolidayTransfer : function(obj){for (var i = obj.num; i < obj.allNum; i++) {if (obj.arrHoliday[i] || obj.arrSunday[i]) continue;return i;}},_staticTemplate : {numPadding : 1,numMargin  : 3,numYear    : 26,numMonth   : 36,numMain    : 64,bgColor    : '#eee'},_iniTemplate : function(){this._templatePrevYear();this._templatePrevMonth();this._templateMainMonth();this._templateNextMonth();this._templateNextYear();this._templateWeek({arr : this.varsLoad.varsWhole.week});this._templatePrevDate({arr : this._varsVar.prev});this._templateMainDate({arr : this._varsVar.main});this._templateNextDate({arr : this._varsVar.next});},_templatePrevYear : function(){var strTitle = '';if (this._varsVar.flagYearPrev) {strTitle = this.varsLoad.varsWhole.str.prevYear;var insBtn = new Code_Lib_Btn();insBtn.iniBtn({eleInsert  : this.eleWrapInsert,id         : this.idSelf + 'PrevYear',strFunc    : '_mousedownPrevYear',strTitle   : strTitle,numWidth   : this._staticTemplate.numYear,strClass   : 'codeLibCalenderImgDoubleLeftWhite',insCurrent : this.insSelf,vars       : ''});this._setListener({ins : insBtn});$(this.idSelf + 'PrevYear').down('.codeLibBtnMiddle',0).setStyle({paddingTop : this._staticTemplate.numPadding + 'px',paddingBottom : this._staticTemplate.numPadding + 'px'});} else {var insTemplate = new Code_Lib_Template();var ele = insTemplate.get({flagType : 'circleBox',id       : this.idSelf + 'PrevYear',bgColor  : this._staticTemplate.bgColor,strTitle : strTitle,numWidth : this._staticTemplate.numYear,strClass : 'codeLibCalenderImgDoubleLeftWhite'});this.eleWrapInsert.insert(ele);$(this.idSelf + 'PrevYear').down('.codeLibTemplateCircleBoxMiddle',0).setStyle({paddingTop    : this._staticTemplate.numPadding + 'px',paddingBottom : this._staticTemplate.numPadding + 'px'});}$(this.idSelf + 'PrevYear').setStyle({marginTop  : this._staticTemplate.numMargin + 'px',marginLeft : this._staticTemplate.numMargin + 'px',});},_mousedownPrevYear : function(){var year = this._varsVarTime.main.numYear;var month = this._varsVarTime.main.numMonth;year--;var objTime = this.insTimeZone.adjustTime({stamp : new Date(year, month ,1).getTime()});this.vars.varsStatus.stampMain = objTime.stamp;this.iniReload();},_templatePrevMonth : function(){var strTitle = '';if (this._varsVar.flagMonthPrev) {strTitle = this.varsLoad.varsWhole.str.prevMonth;var insBtn = new Code_Lib_Btn();insBtn.iniBtn({eleInsert  : this.eleWrapInsert,id         : this.idSelf + 'PrevMonth',strFunc    : '_mousedownPrevMonth',strTitle   : strTitle,numWidth   : this._staticTemplate.numMonth,strClass   : 'codeLibCalenderImgSingleLeftWhite',insCurrent : this.insSelf,vars   : ''});this._setListener({ins : insBtn});$(this.idSelf + 'PrevMonth').down('.codeLibBtnMiddle',0).setStyle({paddingTop    : this._staticTemplate.numPadding + 'px',paddingBottom : this._staticTemplate.numPadding + 'px'});} else {var insTemplate = new Code_Lib_Template();var ele = insTemplate.get({flagType : 'circleBox',id       : this.idSelf + 'PrevMonth',bgColor  : this._staticTemplate.bgColor,strTitle : strTitle,numWidth : this._staticTemplate.numMonth,strClass : 'codeLibCalenderImgSingleLeftWhite'});this.eleWrapInsert.insert(ele);$(this.idSelf + 'PrevMonth').down('.codeLibTemplateCircleBoxMiddle',0).setStyle({paddingTop    : this._staticTemplate.numPadding + 'px',paddingBottom : this._staticTemplate.numPadding + 'px'});}$(this.idSelf + 'PrevMonth').setStyle({marginTop  : this._staticTemplate.numMargin + 'px',marginLeft : this._staticTemplate.numMargin + 'px',});},_mousedownPrevMonth : function(){var year = this._varsVarTime.main.numYear;var month = this._varsVarTime.main.numMonth;month--;if (month == -1) {year--;month = 11;}var objTime = this.insTimeZone.adjustTime({stamp : new Date(year, month ,1).getTime()});this.vars.varsStatus.stampMain = objTime.stamp;this.iniReload();},_templateNextMonth : function(){var strTitle = '';if (this._varsVar.flagMonthNext) {strTitle = this.varsLoad.varsWhole.str.nextMonth;var insBtn = new Code_Lib_Btn();insBtn.iniBtn({eleInsert  : this.eleWrapInsert,id         : this.idSelf + 'NextMonth',strFunc    : '_mousedownNextMonth',strTitle   : strTitle,numWidth      : this._staticTemplate.numMonth,strClass   : 'codeLibCalenderImgSingleRightWhite',insCurrent : this.insSelf,vars   : ''});this._setListener({ins : insBtn});$(this.idSelf + 'NextMonth').down('.codeLibBtnMiddle',0).setStyle({paddingTop    : this._staticTemplate.numPadding + 'px',paddingBottom : this._staticTemplate.numPadding + 'px'});} else {var insTemplate = new Code_Lib_Template();var ele = insTemplate.get({flagType    : 'circleBox',id          : this.idSelf + 'NextMonth',bgColor     : this._staticTemplate.bgColor,strTitle    : strTitle,numWidth    : this._staticTemplate.numMonth,strClass    : 'codeLibCalenderImgSingleRightWhite'});this.eleWrapInsert.insert(ele);$(this.idSelf + 'NextMonth').down('.codeLibTemplateCircleBoxMiddle',0).setStyle({paddingTop    : this._staticTemplate.numPadding + 'px',paddingBottom : this._staticTemplate.numPadding + 'px'});}$(this.idSelf + 'NextMonth').setStyle({marginTop  : this._staticTemplate.numMargin + 'px',marginLeft : this._staticTemplate.numMargin + 'px',});},_mousedownNextMonth : function(){var year = this._varsVarTime.main.numYear;var month = this._varsVarTime.main.numMonth;month++;if (month == 12) {year++;month = 0;}var objTime = this.insTimeZone.adjustTime({stamp : new Date(year, month ,1).getTime()});this.vars.varsStatus.stampMain = objTime.stamp;this.iniReload();},_templateNextYear : function(){var strTitle = '';if (this._varsVar.flagYearNext) {strTitle = this.varsLoad.varsWhole.str.nextYear;var insBtn = new Code_Lib_Btn();insBtn.iniBtn({eleInsert  : this.eleWrapInsert,id         : this.idSelf + 'NextYear',strFunc    : '_mousedownNextYear',strTitle   : strTitle,numWidth   : this._staticTemplate.numYear,strClass   : 'codeLibCalenderImgDoubleRightWhite',insCurrent : this.insSelf,vars       : ''});this._setListener({ins : insBtn});$(this.idSelf + 'NextYear').down('.codeLibBtnMiddle',0).setStyle({paddingTop    : this._staticTemplate.numPadding + 'px',paddingBottom : this._staticTemplate.numPadding + 'px'});} else {var insTemplate = new Code_Lib_Template();var ele = insTemplate.get({flagType : 'circleBox',id       : this.idSelf + 'NextYear',bgColor  : this._staticTemplate.bgColor,strTitle : strTitle,numWidth : this._staticTemplate.numYear,strClass : 'codeLibCalenderImgDoubleRightWhite'});this.eleWrapInsert.insert(ele);$(this.idSelf + 'NextYear').down('.codeLibTemplateCircleBoxMiddle',0).setStyle({paddingTop    : this._staticTemplate.numPadding + 'px',paddingBottom : this._staticTemplate.numPadding + 'px'});}$(this.idSelf + 'NextYear').setStyle({marginTop  : this._staticTemplate.numMargin + 'px',marginLeft : this._staticTemplate.numMargin + 'px',});},_mousedownNextYear : function() {var year = this._varsVarTime.main.numYear;var month = this._varsVarTime.main.numMonth;year++;var objTime = this.insTimeZone.adjustTime({stamp : new Date(year, month ,1).getTime()});this.vars.varsStatus.stampMain = objTime.stamp;this.iniReload();},_templateMainMonth : function(){var strTitle = this.varsLoad.varsWhole.str.prevMonth;var insBtn = new Code_Lib_Btn();insBtn.iniBtn({eleInsert  : this.eleWrapInsert,id         : this.idSelf + 'MainMonth',strFunc    : '_mousedownMainMonth',strTitle   : this._varsVar.strMain,numWidth   : this._staticTemplate.numMain,insCurrent : this.insSelf,vars   : ''});this._setListener({ins : insBtn});$(this.idSelf + 'MainMonth').setStyle({marginTop : this._staticTemplate.numMargin + 'px',marginLeft : this._staticTemplate.numMargin + 'px',});},_mousedownMainMonth : function(){this.vars.varsStatus.stampMain = this._varsVarTime.now.stamp;this.iniReload();},_templateWeek : function(obj){for (var i = 0; i < obj.arr.length; i++) {var ele = $(document.createElement('span'));ele.addClassName('codeLibCalenderBox');ele.addClassName('codeLibBaseCursorDefault');if (!i) ele.addClassName('codeLibBaseFontRed');ele.insert(obj.arr[i]);this.eleWrapInsert.insert(ele);}},_templatePrevDate : function(obj){var id = this.idSelf + 'PrevDate';for (var i = 0; i < obj.arr.length; i++) {var ele = $(document.createElement('span'));ele.id = id + obj.arr[i];ele.unselectable = 'on';ele.addClassName('unselect');ele.addClassName('codeLibBaseCursorDefault');ele.addClassName('codeLibCalenderBox');ele.addClassName('codeLibBaseFontCcc');ele.insert(obj.arr[i]);this.eleWrapInsert.insert(ele);}},_templateMainDate : function(obj){var id = this.idSelf + 'MainDate';for (var i = 0; i < obj.arr.length; i++) {var ele = $(document.createElement('span'));ele.id = id + obj.arr[i];ele.unselectable = 'on';ele.addClassName('unselect');if (this._varsVar.flagActive[i]) {ele.addClassName('codeLibBaseCursorPointer');ele.addClassName('codeLibCalenderBox');if (this._varsVar.flagSunday[i] || this._varsVar.flagHoliday[i]) {ele.addClassName('codeLibBaseFontRed');} else if (this._varsVar.flagHolidayTransfer[i]) {ele.addClassName('codeLibBaseFontRed');}if (this._varsVar.flagSunday[i]) ele.addClassName('codeLibBaseFontRed');this._templateMainDateListener({ele        : ele,objTime    : this._varsVar.objTimeMain[i],flagSunday : this._varsVar.flagSunday[i]});} else {ele.addClassName('codeLibCalenderBox');ele.addClassName('codeLibBaseFontCcc');}if (this._varsVar.flagDateNow == obj.arr[i]) ele.addClassName('codeLibCalenderBoxNow');if (this._varsVar.flagDatePoint == obj.arr[i]) ele.addClassName('codeLibCalenderBoxPoint');ele.insert(obj.arr[i]);this.eleWrapInsert.insert(ele);}},_templateMainDateListener : function(obj){this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'mousedown', strFunc : '_mousedownDate', ele : obj.ele, vars : {vars : obj}});this.insListener.set({bindAsEvent : 0, insCurrent : this, event : 'mouseover', strFunc : '_mouseoverDate',ele : obj.ele, vars : {vars : obj}});this.insListener.set({bindAsEvent : 0, insCurrent : this, event : 'mouseout', strFunc : '_mouseoutDate',ele : obj.ele, vars : {vars : obj}});},_templateNextDate : function(obj){var id = this.idSelf + 'NextDate';for (var i = 0; i < obj.arr.length; i++) {var ele = $(document.createElement('span'));ele.id = id + obj.arr[i];ele.unselectable = 'on';ele.addClassName('unselect');ele.addClassName('codeLibBaseCursorDefault');ele.addClassName('codeLibCalenderBox');ele.addClassName('codeLibBaseFontCcc');ele.insert(obj.arr[i]);this.eleWrapInsert.insert(ele);}},_mousedownDate : function(evt,obj){evt.stop();$(obj.vars.ele).addClassName('codeLibCalenderBoxOver');this.allot({insCurrent : this.insCurrent,from       : '_mousedownDate',objTime    : obj.vars.objTime});},_mouseoverDate : function(obj){$(obj.vars.ele).addClassName('codeLibCalenderBoxOver');},_mouseoutDate : function(obj){$(obj.vars.ele).removeClassName('codeLibCalenderBoxOver');}});var Code_Lib_CalenderFormNavi = Class.create(Code_Lib_ExtLib,{initialize : function(obj){this._extAllot(obj);this._iniVars(obj);this._iniListener();this._iniTemplate();},_iniVars : function(obj){this._extVars(obj);this.insTimeZone = this.insRoot.insTimeZone;},_iniTemplate : function(){this._setTemplateListener();},_setTemplateListener : function(){this.insListener.set({ flagType15 : 1, bindAsEvent : 1, insCurrent : this, event : 'focus',strFunc : '_focusCheck',ele : this.eleInsert, vars : '' });this.insListener.set({ flagType15 : 1, bindAsEvent : 1, insCurrent : this, event : 'blur',strFunc : '_blurCheck', ele : this.eleInsert, vars : '' });},removeWrap : function(){this.stopListener();},_focusCheck : function(obj,evt){if (obj) evt.stop();else obj = evt;if ($(this.idSelf + 'Calender')) return;this._iniCalender();},_blurCheck : function(obj,evt){if (obj) evt.stop();else obj = evt;this._valueCheck();if (!$(this.idSelf + 'Calender')) return;this.insCalender.removeWrap();this.allot({from       : '_blurCheck',insCurrent : this,vars       : this.eleInsert.value});},_valueCheck : function(){var insCheck = new Code_Lib_CheckValue();var flag = 0;if (this.vars.varsStatus.flagFormatCheck) {flag = insCheck.checkValueFormat({flagType  : this.vars.varsStatus.flagFormatCheck,flagArray : 0,value     : this.eleInsert.value});} else {flag = insCheck.checkValueFormat({flagType  : 'date',flagArray : 0,value     : this.eleInsert.value});}if (flag) this._resetValue();},_staticCalender : {numTop : 21, numLeft : 3},insCalender : null,_iniCalender : function(){this._varCalender();this.insCalender = new Code_Lib_Calender({eleInsert  : this.eleInsert.up('.codeLibWindow', 0),idRoot     : this.insRoot.vars.varsSystem.id.root,insRoot    : this.insRoot,insCurrent : this.insSelf,idSelf     : this.idSelf + 'Calender',allot      : this._getCalenderAllot(),vars       : this.vars});this._setListener({ins : this.insCalender});},_getCalenderAllot : function(){var allot = function(obj){var insCurrent = obj.insCurrent;if (obj.from == '_mousedownDate') {insCurrent.insCalender.removeWrap();insCurrent._iniValue({objTime : obj.objTime});insCurrent.allot({from       : obj.from,insCurrent : insCurrent.insCurrent,vars       : insCurrent.eleInsert.value});}};return allot;},_varCalender : function(){var eleScroll = this.eleInsert.up('.codeLibTemplateNormalFormatBody', 0);var numLeft = eleScroll.scrollLeft;var numTop = eleScroll.scrollTop;this.vars.varsStatus.numLeft = this.eleInsert.offsetLeft- numLeft- this._staticCalender.numLeft;this.vars.varsStatus.numTop = this.eleInsert.offsetTop- numTop+ this._staticCalender.numTop;},_varsValue : null,_iniValue : function(obj){this._setValue({objTime : obj.objTime});},_resetValue : function(){this.eleInsert.value = '';},_setValue : function(obj){var objTime = obj.objTime;var insDisplay = new Code_Lib_TimeDisplay();if (this.vars.varsStatus.flagFormatDisplay) {this.eleInsert.value = insDisplay.get({flagType : this.vars.varsStatus.flagFormatDisplay, vars : objTime});} else {this.eleInsert.value = insDisplay.get({flagType : 4, vars : objTime});}this._varsValue = objTime;},_iniListener : function(){this._extListener();}});var Code_Lib_CalenderFormNum = Class.create(Code_Lib_ExtLib,{initialize : function(obj){this._extAllot(obj);this._iniVars(obj);this._iniListener();this._iniWrap();this._iniVarsDetail();this._iniForm();},iniReload : function(){this.allot({insCurrent : this.insCurrent,from       : 'preIniReload'});this.stopListener();this.removeWrap();this._iniWrap();this._iniVarsDetail();this._iniForm();this.allot({insCurrent : this.insCurrent,from       : 'afterIniReload'});},_iniListener : function(){this._extListener();},_iniVars : function(obj){var insLoad = new Code_Lib_CalenderVars();this.varsLoad = insLoad.iniLoad();this._extVars(obj);this.insTimeZone = this.insRoot.insTimeZone;this._setVars();},_setVars : function(){var cut = this.vars.varsStatus;var objTime = this.insTimeZone.adjustTime({stamp : new Date().getTime()});if (cut.flagMainUse && cut.flagMainAutoUse) cut.stampMain = objTime.stamp;if (cut.flagMaxUse && cut.flagMaxAutoUse) cut.stampMax = objTime.stamp;if (cut.flagMinUse && cut.flagMinAutoUse) cut.stampMin = objTime.stamp;if (cut.flagMainUse && cut.flagMaxUse && cut.stampMax < cut.stampMain) cut.stampMain = cut.stampMax;if (cut.flagMainUse && cut.flagMinUse && cut.stampMin > cut.stampMain) cut.stampMain = cut.stampMin;},_varsWrapWidth : 0,_staticWrap : {numBar : 17, numMargin : 5, numMarginHour : 20},_iniWrap : function(){this._varsWrapWidth = 0;var ele = $(document.createElement('form'));ele.id = this.idSelf;this.eleInsert.insert(ele);this.eleWrap = ele;this.eleWrap.addClassName('codeLibCalenderFormNumWrap');this.eleWrap.setStyle({width  : (this._getWrapWidth() + this._staticWrap.numMargin * 4 + this._staticWrap.numMarginHour) + 'px'});},_getWrapWidth : function(){var array = this.eleInsert.style.width.split('px');var numWidthWrap = parseFloat(array[0]);var numWidth = numWidthWrap - this._staticWrap.numBar - this._staticWrap.numMargin * 4 - this._staticWrap.numMarginHour;if (!this._varsWrapWidth) {this._varsWrapWidth = numWidth;return numWidth;} else {return this._varsWrapWidth;}},_iniVarsDetail : function(obj){this._setVarsDetailTime();this._setVarsDetail();},_varsDetailTime : null,_setVarsDetailTime : function(){this._varsDetailTime = {now   : this.insTimeZone.adjustTime({stamp : new Date().getTime()}),main  : this._setVarsDetailTime_({str : 'Main'}),max   : this._setVarsDetailTime_({str : 'Max'}),min   : this._setVarsDetailTime_({str : 'Min'})};},_setVarsDetailTime_ : function(obj){var objTime = null;if (this.vars.varsStatus['flag' + obj.str + 'Use']) {objTime = this.insTimeZone.adjustDate({stamp : this.vars.varsStatus['stamp' + obj.str]});}return objTime;},_varsDetail : null,_setVarsDetail : function(){this._varsDetail = [this._getVarsDetailYear(),this._getVarsDetailMonth(),this._getVarsDetailDate(),this._getVarsDetailHour(),this._getVarsDetailMin()];},_getVarsDetailYear : function(){var numMax = this._varsDetailTime.max.numYear;var numMin = this._varsDetailTime.min.numYear;var arrayOption = [];for (i = numMin; i <= numMax; i++) {var data = {};data.strTitle = i + this.varsLoad.varsWhole.str.year;data.value = i;arrayOption.push(data);}var numWidth = Math.floor(this._getWrapWidth() * 0.32);var datas = {id          : 'Year',numWidth    : numWidth,arrayOption : arrayOption,value       : this._varsDetailTime.main.numYear};return datas;},_getVarsDetailMonth : function(){var insCheck = new Code_Lib_CheckTime();var numMax = 12;var numMin = 1;var arrayOption = [];for (i = numMin; i <= numMax; i++) {var numYear = this._varsDetailTime.main.numYear;var numMonth = i - 1;var objStart = this.insTimeZone.adjustTime({stamp : new Date(numYear, numMonth , 1).getTime()});var objEnd = this.insTimeZone.adjustTime({stamp : new Date(numYear, numMonth + 1 , 1).getTime()});var flag = insCheck.getTerm({stampStart     : objStart.stamp,stampEnd       : objEnd.stamp,stampWrapStart : this._varsDetailTime.min.stamp,stampWrapEnd   : this._varsDetailTime.max.stamp});if (!flag) continue;var data = {};var strTitle = i + this.varsLoad.varsWhole.str.month;data.strTitle = (i < 10)? '0' + strTitle : strTitle;data.value = i;arrayOption.push(data);}var numWidth = Math.floor(this._getWrapWidth() * 0.17);var datas = {id          : 'Month',numWidth    : numWidth,arrayOption : arrayOption,value       : this._varsDetailTime.main.numMonth + 1};return datas;},_getVarsDetailDate : function(){var insCheck = new Code_Lib_CheckTime();var objTime = this.insTimeZone.adjustTime({stamp : new Date(this._varsDetailTime.main.numYear, this._varsDetailTime.main.numMonth + 1 , 1 - 1).getTime()});var numMax = objTime.numDate;var numMin = 1;var arrayOption = [];for (i = numMin; i <= numMax; i++) {var numYear = this._varsDetailTime.main.numYear;var numMonth = this._varsDetailTime.main.numMonth;var numDate = i;var objStart = this.insTimeZone.adjustTime({stamp : new Date(numYear, numMonth , numDate).getTime()});var objEnd = this.insTimeZone.adjustTime({stamp : new Date(numYear, numMonth, numDate + 1).getTime()});var flag = insCheck.getTerm({stampStart     : objStart.stamp,stampEnd       : objEnd.stamp,stampWrapStart : this._varsDetailTime.min.stamp,stampWrapEnd   : this._varsDetailTime.max.stamp});if (!flag) continue;var data = {};var strTitle = i + this.varsLoad.varsWhole.str.date;data.strTitle = (i < 10)? '0' + strTitle : strTitle;data.value = i;arrayOption.push(data);}var numWidth = Math.floor(this._getWrapWidth() * 0.17);var datas = {id          : 'Date',numWidth    : numWidth,arrayOption : arrayOption,value       : this._varsDetailTime.main.numDate};return datas;},_getVarsDetailHour : function(){var insCheck = new Code_Lib_CheckTime();var numMax = 23;var numMin = 0;var arrayOption = [];for (i = numMin; i <= numMax; i++) {var numYear = this._varsDetailTime.main.numYear;var numMonth = this._varsDetailTime.main.numMonth;var numDate = this._varsDetailTime.main.numDate;var objStart = this.insTimeZone.adjustTime({stamp : new Date(numYear, numMonth , numDate).getTime()});objStart.stamp += i * 3600 * 1000;var objEnd = this.insTimeZone.adjustTime({stamp : new Date(numYear, numMonth, numDate).getTime()});objEnd.stamp += (i + 1) * 3600 * 1000;var flag = insCheck.getTerm({stampStart     : objStart.stamp,stampEnd       : objEnd.stamp,stampWrapStart : this._varsDetailTime.min.stamp,stampWrapEnd   : this._varsDetailTime.max.stamp});if (!flag) continue;var data = {};var strTitle = i + this.varsLoad.varsWhole.str.hour;data.strTitle = (i < 10)? '0' + strTitle : strTitle;data.value = i;arrayOption.push(data);}var numWidth = Math.floor(this._getWrapWidth() * 0.17);var datas = {id          : 'Hour',numWidth    : numWidth,arrayOption : arrayOption,value       : this._varsDetailTime.main.numHour};return datas;},_getVarsDetailMin : function(){var numMax = 59;var numMin = 0;var arrayOption = [];for (i = numMin; i <= numMax; i++) {var data = {};var strTitle = i + this.varsLoad.varsWhole.str.min;data.strTitle = (i < 10)? '0' + strTitle : strTitle;data.value = i;arrayOption.push(data);}var numWidth = Math.floor(this._getWrapWidth() * 0.17);var datas = {id          : 'Min',numWidth    : numWidth,arrayOption : arrayOption,value       : this._varsDetailTime.main.numMin};return datas;},_iniForm : function(){this._setForm({arr : this._varsDetail});this._setFormValue({arr : this._varsDetail});},_setForm : function(obj){for (var i = 0; i < obj.arr.length; i++) {var eleTag = $(document.createElement('select'));this.eleWrap.insert(eleTag);if (obj.arr[i].id == 'Date') eleTag.addClassName('codeLibCalenderFormNumTagHour');else eleTag.addClassName('codeLibCalenderFormNumTag');eleTag.id = this.idSelf + 'Tag' + obj.arr[i].id;eleTag.style.width = obj.arr[i].numWidth + 'px';eleTag.value = obj.arr[i].value;this._setFormSelect({arr       : obj.arr[i].arrayOption,now       : obj.arr[i].value,eleInsert : eleTag});this.insListener.set({bindAsEvent : 0, insCurrent : this, event : 'change', strFunc : 'changeForm',ele : eleTag, vars : {vars : obj.arr[i]}});}},_setFormValue : function(obj){alert((Object.toJSON(this.vars.varsDetail)));for (var i = 0; i < obj.arr.length; i++) {var str = 'num' + obj.arr[i].id;this.vars.varsDetail[str] = $(this.idSelf + 'Tag' + obj.arr[i].id).value;}alert((Object.toJSON(this.vars.varsDetail)));var objTime = this.insTimeZone.adjustTime({stamp : new Date(this.vars.varsDetail.numYear, this.vars.varsDetail.numMonth - 1, this.vars.varsDetail.numDate).getTime() + this.vars.varsDetail.numHour * 3600 * 1000 + this.vars.varsDetail.numMin * 60 * 1000});this.vars.varsDetail.stamp = objTime.stampServer;},getValue : function(){var data = (Object.toJSON(this.vars.varsDetail)).evalJSON();return data;},getValueJson : function(){var data = Object.toJSON(this.vars.varsDetail);return data;},changeForm : function(obj){this._setFormValue({arr : this._varsDetail});this.vars.varsStatus.stampMain = this.vars.varsDetail.stamp * 1000;this.iniReload();},_setFormSelect : function(obj){for (var i = 0; i < obj.arr.length; i++) {var ele = $(document.createElement('option'));ele.value = obj.arr[i].value;if(obj.now == obj.arr[i].value) ele.selected = true;if (obj.arr[i].flagDisabled)  ele.disabled = true;ele.insert(obj.arr[i].strTitle);obj.eleInsert.insert(ele);}}});var Code_Lib_CalenderVars = Class.create({varsLoad : {"varsWhole":{"week":["\u65e5","\u6708","\u706b","\u6c34","\u6728","\u91d1","\u571f"],"str":{"item":"\u4ef6","hit":"\u8a72\u5f53","unit":"\u5358\u4f4d","year":"\u5e74","month":"\u6708","week":"\u9031","date":"\u65e5","hour":"\u6642","min":"\u5206","nextYear":"\u7fcc\u5e74","prevYear":"\u524d\u5e74","nextMonth":"\u7fcc\u6708","prevMonth":"\u524d\u6708","nextWeek":"\u7fcc\u9031","prevWeek":"\u524d\u9031","nextDate":"\u7fcc\u65e5","prevDate":"\u524d\u65e5"}},"varsHoliday":{"jp":{"id":"jp","strTitle":"\u65e5\u672c\u306e\u4f11\u65e5","transfer":"\u632f\u66ff\u4f11\u65e5","varsDetail":[{"flagType":"loop","strTitle":"\u5143\u65e5","stamp":0,"term":{"stampStart":0,"stampEnd":0},"loop":{"flagType":"year","arrayMonth":[0],"arrayWeek":[],"arrayDate":[1],"arrayDay":[],"start":{"numHour":0,"numMin":0},"end":{"numHour":0,"numMin":0}}},{"flagType":"loop","strTitle":"\u6210\u4eba\u306e\u65e5","stamp":0,"term":{"stampStart":0,"stampEnd":0},"loop":{"flagType":"year","arrayMonth":[0],"arrayWeek":[{"flagNum":2,"numDay":1}],"arrayDate":[],"arrayDay":[],"start":{"numHour":0,"numMin":0},"end":{"numHour":0,"numMin":0}}},{"flagType":"loop","strTitle":"\u5efa\u56fd\u8a18\u5ff5\u306e\u65e5","stamp":0,"term":{"stampStart":0,"stampEnd":0},"loop":{"flagType":"year","arrayMonth":[1],"arrayWeek":[],"arrayDate":[11],"arrayDay":[],"start":{"numHour":0,"numMin":0},"end":{"numHour":0,"numMin":0}}},{"flagType":"term","strTitle":"\u6625\u5206\u306e\u65e5","stamp":0,"term":{"stampStart":1300633200000,"stampEnd":1300719599000},"loop":{"flagType":"","arrayMonth":[],"arrayWeek":[],"arrayDate":[],"arrayDay":[],"start":{"numHour":0,"numMin":0},"end":{"numHour":0,"numMin":0}}},{"flagType":"term","strTitle":"\u6625\u5206\u306e\u65e5","stamp":0,"term":{"stampStart":1332169200000,"stampEnd":1332255599000},"loop":{"flagType":"","arrayMonth":[],"arrayWeek":[],"arrayDate":[],"arrayDay":[],"start":{"numHour":0,"numMin":0},"end":{"numHour":0,"numMin":0}}},{"flagType":"term","strTitle":"\u6625\u5206\u306e\u65e5","stamp":0,"term":{"stampStart":1363705200000,"stampEnd":1363791599000},"loop":{"flagType":"","arrayMonth":[],"arrayWeek":[],"arrayDate":[],"arrayDay":[],"start":{"numHour":0,"numMin":0},"end":{"numHour":0,"numMin":0}}},{"flagType":"term","strTitle":"\u6625\u5206\u306e\u65e5","stamp":0,"term":{"stampStart":1395327600000,"stampEnd":1395413999000},"loop":{"flagType":"","arrayMonth":[],"arrayWeek":[],"arrayDate":[],"arrayDay":[],"start":{"numHour":0,"numMin":0},"end":{"numHour":0,"numMin":0}}},{"flagType":"term","strTitle":"\u6625\u5206\u306e\u65e5","stamp":0,"term":{"stampStart":1426863600000,"stampEnd":1426949999000},"loop":{"flagType":"","arrayMonth":[],"arrayWeek":[],"arrayDate":[],"arrayDay":[],"start":{"numHour":0,"numMin":0},"end":{"numHour":0,"numMin":0}}},{"flagType":"term","strTitle":"\u6625\u5206\u306e\u65e5","stamp":0,"term":{"stampStart":1458399600000,"stampEnd":1458485999000},"loop":{"flagType":"","arrayMonth":[],"arrayWeek":[],"arrayDate":[],"arrayDay":[],"start":{"numHour":0,"numMin":0},"end":{"numHour":0,"numMin":0}}},{"flagType":"term","strTitle":"\u6625\u5206\u306e\u65e5","stamp":0,"term":{"stampStart":1489935600000,"stampEnd":1490021999000},"loop":{"flagType":"","arrayMonth":[],"arrayWeek":[],"arrayDate":[],"arrayDay":[],"start":{"numHour":0,"numMin":0},"end":{"numHour":0,"numMin":0}}},{"flagType":"term","strTitle":"\u6625\u5206\u306e\u65e5","stamp":0,"term":{"stampStart":1521558000000,"stampEnd":1521644399000},"loop":{"flagType":"","arrayMonth":[],"arrayWeek":[],"arrayDate":[],"arrayDay":[],"start":{"numHour":0,"numMin":0},"end":{"numHour":0,"numMin":0}}},{"flagType":"term","strTitle":"\u6625\u5206\u306e\u65e5","stamp":0,"term":{"stampStart":1553094000000,"stampEnd":1553180399000},"loop":{"flagType":"","arrayMonth":[],"arrayWeek":[],"arrayDate":[],"arrayDay":[],"start":{"numHour":0,"numMin":0},"end":{"numHour":0,"numMin":0}}},{"flagType":"loop","strTitle":"\u662d\u548c\u306e\u65e5","stamp":0,"term":{"stampStart":0,"stampEnd":0},"loop":{"flagType":"year","arrayMonth":[3],"arrayWeek":[],"arrayDate":[29],"arrayDay":[],"start":{"numHour":0,"numMin":0},"end":{"numHour":0,"numMin":0}}},{"flagType":"term","strTitle":"\u795d\u65e5","stamp":0,"term":{"stampStart":1556550000000,"stampEnd":1556636399000},"loop":{"flagType":"","arrayMonth":[],"arrayWeek":[],"arrayDate":[],"arrayDay":[],"start":{"numHour":0,"numMin":0},"end":{"numHour":0,"numMin":0}}},{"flagType":"term","strTitle":"\u5929\u7687\u306e\u5373\u4f4d\u306e\u65e5","stamp":0,"term":{"stampStart":1556636400000,"stampEnd":1556722799000},"loop":{"flagType":"","arrayMonth":[],"arrayWeek":[],"arrayDate":[],"arrayDay":[],"start":{"numHour":0,"numMin":0},"end":{"numHour":0,"numMin":0}}},{"flagType":"term","strTitle":"\u795d\u65e5","stamp":0,"term":{"stampStart":1556722800000,"stampEnd":1556809199000},"loop":{"flagType":"","arrayMonth":[],"arrayWeek":[],"arrayDate":[],"arrayDay":[],"start":{"numHour":0,"numMin":0},"end":{"numHour":0,"numMin":0}}},{"flagType":"loop","strTitle":"\u61b2\u6cd5\u8a18\u5ff5\u65e5","stamp":0,"term":{"stampStart":0,"stampEnd":0},"loop":{"flagType":"year","arrayMonth":[4],"arrayWeek":[],"arrayDate":[3],"arrayDay":[],"start":{"numHour":0,"numMin":0},"end":{"numHour":0,"numMin":0}}},{"flagType":"loop","strTitle":"\u307f\u3069\u308a\u306e\u65e5","stamp":0,"term":{"stampStart":0,"stampEnd":0},"loop":{"flagType":"year","arrayMonth":[4],"arrayWeek":[],"arrayDate":[4],"arrayDay":[],"start":{"numHour":0,"numMin":0},"end":{"numHour":0,"numMin":0}}},{"flagType":"loop","strTitle":"\u3053\u3069\u3082\u306e\u65e5","stamp":0,"term":{"stampStart":0,"stampEnd":0},"loop":{"flagType":"year","arrayMonth":[4],"arrayWeek":[],"arrayDate":[5],"arrayDay":[],"start":{"numHour":0,"numMin":0},"end":{"numHour":0,"numMin":0}}},{"flagType":"loop","strTitle":"\u6d77\u306e\u65e5","stamp":0,"term":{"stampStart":0,"stampEnd":0},"loop":{"flagType":"year","arrayMonth":[6],"arrayWeek":[{"flagNum":3,"numDay":1}],"arrayDate":[],"arrayDay":[],"start":{"numHour":0,"numMin":0},"end":{"numHour":0,"numMin":0}}},{"flagType":"loop","strTitle":"\u5c71\u306e\u65e5","stamp":0,"term":{"stampStart":0,"stampEnd":0},"loop":{"flagType":"year","arrayMonth":[7],"arrayWeek":[],"arrayDate":[11],"arrayDay":[],"start":{"numHour":0,"numMin":0},"end":{"numHour":0,"numMin":0}}},{"flagType":"loop","strTitle":"\u656c\u8001\u306e\u65e5","stamp":0,"term":{"stampStart":0,"stampEnd":0},"loop":{"flagType":"year","arrayMonth":[8],"arrayWeek":[{"flagNum":3,"numDay":1}],"arrayDate":[],"arrayDay":[],"start":{"numHour":0,"numMin":0},"end":{"numHour":0,"numMin":0}}},{"flagType":"term","strTitle":"\u79cb\u5206\u306e\u65e5","stamp":0,"term":{"stampStart":1316703600000,"stampEnd":1316789999000},"loop":{"flagType":"","arrayMonth":[],"arrayWeek":[],"arrayDate":[],"arrayDay":[],"start":{"numHour":0,"numMin":0},"end":{"numHour":0,"numMin":0}}},{"flagType":"term","strTitle":"\u79cb\u5206\u306e\u65e5","stamp":0,"term":{"stampStart":1348239600000,"stampEnd":1348325999000},"loop":{"flagType":"","arrayMonth":[],"arrayWeek":[],"arrayDate":[],"arrayDay":[],"start":{"numHour":0,"numMin":0},"end":{"numHour":0,"numMin":0}}},{"flagType":"term","strTitle":"\u79cb\u5206\u306e\u65e5","stamp":0,"term":{"stampStart":1379862000000,"stampEnd":1379948399000},"loop":{"flagType":"","arrayMonth":[],"arrayWeek":[],"arrayDate":[],"arrayDay":[],"start":{"numHour":0,"numMin":0},"end":{"numHour":0,"numMin":0}}},{"flagType":"term","strTitle":"\u79cb\u5206\u306e\u65e5","stamp":0,"term":{"stampStart":1411398000000,"stampEnd":1411484399000},"loop":{"flagType":"","arrayMonth":[],"arrayWeek":[],"arrayDate":[],"arrayDay":[],"start":{"numHour":0,"numMin":0},"end":{"numHour":0,"numMin":0}}},{"flagType":"term","strTitle":"\u56fd\u6c11\u306e\u4f11\u65e5","stamp":0,"term":{"stampStart":1442847600000,"stampEnd":1442933999000},"loop":{"flagType":"","arrayMonth":[],"arrayWeek":[],"arrayDate":[],"arrayDay":[],"start":{"numHour":0,"numMin":0},"end":{"numHour":0,"numMin":0}}},{"flagType":"term","strTitle":"\u79cb\u5206\u306e\u65e5","stamp":0,"term":{"stampStart":1442934000000,"stampEnd":1443020399000},"loop":{"flagType":"","arrayMonth":[],"arrayWeek":[],"arrayDate":[],"arrayDay":[],"start":{"numHour":0,"numMin":0},"end":{"numHour":0,"numMin":0}}},{"flagType":"term","strTitle":"\u79cb\u5206\u306e\u65e5","stamp":0,"term":{"stampStart":1474470000000,"stampEnd":1474556399000},"loop":{"flagType":"","arrayMonth":[],"arrayWeek":[],"arrayDate":[],"arrayDay":[],"start":{"numHour":0,"numMin":0},"end":{"numHour":0,"numMin":0}}},{"flagType":"term","strTitle":"\u79cb\u5206\u306e\u65e5","stamp":0,"term":{"stampStart":1506092400000,"stampEnd":1506178799000},"loop":{"flagType":"","arrayMonth":[],"arrayWeek":[],"arrayDate":[],"arrayDay":[],"start":{"numHour":0,"numMin":0},"end":{"numHour":0,"numMin":0}}},{"flagType":"term","strTitle":"\u79cb\u5206\u306e\u65e5","stamp":0,"term":{"stampStart":1537628400000,"stampEnd":1537714799000},"loop":{"flagType":"","arrayMonth":[],"arrayWeek":[],"arrayDate":[],"arrayDay":[],"start":{"numHour":0,"numMin":0},"end":{"numHour":0,"numMin":0}}},{"flagType":"term","strTitle":"\u79cb\u5206\u306e\u65e5","stamp":0,"term":{"stampStart":1569164400000,"stampEnd":1569250799000},"loop":{"flagType":"","arrayMonth":[],"arrayWeek":[],"arrayDate":[],"arrayDay":[],"start":{"numHour":0,"numMin":0},"end":{"numHour":0,"numMin":0}}},{"flagType":"loop","strTitle":"\u4f53\u80b2\u306e\u65e5","stamp":0,"term":{"stampStart":0,"stampEnd":0},"loop":{"flagType":"year","arrayMonth":[9],"arrayWeek":[{"flagNum":2,"numDay":1}],"arrayDate":[],"arrayDay":[],"start":{"numHour":0,"numMin":0},"end":{"numHour":0,"numMin":0}}},{"flagType":"term","strTitle":"\u5373\u4f4d\u793c\u6b63\u6bbf\u306e\u5100\u306e\u884c\u308f\u308c\u308b\u65e5","stamp":0,"term":{"stampStart":1571670000000,"stampEnd":1571756399000},"loop":{"flagType":"","arrayMonth":[],"arrayWeek":[],"arrayDate":[],"arrayDay":[],"start":{"numHour":0,"numMin":0},"end":{"numHour":0,"numMin":0}}},{"flagType":"loop","strTitle":"\u6587\u5316\u306e\u65e5","stamp":0,"term":{"stampStart":0,"stampEnd":0},"loop":{"flagType":"year","arrayMonth":[10],"arrayWeek":[],"arrayDate":[3],"arrayDay":[],"start":{"numHour":0,"numMin":0},"end":{"numHour":0,"numMin":0}}},{"flagType":"loop","strTitle":"\u52e4\u52b4\u611f\u8b1d\u306e\u65e5","stamp":0,"term":{"stampStart":0,"stampEnd":0},"loop":{"flagType":"year","arrayMonth":[10],"arrayWeek":[],"arrayDate":[23],"arrayDay":[],"start":{"numHour":0,"numMin":0},"end":{"numHour":0,"numMin":0}}}]}}},iniLoad : function(){return this.varsLoad;}});var Code_Lib_CheckValue = Class.create({vars : {"strUnique":["\u2460","\u2461","\u2462","\u2463","\u2464","\u2465","\u2466","\u2467","\u2468","\u2469","\u246a","\u246b","\u246c","\u246d","\u246e","\u246f","\u2470","\u2471","\u2472","\u2473","\u2160","\u2161","\u2162","\u2163","\u2164","\u2165","\u2166","\u2167","\u2168","\u2169","\u3349","\u3314","\u3322","\u334d","\u3318","\u3327","\u3303","\u3336","\u3351","\u3357","\u330d","\u3326","\u3323","\u332b","\u334a","\u333b","\u339c","\u339d","\u339e","\u338e","\u338f","\u33c4","\u33a1","\u337b","\u301d","\u301f","\u2116","\u33cd","\u2121","\u32a4","\u32a5","\u32a6","\u32a7","\u32a8","\u3231","\u3232","\u3239","\u337e","\u337d","\u337c","\u2252","\u2261","\u222b","\u222e","\u2211","\u221a","\u22a5","\u2220","\u221f","\u22bf","\u2235","\u2229","\u222a","\uff71","\uff72","\uff73","\uff74","\uff75","\uff76","\uff77","\uff78","\uff79","\uff7a","\uff7b","\uff7c","\uff7d","\uff7e","\uff7f","\uff80","\uff81","\uff82","\uff83","\uff84","\uff85","\uff86","\uff87","\uff88","\uff89","\uff8a","\uff8b","\uff8c","\uff8d","\uff8e","\uff8f","\uff90","\uff91","\uff92","\uff93","\uff94","\uff95","\uff96","\uff97","\uff98","\uff99","\uff9a","\uff9b","\uff9c","\uff66","\uff9d","\uff67","\uff68","\uff69","\uff6a","\uff6b","\uff6c","\uff6d","\uff6e","\uff6f","\uff70","\uff9e","\uff9f","\uff61","\uff62","\uff63","\uff64","\uff65"],"blankUtf8":"\u3000"},checkValue : function(obj){for (var i = 0; i < obj.arr.length; i++) {obj.arr[i].flagErrorNow = 0;for (var k = 0; k < obj.arr[i].arrayError.length; k++) {obj.arr[i].arrayError[k].flagNow = 0;if (obj.arr[i].arrayError[k].flagCheck == 'blank') {if (obj.arr[i].arrayError[k].flagUse && obj.arr[i].flagMustUse) {obj.arr[i].arrayError[k].flagNow = this.checkValueBlank({flagType  : obj.arr[i].arrayError[k].flagType,flagArr : obj.arr[i].arrayError[k].flagArr,value     : obj.arr[i].value});if (obj.arr[i].arrayError[k].flagNow) obj.arr[i].flagErrorNow = 1;if (obj.arr[i].arrayError[k].flagNow) continue;}}else {if (obj.arr[i].arrayError[k].flagUse) {if (obj.arr[i].arrayError[k].flagCheck == 'attest') {continue;}var flag = this.checkValueBlank({flagType  : 'empty',flagArr   : obj.arr[i].arrayError[k].flagArr,value     : obj.arr[i].value});if (obj.arr[i].arrayError[k].flagCheck == 'word') {if (obj.arr[i].flagMustUse || (!obj.arr[i].flagMustUse && !flag)) {obj.arr[i].arrayError[k].flagNow = this.checkValueWord({flagType  : obj.arr[i].arrayError[k].flagType,flagArr : obj.arr[i].arrayError[k].flagArr,value     : obj.arr[i].value});}if (obj.arr[i].arrayError[k].flagNow) obj.arr[i].flagErrorNow = 1;if (obj.arr[i].arrayError[k].flagNow) continue;}else if (obj.arr[i].arrayError[k].flagCheck == 'format') {if (obj.arr[i].flagMustUse || (!obj.arr[i].flagMustUse && !flag)) {obj.arr[i].arrayError[k].flagNow = this.checkValueFormat({flagType  : obj.arr[i].arrayError[k].flagType,flagArr : obj.arr[i].arrayError[k].flagArr,value     : obj.arr[i].value});}if (obj.arr[i].arrayError[k].flagNow) obj.arr[i].flagErrorNow = 1;if (obj.arr[i].arrayError[k].flagNow) continue;}else if (obj.arr[i].arrayError[k].flagCheck == 'max') {if (obj.arr[i].flagMustUse || (!obj.arr[i].flagMustUse && !flag)) {obj.arr[i].arrayError[k].flagNow = this.checkValueMax({flagType  : obj.arr[i].arrayError[k].flagType,value     : obj.arr[i].value,flagArr : obj.arr[i].arrayError[k].flagArr,num       : obj.arr[i].arrayError[k].num});}if (obj.arr[i].arrayError[k].flagNow) obj.arr[i].flagErrorNow = 1;if (obj.arr[i].arrayError[k].flagNow) continue;}else if (obj.arr[i].arrayError[k].flagCheck == 'min') {if (obj.arr[i].flagMustUse || (!obj.arr[i].flagMustUse && !flag)) {obj.arr[i].arrayError[k].flagNow = this.checkValueMin({flagType  : obj.arr[i].arrayError[k].flagType,value     : obj.arr[i].value,flagArr : obj.arr[i].arrayError[k].flagArr,num       : obj.arr[i].arrayError[k].num});}if (obj.arr[i].arrayError[k].flagNow) obj.arr[i].flagErrorNow = 1;if (obj.arr[i].arrayError[k].flagNow) continue;}else if (obj.arr[i].arrayError[k].flagCheck == 'strUnique') {if (obj.arr[i].flagMustUse || (!obj.arr[i].flagMustUse && !flag)) {obj.arr[i].arrayError[k].flagNow = this.checkValueStrUnique({value : obj.arr[i].value});}if (obj.arr[i].arrayError[k].flagNow) obj.arr[i].flagErrorNow = 1;if (obj.arr[i].arrayError[k].flagNow) continue;}}}}}return obj.arr;},checkValueBlank : function(obj){if (obj.flagArr) {var array = [];if (obj.flagArr == 'json') array = obj.value.evalJSON();else if (obj.flagArr == 'comma') {var insEscape = new Code_Lib_Escape();array = insEscape.fromCommnaArr({str : obj.value});}for (var i = 0; i < array.length; i++) {var str = '' + array[i];if (obj.flagType == 'blank') return (str.blank()) ? 1 : 0;else if (obj.flagType == 'empty') return (str == '' || str == undefined) ? 1 : 0;else if (obj.flagType == 'http') return (str == 'http://' || str.blank()) ? 1 : 0;else if (obj.flagType == 'https') return (str == 'https://' || str.blank()) ? 1 : 0;}} else {if (obj.flagType == 'blank') return (obj.value.blank()) ? 1 : 0;else if (obj.flagType == 'empty') return (obj.value == '' || obj.value == undefined) ? 1 : 0;else if (obj.flagType == 'http') return (obj.value == 'http://' || obj.value.blank()) ? 1 : 0;else if (obj.flagType == 'https') return (obj.value == 'https://' || obj.value.blank()) ? 1 : 0;}},checkValueWord : function(obj){if (obj.flagArr) {var array = [];if (obj.flagArr == 'json') array = obj.value.evalJSON();else if (obj.flagArr == 'comma') {var insEscape = new Code_Lib_Escape();array = insEscape.fromCommnaArr({str : obj.value});}for (var i = 0; i < array.length; i++) {var str = '' + array[i];if (obj.flagType == 'half' && str.match(/[^a-zA-Z0-9_]+/)) return 1;else if (obj.flagType == 'halfhyphen' && str.match(/[^a-zA-Z0-9_-]+/)) return 1;else if (obj.flagType == 'ip' && str.match(/[^0-9.]+/)) return 1;else if (obj.flagType == 'ipSubnet' && str.match(/[^0-9.\/\-]+/)) return 1;else if (obj.flagType == 'num' && str.match(/[^0-9]+/)) return 1;else if (obj.flagType == 'numminus' && str.match(/[^0-9\-]+/)) return 1;else if (obj.flagType == 'number') {if (str.match(/^(0|-?[1-9][0-9]*|-?(0|[1-9][0-9]*)\.[0-9]+)$/)) return 1;}else if (obj.flagType == 'url' && str.match(/[^a-zA-Z0-9_\:\/.\-~=%&#?]+/)) return 1;else if (obj.flagType == 'mail' && str.match(/[^a-zA-Z0-9_@~.-]+/)) return 1;else if (obj.flagType == 'mailHost' && str.match(/[^a-zA-Z0-9_~.-]+/)) return 1;else if (obj.flagType == 'file' && str.match(/[^a-zA-Z0-9_.\-]+/)) return 1;else if (obj.flagType == 'space' && str.match(/\s/)) return 1;}} else {if (obj.flagType == 'half') return (obj.value.match( /[^a-zA-Z0-9_]+/)) ? 1 : 0;else if (obj.flagType == 'halfhyphen') return (obj.value.match( /[^a-zA-Z0-9_-]+/)) ? 1 : 0;else if (obj.flagType == 'ip') return (obj.value.match( /[^0-9.]+/)) ? 1 : 0;else if (obj.flagType == 'ipSubnet') return (obj.value.match( /[^0-9.\/\-]+/)) ? 1 : 0;else if (obj.flagType == 'num') return (obj.value.match( /[^0-9]+/)) ? 1 : 0;else if (obj.flagType == 'numminus') return (obj.value.match( /[^0-9\-]+/)) ? 1 : 0;else if (obj.flagType == 'number' ) {return (obj.value.match( /^(0|-?[1-9][0-9]*|-?(0|[1-9][0-9]*)\.[0-9]+)$/)) ? 0 : 1;}else if (obj.flagType == 'url') return (obj.value.match( /[^a-zA-Z0-9_\:\/.\-~=%&#?]+/)) ? 1 : 0;else if (obj.flagType == 'mail') return (obj.value.match( /[^a-zA-Z0-9_@~.-]+/)) ? 1 : 0;else if (obj.flagType == 'mailHost') return (obj.value.match( /[^a-zA-Z0-9_~.-]+/)) ? 1 : 0;else if (obj.flagType == 'file') return (obj.value.match( /[^a-zA-Z0-9_.\-]+/)) ? 1 : 0;else if (obj.flagType == 'termStamp') return (obj.value.match( /[^0-9\-]+/)) ? 1 : 0;else if (obj.flagType == 'termTime') return (obj.value.match( /[^0-9\-\/]+/)) ? 1 : 0;else if (obj.flagType == 'space') return (obj.value.match( /\s/)) ? 1 : 0;else if (obj.flagType == 'password') return (obj.value.match( /[^a-zA-Z0-9!#$%"'()=~|^@[;:?,.`}{+*-]+/)) ? 1 : 0;}},checkValueFormat : function(obj){if (obj.flagArr) {var array = [];if (obj.flagArr == 'json') array = obj.value.evalJSON();else if (obj.flagArr == 'comma') {var insEscape = new Code_Lib_Escape();array = insEscape.fromCommnaArr({str : obj.value});}for (var i = 0; i < array.length; i++) {var str = '' + array[i];if (obj.flagType == 'ip' && !str.match(/^[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}$/)) return 1;else if (obj.flagType == 'ipSubnet') {if (!str.match(/^[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\/[0-9]{1,2}$/)) return 1;}else if (obj.flagType == 'post' && !str.match(/^[0-9]{3}\-+[0-9]{4}$/)) return 1;else if (obj.flagType == 'born' && !str.match(/^[0-9]{4}\-+[0-9]{2}\-+[0-9]{2}$/)) return 1;else if (obj.flagType == 'phone' && !str.match(/^[0-9]{2,4}\-+[0-9]{2,4}\-+[0-9]{2,4}$/)) return 1;else if (obj.flagType == 'numminus') {var num = str;if (num != '') {num = parseFloat(str);if (num < 0) {var arr = str.split('-');if (arr.length != 2) {return 1;}num *= -1;str = '' + num;}return (str.match( /[^0-9]+/)) ? 1 : 0;}}else if (obj.flagType == 'mail' && !str.match(/.+@.+\..+/)) return 1;else if (obj.flagType == 'mailHost' && !str.match(/.+\..+/)) return 1;else if (obj.flagType == 'url' && !str.match(/^(http|https|ftp|telnet|nttp|file|news):\/\/.+/)) {return 1;}}} else {if (obj.flagType == 'ip') {return (!obj.value.match( /^[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}$/)) ? 1 : 0;} else if (obj.flagType == 'ipSubnet') {if (!obj.value.match( /^[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\/[0-9]{1,2}$/)) return 1;}else if (obj.flagType == 'post') return (!obj.value.match( /^[0-9]{3}\-+[0-9]{4}$/)) ? 1 : 0;else if (obj.flagType == 'born') return (!obj.value.match( /^[0-9]{4}\-+[0-9]{2}\-+[0-9]{2}$/)) ? 1 : 0;else if (obj.flagType == 'phone') {return (!obj.value.match( /^[0-9]{2,4}\-+[0-9]{2,4}\-+[0-9]{2,4}$/)) ? 1 : 0;}else if (obj.flagType == 'numminus') {var str = '' + obj.value;var num = str;if (num != '') {num = parseFloat(str);if (num < 0) {var arr = str.split('-');if (arr.length != 2) {return 1;}num *= -1;str = '' + num;}return (str.match( /[^0-9]+/)) ? 1 : 0;}}else if (obj.flagType == 'mail') return (!obj.value.match( /.+@.+\..+/)) ? 1 : 0;else if (obj.flagType == 'mailHost') return (!obj.value.match( /.+\..+/)) ? 1 : 0;else if (obj.flagType == 'url') {if (!obj.value.match( /^(http|https|ftp|telnet|nttp|file|news):\/\/.+/)) return 1;} else if (obj.flagType == 'termStamp' ) {var array = obj.value.evalJSON();return (array[0] > array[1]) ? 1 : 0;} else if (obj.flagType == 'password' ) {var flaga = (obj.value.match(/[a-z]+/))? 1: 0;var flagA = (obj.value.match(/[A-Z]+/))? 1: 0;var flag0 = (obj.value.match(/[0-9]+/))? 1: 0;var flagMark = (obj.value.match(/[!"#$%&'()=~|^@[;:\],.\/`{+*}?-]+/))? 1: 0;var flag = (flaga && flagA && flag0 && flagMark)? 0: 1;return flag;} else if (obj.flagType == 'date' || obj.flagType == 'dateNone1970') {if (!obj.value.match( /^[0-9]{4}\/[0-9]{1,2}\/[0-9]{1,2}$/)) return 'format';var array = obj.value.split('/');var year = array[0];if (year < 1970 && obj.flagType != 'dateNone1970') return 'year';var month = array[1];if (month.match( /^0[1-9]{1}$/)) {var arrayMonth = month.split('0');month = parseFloat(arrayMonth[1]);}if (month > 12 || month < 1) return 'month';var date = array[2];if (date.match( /^0[1-9]{1}$/)) {var arrayDate = date.split('0');date = parseFloat(arrayDate[1]);}var ins = new Date(year, month ,1-1);if (date > ins.getDate() || date < 1) return 'date';} else if (obj.flagType == 'date-time' || obj.flagType == 'date-timeNone1970') {if (!obj.value.match( /^[0-9]{4}\/[0-9]{1,2}\/[0-9]{1,2}-[0-9]{1,2}:[0-9]{1,2}$/)) return 'format';var array = obj.value.split('-');var strDate = array[0];var strTime = array[1];array = strTime.split(':');var numHour = array[0];if (numHour.match( /^0[1-9]{1}$/)) {var arrayHour = numHour.split('0');numHour = parseFloat(arrayHour[1]);}if (numHour > 23 || numHour < 0) return 'hour';var numMin = array[1];if (numMin.match( /^0[1-9]{1}$/)) {var arrayMin = numMin.split('0');numMin = parseFloat(arrayMin[1]);}if (numMin > 59 || numMin < 0) return 'min';array = strDate.split('/');var year = array[0];if (year < 1970 && obj.flagType != 'date-timeNone1970') return 'year';var month = array[1];if (month.match( /^0[1-9]{1}$/)) {var arrayMonth = month.split('0');month = parseFloat(arrayMonth[1]);}if (month > 12 || month < 1) return 'month';var date = array[2];if (date.match( /^0[1-9]{1}$/)) {var arrayDate = date.split('0');date = parseFloat(arrayDate[1]);}var ins = new Date(year, month ,1-1);if (date > ins.getDate() || date < 1) return 'date';} else if (obj.flagType == 'date-time-date') {if (obj.value.match( /^[0-9]{4}\/[0-9]{1,2}\/[0-9]{1,2}$/)) {var array = obj.value.split('/');var year = array[0];if (year < 1970 && obj.flagType != 'dateNone1970') return 'year';var month = array[1];if (month.match( /^0[1-9]{1}$/)) {var arrayMonth = month.split('0');month = parseFloat(arrayMonth[1]);}if (month > 12 || month < 1) return 'month';var date = array[2];if (date.match( /^0[1-9]{1}$/)) {var arrayDate = date.split('0');date = parseFloat(arrayDate[1]);}var ins = new Date(year, month ,1-1);if (date > ins.getDate() || date < 1) return 'date';} else if (obj.value.match( /^[0-9]{4}\/[0-9]{1,2}\/[0-9]{1,2}-[0-9]{1,2}:[0-9]{1,2}$/)) {var array = obj.value.split('-');var strDate = array[0];var strTime = array[1];array = strTime.split(':');var numHour = array[0];if (numHour.match( /^0[1-9]{1}$/)) {var arrayHour = numHour.split('0');numHour = parseFloat(arrayHour[1]);}if (numHour > 23 || numHour < 0) return 'hour';var numMin = array[1];if (numMin.match( /^0[1-9]{1}$/)) {var arrayMin = numMin.split('0');numMin = parseFloat(arrayMin[1]);}if (numMin > 59 || numMin < 0) return 'min';array = strDate.split('/');var year = array[0];if (year < 1970 && obj.flagType != 'date-timeNone1970') return 'year';var month = array[1];if (month.match( /^0[1-9]{1}$/)) {var arrayMonth = month.split('0');month = parseFloat(arrayMonth[1]);}if (month > 12 || month < 1) return 'month';var date = array[2];if (date.match( /^0[1-9]{1}$/)) {var arrayDate = date.split('0');date = parseFloat(arrayDate[1]);}var ins = new Date(year, month ,1-1);if (date > ins.getDate() || date < 1) return 'date';} else {return 'format';}} else if (obj.flagType == 'termTime' ) {var pattern = "/^[0-9]{4}\/[0-9]{1,2}\/[0-9]{1,2}\/[0-9]{1,2}\/[0-9]{1,2}\-[0-9]{4}"+ "\/[0-9]{1,2}\/[0-9]{1,2}\/[0-9]{1,2}\/[0-9]{1,2}$/";if (!obj.value.match(pattern)) return 'format';var array = obj.value.split('-');var arrayStamp = [];for (var i = 0; i < array.length; i++) {var arrayA = array[i].split('/');var year = arrayA[0];if (year < 1970) return 'year';var month = arrayA[1];if (month.match( /^0[1-9]{1}$/)) {var arrayMonth = month.split('0');month = parseFloat(arrayMonth[1]);}if (month > 12 || month < 1) return 'month';var date = arrayA[2];if (date.match( /^0[1-9]{1}$/)) {var arrayDate = date.split('0');date = parseFloat(arrayDate[1]);}var objTime = insTimeZone.adjustTime({stamp : new Date(year, month ,1-1).getTime()});if (date > objTime.date || date < 1) return 'date';var hour = arrayA[3];if (hour == 00 || hour == '00') {hour = 0;}else if (hour.match( /^0[1-9]{1}$/)) {var arrayHour = hour.split('0');hour = parseFloat(arrayHour[1]);}if (hour > 23 || hour < 0) return 'hour';var min = arrayA[4];if (min == 00 || min == '00') {min = 0;}else if (min.match( /^0[1-9]{1}$/)) {var arrayMin = min.split('0');min = parseFloat(arrayMin[1]);}if (min > 59 || min < 0) return 'min';var objTimeDate = insTimeZone.adjustTime({stamp : new Date(year, month-1 ,date).getTime()});var stamp = objTimeDate.stamp + hour*60*60*1000 + min*60*1000;arrayStamp.push(stamp);}if (arrayStamp[0] > arrayStamp[1]) return 'stamp';}}},checkValueMax : function(obj){var insEscape = new Code_Lib_Escape();if (obj.flagArr) {var array = [];if (obj.flagArr == 'json') array = obj.value.evalJSON();else if (obj.flagArr == 'comma') {array = insEscape.fromCommnaArr({str : obj.value});}for (var i = 0; i < array.length; i++) {if (obj.flagType == 'num' && parseFloat(array[i]) > obj.num) return 1;else if (obj.flagType == 'str') {var str = insEscape.get({flagType : 'standard',data     : array[i]});if (str.length > obj.num) {return 1;}}}} else {if (obj.flagType == 'num') return (parseFloat(obj.value) > obj.num) ? 1  : 0;else if (obj.flagType == 'str') {var str = insEscape.get({flagType : 'standard',data     : obj.value});return (str.length > obj.num) ? 1  : 0;}}},checkValueMin : function(obj){if (obj.flagArr) {var array = [];if (obj.flagArr == 'json') array = obj.value.evalJSON();else if (obj.flagArr == 'comma') {var insEscape = new Code_Lib_Escape();array = insEscape.fromCommnaArr({str : obj.value});}for (var i = 0; i < array.length; i++) {if (obj.flagType == 'num' && parseFloat(array[i]) < obj.num) return 1;else if (obj.flagType == 'str' && array[i].length < obj.num) return 1;}}else {if (obj.flagType == 'num') return (parseFloat(obj.value) < obj.num) ? 1  : 0;else if (obj.flagType == 'str') return (obj.value.length < obj.num) ? 1  : 0;}},checkValueStrUnique : function(obj){var array = this.vars.strUnique;for( var j = 0; j < array.length; j++ ) {if ( obj.value.match( new RegExp( array[j] )))  return array[j];}return 0;}});var Code_Lib_CheckTime = Class.create({getStamp : function(obj){if (obj.stampWrapStart <= obj.stamp && obj.stampWrapEnd > obj.stamp) return 'all';return 0;},getStampPosition : function(obj){if (obj.stampWrapStart <= obj.stamp && obj.stampWrapEnd >= obj.stamp) return 'middle';else if (obj.stampWrapEnd <= obj.stamp) return 'right';else if (obj.stampWrapStart >= obj.stamp) return 'left';},getTerm : function(obj){var flag;if (obj.stampWrapStart <= obj.stampStart && obj.stampStart < obj.stampWrapEnd&& obj.stampWrapStart <= obj.stampEnd && obj.stampEnd < obj.stampWrapEnd) {flag = 'all';} else if (obj.stampWrapStart <= obj.stampStart && obj.stampStart < obj.stampWrapEnd&& obj.stampWrapEnd <= obj.stampEnd) {flag = 'right';} else if (obj.stampStart < obj.stampWrapStart && obj.stampWrapStart <= obj.stampEnd&& obj.stampEnd < obj.stampWrapEnd) {flag = 'left';} else if (obj.stampStart < obj.stampWrapStart && obj.stampStart < obj.stampWrapEnd&& obj.stampEnd > obj.stampWrapStart && obj.stampEnd > obj.stampWrapEnd) {flag = 'middle';} else if (obj.stampWrapStart <= obj.stampStart && obj.stampStart <= obj.stampWrapEnd&& obj.stampWrapStart <= obj.stampEnd && obj.stampEnd < obj.stampWrapEnd) {flag = 'all';}return flag;},getLoop : function(obj){if (obj.stampLimit && obj.objStartWrap.stamp > obj.stampLimit) {if (obj.objEndWrap.stamp > obj.stampLimit) return 0;}if (obj.flagType == 'date') {return this.getLoopDate(obj);} else if (obj.flagType == 'week') {for (var i = 0;  i < obj.arrayDay.length; i++) {if (obj.arrayDay[i] == obj.objStartWrap.numDay) return this.checkLoopTerm(obj);}} else if (obj.flagType == 'month') {return this.getLoopMonth(obj);} else if (obj.flagType == 'year') {for (var i = 0; i < obj.arrayMonth.length; i++) {if (obj.arrayMonth[i] == obj.objStartWrap.numMonth) return this.getLoopMonth(obj);}}return 0;},getLoopDate : function(obj){var stampStart = obj.start.numHour * 60 + obj.start.numMin;var stampEnd = obj.end.numHour*60 + obj.end.numMin;for (var i = 0; i < obj.arrayDate.length; i++) {if (obj.arrayDate[i] == 'last') {var objTime = obj.insTimeZone.adjustTime({stamp : new Date(obj.objStartWrap.numYear, obj.objStartWrap.numMonth ,1 - 1).getTime()});if (obj.objStartWrap.numDate == objTime.numDate) {if (stampStart == 0 && stampEnd == 0) return 'all';else return this.checkLoopTerm(obj);}} else {if (obj.arrayDate[i] == obj.objStartWrap.numDate) {if (stampStart == 0 && stampEnd == 0) return 'all';else return this.checkLoopTerm(obj);}}}return 0;},getLoopMonth : function(obj){var stampStart = obj.start.numHour * 60 + obj.start.numMin;var stampEnd = obj.end.numHour * 60 + obj.end.numMin;for (var i = 0; i <obj.arrayDate.length; i++) {if (obj.arrayDate[i] == 'last') {var objTime = obj.insTimeZone.adjustTime({stamp : new Date(obj.objStartWrap.numYear, obj.objStartWrap.numMonth , 1 - 1).getTime()});if (obj.objStartWrap.numDate == objTime.numDate) {if (stampStart == 0 && stampEnd == 0) return 'all';else return this.checkLoopTerm(obj);}} else {if (obj.arrayDate[i] == obj.objStartWrap.numDate) {if (stampStart == 0 && stampEnd == 0) return 'all';else return this.checkLoopTerm(obj);}}}var objDay = this.getLoopNumDay({insTimeZone : obj.insTimeZone,numYear     : obj.objStartWrap.numYear,numMonth    : obj.objStartWrap.numMonth,numDate     : obj.objStartWrap.numDate,numDay      : obj.objStartWrap.numDay});for (var i = 0; i < obj.arrayWeek.length; i++) {if (obj.arrayWeek[i].flagNum == 'last') {if (objDay.flagLast && obj.arrayWeek[i].flagNum == objDay.num) {if (obj.arrayWeek[i].numDay == obj.objStartWrap.numDay) return this.checkLoopTerm(obj);}} else {if (obj.arrayWeek[i].flagNum == objDay.num && obj.arrayWeek[i].numDay == obj.objStartWrap.numDay) {return this.checkLoopTerm(obj);}}}},getLoopNumDay : function(obj){var objTime = obj.insTimeZone.adjustTime({stamp : new Date(obj.numYear, obj.numMonth + 1 , 1 - 1).getTime()});var mainSpan = objTime.numDate;var num = 1, numDay = 0;for (var j = 1; j <= mainSpan; j++) {var objTime = obj.insTimeZone.adjustTime({stamp : new Date(obj.numYear, obj.numMonth ,j).getTime()});if (j == obj.numDate) numDay = num;if (objTime.numDay == obj.numDay) num++;}var flag = 0;if (num == numDay) flag = 1;return {flagLast : flag,num      : numDay};},checkRateConsumptionTax : function(obj){var stamp = (obj.stamp)? obj.stamp : new Date().getTime();var objTime = obj.insTimeZone.adjustTime({stamp : stamp});var num = 5;var stamp20140401 = 1396278000 * 1000;var stamp20151001 = 1443625200 * 1000;var stamp = objTime.stamp;if (stamp20140401 <= stamp && stamp < stamp20151001) {num = 8;} else if (stamp20151001 <= stamp) {num = 10;}return num;},checkLoopTerm : function(obj){var stampStart = obj.start.numHour * 60 + obj.start.numMin;var stampEnd = obj.end.numHour * 60 + obj.end.numMin;var stampWrapStart = obj.objStartWrap.numHour * 60 + obj.objStartWrap.numMin;var stampWrapEnd = obj.objEndWrap.numHour * 60 + obj.objEndWrap.numMin;var num = 60 * 24;var flag = this.getTerm({stampStart     : stampStart,stampEnd       : (stampStart == 0 && stampEnd == 0)? num : stampEnd,stampWrapStart : stampWrapStart,stampWrapEnd   : (stampWrapStart == 0 && stampWrapEnd == 0)? num : stampWrapEnd});return flag;}});var Code_Lib_Choice = Class.create(Code_Lib_ExtLib,{varsLoad : {"templateWindow":{"id":"","strTitle":"<%replace%> (\u53c2\u7167)","strClass":"codeCoreBaseImgIcon","flagLockUse":1,"flagLockNow":"temp","flagCakeUse":1,"flagRemoveUse":0,"flagCoverUse":0,"flagHideUse":1,"flagHideNow":0,"flagReloadUse":0,"flagFoldUse":0,"flagFoldNow":0,"flagMoveUse":1,"flagZIndexUse":1,"flagResizeUse":1,"flagResizeIni":"all","flagResizeNow":"all","flagSkeletonUse":0,"flagBootUse":"auto","flagSwitchUse":1,"numWidthTitle":0,"numLeft":50,"numTop":50,"numWidth":700,"numHeight":500,"numWidthMin":700,"numHeightMin":500,"numZIndex":0}},iniLoad : function(obj){this._iniVars(obj);},_iniVars : function(obj){this._extVars(obj);},_varsBoot : null,_varsBootTitle : null,setBoot : function(obj){this._varsBoot = null;this._varsBoot = obj;var vars = this._checkBoot({idTarget  : obj.idTarget,idModule  : obj.idModule,arr       : this.vars.varsDetail,arrStatus : this.insRoot.vars.varsSystem.status.arrModule});if (!vars) return;this._varsBoot.vars = vars;this._varsBootTitle = this._varsBoot.vars.varsRequest.idModule+ this._varsBoot.vars.varsRequest.strExt+ this._varsBoot.vars.varsRequest.strChild;this._iniChild();},_checkBoot : function(obj){for (var i = 0; i < obj.arr.length; i++) {if (obj.arr[i].idModule == 'Base') {if (obj.idTarget == obj.arr[i].id) return obj.arr[i];} else {var id = obj.arr[i].idModule.toLowerCase();if (!obj.arrStatus[id].flagUse) continue;if (obj.idTarget == obj.arr[i].id) return obj.arr[i];}}},_varsChild : {eleLoading : {}, varsWindow : {}},_iniChild : function(){var strInsWindow = 'ins' + this._varsBootTitle;if (this[strInsWindow]) {$(this[strInsWindow].idWindow).setStyle({left : this._varsBoot.numLeft + 'px',top  : this._varsBoot.numTop + 'px'});this[strInsWindow + 'Class'].iniReload({flagId       : this._varsBoot.flagId,flagCheckUse : this._varsBoot.flagCheckUse,strFunc      : this._varsBoot.strFunc,insReturn    : this._varsBoot.insCurrent,varsValue    : (this._varsBoot.varsValue)? this._varsBoot.varsValue : null,});this[strInsWindow].showLockWindow();} else {this._varChild();this._setChild();}},_varChild : function(){var vars = (Object.toJSON(this.varsLoad.templateWindow)).evalJSON();var str = this._varsBootTitle;vars.id =  str;vars.strTitle = vars.strTitle.replace(/<%replace%>/, this._varsBoot.vars.strTitle);vars.strClass = (this._varsBoot.vars.strClass)? this._varsBoot.vars.strClass : vars.strClass;this._varsChild.varsWindow[str] = vars;},_setChild : function(){var str = this._varsBootTitle;var strInsWindow = 'ins' + str;this[strInsWindow] = new Code_Lib_Window();this[strInsWindow].iniLoad({eleInsert  : $(this.insRoot.vars.varsSystem.id.root),insRoot    : this.insRoot,insCurrent : this,idSelf     : this.idSelf + str,allot      : this._getChildAllot(),vars       : this._varsChild.varsWindow[str]});},_getChildAllot : function(){var allot = function(obj){var insCurrent = obj.insCurrent;if (obj.from == '_iniVars') insCurrent._updateChild();else if (obj.from == '_mousedownBoot') insCurrent.insCurrent._sendChild();else if (obj.from.match(/^_mouseupResize$/)) {var strInsWindow = 'ins' + insCurrent.insCurrent._varsBootTitle;if (insCurrent.insCurrent[strInsWindow + 'Class']) {insCurrent.insCurrent[strInsWindow + 'Class'].eventWindow();}}};return allot;},_updateChild : function(){var str = this._varsBootTitle;var strInsWindow = 'ins' + str;this[strInsWindow].vars.numZIndex = this.insRoot.setZIndex();this[strInsWindow].vars.numTop = this._varsBoot.numTop;this[strInsWindow].vars.numLeft = this._varsBoot.numLeft;this[strInsWindow].vars.flagHideNow = 0;},_sendChild : function(){var arrayKey = [], arrayValue = [];arrayKey = ['class', 'module', 'ext', 'child', 'func', 'db'];arrayValue = [this._varsBoot.vars.varsRequest.strClass,this._varsBoot.vars.varsRequest.idModule,this._varsBoot.vars.varsRequest.strExt,this._varsBoot.vars.varsRequest.strChild,this._varsBoot.vars.varsRequest.strFunc,'slave',];if (this._varsBoot.varsValue) {var jsonValue = Object.toJSON(this._varsBoot.varsValue);arrayKey.push('jsonValue');arrayValue.push(jsonValue);}this.insRoot.insRequest.set({flagLock        : 0,numZIndex       : this.insRoot.getZIndex(),insCurrent      : this,flagEscape      : 1,path            : this.insRoot.vars.varsSystem.path.post,querysKey       : arrayKey,querysValue     : arrayValue,functionSuccess : '_sendChildSuccess',functionFail    : '_sendChildFail'});var str = this._varsBootTitle;var strInsWindow = 'ins' + str;var ele = $(document.createElement('span'));$(this[strInsWindow].idWindow).down('.codeLibWindowBodyTopMiddleWrap', 0).insert(ele);ele.addClassName('codeLibRequestImgLoading');ele.addClassName('codeLibRequestImgLoadingPos');this._varsChild.eleLoading[str] = ele;},_sendChildSuccess : function(obj){var strExt = this._varsBoot.vars.varsRequest.strExt;var strChild = this._varsBoot.vars.varsRequest.strChild;var strClass = this._varsBoot.vars.varsRequest.strClass;var idModule = this._varsBoot.vars.varsRequest.idModule;var id = this._varsBoot.vars.id;if (obj.response.responseText.isJSON()) {var json = obj.response.responseText.evalJSON();if (json.flag == 0) {alert(this.insRoot.vars.varsSystem.str.errorSession);return;}}var eleScript = $(document.createElement('script'));eleScript.type = 'text/javascript';eleScript.text = obj.response.responseText;var eleHead = document.getElementsByTagName('head').item(0);eleHead.appendChild(eleScript);var newClass = eval('Code_' + strClass + '_' + idModule + '_' + strExt + strChild);var str = this._varsBootTitle;var strInsWindow = 'ins' + str;this[strInsWindow + 'Class'] = new newClass();this[strInsWindow + 'Class'].iniLoad({eleInsert    : $(this[strInsWindow].idWindow).down('.codeLibWindowBodyTopMiddleWrap', 0),insRoot      : this.insRoot,insCurrent   : this,idSelf       : this.idSelf + strExt + strChild + id,strExt       : strExt,strChild     : strChild,strClass     : strClass,idModule     : idModule,flagCheckUse : this._varsBoot.flagCheckUse,strFunc      : this._varsBoot.strFunc,insReturn    : this._varsBoot.insCurrent,flagId       : this._varsBoot.flagId,varsValue    : (this._varsBoot.varsValue)? this._varsBoot.varsValue : null,insWindow    : this[strInsWindow]});this._varsChild.eleLoading[str].remove();this._varsChild.eleLoading[str] = null;},_sendChildFail : function(obj){var str = this._varsBootTitle;this._varsChild.eleLoading[str].remove();this._varsChild.eleLoading[str] = null;alert(this.insRoot.vars.varsSystem.str.errorConnect);}});var Code_Lib_Color=Class.create({rgbToHex : function(obj){var r = parseFloat(obj.r,10);var g = parseFloat(obj.g,10);var b = parseFloat(obj.b,10);if(isNaN(r)) r=0;if(isNaN(g)) g=0;if(isNaN(b)) b=0;if( r>=256 || g>=256 || b>=256) return -1;var red = r.toString(16);var green = g.toString(16);var blue = b.toString(16);if(red.length == 1) red = '0' + red;if(green.length == 1) green = '0' + green;if(blue.length == 1) blue = '0' + blue;return '#'+ red + green + blue;}});var Code_Lib_Context = Class.create(Code_Lib_ExtLib,{initialize : function(obj){this._extAllot(obj);this._iniVars(obj);this._iniListener();this._iniWrap();this._iniList();this._setWrapStyle();},_iniListener : function(){this._extListener();},_iniVars : function(obj){this._extVars(obj);},getVars : function(){this.allot({insCurrent : this.insCurrent,from       : 'getVars',vars       : this.vars.varsDetail});},_iniLock : function(obj){this._setLock();},insLock : null,_setLock : function() {this.insRoot.vars.varsSystem.num.zIndex ++;this.insLock = new Code_Lib_LockTemp();this.insLock.iniLoad({idSelf     : this.idSelf + 'Lock',idInsert   : this.insRoot.vars.varsSystem.id.root,numZIndex  : this.insRoot.vars.varsSystem.num.zIndex,insCurrent : this.insSelf,strFunc    : 'removeWrap'});},eleWrap : null,_iniWrap : function(){this._iniLock();this._setWrap();},_setWrap : function(){var ele = $(document.createElement('div'));this.eleInsert.insert(ele);ele.id = this.idSelf;ele.addClassName('codeLibContextWrap');this.eleWrap = ele;},_setWrapStyle : function(){this.eleWrap.setStyle({zIndex : this.insRoot.setZIndex(),top    : this.vars.varsStatus.numTop + 'px',left   : this.vars.varsStatus.numLeft + 'px'});},removeWrap : function(){if(this.insLock.eleLock) this.insLock.eleLock.remove();this.stopListener();this.eleWrap.remove();this.getVars();},_staticDisplay : {numNormal : 6, numMenu : 6, numMargin : 5},_iniDisplay : function(obj){this._setDisplay(obj);},_setDisplay : function(obj){var insTemplate = new Code_Lib_Template();var numWidth = obj.listWidth + this._staticDisplay.numNormal+ this._staticDisplay.numMenu + this._staticDisplay.numMargin;var numHeight = obj.listHeight + this._staticDisplay.numNormal + this._staticDisplay.numMenu + this._staticDisplay.numMargin;var dataSha = insTemplate.get({flagType  : 'menuBox',numWidth  : numWidth,numHeight : numHeight,id        : ''});obj.eleParent.insert(dataSha);var dataNor = insTemplate.get({flagType  : 'normalBox',numWidth  : numWidth - this._staticDisplay.numMenu,numHeight : numHeight - this._staticDisplay.numMenu,id        : ''});obj.eleParent.down('.codeLibTemplateMenuBoxMiddleMiddle', 0).insert(dataNor);obj.eleParent.down('.codeLibTemplateNormalBoxMiddleMiddle', 0).addClassName('codeLibBaseBgFff');obj.eleParent.down('.codeLibTemplateNormalBoxMiddleMiddle', 0).insert(obj.eleChild);},_varsList : {numZIndex : 0},_staticList : {idle : 13},_iniList : function() {this._setList({idParent : this.idSelf + 'List-',arr      : this.vars.varsDetail});this._setListStyle({numTop  : 0,numLeft : 0,arr     : this.vars.varsDetail});this._setListHide({idParent : this.idSelf + 'List-',arr : this.vars.varsDetail});},_setList : function(obj){var eleList = $(document.createElement('div'));eleList.id = obj.idParent + 'Wrap';eleList.addClassName('codeLibContextListWrap');var eleLineWrap = $(document.createElement('div'));eleLineWrap.addClassName('codeLibBaseMarginFive');$(this.insRoot.vars.varsSystem.id.root).insert(eleLineWrap);var style = this._iniLine({ele      : eleLineWrap,arr      : obj.arr,idParent : obj.idParent});this._iniDisplay({eleParent  : eleList,eleChild   : eleLineWrap,listWidth  : style.listWidth,listHeight : style.listHeight});this.eleWrap.insert(eleList);},_setListStyle : function(obj){for (var i = 0; i < obj.arr.length; i++) {if (obj.arr[i].child.length) {this._varsList.numZIndex++;var numTop = obj.numTop + $(this.idSelf + 'List-' + obj.arr[i].id).down('.codeLibContextLineArrow',0).offsetTop - this._staticList.numIdle;var numLeft = obj.numLeft + $(this.idSelf + 'List-' + obj.arr[i].id).down('.codeLibContextLineArrow',0).offsetLeft + this._staticList.numIdle;$(this.idSelf + 'List-' + obj.arr[i].id + 'Wrap').setStyle({zIndex : this.insRoot.vars.varsSystem.num.zIndex + this._varsList.numZIndex,top    : numTop + 'px',left   : numLeft + 'px'});this._setListStyle({numTop  : numTop,numLeft : numLeft,arr     : obj.arr[i].child});}}},eleLineWrap : null,_staticLine : {numIdle : 16, numBlock : 16, numMargin : 5, numLength : 100},_iniLine : function(obj){var style = this._setLine({idParent : obj.idParent,ele      : obj.ele,arr      : obj.arr});this._setLineListener({arr : obj.arr});return style;},_setLine : function(obj){var listWidth = 0;var listHeight = 0;var lineWidth = 0;for (var i = 0; i < obj.arr.length; i++) {var eleWrap = $(document.createElement('span'));eleWrap.id = this.idSelf + 'List-' + obj.arr[i].id;eleWrap.unselectable = 'on';eleWrap.addClassName('codeLibContextLine');eleWrap.addClassName('unselect');if (obj.arr[i].flagCheckUse) eleWrap.addClassName('codeLibBaseCursorPointer');else eleWrap.addClassName('codeLibBaseCursorDefault');eleWrap.addClassName('clearfix');this.eleWrap.insert(eleWrap);var eleCheck = $(document.createElement('span'));eleCheck.addClassName('codeLibContextLineBlock');eleCheck.addClassName('codeLibContextLineCheck');if (obj.arr[i].flagCheckNow) {eleCheck.addClassName('codeLibContextLineChecked');}eleWrap.insert(eleCheck);var eleImg = $(document.createElement('span'));eleImg.addClassName('codeLibContextLineBlock');eleImg.addClassName('codeLibContextLineImg');if (obj.arr[i].strClass) {eleImg.addClassName(obj.arr[i].strClass);}eleWrap.insert(eleImg);var strTitle = '';if (obj.arr[i].strTitle.length > this._staticLine.numLength) {strTitle = obj.arr[i].strTitle.slice(0, this._staticLine.numLength);} else strTitle = obj.arr[i].strTitle;var eleTitle = $(document.createElement('span'));eleTitle.addClassName('codeLibContextLineTitle');eleTitle.insert(strTitle);eleTitle.title = obj.arr[i].strTitle;if (!obj.arr[i].flagCheckUse && !obj.arr[i].strClassFont) eleTitle.addClassName('codeLibContextLineTitleNoactive');eleWrap.insert(eleTitle);if (obj.arr[i].strClassFont) eleTitle.addClassName(obj.arr[i].strClassFont);var eleArrow = $(document.createElement('span'));eleArrow.addClassName('codeLibContextLineBlock');eleArrow.addClassName('codeLibContextLineArrow');if (obj.arr[i].child.length) {eleArrow.addClassName('codeLibContextLineArrowed');this._setList({idParent : eleWrap.id,arr      : obj.arr[i].child});}eleWrap.insert(eleArrow);var width = eleTitle.offsetWidth + this._staticLine.numIdle;if (width > lineWidth) lineWidth = width;width = width + this._staticLine.numBlock * 3 + this._staticLine.numMargin * 2;if (width > listWidth) listWidth = width;listHeight += eleTitle.offsetHeight;obj.ele.insert(eleWrap);}this._setLineStyle({arr       : obj.arr,listWidth : listWidth,lineWidth : lineWidth});var data = {listWidth  : listWidth,listHeight : listHeight};return data;},_setLineStyle : function(obj) {for (var i = 0; i < obj.arr.length; i++) {$(this.idSelf + 'List-' + obj.arr[i].id).setStyle({width : obj.listWidth + 'px'});$(this.idSelf + 'List-' + obj.arr[i].id).down('.codeLibContextLineTitle',0).setStyle({width : obj.lineWidth + 'px'});}},_updateLineVar : function(obj){for (var i = 0; i < obj.arr.length; i++) {if (obj.arr[i].id == obj.vars.id) {if (obj.arr[i].flagCheckNow) obj.arr[i].flagCheckNow = 0;else  obj.arr[i].flagCheckNow = 1;}}return obj.arr;},_setLineListener : function(obj){for (var i = 0; i < obj.arr.length; i++) {this.insListener.set({ bindAsEvent : 1, insCurrent : this, event : 'mousedown',strFunc : '_mousedownLine',ele : $(this.idSelf + 'List-' + obj.arr[i].id), vars : {vars : obj.arr[i]}});this.insListener.set({ bindAsEvent : 0, insCurrent : this, event : 'mouseover',strFunc : '_mouseoverLine',ele : $(this.idSelf + 'List-' + obj.arr[i].id), vars : {vars : obj.arr[i]}});this.insListener.set({ bindAsEvent : 0, insCurrent : this, event : 'mouseout',strFunc : '_mouseoutLine',ele : $(this.idSelf + 'List-' + obj.arr[i].id), vars : {vars : obj.arr[i]}});}},_mousedownLine : function(evt,obj){if (obj) evt.stop();else obj = evt;if (!obj.vars.flagCheckUse) return;this._updateLineVar({arr  : this.vars.varsDetail,vars : obj.vars});this.allot({insCurrent : this.insCurrent,vars       : obj.vars,from       : '_mousedownLine'});this.removeWrap();},_mouseoverLine : function(obj){this._setListHide({idParent : this.idSelf + 'List-',arr      : this.vars.varsDetail});if (!obj.vars.flagCheckUse) return;this._setListShow({vars : obj.vars});this._setListOver({vars : obj.vars});},_setListHide : function(obj){for (var i = 0; i < obj.arr.length; i++) {if (obj.idParent == this.idSelf + 'List-') $(obj.idParent + 'Wrap').show();else $(obj.idParent + 'Wrap').hide();if (obj.arr[i].child.length) {$(this.idSelf + 'List-' + obj.arr[i].id).removeClassName('codeLibContextLineOver');this._setListHide({idParent : this.idSelf + 'List-' + obj.arr[i].id,arr      : obj.arr[i].child});}}},_setListShow : function(obj){var id = '';id += obj.vars.id;var array = id.split('-');var level='';var num = array.length;for (var i = 0; i < num; i++) {level += '-' + array[i];var id = this.idSelf + 'List' + level + 'Wrap';if ($(id)) $(id).show();}},_setListOver : function(obj){var id = '';id += obj.vars.id;var array = id.split('-');var level = '';var num = array.length;for (var i = 0; i < num; i++) {level += '-' + array[i];var id = this.idSelf + 'List' + level;if ($(id)) $(id).addClassName('codeLibContextLineOver');}},_mouseoutLine : function(obj){if (!obj.vars.flagCheckUse) return;$(this.idSelf + 'List-'+ obj.vars.id).removeClassName('codeLibContextLineOver');}});var Code_Lib_ControlDetail = Class.create(Code_Lib_ExtControl,{initialize : function(obj){this._extAllot(obj);this._iniVars(obj);this._iniListener();this._iniWrap();},iniReload : function(obj){this.eventRemove();this.removeWrap();this._resetTool();},_iniVars : function(obj){this._extVars(obj);this.iniCake();},iniCake : function(){this._getCake();},_getCakeVars : function(obj){var insCurrent = obj.insReturn;if (obj.data) {insCurrent._getCakeVarsUpdateStatus({arr  : insCurrent.vars.varsDetail,data : obj.data});insCurrent._varsCake = obj.data;}},_getCakeVarsUpdateStatus : function(obj){if (!this.vars.varsStatus.flagCakeUse) return;if (this.vars.varsStatus.flagOutputUse) {str = 'flagOutputNow';if (obj.data[str] != undefined) {this.vars.varsStatus.flagOutputNow = obj.data[str];}}if (this.vars.varsStatus.flagPrintUse) {str = 'flagPrintNow';if (obj.data[str] != undefined) {this.vars.varsStatus.flagPrintNow = obj.data[str];}}if (this.vars.varsStatus.flagReloadUse) {str = 'flagReloadNow';if (obj.data[str] != undefined) {this.vars.varsStatus.flagReloadNow = obj.data[str];}}},_iniListener : function(){this._extListener();},updateVars : function(obj){this.vars = (Object.toJSON(obj.vars)).evalJSON();},updateVarsEvent : function(obj){this.vars.varsDetail = obj.vars.varsDetail;if(obj.vars.varsBtn) this.vars.varsBtn = obj.vars.varsBtn;this._updateVarsDetail({arr : this.vars.varsStatus.switchList});},_updateVarsDetail : function(obj){for (var i = 0; i < obj.arr.length; i++) {var str = obj.arr[i];this.vars[str].varsDetail.varsDetail = this.vars.varsDetail;this.vars[str].varsDetail.varsBtn = this.vars.varsBtn;}},_iniWrap : function(){this._extWrap();},_iniUnder : function(obj){this._extUnder(obj);},_updateUnder : function(obj){if (this.vars.varsStatus.flagFormUse) {if (obj.strTitleHeaderLeft != null) {this.vars.form.varsFormat.strTitleHeaderLeft = obj.strTitleHeaderLeft;}if (obj.strClassHeaderLeft != null) {this.vars.form.varsFormat.strClassHeaderLeft = obj.strClassHeaderLeft;}}if (this.vars.varsStatus.flagViewUse) {if (obj.strTitleHeaderLeft != null) {this.vars.view.varsFormat.strTitleHeaderLeft = obj.strTitleHeaderLeft;}if (obj.strClassHeaderLeft != null) {this.vars.view.varsFormat.strClassHeaderLeft = obj.strClassHeaderLeft;}}},_iniTool : function(){this._extTool();},_resetTool : function(obj){this._varsTool = {};this._iniTool();},_iniForm : function(){if (!this.vars.varsStatus.flagFormUse) return;this._setForm();},insForm : null,_setForm : function(){this._varsForm = {numTop  : 0,numLeft : 0};this.insForm = new Code_Lib_Form({eleInsertBtnLeft  : this.insUnder.eleFormat.fooder.down('.codeLibBaseMarginLeftFive',0),eleInsertBtnRight : this.insUnder.eleFormat.fooder.down('.codeLibBaseMarginRightFive',0),eleInsert         : this.insUnder.eleFormat.body,insRoot           : this.insRoot,insCurrent        : this,idSelf            : this.idSelf + 'Form',allot             : this._getFormAllot(),vars              : this.vars.form.varsDetail});},_varsForm : {numTop : 0, numLeft : 0},setFormScrollVars : function(){this._setFormScrollVars();},_setFormScrollVars : function(){if (this.insForm) this.insForm.setVarsScroll(this._varsForm);this._varsForm = {numTop  : 0,numLeft : 0};},getFormScrollVars : function(){return this._getFormScrollVars();},_getFormScrollVars : function(){if (this.insForm) {this._varsForm = this.insForm.getVarsScroll();return this._varsForm;}},_getFormAllot : function(){var allot = function(obj){var insCurrent = obj.insCurrent;obj.insCurrent = insCurrent.insCurrent;obj.from = 'form-' + obj.from;insCurrent.allot(obj);};return allot;},checkForm : function(obj){this.insForm.setValue();this.insForm.checkValue();this.insForm.resetValueError();var flag = this.insForm.checkValueError();if (flag) {this.insForm.showValueError({flagType: obj.flagType});return 1;} else {return 0;}},resetValueError : function(){this.insForm.resetValueError();},getForm : function(obj){return this.insForm.getValue();},_iniView : function(){if (!this.vars.varsStatus.flagViewUse) return;this._varView();this._setView();},_varView : function(){this._getCake();},insView : null,_setView : function(){this.insView = new Code_Lib_View({eleInsertBtnLeft  : this.insUnder.eleFormat.fooder.down('.codeLibBaseMarginLeftFive', 0),eleInsertBtnRight : this.insUnder.eleFormat.fooder.down('.codeLibBaseMarginRightFive', 0),eleInsert         : this.insUnder.eleFormat.body,insRoot           : this.insRoot,insCurrent        : this.insSelf,idSelf            : this.idSelf + 'View',allot             : this._getViewAllot(),vars              : this.vars.view.varsDetail});},_getCakeVarsUpdate : function(obj){if (!this.vars.varsStatus.flagCakeUse) return;if (this.vars.varsStatus.flagOutputUse) {str = 'flagOutputNow';if (obj.data[str] != undefined) {this.vars.varsStatus.flagOutputNow = obj.data[str];}}if (this.vars.varsStatus.flagPrintUse) {str = 'flagPrintNow';if (obj.data[str] != undefined) {this.vars.varsStatus.flagPrintNow = obj.data[str];}}if (this.vars.varsStatus.flagImportUse) {str = 'flagImportNow';if (obj.data[str] != undefined) {this.vars.varsStatus.flagImportNow = obj.data[str];}}if (this.vars.varsStatus.flagReloadUse) {str = 'flagReloadNow';if (obj.data[str] != undefined) {this.vars.varsStatus.flagReloadNow = obj.data[str];}}obj.arr = this.vars.view.varsDetail.varsDetail;var str;var numEnd = (obj.arr.length > 50)? obj.arr.length : 50;for (var i = 0; i < numEnd; i++) {if (!obj.arr[i]) return;if (!obj.arr[i].flagFoldUse) continue;if (this.vars.varsStatus.flagFoldUse) {str = 'flagFoldNow' + i;if (obj.data[str]) obj.arr[i].flagFoldNow = obj.data[str];}}},_checkCake : function(){if (!this.insRoot.insCake) return;this.insRoot.insCake.getStorageCake({parentKey  : this.idSelf,funcReturn : this._checkCakeVars,insReturn  : this});},_checkCakeVars : function(obj){var insCurrent = obj.insReturn;if(obj.data) {insCurrent._varsCake = obj.data;}},_setCakeVars : function(){if (!this.vars.varsStatus.flagCakeUse) return;if (this.vars.varsStatus.flagOutputUse) {str = 'flagOutputNow';this._varsCake[str] = this.vars.varsStatus.flagOutputNow;}if (this.vars.varsStatus.flagPrintUse) {str = 'flagPrintNow';this._varsCake[str] = this.vars.varsStatus.flagPrintNow;}if (this.vars.varsStatus.flagImportUse) {str = 'flagImportNow';this._varsCake[str] = this.vars.varsStatus.flagImportNow;}if (this.vars.varsStatus.flagReloadUse) {str = 'flagReloadNow';this._varsCake[str] = this.vars.varsStatus.flagReloadNow;}if (!this.insView) return;this._checkCake();var obj = {};obj.arr = this.insView.vars.varsDetail;var str;var numEnd = (obj.arr.length > 50)? obj.arr.length : 50;for (var i = 0; i < numEnd; i++) {if (obj.arr[i]) {if (!obj.arr[i].flagFoldUse) continue;if (this.vars.varsStatus.flagFoldUse) {str = 'flagFoldNow' + i;this._varsCake[str] = obj.arr[i].flagFoldNow;}}}},_getViewAllot : function(){var allot = function(obj){var insCurrent = obj.insCurrent;obj.insCurrent = insCurrent.insCurrent;obj.from = 'view-' + obj.from;insCurrent.allot(obj);};return allot;},_iniSheet : function(){if (!this.vars.varsStatus.flagSheetUse) return;},eventRemove : function(){this.stopListener();if (this.insView) this.insView.stopListener();if (this.insForm) this.insForm.stopListener();this.allot({insCurrent : this.insCurrent,from       : 'eventRemove-detail'});},varsEventNavi : null,eventNavi : function(obj){this.setCake();this.eventRemove();var str = this.vars.varsStatus.flagNow;this.varsEventNavi = (Object.toJSON(obj.vars)).evalJSON();this._updateUnder({strTitleHeaderLeft : obj.strTitle,strClassHeaderLeft : obj.strClass});this._iniUnder({vars : this.vars[str].varsFormat});if (obj.flagMoveUse) {this._iniMove({vars     : this.varsEventNavi,strTitle : obj.strTitle,strClass : obj.strClass});}if (this.vars.varsStatus['flag' + str.capitalize() + 'Use']) {this.updateVarsEvent({vars : this.varsEventNavi});this['_ini' + str.capitalize()]();if (this.insTool) {this._varsTool = this.varsEventNavi.varsEdit;this._iniTool();}}},varsEventList : null,eventList : function(obj){this.setCake();this.eventRemove();var str = this.vars.varsStatus.flagNow;this.varsEventList = (Object.toJSON(obj.vars)).evalJSON();this._updateUnder({strTitleHeaderLeft : obj.strTitle,strClassHeaderLeft : obj.strClass});this._iniUnder({vars : this.vars[str].varsFormat});if (obj.flagMoveUse) {this._iniMove({vars     : this.varsEventList,strTitle : obj.strTitle,strClass : obj.strClass});}if (this.vars.varsStatus['flag' + str.capitalize() + 'Use']) {this.updateVarsEvent({vars : this.varsEventList});this['_ini' + str.capitalize()]();if (this.insTool) {this._varsTool = this.varsEventList.varsEdit;this._iniTool();}}},eventTool : function(obj){this._extEventTool(obj);},_iniSwitch : function(obj){this._extSwitch(obj);},eventLayout : function(){if ($(this.idSelf + 'View')) {this.allot({insCurrent : this.insCurrent,from       : 'view-preEventLayout'});this.insView.iniReload();this.allot({insCurrent : this.insCurrent,from       : 'view-eventLayout'});}if ($(this.idSelf + 'Form')) {this.allot({insCurrent : this.insCurrent,from       : 'form-preEventLayout'});this.insForm.iniReload();this.allot({insCurrent : this.insCurrent,from       : 'form-eventLayout'});this._setFormScrollVars();}},preEventLayout : function(obj){var str = '';if (obj.flag == 'reset') str = 'resetScroll';else str = 'getScroll';if ($(this.idSelf + 'View')) {this.insView[str]();}if ($(this.idSelf + 'Form')) {this._getFormScrollVars();this.insForm[str]();}},getEleLoading : function(){return this.insUnder.getEleLoading();},setValue : function(){return this.insForm.setValue();},getFormValue : function(){return this.insForm.getFormValue();},setFormValueAll : function(){this.insForm.setValue();},setFormValue : function(obj){this.insForm.setValueVars(obj);},_iniMove : function(obj){if (!this.vars.varsStatus.flagMoveUse) return;this._removeMove();this._setMove(obj);},_removeMove : function(obj){this.stopListener();var ele = this.insUnder.eleFormat.header.down('.codeLibTemplateNormalFormatHeaderImg', 0);ele.removeClassName('codeLibBaseCursorMove');},_setMove : function(obj){var ele = this.insUnder.eleFormat.header.down('.codeLibTemplateNormalFormatHeaderImg', 0);ele.addClassName('codeLibBaseCursorMove');this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'mousedown',strFunc : '_mousedownMove', ele : ele, vars : obj});},_setMoveListener : function(obj){this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'mousemove',strFunc : '_mousemoveMove', ele : document, vars : {}});this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'mouseup',strFunc : '_mouseupMove', ele : document, vars : {}});},_varsMove : {},_mousedownMove : function(evt, obj) {if (obj) evt.stop();else obj = evt;this._setMoveListener(obj);this._varsMove = {};this._varsMove = {flag     : 1,ele      : evt.element(),vars     : obj.vars,varsOver : null,eleNavi  : null};this._setMoveNavi({vars : obj.vars,evt  : evt});this.allot({insCurrent : this.insCurrent,from       : '_mousedownMove',vars       : obj.vars.vars});},_mousemoveMove : function(evt) {if (!this._varsMove.flag) return;evt.stop();this._varsMove.eleNavi.setStyle({top  : (evt.pointerY() + this._staticMove.numNaviTop) + 'px',left : (evt.pointerX() + this._staticMove.numNaviLeft) + 'px'});},_mouseupMove : function(evt) {evt.stop();if (!this._varsMove.flag) return;this._varsMove.eleNavi.remove();this._varsMove = {};},_staticMove : {numNaviLeft : 15, numNaviTop : 5},_setMoveNavi : function(obj){var zIndex = this.insRoot.setZIndex();var ele = this.insUnder.eleFormat.header.down('.codeLibTemplateNormalFormatHeaderImg', 0).cloneNode(true);$(this.insRoot.vars.varsSystem.id.root).insert(ele);this._varsMove.eleNavi = ele;ele.addClassName('codeLibControlNavi');ele.setStyle({top    : (obj.evt.pointerY() + this._staticMove.numNaviTop) + 'px',left   : (obj.evt.pointerX() + this._staticMove.numNaviLeft) + 'px',zIndex : zIndex});},viewForm : function(obj){this.insForm.viewForm({idTarget    : obj.idTarget,flagHideNow : obj.flagHideNow,});},hideBtnBottom : function(){var str = 'ins' + this.vars.varsStatus.flagNow.capitalize();if (this[str]) {return this[str].hideBtnBottom();}},showBtnBottom : function(){var str = 'ins' + this.vars.varsStatus.flagNow.capitalize();if (this[str]) {return this[str].showBtnBottom();}}});var Code_Lib_ControlList = Class.create(Code_Lib_ExtControl,{initialize : function(obj){this._extAllot(obj);this._iniVars(obj);this._iniWrap();},iniReload : function(){this._extReload();},_varsSelect : [],_iniVars : function(obj){this._extVars(obj);this.iniCake();this._varsSelect = [];},updateVars : function(obj){this.vars = (Object.toJSON(obj.vars)).evalJSON();},updateVarsDetail : function(obj){this.vars.varsDetail = obj.vars.vars.varsDetail;this.vars.varsHtml = obj.vars.vars.varsHtml;this._varsSelect = obj.vars.varsSelect;this.setCake();},_setVar : function(){this.vars[this.vars.varsStatus.flagNow].varsDetail.varsDetail = this.vars.varsDetail;this.vars[this.vars.varsStatus.flagNow].varsDetail.varsPage = this.vars.varsPage;this.vars[this.vars.varsStatus.flagNow].varsDetail.varsBtn = this.vars.varsBtn;this.vars[this.vars.varsStatus.flagNow].varsDetail.varsHtml = this.vars.varsHtml;},_iniWrap : function(){this._extWrap();},iniCake : function(){this._getCake();},_getCakeVars : function(obj){var insCurrent = obj.insReturn;if (obj.data) {insCurrent._getCakeVarsUpdate({arr  : insCurrent.vars.varsDetail,data : obj.data});insCurrent._varsCake = obj.data;}},_varsCake : {},setCake : function(){if (!this.insRoot.insCake) return;this._setCakeVars();this.insRoot.insCake.setStorageCake({parentKey  : this.idSelf,value      : this._varsCake,numExpires : 0});},_getCakeVarsUpdate : function(obj){if (!this.vars.varsStatus.flagCakeUse) return;var str = 'flagNow';this.vars.varsStatus.flagNow = obj.data[str];if (this.vars.varsStatus.flagOutputUse) {str = 'flagOutputNow';if (obj.data[str] != undefined) {this.vars.varsStatus.flagOutputNow = obj.data[str];}}if (this.vars.varsStatus.flagPrintUse) {str = 'flagPrintNow';if (obj.data[str] != undefined) {this.vars.varsStatus.flagPrintNow = obj.data[str];}}if (this.vars.varsStatus.flagImportUse) {str = 'flagImportNow';if (obj.data[str] != undefined) {this.vars.varsStatus.flagImportNow = obj.data[str];}}if (this.vars.varsStatus.flagReloadUse) {str = 'flagReloadNow';if (obj.data[str] != undefined) {this.vars.varsStatus.flagReloadNow = obj.data[str];}}for (var i = 0; i < obj.arr.length; i++) {if (this.vars.varsStatus.flagBoldUse) {str = 'bold' + obj.arr[i].id;if (obj.data[str] == 0) {obj.arr[i].flagBoldNow = obj.data[str];obj.arr[i].strClassLoad = '';}}if (this.vars.varsStatus.flagFontUse) {str = 'font' + obj.arr[i].id;if (obj.data[str]) obj.arr[i].strClassFont = obj.data[str];}if (this.vars.varsStatus.flagBgUse) {str = 'bg' + obj.arr[i].id;if (obj.data[str]) obj.arr[i].strClassBg = obj.data[str];}}},_setCakeVars : function(){if (!this.vars.varsStatus.flagCakeUse) return;var obj = {};obj.arr = this.vars.varsDetail;var str = 'flagNow';this._varsCake[str] = this.vars.varsStatus.flagNow;if (this.vars.varsStatus.flagOutputUse) {str = 'flagOutputNow';this._varsCake[str] = this.vars.varsStatus.flagOutputNow;}if (this.vars.varsStatus.flagPrintUse) {str = 'flagPrintNow';this._varsCake[str] = this.vars.varsStatus.flagPrintNow;}if (this.vars.varsStatus.flagImportUse) {str = 'flagImportNow';this._varsCake[str] = this.vars.varsStatus.flagImportNow;}if (this.vars.varsStatus.flagReloadUse) {str = 'flagReloadNow';this._varsCake[str] = this.vars.varsStatus.flagReloadNow;}for (var i = 0; i < obj.arr.length; i++) {if (this.vars.varsStatus.flagBoldUse) {str = 'bold' + obj.arr[i].id;if (!obj.arr[i].flagBoldNow) this._varsCake[str] = 0;}if (this.vars.varsStatus.flagFontUse) {str = 'font' + obj.arr[i].id;if (obj.arr[i].strClassFont) this._varsCake[str] = obj.arr[i].strClassFont;}if (this.vars.varsStatus.flagBgUse) {str = 'bg' + obj.arr[i].id;if (obj.arr[i].strClassBg) this._varsCake[str] = obj.arr[i].strClassBg;}}},_iniUnder : function(obj){this._extUnder(obj);},_updateUnder : function(obj){if (this.vars.varsStatus.flagTreeUse) {if (obj.strTitleHeaderLeft != null) {this.vars.tree.varsFormat.strTitleHeaderLeft = obj.strTitleHeaderLeft;}if (obj.strClassHeaderLeft != null) {this.vars.tree.varsFormat.strClassHeaderLeft = obj.strClassHeaderLeft;}}if (this.vars.varsStatus.flagThumbnailUse) {if (obj.strTitleHeaderLeft != null) {this.vars.thumbnail.varsFormat.strTitleHeaderLeft = obj.strTitleHeaderLeft;}if (obj.strClassHeaderLeft != null) {this.vars.thumbnail.varsFormat.strClassHeaderLeft = obj.strClassHeaderLeft;}}if (this.vars.varsStatus.flagScheduleUse) {if (obj.strTitleHeaderLeft != null) {this.vars.schedule.varsFormat.strTitleHeaderLeft = obj.strTitleHeaderLeft;}if (obj.strClassHeaderLeft != null) {this.vars.schedule.varsFormat.strClassHeaderLeft = obj.strClassHeaderLeft;}}if (this.vars.varsStatus.flagTableUse) {if (obj.strTitleHeaderLeft != null) {this.vars.table.varsFormat.strTitleHeaderLeft = obj.strTitleHeaderLeft;}if (obj.strClassHeaderLeft != null) {this.vars.table.varsFormat.strClassHeaderLeft = obj.strClassHeaderLeft;}}if (this.vars.varsStatus.flagTableTreeUse) {if (obj.strTitleHeaderLeft != null) {this.vars.tableTree.varsFormat.strTitleHeaderLeft = obj.strTitleHeaderLeft;}if (obj.strClassHeaderLeft != null) {this.vars.tableTree.varsFormat.strClassHeaderLeft = obj.strClassHeaderLeft;}}},_iniTool : function(){this._extTool();},_iniTable : function(){if (!this.vars.varsStatus.flagTableUse) return;this._setVar();this._setTable();},insTable : null,_setTable : function(){this.insTable = new Code_Lib_Table();this.insTable.iniLoad({eleInsertBtnLeft  : this.insUnder.eleFormat.fooder.down('.codeLibBaseMarginLeftFive',0),eleInsertBtnRight : this.insUnder.eleFormat.fooder.down('.codeLibBaseMarginRightFive',0),eleInsert         : this.insUnder.eleFormat.body,insRoot           : this.insRoot,insCurrent        : this.insSelf,idSelf            : this.idSelf + 'Table',allot             : this._getTableAllot(),vars              : this.vars[this.vars.varsStatus.flagNow].varsDetail});},_getTableAllot : function(){var allot = function(obj){var insCurrent = obj.insCurrent;if (obj.from == '_iniVars') {insCurrent.insTable.setVarsBtn({vars : insCurrent._varsSelect});}else if (obj.from == 'updateVars') insCurrent.updateVarsDetail({vars : obj.vars});else {obj.insCurrent = insCurrent.insCurrent;obj.from = 'table-' + obj.from;insCurrent.allot(obj);}};return allot;},eventTableBtn : function(obj){this.insTable.allot({insCurrent : this.insSelf,from       : 'eventTableBtn',vars       : obj.vars});},getTableCheckBoxArrId : function(){return this.insTable.getCheckboxLineId();},getTableCheckBoxArrIdTitle : function(){return this.insTable.getCheckboxLineIdTitle();},_iniTableTree : function(){if (!this.vars.varsStatus.flagTableTreeUse) return;this._setVar();this._setTableTree();},insTableTree : null,_setTableTree : function(){this.insTableTree = new Code_Lib_TableTree();this.insTableTree.iniLoad({eleInsertBtnLeft  : this.insUnder.eleFormat.fooder.down('.codeLibBaseMarginLeftFive',0),eleInsertBtnRight : this.insUnder.eleFormat.fooder.down('.codeLibBaseMarginRightFive',0),eleInsert         : this.insUnder.eleFormat.body,insRoot           : this.insRoot,insCurrent        : this.insSelf,idSelf            : this.idSelf + 'TableTree',allot             : this._getTableTreeAllot(),vars              : this.vars[this.vars.varsStatus.flagNow].varsDetail});},_getTableTreeAllot : function(){var allot = function(obj){var insCurrent = obj.insCurrent;obj.insCurrent = insCurrent.insCurrent;obj.from = 'tableTree-' + obj.from;insCurrent.allot(obj);};return allot;},eventTableTreeBtn : function(obj){this.insTableTree.allot({insCurrent : this.insSelf,from       : 'eventTableTreeBtn',vars       : obj.vars});},getTableTreeCheckBoxArrId : function(){return this.insTableTree.getCheckboxLineId();},updateTableTreeVars : function(obj){if($(this.idSelf + 'TableTree')) {this.vars.tableTree.varsDetail.varsDetail = obj.vars.varsDetail;this.vars.tableTree.varsDetail.varsColumn = obj.vars.varsColumn;this.vars.tableTree.varsDetail.varsHtml = obj.vars.varsHtml;this.insTableTree.vars.varsDetail = obj.vars.varsDetail;this.insTableTree.vars.varsColumn = obj.vars.varsColumn;this.insTableTree.vars.varsHtml = obj.vars.varsHtml;this.insTableTree.resetBtnVars();this.insTableTree.iniReload();}},getTableTreeVarsDetail : function(){if($(this.idSelf + 'TableTree')) {return this.insTableTree.vars.varsDetail;}return [];},_iniSchedule : function(){if (!this.vars.varsStatus.flagScheduleUse) return;this._setVar();this._setSchedule();},insSchedule : null,_setSchedule : function(){this.insSchedule = new Code_Lib_Schedule();this.insSchedule.iniLoad({eleInsertBtnLeft  : this.insUnder.eleFormat.fooder.down('.codeLibBaseMarginLeftFive',0),eleInsertBtnRight : this.insUnder.eleFormat.fooder.down('.codeLibBaseMarginRightFive',0),eleInsert         : this.insUnder.eleFormat.body,insRoot           : this.insRoot,insCurrent        : this.insSelf,idSelf            : this.idSelf + 'Schedule',allot             : this._getScheduleAllot(),vars              : this.vars[this.vars.varsStatus.flagNow].varsDetail});},_getScheduleAllot : function(){var allot = function(obj){var insCurrent = obj.insCurrent;if (obj.from == '_iniVars') insCurrent.insSchedule.varsLogBtn = insCurrent._varsSelect;else if (obj.from == 'updateVars') insCurrent.updateVarsDetail({vars : obj.vars});else {obj.insCurrent = insCurrent.insCurrent;obj.from = 'schedule-' + obj.from;insCurrent.allot(obj);}};return allot;},_iniTree : function(){if (!this.vars.varsStatus.flagTreeUse) return;this._setVar();this._setTree();},insTree : null,_setTree : function(){this.insTree = new Code_Lib_Tree({eleInsertBtnLeft  : this.insUnder.eleFormat.fooder.down('.codeLibBaseMarginLeftFive', 0),eleInsertBtnRight : this.insUnder.eleFormat.fooder.down('.codeLibBaseMarginRightFive', 0),eleInsert         : this.insUnder.eleFormat.body,insRoot           : this.insRoot,insCurrent        : this,idSelf            : this.idSelf + 'Tree',allot             : this._getTreeAllot(),vars              : this.vars[this.vars.varsStatus.flagNow].varsDetail});},_getTreeAllot : function(){var allot = function(obj){var insCurrent = obj.insCurrent;obj.insCurrent = insCurrent.insCurrent;obj.from = 'tree-' + obj.from;insCurrent.allot(obj);};return allot;},updateTreeVars : function(obj){if($(this.idSelf + 'Tree')) {this.vars.tree.varsDetail.varsDetail = obj.vars.varsDetail;this.insTree.vars.varsDetail = obj.vars.varsDetail;this.insTree.iniReload();}},_iniThumbnail : function(){if (!this.vars.varsStatus.flagThumbnailUse) return;this._setVar();this._setThumbnail();},insThumbnail : null,_setThumbnail : function(){this.insThumbnail = new Code_Lib_Thumbnail({eleInsertBtnLeft  : this.insUnder.eleFormat.fooder.down('.codeLibBaseMarginLeftFive',0),eleInsertBtnRight : this.insUnder.eleFormat.fooder.down('.codeLibBaseMarginRightFive',0),eleInsert         : this.insUnder.eleFormat.body,insRoot           : this.insRoot,insCurrent        : this.insSelf,idSelf            : this.idSelf + 'Thumbnail',allot             : this._getThumbnailAllot(),vars              : this.vars[this.vars.varsStatus.flagNow].varsDetail});},_getThumbnailAllot : function(){var allot = function(obj){var insCurrent = obj.insCurrent;if (obj.from == '_iniVars') insCurrent.insThumbnail.varsBtn = insCurrent._varsSelect;else if (obj.from == 'updateVars') insCurrent.updateVarsDetail({vars : obj.vars});else {obj.insCurrent = insCurrent.insCurrent;obj.from = 'thumbnail-' + obj.from;insCurrent.allot(obj);}};return allot;},varsEventNavi : null,eventNavi : function(obj){var insEscape = new Code_Lib_Escape();this.eventRemove();this._updateUnder({strTitleHeaderLeft : obj.strTitle, strClassHeaderLeft : obj.strClass});this._iniUnder({vars : this.vars[this.vars.varsStatus.flagNow].varsFormat});var strIni = '_ini' + insEscape.strCapitalize({data : this.vars.varsStatus.flagNow});this[strIni]();if (this.insTool) {if (obj.varsEdit) {this._varsTool = obj.varsEdit;} else {this._varsTool = this.vars[this.vars.varsStatus.flagNow].varsEdit;}this._iniTool();}},showBtnBottom : function(){var insEscape = new Code_Lib_Escape();var str = insEscape.strCapitalize({data : this.vars.varsStatus.flagNow});if(this['ins' + str]) {this['ins' + str].showBtnBottom();}},eventRemove : function(){if (this.insTable) this.insTable.stopListener();if (this.insSchedule) this.insSchedule.stopListener();if (this.insThumbnail) this.insThumbnail.stopListener();if (this.insTree) this.insTree.stopListener();if (this.insTableTree) this.insTableTree.stopListener();},updateVarsDetailLine : function(obj){this.resetVars({vars : {numRows    : obj.vars.numRows,varsDetail : obj.vars.varsList,varsHtml   : obj.vars.varsHtml},flagSelect : 1,numLotNow  : obj.vars.numLotNow});},resetVars : function(obj){var insEscape = new Code_Lib_Escape();this.vars.varsPage.varsStatus.numRows = obj.vars.numRows;this.vars.varsPage.varsStatus.numLotNow = obj.numLotNow;this.setCake();this.vars.varsDetail = obj.vars.varsDetail;this.vars.varsHtml = obj.vars.varsHtml;this.allot({insCurrent : this.insCurrent,from       : 'resetVars',vars       : {varsDetail : this.vars.varsDetail,varsEdit   : (this.vars.varsEdit)? this.vars.varsEdit : {},varsBtn    : this.vars.varsBtn}});this.iniCake();var str = 'ins' + insEscape.strCapitalize({data : this.vars.varsStatus.flagNow});this[str].removeBtnSelect();if (!obj.flagSelect) {this._varsSelect = [];}this.resetVarsChild({arr : this.vars.varsStatus.switchList});},resetVarsChild : function(obj){for (var i = 0; i < obj.arr.length; i++) {var str = obj.arr[i];this.vars[str].varsDetail.varsDetail = this.vars.varsDetail;this.vars[str].varsDetail.varsPage = this.vars.varsPage;this.vars[str].varsDetail.varsBtn = this.vars.varsBtn;if (this.vars[str].varsDetail.varsHtml) {this.vars[str].varsDetail.varsHtml = this.vars.varsHtml;}if (this.vars.varsEdit) {this.vars[str].varsEdit = this.vars.varsEdit;}}},eventLayout : function(){if ($(this.idSelf + 'Table')) this.insTable.iniReload();if ($(this.idSelf + 'Thumbnail')) this.insThumbnail.iniReload();if ($(this.idSelf + 'Tree')) this.insTree.iniReload();if ($(this.idSelf + 'Schedule')) this.insSchedule.iniReload();if ($(this.idSelf + 'TableTree')) this.insTableTree.iniReload();},preEventLayout : function(obj){var str = '';if (obj.flag == 'reset') str = 'resetScroll';else str = 'getScroll';if ($(this.idSelf + 'Table')) this.insTable[str]();if ($(this.idSelf + 'Thumbnail')) this.insThumbnail[str]();if ($(this.idSelf + 'Tree')) this.insTree[str]();if ($(this.idSelf + 'Schedule')) this.insSchedule[str]();if ($(this.idSelf + 'TableTree')) this.insTableTree[str]();},eventTool : function(obj){this._extEventTool(obj);},_iniSwitch : function(obj){this._extSwitch(obj);}});var Code_Lib_ControlNavi = Class.create(Code_Lib_ExtControl,{initialize : function(obj){this._extAllot(obj);this._iniVars(obj);this._iniWrap();this._iniUnder({vars : this.vars[this.vars.varsStatus.flagNow].varsFormat});this.insEscape = new Code_Lib_Escape();var str = '_ini' + this.insEscape.strCapitalize({data : this.vars.varsStatus.flagNow});if (this.vars.varsStatus.flagNow.match(/^folder/)) {this._iniFolder();}else this[str]();if(this.insTool) {this._varsTool = this.vars[this.vars.varsStatus.flagNow].varsEdit;this._iniTool();}},iniReload : function(){this._extReload();},updateVars : function(){var str = this.vars.varsStatus.flagNow;this.insEscape = new Code_Lib_Escape();var strCap = 'ins' + this.insEscape.strCapitalize({data : this.vars.varsStatus.flagNow});this.vars[str].varsDetail = this[strCap].vars;},_iniVars : function(obj){this._extVars(obj);this._iniCake();},_iniCake : function(){this._getCake();},_getCakeVarsUpdate : function(obj){if(!this.vars.varsStatus.flagCakeUse) return;var str = 'flagNow';this.vars.varsStatus.flagNow = obj.data[str];obj.arr = this.vars.varsStatus.switchList;if (this.vars.varsStatus.flagOutputUse) {str = 'flagOutputNow';if (obj.data[str] != undefined) {this.vars.varsStatus.flagOutputNow = obj.data[str];}}if (this.vars.varsStatus.flagPrintUse) {str = 'flagPrintNow';if (obj.data[str] != undefined) {this.vars.varsStatus.flagPrintNow = obj.data[str];}}if (this.vars.varsStatus.flagImportUse) {str = 'flagImportNow';if (obj.data[str] != undefined) {this.vars.varsStatus.flagImportNow = obj.data[str];}}var flag = 0;for (var i = 0; i < obj.arr.length; i++) {if (obj.arr[i] == this.vars.varsStatus.flagNow) {flag = 1;break;}}if (!flag) this.vars.varsStatus.flagNow = obj.arr[0];},_setCakeVars : function(obj){if(!this.vars.varsStatus.flagCakeUse) return;var str = 'flagNow';this._varsCake[str] = this.vars.varsStatus.flagNow;if (this.vars.varsStatus.flagOutputUse) {str = 'flagOutputNow';this._varsCake[str] = this.vars.varsStatus.flagOutputNow;}if (this.vars.varsStatus.flagPrintUse) {str = 'flagPrintNow';this._varsCake[str] = this.vars.varsStatus.flagPrintNow;}if (this.vars.varsStatus.flagImportUse) {str = 'flagImportNow';this._varsCake[str] = this.vars.varsStatus.flagImportNow;}},_iniUnder : function(obj){this._extUnder(obj);},_iniTool : function(){this._extTool();},_iniWrap : function(){this._extWrap();},_iniTree : function(){if(!this.vars.varsStatus.flagTreeUse) return;this.insTree = null;this._setTree();},insTree : null,_setTree : function(){this.insTree = new Code_Lib_Tree({eleInsertBtnLeft  : this.insUnder.eleFormat.fooder.down('.codeLibBaseMarginLeftFive', 0),eleInsertBtnRight : this.insUnder.eleFormat.fooder.down('.codeLibBaseMarginRightFive', 0),eleInsert         : this.insUnder.eleFormat.body,insRoot           : this.insRoot,insCurrent        : this.insSelf,idSelf            : this.idSelf + 'Tree',allot             : this._getTreeAllot(),vars              : this.vars.tree.varsDetail});},_getTreeAllot : function(){var allot = function(obj){var insCurrent = obj.insCurrent;if(obj.from == '_mousedownBtn') {insCurrent.allot({insCurrent : insCurrent.insCurrent,from       : 'tree-_mousedownBtn',vars       : obj.vars});} else {obj.insCurrent = insCurrent.insCurrent;obj.from = 'tree-' + obj.from;insCurrent.allot(obj);}};return allot;},updateTreeVars : function(obj){if($(this.idSelf + 'Tree')) {this.vars.tree.varsDetail.varsDetail = obj.vars;this.insTree.vars.varsDetail = obj.vars;this.insTree.iniReload();}},updateTreePageVars : function(obj){if($(this.idSelf + 'Tree')) {if (this.insTree.vars.varsPage) {this.insTree.vars.varsPage.varsStatus.numRows = obj.vars.numRows;this.insTree.vars.varsPage.varsStatus.numLotNow = obj.vars.numLotNow;}this.vars.tree.varsDetail.varsDetail = obj.vars.varsDetail;this.insTree.vars.varsDetail = obj.vars.varsDetail;this.insTree.removeBtnSelect();this.insTree.iniReload();}},updateTreeDetailLineVars : function(obj){this._updateTreeDetailLineVars({vars : obj.vars,arr  : this.insTree.vars.varsDetail});if($(this.idSelf + 'Tree')) this.insTree.iniReload();},_updateTreeDetailLineVars : function(obj){for (var i = 0; i < obj.arr.length; i++) {if (obj.arr[i].vars.idTarget == obj.vars.vars.idTarget) {obj.arr[i] = obj.vars;return;}}},updateTreeVarsDetail : function(obj){if($(this.idSelf + 'Tree')) {this.insTree.updateBlockVars({vars : obj.vars});this.insTree.iniReload();}},_iniSearch : function(){if(!this.vars.varsStatus.flagSearchUse) return;this.insSearch = null;this._setSearch();},insSearch : null,_setSearch : function(){this.insSearch = new Code_Lib_Search({eleInsertBtnLeft  : this.insUnder.eleFormat.fooder.down('.codeLibBaseMarginLeftFive', 0),eleInsertBtnRight : this.insUnder.eleFormat.fooder.down('.codeLibBaseMarginRightFive', 0),eleInsert         : this.insUnder.eleFormat.body,insRoot           : this.insRoot,insCurrent        : this.insSelf,idSelf            : this.idSelf + 'Search',allot             : this._getSearchAllot(),vars              : this.vars.search.varsDetail});},_getSearchAllot : function(){var allot = function(obj){var insCurrent = obj.insCurrent;obj.insCurrent = insCurrent.insCurrent;obj.from = 'search-' + obj.from;insCurrent.allot(obj);};return allot;},updateSearchVarsSave : function(obj){if(this.insSearch) {if(this.vars.varsStatus.flagNow == 'search') {this.insSearch.vars.varsMyRecord.varsFormList.varsDetail = obj.vars;this.insSearch.rebuildMyRecord();} else {this.vars.search.varsDetail.varsMyRecord.varsFormList.varsDetail = obj.vars;}}},updateSearchVars : function(obj){if(this.insSearch) {if(this.vars.varsStatus.flagNow == 'search') {this.insSearch.iniReloadVars({vars : obj.vars});} else {this.vars.search.varsDetail = obj.vars;}}},iniAutoSearch : function(obj){this.insSearch.iniAutoSearch(obj);},_iniFolder : function(){if(!this.vars.varsStatus.flagFolderUse) return;this._varsFolder();this._setFolder();},_varsFolder : function(){},insFolder : null,_setFolder : function(){this.insEscape = new Code_Lib_Escape();var str = this.insEscape.strCapitalize({data : this.vars.varsStatus.flagNow});this['ins' + str] = new Code_Lib_Folder({eleInsertBtnLeft  : this.insUnder.eleFormat.fooder.down('.codeLibBaseMarginLeftFive', 0),eleInsertBtnRight : this.insUnder.eleFormat.fooder.down('.codeLibBaseMarginRightFive', 0),eleInsert         : this.insUnder.eleFormat.body,insRoot           : this.insRoot,insCurrent        : this,idSelf            : this.idSelf + str,allot             : this._getFolderAllot(),vars              : this.vars[this.vars.varsStatus.flagNow].varsDetail});},_getFolderAllot : function(){var allot = function(obj){var insCurrent = obj.insCurrent;var data = insCurrent.vars.varsStatus.flagNow + '-' + obj.from;obj.insCurrent = insCurrent.insCurrent;obj.from = data;return insCurrent.allot(obj);};return allot;},updateFolderVars : function(obj){this.insEscape = new Code_Lib_Escape();obj.arr = this.vars.varsStatus.switchList;for (var i = 0; i < obj.arr.length; i++) {if (obj.arr[i].match(/^folder/)) {var strIns = 'ins' + this.insEscape.strCapitalize({data : obj.arr[i]});if(this[strIns]) {var str = this.insEscape.strCapitalize({data : this.vars.varsStatus.flagNow});this['ins' + str].vars.varsDetail = obj.vars;this['ins' + str].insTree.vars.varsDetail = obj.vars;this.vars[this.vars.varsStatus.flagNow].varsDetail = this['ins' + str].vars;this['ins' + str].iniReset();}}}},getVarsTreePast : function(){this.insEscape = new Code_Lib_Escape();if(this.vars.varsStatus.flagNow.match(/^folder/)) {var str = this.insEscape.strCapitalize({data : this.vars.varsStatus.flagNow});if (this['ins' + str]) {if ($(this.idSelf + str)) {return this['ins' + str].getVarsTreePast();}}}},setVarsTreePast : function(obj){this.insEscape = new Code_Lib_Escape();if(this.vars.varsStatus.flagNow.match(/^folder/)) {var str = this.insEscape.strCapitalize({data : this.vars.varsStatus.flagNow});if (this['ins' + str]) {if ($(this.idSelf + str)) {return this['ins' + str].setVarsTreePast(obj);}}}},eventBtnSave : function(){this.insEscape = new Code_Lib_Escape();if(this.vars.varsStatus.flagNow.match(/^folder/)) {var str = this.insEscape.strCapitalize({data : this.vars.varsStatus.flagNow});if (this['ins' + str]) {if ($(this.idSelf + str)) {this['ins' + str].eventBtnSave();}}}},addVars : function(obj){this.insEscape = new Code_Lib_Escape();if(this.vars.varsStatus.flagNow.match(/^folder/)) {var str = this.insEscape.strCapitalize({data : this.vars.varsStatus.flagNow});if (this['ins' + str]) {if ($(this.idSelf + str)) {this['ins' + str].addVars({vars : obj.vars});}}}},addLog : function(obj){this.insEscape = new Code_Lib_Escape();if(this.vars.varsStatus.flagNow.match(/^folder/)) {var str = this.insEscape.strCapitalize({data : this.vars.varsStatus.flagNow});if (this['ins' + str]) {if ($(this.idSelf + str)) {this['ins' + str].addLog({vars : obj.vars});}}}},eventMove : function(obj){this.insEscape = new Code_Lib_Escape();if(this.vars.varsStatus.flagNow.match(/^folder/)) {var str = this.insEscape.strCapitalize({data : this.vars.varsStatus.flagNow});if (this['ins' + str]) {if ($(this.idSelf + str)) {this['ins' + str].eventMove({vars : obj.vars});}}}},showBtn : function(){this.insEscape = new Code_Lib_Escape();if(this.vars.varsStatus.flagNow == 'search') {this.insSearch.showBtnBottom();} else if (this.vars.varsStatus.flagNow.match(/^folder/)) {var str = this.insEscape.strCapitalize({data : this.vars.varsStatus.flagNow});this['ins' + str].cancelLock();this['ins' + str].showBtnBottom();}},hideBtn : function(){var str = 'ins' + this.vars.varsStatus.flagNow.capitalize();if (this[str]) {return this[str].hideBtnBottom();}},eventRemove : function(){this.insEscape = new Code_Lib_Escape();var obj = {};obj.arr = this.vars.varsStatus.switchList;for (var i = 0; i < obj.arr.length; i++) {var str = this.insEscape.strCapitalize({data : obj.arr[i]});if (obj.arr[i].match(/^folder/)) {if ($(this.idSelf + str)) this['ins' + str].stopListener();} else if (obj.arr[i] == 'tree') {if ($(this.idSelf + str)) {this['ins' + str].stopListener();}} else if (obj.arr[i] == 'search') {if ($(this.idSelf + str)) this['ins' + str].eventRemove();}}},eventLayout : function(){this.insEscape = new Code_Lib_Escape();var obj = {};obj.arr = this.vars.varsStatus.switchList;for (var i = 0; i < obj.arr.length; i++) {var str = this.insEscape.strCapitalize({data : obj.arr[i]});if (obj.arr[i].match(/^folder/)) {if ($(this.idSelf + str)) this['ins' + str].iniReload();} else if (obj.arr[i] == 'tree') {if ($(this.idSelf + str)) this['ins' + str].iniReload();} else if (obj.arr[i] == 'search') {if ($(this.idSelf + str)) this['ins' + str].eventLayout();}}},preEventLayout : function(obj){this.insEscape = new Code_Lib_Escape();obj.arr = this.vars.varsStatus.switchList;for (var i = 0; i < obj.arr.length; i++) {var str = this.insEscape.strCapitalize({data : obj.arr[i]});if (obj.arr[i].match(/^folder/)) {if ($(this.idSelf + str)) {if (this['ins' + str].insTree) {if (obj.flag == 'reset') this['ins' + str].insTree.resetScroll();else this['ins' + str].insTree.getScroll();}}} else if (obj.arr[i] == 'tree') {if ($(this.idSelf + str)) {if (obj.flag == 'reset') this['ins' + str].resetScroll();else this['ins' + str].getScroll();}} else if (obj.arr[i] == 'search') {if ($(this.idSelf + str)) this['ins' + str].getScroll();}}},eventTool : function(obj){this._extEventTool(obj);},_iniSwitch : function(obj){this.updateVars();this._extSwitch(obj);}});var Code_Lib_Cookie = Class.create({setData : function(obj){if(obj.numExpires != '') {var date = new Date();var second = parseFloat(obj.numExpires);date = new Date(date.getTime() + (second * 1000));obj.numExpires = '; expires=' + date.toGMTString();}if(obj.path != '') {obj.path = '; path=' + obj.path;}if(obj.strDomain != '') {obj.strDomain = '; domain=' + obj.strDomain;}var flag = document.URL.match(/^https/);if(flag) {obj.secure = '; secure';} else {obj.secure = '';}var data = obj.strKey + '=' + escape(obj.value);document.cookie = data + obj.numExpires + obj.path + obj.strDomain + obj.secure;},setObj : function(obj){if(obj.numExpires != '') {var date = new Date();var second = parseFloat(obj.numExpires);date = new Date(date.getTime() + (second * 1000));obj.numExpires = '; expires=' + date.toGMTString();}if(obj.path != '') {obj.path = '; path=' + obj.path;}if(obj.strDomain != '') {obj.strDomain = '; domain=' + obj.strDomain;}var flag = document.URL.match(/^https/);if(flag) {obj.secure = '; secure';} else {obj.secure = '';}var data = obj.parentKey + '=';data += obj.strKey[0];data += '#' + escape(obj.value[0]);for (var i = 1; i < obj.strKey.length; i++) {data += '|' + obj.strKey[i];data += '#' + escape(obj.value[i]);}document.cookie = data + obj.numExpires + obj.path + obj.strDomain + obj.secure;},removeAllData : function(obj){if(obj.path != '') {obj.path = '; path=' + obj.path;}if(obj.strDomain != '') {obj.strDomain = '; domain=' + obj.strDomain;}var flag = document.URL.match(/^https/);if(flag) {obj.secure = '; secure';} else {obj.secure = '';}var cookie=document.cookie;var getlist = cookie.split(';');getlist.each (function(v, i) {var pair = v.split('=');var key = pair[0];var date = new Date();date.setTime(date.getTime() - (86400 * 1000));var expires = '; expires=' + date.toGMTString();document.cookie = key + '=' + expires + obj.path + obj.strDomain + obj.secure;});},removeData : function(obj){var flag = document.URL.match(/^https/);if(flag) {obj.secure = '; secure';} else {obj.secure = '';}document.cookie = obj.strKey + '=;expires=Thu,01-Jan-70 00:00:01 GMT' + obj.path + obj.strDomain + obj.secure;},judge : function(){return (navigator.cookieEnabled);},getData : function(obj){var data='';var key = obj.strKey + '=';var text = document.cookie + ';';var startNum = text.indexOf(key);var endNum=0;if (startNum != -1) {endNum = text.indexOf(';', startNum);data = unescape(text.substring(startNum + key.length, endNum));}var object={cookie:[]};var arrayPairs=data.split('|');for (var j = 0; j < arrayPairs.length; j++) {var arrayPair = arrayPairs[j].split('#');if(!arrayPair[1] && !arrayPair[0] && arrayPairs.length == 1) {return object;}var pair = {key   : arrayPair[0],value : arrayPair[1]};object.cookie.push(pair);}if(obj.flagSort) {var newSort = object.cookie.sortBy(function(v, i) {var data = parseFloat(v.value);return data;});object.cookie = newSort;}return object;}});var Code_Lib_Css = Class.create({initialize : function(obj){var head;$$('head').each(function(ele){head = ele;});var link = document.createElement('link');link.href = obj.path;link.rel = 'stylesheet';link.type = 'text/css';var array = $$('link');for(var i = 0; i < array.length; i++) {if(array[i].href == link.href) return;}head.insert(link);}});var Code_Lib_DisplayByte = Class.create({varsLoad : {"strAbout":"\u7d04"},get : function(obj){if(obj.flagFrom == 'b') {if(obj.flagTo == 'b') return obj.num;else if(obj.flagTo == 'kb') return Math.floor(obj.num/1024);else if(obj.flagTo == 'mb') return Math.floor(obj.num/1024/1024);else if(obj.flagTo == 'gb') return Math.floor(obj.num/1024/1024/1024);}else if(obj.flagFrom == 'kb') {if(obj.flagTo == 'b') return obj.num*1024;else if(obj.flagTo == 'kb') return obj.num;else if(obj.flagTo == 'mb') return Math.floor(obj.num/1024);else if(obj.flagTo == 'gb') return Math.floor(obj.num/1024/1024);}else if(obj.flagFrom == 'mb') {if(obj.flagTo == 'b') return obj.num*1024*1024;else if(obj.flagTo == 'kb') return obj.num*1024;else if(obj.flagTo == 'mb') return obj.num;else if(obj.flagTo == 'gb') return Math.floor(obj.num/1024);}else if(obj.flagFrom == 'gb') {if(obj.flagTo == 'b') return obj.num*1024*1024*1024;else if(obj.flagTo == 'kb') return obj.num*1024*1024;else if(obj.flagTo == 'mb') return obj.num*1024;else if(obj.flagTo == 'gb') return obj.num;}}});var Code_Lib_DisplayComma = Class.create({get : function(obj){var num = obj.num;if(num < 1000 && num > -1000) return num;var str = "";if (num <= -1000) {num *= -1;while (num != (str = new String(num).replace(/^(\d+)(\d\d\d)/,"$1,$2"))) {num = str;}num = '-' + num;} else {while (num != (str = new String(num).replace(/^(\d+)(\d\d\d)/,"$1,$2"))) {num = str;}}return num;}});var Code_Lib_DisplayNumber = Class.create({get : function(obj){var numBase = this._getLength({num : obj.base});var numTarget = this._getLength({num : obj.target});var str = '' + obj.target;var flag = numBase - numTarget;for(var i = 0; i < flag; i++) {str = '0'+ str;}return str;},getPoint: function(obj){var num = obj.num;var numPoint = obj.numPoint;var numCheck = Math.floor(num);if (isNaN(numCheck) || numCheck == 'Infinity' || numCheck == '-Infinity') {return '';}var str = '';if (obj.flagType == 'floor') {str = new String(Math.floor(num * Math.pow(10, numPoint)) / Math.pow(10, numPoint));} else if (obj.flagType == 'round') {str = new String(Math.round(num * Math.pow(10, numPoint)) / Math.pow(10, numPoint));} else if (obj.flagType == 'ceil') {str = new String(Math.ceil(num * Math.pow(10, numPoint)) / Math.pow(10, numPoint));} else {str = new String(Math.floor(num * Math.pow(10, numPoint)) / Math.pow(10, numPoint));}if (str.indexOf('.') < 0) {str += '.';}var strPoint = '';for (var i = 0; i < numPoint; i++) {strPoint += '0';}str += strPoint;str = str.split('.')[0] + '.' + str.split('.')[1].substr(0, numPoint);return str;},_getLength : function(obj){var str = '' + obj.num;var data = str.length;return data;}});var Code_Lib_Escape = Class.create({varsLoad : {"strUnique":[{"before":"\u2460","after":"(1)"},{"before":"\u2461","after":"(2)"},{"before":"\u2462","after":"(3)"},{"before":"\u2463","after":"(4)"},{"before":"\u2464","after":"(5)"},{"before":"\u2465","after":"(6)"},{"before":"\u2466","after":"(7)"},{"before":"\u2467","after":"(8)"},{"before":"\u2468","after":"(9)"},{"before":"\u2469","after":"(10)"},{"before":"\u246a","after":"(11)"},{"before":"\u246b","after":"(12)"},{"before":"\u246c","after":"(13)"},{"before":"\u246d","after":"(14)"},{"before":"\u246e","after":"(15)"},{"before":"\u246f","after":"(16)"},{"before":"\u2470","after":"(17)"},{"before":"\u2471","after":"(18)"},{"before":"\u2472","after":"(19)"},{"before":"\u2473","after":"(20)"},{"before":"\u2160","after":"[1]"},{"before":"\u2161","after":"[2]"},{"before":"\u2162","after":"[3]"},{"before":"\u2163","after":"[4]"},{"before":"\u2164","after":"[5]"},{"before":"\u2165","after":"[6]"},{"before":"\u2166","after":"[7]"},{"before":"\u2167","after":"[8]"},{"before":"\u2168","after":"[9]"},{"before":"\u2169","after":"[10]"},{"before":"\u3349","after":"\u30df\u30ea"},{"before":"\u3314","after":"\u30ad\u30ed"},{"before":"\u3322","after":"\u30bb\u30f3\u30c1"},{"before":"\u334d","after":"\u30e1\u30fc\u30c8\u30eb"},{"before":"\u3318","after":"\u30b0\u30e9\u30e0"},{"before":"\u3327","after":"\u30c8\u30f3"},{"before":"\u3303","after":"\u30a2\u30fc\u30eb"},{"before":"\u3336","after":"\u30d8\u30af\u30bf\u30fc\u30eb"},{"before":"\u3351","after":"\u30ea\u30c3\u30c8\u30eb"},{"before":"\u3357","after":"\u30ef\u30c3\u30c8"},{"before":"\u330d","after":"\u30ab\u30ed\u30ea\u30fc"},{"before":"\u3357","after":"\u30ef\u30c3\u30c8"},{"before":"\u3326","after":"\u30c9\u30eb"},{"before":"\u3357","after":"\u30ef\u30c3\u30c8"},{"before":"\u3323","after":"\u30bb\u30f3\u30c8"},{"before":"\u332b","after":"\u30d1\u30fc\u30bb\u30f3\u30c8"},{"before":"\u334a","after":"\u30df\u30ea\u30d0\u30fc\u30eb"},{"before":"\u339c","after":"mm"},{"before":"\u339d","after":"cm"},{"before":"\u339e","after":"km"},{"before":"\u338e","after":"mg"},{"before":"\u338f","after":"kg"},{"before":"\u33c4","after":"cc"},{"before":"\u33a1","after":"\u5e73\u65b9\u30e1\u30fc\u30c8\u30eb"},{"before":"\u337b","after":"\u5e73\u6210"},{"before":"\u301d","after":"\u201d"},{"before":"\u301f","after":"\u301f"},{"before":"\u2116","after":"No."},{"before":"\u33cd","after":"kk"},{"before":"\u2121","after":"TEL"},{"before":"\u32a4","after":"(\u4e0a)"},{"before":"\u32a5","after":"(\u4e2d)"},{"before":"\u32a6","after":"(\u4e0b)"},{"before":"\u32a7","after":"(\u5de6)"},{"before":"\u32a8","after":"(\u53f3)"},{"before":"\u3231","after":"(\u682a)"},{"before":"\u3232","after":"(\u6709)"},{"before":"\u3239","after":"(\u4ee3)"},{"before":"\u337e","after":"\u660e\u6cbb"},{"before":"\u337d","after":"\u5927\u6b63"},{"before":"\u337c","after":"\u662d\u548c"},{"before":"\u2252","after":""},{"before":"\u2261","after":""},{"before":"\u222b","after":""},{"before":"\u222e","after":""},{"before":"\u2211","after":""},{"before":"\u221a","after":""},{"before":"\u22a5","after":""},{"before":"\u2220","after":""},{"before":"\u221f","after":""},{"before":"\u22bf","after":""},{"before":"\u2235","after":""},{"before":"\u2229","after":""},{"before":"\u222a","after":""},{"before":"\u221f","after":""},{"before":"\uff71","after":"\u30a2"},{"before":"\uff72","after":"\u30a4"},{"before":"\uff73","after":"\u30a6"},{"before":"\uff74","after":"\u30a8"},{"before":"\uff75","after":"\u30aa"},{"before":"\uff76","after":"\u30ab"},{"before":"\uff77","after":"\u30ad"},{"before":"\uff78","after":"\u30af"},{"before":"\uff79","after":"\u30b1"},{"before":"\uff7a","after":"\u30b3"},{"before":"\uff7b","after":"\u30b5"},{"before":"\uff7c","after":"\u30b9"},{"before":"\uff7e","after":"\u30bb"},{"before":"\uff7f","after":"\u30bd"},{"before":"\uff80","after":"\u30bf"},{"before":"\uff81","after":"\u30c1"},{"before":"\uff82","after":"\u30c4"},{"before":"\uff83","after":"\u30c6"},{"before":"\uff84","after":"\u30c8"},{"before":"\uff85","after":"\u30ca"},{"before":"\uff86","after":"\u30cb"},{"before":"\uff87","after":"\u30cc"},{"before":"\uff88","after":"\u30cd"},{"before":"\uff89","after":"\u30ce"},{"before":"\uff8a","after":"\u30cf"},{"before":"\uff8b","after":"\u30d2"},{"before":"\uff8c","after":"\u30d5"},{"before":"\uff8d","after":"\u30d8"},{"before":"\uff8e","after":"\u30db"},{"before":"\uff8f","after":"\u30de"},{"before":"\uff90","after":"\u30df"},{"before":"\uff91","after":"\u30e0"},{"before":"\uff92","after":"\u30e1"},{"before":"\uff93","after":"\u30e2"},{"before":"\uff94","after":"\u30e4"},{"before":"\uff95","after":"\u30e6"},{"before":"\uff96","after":"\u30e8"},{"before":"\uff97","after":"\u30e9"},{"before":"\uff98","after":"\u30ea"},{"before":"\uff99","after":"\u30eb"},{"before":"\uff9a","after":"\u30ec"},{"before":"\uff9b","after":"\u30ed"},{"before":"\uff9c","after":"\u30ef"},{"before":"\uff66","after":"\u30f2"},{"before":"\uff9d","after":"\u30f3"},{"before":"\uff67","after":"\u30a1"},{"before":"\uff68","after":"\u30a3"},{"before":"\uff69","after":"\u30a5"},{"before":"\uff6a","after":"\u30a7"},{"before":"\uff6b","after":"\u30a9"},{"before":"\uff6c","after":"\u30e3"},{"before":"\uff6d","after":"\u30e5"},{"before":"\uff6e","after":"\u30e7"},{"before":"\uff6f","after":"\u30c3"},{"before":"\uff70","after":"\u30fc"},{"before":"\uff9e","after":"\u201d"},{"before":"\uff9f","after":"\u309c"},{"before":"\uff61","after":"\u3002"},{"before":"\uff62","after":"\u300c"},{"before":"\uff63","after":"\u300d"},{"before":"\uff64","after":"\u3001"},{"before":"\uff65","after":"\u30fb"}],"toTag":[{"before":"&lt;","after":"<"},{"before":"&gt;","after":">"},{"before":"&nbsp;","after":" "}],"fromTag":[{"before":"<","after":"&lt;"},{"before":">","after":"&gt;"},{"before":" ","after":"&nbsp;"}],"standard":[{"before":"&","after":"&amp;"},{"before":"<","after":"&lt;"},{"before":">","after":"&gt;"}],"toHtml":[{"before":"&","after":"&amp;"},{"before":"<","after":"&lt;"},{"before":">","after":"&gt;"},{"before":"\r\n","after":"<br>"},{"before":"\r","after":"<br>"},{"before":"\n","after":"<br>"},{"before":"\t","after":"\u3000\u3000"}],"strToNum":[{"before":"\uff10","after":0},{"before":"\uff11","after":1},{"before":"\uff12","after":2},{"before":"\uff13","after":3},{"before":"\uff14","after":4},{"before":"\uff15","after":5},{"before":"\uff16","after":6},{"before":"\uff17","after":7},{"before":"\uff18","after":8},{"before":"\uff19","after":9}],"strToHalf":[{"before":"\uff41","after":"a"},{"before":"\uff42","after":"b"},{"before":"\uff43","after":"c"},{"before":"\uff44","after":"d"},{"before":"\uff45","after":"e"},{"before":"\uff46","after":"f"},{"before":"\uff47","after":"g"},{"before":"\uff48","after":"h"},{"before":"\uff49","after":"i"},{"before":"\uff4a","after":"j"},{"before":"\uff4b","after":"k"},{"before":"\uff4c","after":"l"},{"before":"\uff4d","after":"m"},{"before":"\uff4e","after":"n"},{"before":"\uff4f","after":"o"},{"before":"\uff50","after":"p"},{"before":"\uff51","after":"q"},{"before":"\uff52","after":"r"},{"before":"\uff53","after":"s"},{"before":"\uff54","after":"t"},{"before":"\uff55","after":"u"},{"before":"\uff56","after":"v"},{"before":"\uff58","after":"x"},{"before":"\uff59","after":"y"},{"before":"\uff5a","after":"z"},{"before":"\uff21","after":"A"},{"before":"\uff22","after":"B"},{"before":"\uff23","after":"C"},{"before":"\uff24","after":"D"},{"before":"\uff25","after":"E"},{"before":"\uff26","after":"F"},{"before":"\uff27","after":"G"},{"before":"\uff28","after":"H"},{"before":"\uff29","after":"I"},{"before":"\uff2a","after":"J"},{"before":"\uff2b","after":"K"},{"before":"\uff2c","after":"L"},{"before":"\uff2d","after":"M"},{"before":"\uff2e","after":"N"},{"before":"\uff2f","after":"O"},{"before":"\uff30","after":"P"},{"before":"\uff31","after":"Q"},{"before":"\uff32","after":"R"},{"before":"\uff33","after":"S"},{"before":"\uff34","after":"T"},{"before":"\uff35","after":"U"},{"before":"\uff36","after":"V"},{"before":"\uff38","after":"X"},{"before":"\uff39","after":"Y"},{"before":"\uff3a","after":"Z"}]},get : function(obj){return this.set({arr  : this.varsLoad[obj.flagType],data : obj.data});},set : function(obj) {var data = obj.data;if(data == undefined || data == '') return '';if (typeof(data) != 'string') return data;for (var i = 0; i < obj.arr.length; i++) {data = data.replace(RegExp(obj.arr[i].before, "g"), obj.arr[i].after);}return data;},toCommnaArr : function(obj){if (!obj.arr.length) return '';var str = ',' + obj.arr.join(',') + ',';return str;},toStampFromTerm : function(obj){var array = obj.data.split('/');var objTime = obj.insTimeZone.adjustTime({stamp : new Date(array[0], parseFloat(array[1]) - 1 , array[2]).getTime()});return objTime.stampServer;},strLowCapitalize : function(obj){if (obj.data == '') return;var str = obj.data;var numStr = str.length;var strTop = str.slice(0, 1);var strbottom = str.slice(1, numStr);str = strTop.toLowerCase() + strbottom;return str;},strCapitalize : function(obj){if (obj.data == '') return;var str = obj.data;var numStr = str.length;var strTop = str.slice(0, 1);var strbottom = str.slice(1, numStr);str = strTop.capitalize() + strbottom;return str;},fromCommnaArr : function(obj){if (obj.str == '') return [];obj.arr = obj.str.split(',');var objData = {};for (var i = 0; i < obj.arr.length; i++) {if (obj.arr[i] == '' || obj.arr[i] == null) continue;var str = 'id' + obj.arr[i];objData[str] = obj.arr[i];}var hash = $H(objData);var arrayNew = [];var num = 0;hash.each( function(pair){arrayNew[num] = pair.value;num++;} );return arrayNew;}});var Code_Lib_Flash = Class.create({getTemplate : function(obj){if(obj.varsKey.length) {var vars = '';for (var i = 0; i < obj.varsKey.length; i++) {vars += obj.varsKey[i] + '=' + obj.varsValue[i] + '&';}obj.vars = vars;}else obj.vars = '';obj.protocol = 'http';var flag = document.URL.match(/^https/);if(flag) obj.protocol = 'https';var tmplstr = '<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" ';tmplstr += 'codebase=';tmplstr += '"#{protocol}://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0"';tmplstr += ' width="#{numWidth}" height="#{numHeight}" id="#{id}" align="middle" >';tmplstr += '<param name="movie" value="#{path}" />';tmplstr += '<param name="quality" value="high" />';tmplstr += '<param name="allowFullScreen" value="#{allowFullScreen}">';tmplstr += '<param name="allowScriptAccess" value="#{allowScriptAccess}" />';if(obj.wmode) {tmplstr += '<param name="wmode" value="transparent" />';}if(obj.varsKey.length) {tmplstr += '<param name="FlashVars" value="#{vars}" />';}tmplstr += '<embed class="embed" name="#{id}" src="#{path}" width="#{numWidth}" height="#{numHeight}"';tmplstr += ' allowScriptAccess="#{allowScriptAccess}" allowFullScreen="#{allowFullScreen}"quality="high"';tmplstr += 'align="middle" type="application/x-shockwave-flash" ';tmplstr += 'pluginspage="#{protocol}://www.macromedia.com/go/getflashplayer"';if(obj.wmode){ tmplstr += 'wmode="transparent" ';}if(obj.varsKey.length) {tmplstr += 'FlashVars="#{vars}">';}tmplstr += '</embed>';tmplstr += '</object>';var data = tmplstr.interpolate(obj);return data;},checkBrowser : function(obj){    if (navigator.appName.indexOf("Microsoft") != -1) return window[obj.idMc];    else return document[obj.idMc];}});var Code_Lib_Folder = Class.create(Code_Lib_ExtLib,{varsLoad : {"varsWhole":{"num":{"limit":16777215,"limitLog":10,"limitFile":40},"str":{"noneTitle":"\u7121\u984c","limit":"\u30c7\u30fc\u30bf\u91cf\u304c\u8a31\u5bb9\u7bc4\u56f2\u3092\u8d85\u3048\u305f\u305f\u3081\u4fdd\u5b58\u3067\u304d\u306a\u304b\u3063\u305f\u3088\u3046\u3067\u3059\u3002","limitFile":"\u30d5\u30a1\u30a4\u30eb\u6570\u304c\u8a31\u5bb9\u7bc4\u56f2\uff08\u6700\u5927\u6570\uff1a<%replace%>\uff09\u3092\u8d85\u3048\u305f\u305f\u3081\u30ea\u30af\u30a8\u30b9\u30c8\u304c\u62d2\u5426\u3055\u308c\u305f\u3088\u3046\u3067\u3059\u3002","errDouble":"\u30d5\u30a9\u30eb\u30c0\u5185\u306b\u91cd\u8907\u3057\u3066\u3044\u308b\u30c7\u30fc\u30bf\u304c\u3042\u308b\u3088\u3046\u3067\u3059\u3002"}}},initialize : function(obj){this._extAllot(obj);this._iniVars(obj);this._iniWrap();this._iniTree();},iniReload : function(){this.stopListener();this.removeWrap();this._iniWrap();this._iniTree();},stopListener : function(){this.insTree.stopListener();},iniReset : function(){this.vars.varsTree.varsDetail = this.vars.varsDetail;this.iniReload();},_iniVars : function(obj){this._extVars(obj);this.vars.varsTree.varsDetail = this.vars.varsDetail;},_iniWrap : function(){this._extWrap();this.eleWrap.style.width = this._getWrapWidth() + 'px';this.eleWrap.style.height = this._getWrapHeight() + 'px';},insTree : null,_iniTree : function(){this._setTree();},_setTree : function(){this.insTree = new Code_Lib_Tree({eleInsertBtnLeft  : this.eleInsertBtnLeft,eleInsertBtnRight : this.eleInsertBtnRight,eleInsert         : this.eleWrap,insRoot           : this.insRoot,insCurrent        : this.insSelf,idSelf            : this.idSelf + 'Tree',allot             : this._getTreeAllot(),vars              : this.vars.varsTree});},_varsTreeOutside : null,_varsTreePage : null,_getTreeAllot : function(){var allot = function(obj){var insCurrent = obj.insCurrent;if(obj.from == '_mousedownBtn') {insCurrent.allot({insCurrent : insCurrent.insCurrent,from       : obj.from,vars       : obj.vars.vars});} else if (obj.from == '_mousedownRemove') {insCurrent.vars.varsTree.varsDetail = insCurrent.insTree.vars.varsDetail;return 1;} else if (obj.from.match( /^_preMouseupMoveEventMove$/ )) {} else if (obj.from.match( /^_blurEdit|_mouseupMove$/ )) {insCurrent.vars.varsTree.varsDetail = insCurrent.insTree.vars.varsDetail;} else if (obj.from.match( /^_mouseupMoveEventMove$/ )) {} else {if(obj.from == 'eventBtnBottom') {if (obj.vars.vars.vars.idTarget == 'eventFormBtnSave') {if (insCurrent.vars.varsTree.varsDetail) {var len = (Object.toJSON(insCurrent.vars.varsTree.varsDetail)).length;if (len >= insCurrent.varsLoad.varsWhole.num.limit) {alert(insCurrent.varsLoad.varsWhole.str.limit);return;}insCurrent.vars.varsTree.varsDetail = insCurrent.insTree.vars.varsDetail;obj.vars = insCurrent.vars.varsTree.varsDetail;} else {obj.vars = [];}} else if (obj.vars.vars.vars.idTarget == 'eventFormBtnAdd') {obj.from = obj.from + '-' + obj.vars.vars.vars.idTarget;obj.insCurrent = insCurrent.insCurrent;var vars = insCurrent.allot(obj);insCurrent._addTreeVars({vars : vars});insCurrent.showBtnBottom();return;}}obj.from = obj.from;obj.insCurrent = insCurrent.insCurrent;insCurrent.allot(obj);}};return allot;},eventBtnSave : function(){var obj = {};if (this.vars.varsTree.varsDetail) {var len = (Object.toJSON(this.vars.varsTree.varsDetail)).length;if (len >= this.varsLoad.varsWhole.num.limit) {alert(this.varsLoad.varsWhole.str.limit);return;}this.vars.varsTree.varsDetail = this.insTree.vars.varsDetail;obj.vars = this.vars.varsTree.varsDetail;} else {obj.vars = [];}obj.from = 'eventBtnBottom';obj.insCurrent = this.insCurrent;this.hideBtnBottom();this.allot(obj);},setVarsTreePast : function(obj){this.insTree.vars.varsDetail[0] = obj.vars;this.insTree.iniReload();this.vars.varsTree.varsDetail[0] = this.insTree.vars.varsDetail[0];},getVarsTreePast : function(obj){return this.insTree.vars.varsDetail[0];},addLog : function(obj){this._updateLogVars({arr : this.insTree.vars.varsDetail, vars : obj.vars});this.insTree.vars.varsDetail = this.insTree.getBlockLevel();this.insTree.iniReload();this.vars.varsTree.varsDetail = this.insTree.vars.varsDetail;},_updateLogVars : function(obj){for (var i = 0; i < obj.arr.length; i++) {if (obj.arr[i].flagFoldUse) {obj.arr[i].child = this._updateLogVarsChild({arr : obj.arr[i].child, vars : obj.vars});return;}}},_updateLogVarsChild : function(obj){var insDisplay = new Code_Lib_TimeDisplay();var objData = (Object.toJSON(this.vars.templateDetail.log)).evalJSON();var objTime = this.insRoot.insTimeZone.adjustDate({stamp : new Date().getTime()});var strTime = insDisplay.get({flagType : 3,vars     : objTime});objData.strTitle = strTime;objData.vars = obj.vars.vars;var arrNew = [objData];for (var i = 0; i < obj.arr.length; i++) {var num = i + 1;if (num >= this.varsLoad.varsWhole.num.limitLog) {return arrNew;}arrNew.push(obj.arr[i]);}return arrNew;},addVars : function(obj){this._addTreeVars(obj);},_addTreeVars : function(obj){var num = this._checkVarsFileNum({arr : this.insTree.vars.varsDetail});if (num > this.varsLoad.varsWhole.num.limitFile) {var varsData = (Object.toJSON(this.varsLoad.varsWhole.str.limitFile)).evalJSON();varsData = varsData.replace(/<%replace%>/, this.varsLoad.varsWhole.num.limitFile);alert(varsData);return;}var data = this._setVarsFile(obj);this.insTree.vars.varsDetail.push(data);this.insTree.vars.varsDetail = this.insTree.getBlockLevel();this.insTree.iniReload();this.vars.varsTree.varsDetail = this.insTree.vars.varsDetail;},_checkVarsFileNum : function(obj){var num = 0;for (var i = 0; i < obj.arr.length; i++) {num++;}return num;},_setVarsFile : function(obj){this.insEscape = new Code_Lib_Escape();var objData = (Object.toJSON(this.vars.templateDetail.file)).evalJSON();var strTitle = this.insEscape.get({data : obj.vars.strTitle, flagType : 'fromTag'});if (!obj.vars.strTitle) {strTitle = this._checkVarsFIleName({flagFile : 1,arr      : this.insTree.vars.varsDetail});}objData.strTitle = strTitle;objData.vars = obj.vars.vars;return objData;},_checkVarsFIleName : function(obj){var flag = 0;for (var i = 0; i < obj.arr.length; i++) {if ((obj.flagFile && !obj.arr[i].flagInsertUse) || (!obj.flagFile && obj.arr[i].flagInsertUse)) {var array = obj.arr[i].strTitle.split('-');if (array[0] == this.varsLoad.varsWhole.str.noneTitle) {flag = 1;}}}if (!flag) return this.varsLoad.varsWhole.str.noneTitle;var data = {};var numAll = 0;for (var i = 0; i < obj.arr.length; i++) {if ((obj.flagFile && !obj.arr[i].flagInsertUse) || (!obj.flagFile && obj.arr[i].flagInsertUse)) {var array = obj.arr[i].strTitle.split('-');if (array[0] != this.varsLoad.varsWhole.str.noneTitle) continue;if (array[1] == undefined) continue;var str = 'id'+ array[1];data[str] = 1;numAll++;}}for (var i = 1; i < obj.arr.length + 1; i++) {var str = 'id'+ i;if (!data[str]) {var data = this.varsLoad.varsWhole.str.noneTitle + '-' + i;return data;}}var str = this.varsLoad.varsWhole.str.noneTitle + '-' + (obj.arr.length + 1);return str;},eventMove : function(obj){},showBtnBottom : function(){this.insTree.showBtnBottom();},hideBtnBottom : function(){this.insTree.hideBtnBottom();},cancelLock : function(){this.insTree.cancelLock();}});var Code_Lib_Form = Class.create(Code_Lib_ExtLib,{varsLoad : {"strMax":"\u6587\u5b57\u6570\u4e0a\u9650\u306b\u9054\u3057\u3066\u3044\u308b\u3088\u3046\u3067\u3059\u3002","strStr":"\u6587\u5b57"},initialize : function(obj){this._extAllot(obj);this._iniVars(obj);this._iniListener();this._iniListenerSelectShortCut();this._iniWrap();this._iniTemplate();this._iniBtnBottom();this.setFieldFocus();},iniReload : function(obj){this.getScroll();this.setValue();this.stopListener();this.stopListenerSelectShortCut();this.removeWrap();this._iniWrap();this._iniTemplate();this._iniBtnBottom();this.setScroll();},getVarsScroll : function(){var data = {numTop  : this.eleInsert.scrollTop,numLeft : this.eleInsert.scrollLeft};return data;},setFieldFocus : function(obj){if (obj == undefined) {idTarget = '';} else {if (obj.idTarget == undefined) {idTarget = '';} else {idTarget = obj.idTarget;}}this._setFieldFocus({arr : this.vars.varsDetail, idTarget : idTarget});},_setFieldFocus : function(obj){for (var i = 0; i < obj.arr.length; i++) {if (obj.arr[i].flagCommentUse) continue;if (obj.arr[i].flagContentUse) continue;if (obj.arr[i].flagHideUse && obj.arr[i].flagHideNow) continue;if (obj.arr[i].flagDisabled) continue;if (obj.idTarget === '') {if ($(this.idSelf + obj.arr[i].id)) {$(this.idSelf + obj.arr[i].id).focus();return;}} else {if (obj.idTarget == obj.arr[i].id) {if ($(this.idSelf + obj.arr[i].id)) {$(this.idSelf + obj.arr[i].id).focus();return;}}}}},setVarsScroll : function(obj){this.eleInsert.scrollTop = obj.numTop;this.eleInsert.scrollLeft = obj.numLeft;},_iniVars : function(obj){this._extVars(obj);},_iniListener : function(){this._extListener();},_iniWrap : function(){this._extWrap();},_iniBtnBottom : function(){this._extBtnBottom();},_iniTemplate : function(obj){this._setTemplate({arr : this.vars.varsDetail});this._setTemplateContent({arr : this.vars.varsDetail});},_checkFormFile : function(obj){for (var i = 0; i < obj.arr.length; i++) {if (obj.arr[i].flagInputType == 'file') {return 1;}}return 0;},_staticContent : {numMargin : 20, numPadding : 10, numIdle : 10},_getContentWidth : function(){var array = this.eleInsert.style.width.split('px');var num = parseFloat(array[0]);if(!isFinite(num)){num = this.eleInsert.offsetWidth;}var data = num - this._staticContent.numMargin - this._staticContent.numPadding * 2 - this._staticContent.numIdle;return data;},eleForm : null,eleIframe : null,_setTemplate : function(obj){var flagFile = this._checkFormFile({arr : obj.arr});var eleForm = $(document.createElement('form'));this.eleForm = eleForm;this.eleWrap.insert(eleForm);for (var i = 0; i < obj.arr.length; i++) {var eleWrap = $(document.createElement('div'));eleWrap.addClassName('codeLibFormWrap');eleWrap.id= this.idSelf + obj.arr[i].id + 'Wrap';if (obj.arr[i].flagHideUse && obj.arr[i].flagHideNow) eleWrap.hide();else eleWrap.show();eleWrap.addClassName('clearfix');eleForm.insert(eleWrap);var eleTitle = $(document.createElement('div'));eleTitle.addClassName('codeLibFormTitle');if(obj.arr[i].flagCommentUse && obj.arr[i].strCommentTitle) {eleTitle.addClassName('codeLibFormComment');eleTitle.insert(obj.arr[i].strCommentTitle);} else {if(obj.arr[i].flagMustUse) {eleTitle.addClassName('codeLibFormMust');}else eleTitle.addClassName('codeLibFormNone');eleTitle.insert(obj.arr[i].strTitle);}eleWrap.insert(eleTitle);var eleExplain = $(document.createElement('div'));eleWrap.insert(eleExplain);if(obj.arr[i].flagCommentUse) {if(obj.arr[i].strCommentTitle) {eleExplain.addClassName('codeLibFormExplain');eleExplain.addClassName('codeLibBaseFontSizeSeventy');}else  eleExplain.addClassName('codeLibFormCommentExplain');eleExplain.insert(obj.arr[i].strComment);continue;} else {eleExplain.addClassName('codeLibBaseFontSizeSeventy');eleExplain.addClassName('codeLibFormExplain');eleExplain.insert(obj.arr[i].strExplain);}var eleError = $(document.createElement('div'));eleError.addClassName('codeLibFormError');eleError.addClassName('codeLibBaseFontSizeSeventy');eleError.addClassName('codeLibBaseFontRed');eleError.hide();eleWrap.insert(eleError);var eleTag;if(obj.arr[i].flagTag == 'input' && obj.arr[i].flagTag == 'checkbox') {eleTag = $(document.createElement('ul'));} else if(obj.arr[i].flagTag == 'selectShortCut') {eleTag = $(document.createElement('input'));} else {eleTag = $(document.createElement(obj.arr[i].flagTag));}eleTag.addClassName('codeLibFormTag');eleTag.id = this.idSelf + obj.arr[i].id;if (flagFile) {if (obj.arr[i].flagMultiple) {eleTag.name = obj.arr[i].id + '[]';eleTag.multiple = true;} else {eleTag.name = obj.arr[i].id;}}if(obj.arr[i].flagTag == 'input') {eleTag.type = obj.arr[i].flagInputType;} else if(obj.arr[i].flagTag == 'selectShortCut') {eleTag.type = 'text';}eleTag.style.width = obj.arr[i].numWidth + obj.arr[i].unitWidth;if(obj.arr[i].flagTag == 'textarea') {eleTag.style.height = obj.arr[i].numHeight + obj.arr[i].unitHeight;}if(obj.arr[i].numMaxlength) {if (obj.arr[i].flagInputType != 'file') eleTag.maxLength = obj.arr[i].numMaxlength;}if (obj.arr[i].arrayHidden) {if (obj.arr[i].arrayHidden.length) {var arr = obj.arr[i].arrayHidden;for (var j = 0; j < arr.length; j++) {var eleHidden = $(document.createElement('input'));eleHidden.type  = 'hidden';eleHidden.id    = arr[j].id;eleHidden.name  = arr[j].id;eleHidden.value = arr[j].value;eleWrap.insert(eleHidden);}}}if(obj.arr[i].flagDisabled) eleTag.disabled = true;if (obj.arr[i].flagInputType != 'file') eleTag.value = obj.arr[i].value;if(obj.arr[i].flagTag == 'select') {if(obj.arr[i].flagMultiple) eleTag.multiple = true;if(obj.arr[i].numSize) eleTag.size = obj.arr[i].numSize;this._setTemplateSelect({arr       : obj.arr[i].arrayOption,now       : obj.arr[i].value,eleInsert : eleTag,vars      : obj.arr[i]});} else if(obj.arr[i].flagTag == 'selectShortCut') {this._setTemplateSelectShortCut({arr       : obj.arr[i].arrayOption,now       : obj.arr[i].value,eleTag    : eleTag,eleWrap   : eleWrap,vars      : obj.arr[i]});} else if(obj.arr[i].flagTag == 'input' && obj.arr[i].flagTag == 'checkbox') {this._setTemplateCheckbox({arr       : obj.arr[i].arrayOption,now       : obj.arr[i].value,eleInsert : eleTag});}if(obj.arr[i].flagContentUse) {var ele = $(document.createElement('div'));ele.addClassName('codeLibFormContent');ele.style.width = this._getContentWidth() + 'px';eleWrap.insert(ele);}if(obj.arr[i].flagTag == 'textarea' && obj.arr[i].numMaxlength) {var eleKeyWrap = $(document.createElement('div'));eleKeyWrap.id = this.idSelf + obj.arr[i].id + 'KeyWrap';eleKeyWrap.addClassName('codeLibFormTag');eleWrap.insert(eleKeyWrap);this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'keyup',strFunc : '_keyupTextArea', ele : eleTag, vars : {vars : obj.arr[i], ele : eleTag, eleLength : eleKeyWrap}});this._resetTextArea({vars : obj.arr[i], ele : eleTag, eleLength : eleKeyWrap});}eleWrap.insert(eleTag);}if (flagFile) {var cache = (new Date()).getTime();eleForm.action = this.insRoot.vars.varsSystem.path.post;eleForm.target = this.idSelf + 'Upload' + cache;eleForm.method = 'POST';eleForm.enctype = 'multipart/form-data';var eleIframe = $(document.createElement('iframe'));eleIframe.name = this.idSelf + 'Upload' + cache;eleIframe.setStyle({width  : '0px',height : '0px',border : '0px'});eleIframe.src = '';this.eleIframe = eleIframe;$(this.insRoot.vars.varsSystem.id.temp).insert(eleIframe);}},_keyupTextArea : function (evt, obj){this._resetTextArea(obj);},_resetTextArea : function (obj){var numLength = obj.ele.value.length;var strLength = '( ' + numLength + this.varsLoad.strStr + ' )';var numMax = obj.vars.numMaxlength;var strMax = '( ' + numMax + this.varsLoad.strStr + ' )';var str = obj.ele.value.substr(0, numMax);obj.eleLength.innerHTML = '';obj.eleLength.insert(strLength);if (numLength > numMax) {alert(this.varsLoad.strMax);obj.ele.value = str;obj.eleLength.innerHTML = '';obj.eleLength.insert(strMax);}},resetIframe : function(){this.eleIframe.innerHtml = '';},setTemplateSelect : function(obj){this._setTemplateSelect(obj);},_setTemplateSelect : function(obj){for (var i = 0; i < obj.arr.length; i++) {var ele = $(document.createElement('option'));ele.value = obj.arr[i].value;if (obj.vars.flagMultiple) {if (parseFloat(obj.vars.value[obj.arr[i].value])) ele.selected = true;} else {if(obj.now == obj.arr[i].value) ele.selected = true;}if (obj.arr[i].flagDisabled)  ele.disabled = true;ele.insert(obj.arr[i].strTitle);obj.eleInsert.insert(ele);}if (obj.flagDisabled == 1)  obj.eleInsert.disabled = true;else if (obj.flagDisabled == 0)  obj.eleInsert.disabled = false;},insListenerSelectShortCut : null,_iniListenerSelectShortCut : function(){this.insListenerSelectShortCut = new Code_Lib_Listener();this._varsListenerSelectShortCut = [];},_varsListenerSelectShortCut : null,_setListenerSelectShortCut : function(obj){var data = {ins : obj.ins};this._varsListenerSelectShortCut.push(data);},stopListenerSelectShortCut : function(){this.insListenerSelectShortCut.stop();this._stopListenerChild({arr : this._varsListenerSelectShortCut});this._resetListenerSelectShortCut();},_resetListenerSelectShortCut : function(){this._varsListenerSelectShortCut = [];},_setTemplateSelectShortCut : function(obj){var numWidth = this._getContentWidth();if (obj.vars.unitWidth == '%') {numWidth = parseFloat(numWidth * obj.vars.numWidth/100);} else {if (parseFlaot(obj.vars.numWidth)) {numWidth = parseFloat(numWidth * obj.vars.numWidth/100);}}var eleSelectWrap = $(document.createElement('div'));eleSelectWrap.addClassName('codeLibFormSelectBtnWrap');eleSelectWrap.id = this.idSelf + obj.vars.id + 'SelectBtnWrap';eleSelectWrap.style.width = numWidth + 'px';eleSelectWrap.addClassName('clearfix');eleSelectWrap.unselectable = 'on';eleSelectWrap.addClassName('unselect');var strTitle = '';for (var i = 0; i < obj.arr.length; i++) {if (obj.now == obj.arr[i].value) {strTitle = obj.arr[i].strTitle;}}var eleTitle = $(document.createElement('span'));eleTitle.addClassName('codeLibFormSelectBtnTitleWrap');eleTitle.insert(strTitle);eleTitle.title = strTitle;eleTitle.style.width = (numWidth - 25) + 'px';eleSelectWrap.insert(eleTitle);var eleImg = $(document.createElement('span'));eleImg.addClassName('codeLibFormSelectBtn');eleSelectWrap.insert(eleImg);obj.eleWrap.insert(eleSelectWrap);obj.eleTag.hide();this.insListenerSelectShortCut.set({bindAsEvent : 1, insCurrent : this, event : 'mousedown',strFunc : '_mousedownSelectShortCut', ele : eleSelectWrap, vars : { vars : obj.vars ,eleWrap : eleSelectWrap ,eleTitle : eleTitle}});},_mousedownSelectShortCut : function(evt, obj){evt.stop();var varsStyle = this.getVarsScroll();var vars = {flagTag       : 'selectShortCut',flagInputType : '',numMaxlength  : 0,numWidth      : 0,unitWidth     : 'px',numHeight     : 0,unitHeight    : 'px',arrayOption   : obj.vars.arrayOption,value         : obj.vars.value,vars          : obj.vars};var varsFormTemp = (Object.toJSON(obj.vars.varsFormTemp)).evalJSON();varsFormTemp.varsStatus.numTop = obj.eleWrap.offsetTop - varsStyle.numTop;varsFormTemp.varsStatus.numLeft = obj.eleWrap.offsetLeft - varsStyle.numLeft;varsFormTemp.varsDetail = vars;varsFormTemp.varsDetail.numWidth = obj.eleWrap.offsetWidth;varsFormTemp.varsDetail.numHeight = obj.eleWrap.offsetHeight;this.insFormTemp = new Code_Lib_FormTemp({insRoot    : this.insRoot,eleInsert  : $(this.idSelf).up('.codeLibWindow', 0),insCurrent : this,idSelf     : this.idSelf + 'Edit',allot      : this._getSelectShortCutAllot(),vars       : varsFormTemp});},_getSelectShortCutAllot : function(){var allot = function(obj) {var insCurrent = obj.insCurrent;if (obj.from == 'removeWrap') {insCurrent._setValueSelectShortCut({arr   : insCurrent.vars.varsDetail,value : obj.vars.value,vars  : obj.vars.vars});}};return allot;},_setValueSelectShortCut : function(obj){for (var i = 0; i < obj.arr.length; i++) {if (obj.arr[i].id == obj.vars.id) {obj.arr[i].value = obj.value;this._resetSelectShortCut({vars : obj.arr[i]});break;}}},_resetSelectShortCut : function(obj){this.stopListenerSelectShortCut();var eleTag = $(this.idSelf + obj.vars.id);eleTag.value = obj.vars.value;var eleWrap = $(this.idSelf + obj.vars.id + 'Wrap');$(this.idSelf + obj.vars.id + 'SelectBtnWrap').remove();this._setTemplateSelectShortCut({arr       : obj.vars.arrayOption,now       : obj.vars.value,eleTag    : eleTag,eleWrap   : eleWrap,vars      : obj.vars});this.allot({insCurrent : this.insCurrent,from       : '_resetSelectShortCut'});},_setTemplateCheckbox : function(obj){var array = obj.now.split('-');for (var i = 0; i < obj.arr.length; i++) {var ele = $(document.createElement('li'));if (Prototype.Browser.IE) ele.addClassName('ie');else if (Prototype.Browser.Gecko) ele.addClassName('firefox');else if (navigator.userAgent.match("Chrome")) ele.addClassName('chrome');var eleTag = $(document.createElement('input'));eleTag.id = this.idSelf + obj.arr[i].id;eleTag.value = obj.arr[i].value;for (var j=0; j<array.length; j++) {if(array[j] == obj.arr[i].value) eleTag.selected = true;}ele.insert(obj.arr[i].strTitle);obj.eleInsert.insert(ele);}},_setTemplateContent : function(obj){for (var i = 0; i < obj.arr.length; i++) {if(obj.arr[i].flagContentUse) {$(this.idSelf + obj.arr[i].id).hide();}}},getValue : function(){return this.vars.varsDetail;},getFormValue : function(){var data = this._getFormValue({arr : this.vars.varsDetail});return data;},_getFormValue : function(obj){var data = {};for (var i = 0; i < obj.arr.length; i++) {data[obj.arr[i].id] = obj.arr[i].value;}return data;},setValue : function(){this._setValue({arr : this.vars.varsDetail});},_setValue : function(obj){for (var i = 0; i < obj.arr.length; i++) {if (obj.arr[i].flagCommentUse) continue;if (obj.arr[i].flagTag == 'select' && obj.arr[i].flagMultiple) {var ele  = $(this.idSelf + obj.arr[i].id);var data = {};var flagSelect = 0;for (var j = 0; j < ele.options.length; j++) {var option = ele.options[j];if (!flagSelect) {flagSelect = (option.selected)? 1 : 0;}data[option.value] = (option.selected)? 1 : 0;}obj.arr[i].value = (flagSelect)? data : '';} else if (obj.arr[i].flagInputType == 'file' && obj.arr[i].flagMultiple) {var ele  = $(this.idSelf + obj.arr[i].id);var data = [];var files = ele.files;    for (var j = 0; j < files.length; j++) {    data.push(files[j].name);    }obj.arr[i].value = data;} else {obj.arr[i].value = $(this.idSelf + obj.arr[i].id).value;}}},viewFormLock : function(obj){this._viewFormLock({idTarget : obj.idTarget,flag     : obj.flag,arr      : this.vars.varsDetail});},_viewFormLock : function(obj){for (var i = 0; i < obj.arr.length; i++) {if (obj.idTarget == obj.arr[i].id) {if (obj.flag) $(this.idSelf + obj.arr[i].id).disabled = true;else $(this.idSelf + obj.arr[i].id).disabled = false;return;}}},viewForm : function(obj){this._viewForm({idTarget    : obj.idTarget,flagHideNow : obj.flagHideNow,arr         : this.vars.varsDetail});},_viewForm : function(obj){for (var i = 0; i < obj.arr.length; i++) {if (obj.idTarget == obj.arr[i].id) {if (obj.flagHideNow) $(this.idSelf + obj.arr[i].id + 'Wrap').hide();else $(this.idSelf + obj.arr[i].id + 'Wrap').show();return;}}},setValueVars : function(obj){if (obj.flag == 'selectMultiple') {this._setValueSelectMultiple({arr      : this.vars.varsDetail,value    : obj.value,idTarget : obj.idTarget,});} else {this._setValueVars({idTarget : obj.idTarget,value    : obj.value,arr      : this.vars.varsDetail});}},_setValueVars : function(obj){for (var i = 0; i < obj.arr.length; i++) {if (obj.arr[i].flagCommentUse) continue;if (obj.idTarget == obj.arr[i].id) {$(this.idSelf + obj.arr[i].id).value = obj.value;obj.arr[i].value = obj.value;if (obj.arr[i].flagTag == 'select') {var ele  = $(this.idSelf + obj.arr[i].id);for (var j = 0; j < ele.options.length; j++) {ele.options[j].selected = false;if (ele.options[j].value == obj.value) {ele.options[j].selected = true;}}} else if(obj.arr[i].flagTag == 'textarea' && obj.arr[i].numMaxlength) {this._resetTextArea({vars      : obj.arr[i],ele       : $(this.idSelf + obj.arr[i].id),eleLength : $(this.idSelf + obj.arr[i].id + 'KeyWrap')});}return;}}},_setValueSelectMultiple : function(obj){for (var i = 0; i < obj.arr.length; i++) {if (obj.arr[i].flagCommentUse) continue;if (obj.idTarget == obj.arr[i].id) {if (obj.arr[i].flagTag == 'select' && obj.arr[i].flagMultiple) {var ele  = $(this.idSelf + obj.arr[i].id);for (var j = 0; j < ele.options.length; j++) {if (parseFloat(obj.value[ele.options[j].value])) ele.options[j].selected = true;else ele.options[j].selected = false;}obj.arr[i].value = obj.value;}}}},checkValue : function(){var insCheck = new Code_Lib_CheckValue();this.vars.varsDetail = insCheck.checkValue({arr : this.vars.varsDetail});},resetValueError : function(){this._resetValueError({arr : this.vars.varsDetail});},_resetValueError : function(obj){for (var i = 0; i < obj.arr.length; i++) {if (obj.arr[i].flagCommentUse) continue;$(this.idSelf + obj.arr[i].id + 'Wrap').down('.codeLibFormError', 0).hide();$(this.idSelf + obj.arr[i].id + 'Wrap').down('.codeLibFormError', 0).innerHTML = '';}},checkValueError : function(){return this._checkValueError({arr : this.vars.varsDetail});},_checkValueError : function(obj){for (var i = 0; i < obj.arr.length; i++) {if (obj.arr[i].flagErrorNow) return 1;}},showValueError : function(obj){this._showValueError({flagType : obj.flagType,arr      : this.vars.varsDetail});this.showBtnBottom();},_showValueError : function(obj){for (var i = 0; i < obj.arr.length; i++) {var flag = this._getValueErrorComment({arr      : obj.arr[i].arrayError,id       : obj.arr[i].id,flagType : obj.flagType});if (flag) continue;}},_getValueErrorComment : function(obj){for (var i = 0; i < obj.arr.length; i++) {if (obj.arr[i].flagNow) {var id = this.idSelf + obj.id + 'Wrap';$(id).down('.codeLibFormError', 0).show();$(id).down('.codeLibFormError', 0).insert(obj.arr[i].strComment[obj.flagType]);return 1;}}},showValueAttestError : function(obj){this.resetValueError();this._showValueAttestError({arr      : this.vars.varsDetail,flagType : obj.flagType,str      : (obj.str)? obj.str : ''});this.showBtnBottom();},_showValueAttestError : function(obj){for (var i = 0; i < obj.arr.length; i++) {this._getValueAttestErrorComment({arr      : obj.arr[i].arrayError,id       : obj.arr[i].id,flagType : obj.flagType,str      : obj.str});}},_getValueAttestErrorComment : function(obj){for (var i = 0; i < obj.arr.length; i++) {if (obj.arr[i].flagUse && obj.arr[i].flagCheck == 'attest') {var id = this.idSelf + obj.id + 'Wrap';if (obj.str && (obj.arr[i].strComment[obj.flagType] || obj.arr[i].strComment[obj.flagType] === '')) {$(id).down('.codeLibFormError', 0).show();$(id).down('.codeLibFormError', 0).insert(obj.str);} else if (obj.str && (obj.flagType == undefined || obj.flagType == null)) {$(id).down('.codeLibFormError', 0).show();$(id).down('.codeLibFormError', 0).insert(obj.str);} else {if (obj.str) {$(id).down('.codeLibFormError', 0).show();$(id).down('.codeLibFormError', 0).insert(obj.str);continue;} else {$(id).down('.codeLibFormError', 0).show();$(id).down('.codeLibFormError', 0).insert(obj.arr[i].strComment[obj.flagType]);}}return;}}}});var Code_Lib_FormArea = Class.create(Code_Lib_ExtLib,{varsLoad : {"strClose":"\u9589\u3058\u308b","strOpen":"\u958b\u304f","strItem":"\u4ef6","strAll":"\u5168"},initialize : function(obj){this._extAllot(obj);this._iniListener();this._iniVars(obj);this._iniWrap();this._iniTree();this._setBtnTogleStyle();},iniReload : function(){this.stopListener();this.removeWrap();this._iniListener();this._iniWrap();this._iniTree();this._setBtnTogleStyle();},_iniVars : function(obj){this._extVars(obj);this._iniCake();},_iniCake : function(){this._getCake();},_getCakeVars : function(obj){var insCurrent = obj.insReturn;if(obj.data) {insCurrent._getCakeVarsUpdate({data : obj.data});}},_getCakeVarsUpdate : function(obj){var idTarget = obj.data._flagHideNow;if (!idTarget) {this._flagHideNow = 1;}this._flagHideNow = parseFloat(obj.data._flagHideNow);},_setCakeVars : function(obj){this._varsCake._flagHideNow = this._flagHideNow;},stopListener : function(){if(this.insTree) this.insTree.stopListener();},_eleWrapArea : null,_iniWrap : function(){this._extWrap();this._iniBtnArea();var ele = $(document.createElement('span'));this._eleWrapArea = ele;this.eleWrap.insert(this._eleWrapArea);this._eleWrapArea.addClassName('codeLibFormAreaWrap');this._eleWrapArea.setStyle({width  : this.vars.varsStatus.numWidth + 'px',height : this.vars.varsStatus.numHeight + 'px'});},_iniListener : function(){this._extListener();},_iniBtnArea : function(obj){if (this.vars.varsStatus.flagTogleUse) {this._setBtnWrap();this._setBtnTogle();}},_eleBtnWrap : null,_setBtnWrap : function(obj){var ele = $(document.createElement('span'));this._eleBtnWrap = ele;this.eleWrap.insert(this._eleBtnWrap);this._eleBtnWrap.setStyle({width  : this.vars.varsStatus.numWidth + 'px'});return ele;},_flagHideNow : 1,_setBtnTogle : function(){var insBtnOpen = new Code_Lib_Btn();var id = this.idSelf + 'BtnTogleOpen';insBtnOpen.iniBtn({eleInsert  : this._eleBtnWrap,id         : id,strFunc    : '_mousedownBtnTogle',strTitle   : this.varsLoad.strOpen,insCurrent : this,flagATag   : null,path       : null,vars       : {}});this._setListener({ins : insBtnOpen});var ele = $(id);ele.setStyle({marginBottom : '5px',marginLeft  : '5px'});var insBtnClose = new Code_Lib_Btn();var id = this.idSelf + 'BtnTogleClose';insBtnClose.iniBtn({eleInsert  : this._eleBtnWrap,id         : id,strFunc    : '_mousedownBtnTogle',strTitle   : this.varsLoad.strClose,insCurrent : this,flagATag   : null,path       : null,vars       : {}});this._setListener({ins : insBtnClose});var ele = $(id);ele.setStyle({marginBottom : '5px',marginLeft  : '5px'});var eleWrap = $(document.createElement('span'));eleWrap.id = this.idSelf + 'NumRows';this._eleBtnWrap.insert(eleWrap);eleWrap.setStyle({marginLeft  : '10px'});},_updateStyleNumRows : function(){var str = this.varsLoad.strAll;if (this.insTree) {str += this.insTree.vars.varsPage.varsStatus.numRows+ this.varsLoad.strItem;} else {str += this.vars.varsTree.varsPage.varsStatus.numRows+ this.varsLoad.strItem;}$(this.idSelf + 'NumRows').innerHTML = '';if (parseFloat(this.vars.varsTree.varsPage.varsStatus.numRows)) {$(this.idSelf + 'NumRows').innerHTML = str;}},_mousedownBtnTogle : function(obj){if (this._flagHideNow) {this._flagHideNow = 0;} else {this._flagHideNow = 1;}this.setCake();this._setBtnTogleStyle();},_setBtnTogleStyle : function(obj){if (!this.vars.varsStatus.flagTogleUse) {return;}this._updateStyleNumRows();if (this._flagHideNow) {$(this.idSelf + 'BtnTogleClose').hide();$(this.idSelf + 'BtnTogleOpen').show();$(this.idSelf + 'NumRows').show();this._eleWrapArea.hide();} else {$(this.idSelf + 'BtnTogleOpen').hide();$(this.idSelf + 'BtnTogleClose').show();$(this.idSelf + 'NumRows').hide();this._eleWrapArea.show();}},_iniTree : function(){this._varTree();this._setTree();},varsTree : null,_varTree : function(){if(this.vars.varsTree.varsStatus.flagPageUse) {var numStart = this.vars.varsTree.varsPage.varsStatus.numLotNow * this.insRoot.vars.varsSystem.status.numList;var numEnd = numStart + this.insRoot.vars.varsSystem.status.numList;if(numEnd > this.vars.varsDetail.length) {numEnd = this.vars.varsDetail.length;}if(!this.vars.varsDetail.length) {this.vars.varsTree.varsPage.varsStatus.numRows = 0;this.vars.varsTree.varsDetail = [];return;}this._updateTreeVars({arr      : this.vars.varsDetail,numStart : numStart,numEnd   : numEnd,idTarget : null});} else {this.vars.varsTree.varsDetail = this.vars.varsDetail;}},_updateTreeVars : function(obj){var arrayNew = [];for (var i = 0; i < obj.arr.length; i++) {if(obj.idTarget == obj.arr[i].vars.idTarget) continue;arrayNew.push(obj.arr[i]);}if(this.vars.varsDetail.length != arrayNew.length) {obj.numEnd--;if(obj.numEnd == obj.numStart) {if(this.insTree.vars.varsPage.varsStatus.numLotNow != 0) {this.insTree.vars.varsPage.varsStatus.numLotNow--;}var numLotNow = this.insTree.vars.varsPage.varsStatus.numLotNow;this.vars.varsTree.varsPage.varsStatus.numLotNow = numLotNow;obj.numStart = this.insTree.vars.varsPage.varsStatus.numLotNow* this.insRoot.vars.varsSystem.status.numList;obj.numEnd = obj.numStart + this.insRoot.vars.varsSystem.status.numList;if(obj.numEnd > this.vars.varsDetail.length - 1) {obj.numEnd = this.vars.varsDetail.length - 1;}}}this.vars.varsDetail = arrayNew;var array = [];for (var i = obj.numStart; i < obj.numEnd; i++) {if(!arrayNew[i]) break;array.push(arrayNew[i]);}this.vars.varsTree.varsPage.varsStatus.numRows = arrayNew.length;this.vars.varsTree.varsDetail = array;if(this.insTree) {var numLotNow = this.insTree.vars.varsPage.varsStatus.numLotNow;this.vars.varsTree.varsPage.varsStatus.numLotNow = numLotNow;this.insTree.vars.varsPage.varsStatus.numRows = arrayNew.length;this.insTree.vars.varsDetail = array;}},_resetTreeVars : function(obj){this.insTree.vars.varsPage.varsStatus.numLotNow = 0;this.vars.varsTree.varsPage.varsStatus.numLotNow = 0;this.vars.varsDetail = [];this.vars.varsTree.varsPage.varsStatus.numRows = 0;this.vars.varsTree.varsDetail = [];if(this.insTree) {this.vars.varsTree.varsPage.varsStatus.numLotNow = 0;this.insTree.vars.varsPage.varsStatus.numRows = 0;this.insTree.vars.varsDetail = [];}},getTreeValueToConmmaArr : function(){var str = this._getTreeValueToConmmaArr({arr : this.vars.varsDetail});return str;},_getTreeValueToConmmaArr : function(obj){var array = [];var num = 0;for (var i = 0; i < obj.arr.length; i++) {array[num] = obj.arr[i].vars.idTarget;num++;}var insEscape = new Code_Lib_Escape();var str = insEscape.toCommnaArr({arr : array});return str;},insTree : null,_setTree : function(){this.insTree = new Code_Lib_Tree({eleInsertBtnLeft  : null,eleInsertBtnRight : null,eleInsert         : this._eleWrapArea,insRoot           : this.insRoot,insCurrent        : this.insSelf,idSelf            : this.idSelf + 'Tree',allot             : this._getTreeAllot(),vars              : this.vars.varsTree});},modifyVarsMove : function(obj){this.insTree.modifyVarsMove(obj);},_getTreeAllot : function(){var allot = function(obj){var insCurrent = obj.insCurrent;if(obj.from == '_mousedownBarAdd') {insCurrent.allot({from       : '_mousedownBarAdd',insCurrent : insCurrent.insCurrent,vars       : {insCurrent : insCurrent,flag       : 'mousedownBarAdd'}});} else if(obj.from == '_mousedownBarLink') {insCurrent.allot({from       : '_mousedownBarLink',insCurrent : insCurrent.insCurrent,vars       : {insCurrent : insCurrent,flag       : 'mousedownBarLink'}});} else if(obj.from == '_mousedownBarRemove') {if(insCurrent.vars.varsTree.varsStatus.flagPageUse) {insCurrent._resetTreeVars({});}insCurrent.allot({from       : '_mousedownBarRemove',insCurrent : insCurrent.insCurrent,vars       : {insCurrent : insCurrent}});} else if(obj.from == '_mousedownRemove') {if(insCurrent.vars.varsTree.varsStatus.flagPageUse) {var numStart = insCurrent.insTree.vars.varsPage.varsStatus.numLotNow* insCurrent.insRoot.vars.varsSystem.status.numList;var numEnd = numStart + insCurrent.insRoot.vars.varsSystem.status.numList;if(numEnd > insCurrent.vars.varsDetail.length) {numEnd = insCurrent.vars.varsDetail.length;}insCurrent._updateTreeVars({arr      : insCurrent.vars.varsDetail,idTarget : obj.vars.vars.idTarget,numStart : numStart,numEnd   : numEnd});}insCurrent.allot({from       : '_mousedownRemove',insCurrent : insCurrent.insCurrent,vars       : {insCurrent : insCurrent,vars       : obj.vars}});return 1;} else if(obj.from == 'eventPage') {insCurrent.insTree.vars.varsPage.varsStatus.numLotNow = obj.vars.numLotNow;var numStart = insCurrent.insTree.vars.varsPage.varsStatus.numLotNow* insCurrent.insRoot.vars.varsSystem.status.numList;var numEnd = numStart + insCurrent.insRoot.vars.varsSystem.status.numList;if(numEnd > insCurrent.vars.varsDetail.length) {numEnd = insCurrent.vars.varsDetail.length;}insCurrent._updateTreeVars({arr      : insCurrent.vars.varsDetail,idTarget : null,numStart : numStart,numEnd   : numEnd});return 1;} else if(obj.from == '_mousedownMove') {obj.insSelf = insCurrent;obj.insCurrent = insCurrent.insCurrent;obj.from = 'eventMove';insCurrent.allot(obj);} else if(obj.from == '_mouseupMove') {insCurrent.vars.varsDetail = obj.vars;} else {obj.insCurrent = insCurrent.insCurrent;obj.from = 'tree-' + obj.from;insCurrent.allot(obj);}};return allot;}});var Code_Lib_FormCheck = Class.create(Code_Lib_ExtLib,{initialize : function(obj){this._extAllot(obj);this._iniVars(obj);this._iniListener();this._iniWrap();this._iniBtn();this._iniColumn();this._iniLine();},iniReload : function(){this.stopListener();this.removeWrap();this._iniWrap();this._iniBtn();this._iniColumn();this._iniLine();},_iniVars : function(obj){this._extVars(obj);},_iniListener : function(){this._extListener();},_iniWrap : function(){this._extWrap();this.eleWrap.addClassName('codeLibFormCheckWrap');var numWidth = this._getWrapWidth({arr : this.vars.varsColumn});var strWidth = numWidth + 'px';var numHeight = this._getWrapHeight({arr : this.vars.varsDetail});var strHeight = numHeight + 'px';this.eleWrap.setStyle({width  : strWidth,height : strHeight});},_staticWrap : {numDouble : 3, numSingle : 1, numHeight : 16},_getWrapWidth : function(obj){var num = this._staticWrap.numSingle;for (var i = 0; i < obj.arr.length; i++) {if(i == 0) {num += this._staticWrap.numDouble;} else {num += this._staticWrap.numSingle;}num += obj.arr[i].numWidth;}return num;},_getWrapHeight : function(obj){var num = this._staticWrap.numSingle + this._staticWrap.numHeight + this._staticWrap.numDouble;for (var i = 0; i < obj.arr.length; i++) {num += this._staticWrap.numSingle;num += this._staticWrap.numHeight;}return num;},_iniBtn : function(){if(!this.vars.varsStatus.flagBtnUse) return;this._setBtnWrap();this._setBtn();},eleWrapBtn : null,_setBtnWrap : function(){var ele = $(document.createElement('div'));ele.addClassName('codeLibFormCheckBtnWrap');this.eleWrap.insert(ele);this.eleWrapBtn = ele;},_setBtn : function(){var insBtn = new Code_Lib_Btn();insBtn.iniBtn({eleInsert  : this.eleWrapBtn,id         : this.idSelf + 'Btn',strFunc    : '_mousedownBtn',strTitle   : this.vars.varsStatus.strTitleBtn,insCurrent : this});this._setListener({ins : insBtn});},_mousedownBtn : function(){var flag = this.allot({from       : '_mousedownBtn',insCurrent : this});if (!flag) {this.iniReload();}},_iniColumn : function(){this._setColumn({arr : this.vars.varsColumn});},_staticColumn : {numHeight : 26, numPadding : 5, numDouble : 3, numSingle : 1},_setColumn : function(obj){var eleLineSeparate = $(document.createElement('div'));eleLineSeparate.addClassName('codeLibFormCheckLineSingle');this.eleWrap.insert(eleLineSeparate);var eleLine = $(document.createElement('div'));eleLine.addClassName('codeLibFormCheckLine');eleLine.unselectable = 'on';eleLine.addClassName('unselect');this.eleWrap.insert(eleLine);eleLine.setStyle({width  : this._getWrapWidth({arr : this.vars.varsColumn}) + 'px'});var eleLineDoubleWrap = $(document.createElement('div'));eleLineDoubleWrap.setStyle({width  : this._getWrapWidth({arr : this.vars.varsColumn}) + 'px',height : this._staticColumn.numDouble + 'px'});this.eleWrap.insert(eleLineDoubleWrap);var eleSingle = $(document.createElement('span'));eleSingle.addClassName('codeLibFormCheckColumnSingle');eleSingle.setStyle({height : this._staticColumn.numDouble + 'px'});eleLineDoubleWrap.insert(eleSingle);eleDouble = $(document.createElement('span'));eleDouble.addClassName('codeLibFormCheckLineDouble');eleDouble.setStyle({width  : (this._getWrapWidth({arr : this.vars.varsColumn}) - this._staticColumn.numSingle * 2) + 'px',height : this._staticColumn.numDouble + 'px'});eleLineDoubleWrap.insert(eleDouble);var eleSingle = $(document.createElement('span'));eleSingle.addClassName('codeLibFormCheckColumnSingle');eleSingle.setStyle({height : this._staticColumn.numDouble + 'px'});eleLineDoubleWrap.insert(eleSingle);for (var i = 0; i < obj.arr.length; i++) {var eleSeparate;if (i == 0) {eleSeparate = $(document.createElement('span'));eleSeparate.addClassName('codeLibFormCheckColumnSingle');eleSeparate.setStyle({height  : this._staticColumn.numHeight + 'px'});eleLine.insert(eleSeparate);}var eleColumn = $(document.createElement('span'));eleColumn.addClassName('codeLibFormCheckColumn');eleColumn.addClassName('codeLibBaseCursorDefault');eleColumn.title = obj.arr[i].strTitle;eleColumn.setStyle({width   : (obj.arr[i].numWidth - this._staticColumn.numPadding) + 'px'});eleColumn.insert(obj.arr[i].strTitle);eleLine.insert(eleColumn);if (i == 0) {eleSeparate = $(document.createElement('span'));eleSeparate.addClassName('codeLibFormCheckColumnDouble');eleSeparate.setStyle({height  : this._staticColumn.numHeight + 'px'});} else {eleSeparate = $(document.createElement('span'));eleSeparate.addClassName('codeLibFormCheckColumnSingle');eleSeparate.setStyle({height  : this._staticColumn.numHeight + 'px'});}eleLine.insert(eleSeparate);}},_iniLine : function(){this._setLine({arrColumn : this.vars.varsColumn,arr       : this.vars.varsDetail});},_staticLine : {numHeight : 26, numPadding : 5},_setLine : function(obj){var insEscape = new Code_Lib_Escape();for (var i = 0; i < obj.arr.length; i++) {var eleLine = $(document.createElement('div'));eleLine.addClassName('codeLibFormCheckLine');eleLine.id = this.idSelf + 'Line' + obj.arr[i].id;this.eleWrap.insert(eleLine);eleLine.setStyle({width  : this._getWrapWidth({arr : this.vars.varsColumn}) + 'px'});var eleLineSeparate = $(document.createElement('div'));eleLineSeparate.addClassName('codeLibFormCheckLineSingle');this.eleWrap.insert(eleLineSeparate);for (var j = 0; j < obj.arrColumn.length; j++) {var eleSeparate;if (j == 0) {eleSeparate = $(document.createElement('span'));eleSeparate.addClassName('codeLibFormCheckColumnSingle');eleSeparate.setStyle({height  : this._staticLine.numHeight + 'px'});eleLine.insert(eleSeparate);}var eleColumn = $(document.createElement('span'));eleColumn.id = this.idSelf + 'Line' + obj.arr[i].id + 'Column' + obj.arrColumn[j].id;eleColumn.addClassName('codeLibFormCheckColumn');eleColumn.setStyle({width   : (obj.arrColumn[j].numWidth - this._staticLine.numPadding) + 'px'});var str = insEscape.strLowCapitalize({data : obj.arrColumn[j].id});eleLine.insert(eleColumn);if (obj.arrColumn[j].flagType == 'check') {var strUse = str + 'Use';var strNow = str + 'Now';var strLock = str + 'Lock';eleColumn.unselectable = 'on';eleColumn.addClassName('unselect');if (obj.arr[i].varsColumnDetail[strUse]) {var eleCheck = $(document.createElement('span'));if (obj.arr[i].varsColumnDetail[strLock]) {if (obj.arr[i].varsColumnDetail[strNow]) {eleCheck.addClassName('codeLibFormCheckOnLock');} else {eleCheck.addClassName('codeLibFormCheckOffLock');}} else {eleCheck.addClassName('codeLibBaseCursorPointer');if (obj.arr[i].varsColumnDetail[strNow]) {eleCheck.addClassName('codeLibFormCheckOn');} else {eleCheck.addClassName('codeLibFormCheckOff');}this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'mousedown',strFunc : '_mousedownBtn', ele : eleCheck,vars : { vars : obj.arr[i], varsColumn : obj.arrColumn[j], flagUpdate : 1, ele : eleCheck }});}eleColumn.insert(eleCheck);}} else if (obj.arrColumn[j].flagType == 'btn') {var strUse = str + 'Use';var strLock = str + 'Lock';var strClass = str + 'StrClass';var strClassLock = str + 'StrClassLock';var strAtag = str + 'ATagUse';var strPath = str + 'Path';eleColumn.unselectable = 'on';eleColumn.addClassName('unselect');if (obj.arr[i].varsColumnDetail[strUse]) {if (obj.arr[i].varsColumnDetail[strLock]) {var eleBtn = $(document.createElement('span'));eleColumn.insert(eleBtn);eleBtn.addClassName(obj.arr[i].varsColumnDetail[strClassLock]);} else if (obj.arr[i].varsColumnDetail[strAtag]) {var eleBtn = $(document.createElement('a'));eleBtn.href = 'javascript:void(window.open("' + obj.arr[i].varsColumnDetail[strPath] + '"));';eleBtn.addClassName('codeLibBaseCursorPointer');eleBtn.addClassName(obj.arr[i].varsColumnDetail[strClass]);eleBtn.setStyle({ float : 'left' });eleColumn.insert(eleBtn);} else {var eleBtn = $(document.createElement('span'));eleColumn.insert(eleBtn);eleBtn.addClassName('codeLibBaseCursorPointer');eleBtn.addClassName(obj.arr[i].varsColumnDetail[strClass]);this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'mousedown',strFunc : '_mousedownBtn', ele : eleBtn,vars : { vars : obj.arr[i], varsColumn : obj.arrColumn[j], flagUpdate : 0, ele : eleBtn }});}}} else {eleColumn.title = obj.arr[i].varsColumnDetail[str];eleColumn.insert(obj.arr[i].varsColumnDetail[str]);}if (j == 0) {eleSeparate = $(document.createElement('span'));eleSeparate.addClassName('codeLibFormCheckColumnDouble');eleSeparate.setStyle({height  : this._staticLine.numHeight + 'px'});} else {eleSeparate = $(document.createElement('span'));eleSeparate.addClassName('codeLibFormCheckColumnSingle');eleSeparate.setStyle({height  : this._staticLine.numHeight + 'px'});}eleLine.insert(eleSeparate);}}},_mousedownBtn : function(evt, obj){if (obj) evt.stop();else obj = evt;if (obj.flagUpdate) {this._updateBtnVars({vars       : obj.vars,varsColumn : obj.varsColumn,});}var flag = this.allot({insCurrent : this,from       : '_mousedownBtn',vars       : {vars       : obj.vars,varsColumn : obj.varsColumn,numTop     : obj.ele.offsetTop,numLeft    : obj.ele.offsetLeft,},});if (!flag) {this.iniReload();}},_updateBtnVars : function(obj){var insEscape = new Code_Lib_Escape();var strNow = insEscape.strLowCapitalize({data : obj.varsColumn.id})+ 'Now';if (obj.vars.varsColumnDetail[strNow]) {obj.vars.varsColumnDetail[strNow] = 0;} else {obj.vars.varsColumnDetail[strNow] = 1;}}});var Code_Lib_FormFocus = Class.create(Code_Lib_ExtLib,{initialize : function(obj){this._extAllot(obj);this._iniVars(obj);this._iniListener();this._iniTemplate();},_iniVars : function(obj){this._extVars(obj);},_iniTemplate : function(){this._setTemplateListener();},_setTemplateListener : function(){this.insListener.set({ flagType15 : 1, bindAsEvent : 1, insCurrent : this, event : 'focus',strFunc : '_focusCheck',ele : this.eleInsert, vars : '' });this.insListener.set({ flagType15 : 1, bindAsEvent : 1, insCurrent : this, event : 'blur',strFunc : '_blurCheck', ele : this.eleInsert, vars : '' });},removeWrap : function(){this.stopListener();},_focusCheck : function(obj, evt){if (obj) evt.stop();else obj = evt;this.allot({from       : '_focusCheck',insCurrent : this.insCurrent});},_blurCheck : function(obj, evt){if (obj) evt.stop();else obj = evt;var value = this.allot({from       : '_blurCheck',insCurrent : this.insCurrent,vars       : this.eleInsert.value});this.eleInsert.value = value;},_iniListener : function(){this._extListener();}});var Code_Lib_FormList = Class.create(Code_Lib_ExtLib,{varsLoad : {"varsWhole":{"str":{"remove":"\u524a\u9664","numSort":"\u30bd\u30fc\u30c8\u9806","add":"\u8ffd\u52a0","addSelect":"\u9078\u629e","togle":"\u8868\u793a\u5207\u66ff"}}},initialize : function(obj){this._extAllot(obj);this._iniVars(obj);this._iniListener();this._iniWrap();this._iniAdd();this._iniLine();this._iniForm();},iniReload : function(obj){this.updateVarsValue();this.stopListener();this.removeWrap();this._iniWrap();this._iniAdd();this._iniLine();this._iniForm();},_staticWrap : {numBar : 17},_iniWrap : function(){this._extWrap();this.eleWrap.style.width = this._getWrapWidth() + 'px';},_iniVars : function(obj){this._extVars(obj);},_iniListener : function(){this._extListener();},_iniForm : function(){if(!this.vars.varsStatus.flagEditUse) return;this._setFormListener({arr : this.vars.varsDetail});},_setFormListener : function(obj){for (var i = 0; i < obj.arr.length; i++) {if(!obj.arr[i].flagEditUse || !obj.arr[i].flagFormUse) continue;var ele = $(this.idSelf + 'Line' + obj.arr[i].id).down('.codeLibFormListForm', 0);ele.focus();this.insListener.set({ flagType15 : 1, bindAsEvent : 1, insCurrent : this, event : 'blur',strFunc : '_blurForm', ele : ele, vars : {vars : obj.arr[i]}});return;}},_blurForm : function(obj, evt) {if(obj) evt.stop();else obj = evt;this._varsEdit.flag = 0;obj.vars.value = this._escapeFormValue({value : $(this.idSelf + 'Line' + obj.vars.id).down('.codeLibFormListForm', 0).value});obj.vars.flagFormUse = 0;var flag = this.allot({from       : '_blurForm',insCurrent : this.insCurrent});if(flag) return;this.iniReload();},_escapeFormValue : function(obj){this.insEscape = new Code_Lib_Escape();obj.value =this.insEscape.get({data : obj.value, flagType : 'fromTag'});return obj.value;},_mousedownEdit : function(evt,obj) {if(obj) evt.stop();else obj = evt;this._updateEdit({arr : this.vars.varsDetail, vars : obj.vars});this.iniReload();},_varsEdit : {flag : 0},_updateEdit : function(obj){this._varsEdit.flag = 1;for (var i = 0; i < obj.arr.length; i++) {if(!obj.arr[i].flagEditUse) continue;obj.arr[i].flagFormUse = 0;if(obj.arr[i].id == obj.vars.id) {obj.arr[i].flagFormUse = 1;}}},_mousedownRemove : function(evt,obj) {if(obj) evt.stop();else obj = evt;this._updateRemove({vars : obj.vars});var flag = this.allot({from       : '_mousedownRemove',insCurrent : this.insCurrent});if(flag) return;this.iniReload();},_updateRemove : function(obj){this._varsBlock = {};this.vars.varsDetail = this._removeBlock({arr      : this.vars.varsDetail,idTarget : obj.vars.id});this._updateSortSort({arr : this.vars.varsDetail});},_setSortListener : function(obj){this.insListener.set({ bindAsEvent : 1, insCurrent : this, event : 'mousemove',strFunc : '_mousemoveSort', ele : document, vars : ''});this.insListener.set({ bindAsEvent : 1, insCurrent : this, event : 'mouseup',strFunc : '_mouseupSort', ele : document, vars : ''});},_varsSort : {},_mousedownSort : function(evt, obj) {evt.stop();this.updateVarsValue();this._setSortListener();this._varsSort = {};this._varsSort = {flag     : 1,ele      : evt.element(),vars     : obj.vars,varsOver : null,eleNavi  : null};this._setSortNavi({vars : obj.vars,evt  : evt});},_mouseoverSort : function(obj){if(!this._varsSort.flag || !this.vars.varsStatus.flagSortUse) return;this._varsSort.varsOver = obj.vars;$(this.idSelf + 'LineSort' + obj.vars.id).addClassName('codeLibFormListSortLineOver');},_mouseoutSort : function(obj){if(!this._varsSort.flag || !this.vars.varsStatus.flagSortUse) return;this._varsSort.varsOver = '';$(this.idSelf + 'LineSort' + obj.vars.id).removeClassName('codeLibFormListSortLineOver');},_staticSort : {numNaviLeft : 15, numNaviTop : 5},_setSortNavi : function(obj){var zIndex = this.insRoot.setZIndex();this._mouseoutBtn({ vars : obj.vars });var eleWrap = $(document.createElement('span'));$(this.insRoot.vars.varsSystem.id.temp).insert(eleWrap);var eleLine = this._setLineTemplate({eleWrap      : eleWrap,vars         : obj.vars,flagFirst    : 0,flagListener : 0,});this._varsSort.eleNavi = eleWrap;eleWrap.addClassName('codeLibFormListNavi');eleWrap.setStyle({left   : (obj.evt.pointerX() + this._staticSort.numNaviLeft) + 'px',top    : (obj.evt.pointerY() + this._staticSort.numNaviTop) + 'px',zIndex : zIndex});},_mousemoveSort : function(evt, obj) {if(!this._varsSort.flag) return;if(obj) evt.stop();else obj = evt;this._varsSort.eleNavi.setStyle({top  : (evt.pointerY() + this._staticSort.numNaviTop) + 'px',left : (evt.pointerX() + this._staticSort.numNaviLeft) + 'px'});},_updateSort : function(){this._varsBlock = {};this._getBlock({arr      : this.vars.varsDetail,idTarget : this._varsSort.vars.id});this.vars.varsDetail = this._removeBlock({arr    : this.vars.varsDetail,idTarget : this._varsSort.vars.id});this.vars.varsDetail = this._setBlock({arr    : this.vars.varsDetail,idTarget : this._varsSort.varsOver.id,block  : this._varsBlock});this._updateSortSort({arr : this.vars.varsDetail});},_updateSortSort : function(obj){for (var i = 0; i < obj.arr.length; i++) {obj.arr[i].numSort = i;}},_mouseupSort : function(evt,obj) {if(obj) evt.stop();else obj = evt;if(!this._varsSort.flag) return;this._varsSort.eleNavi.remove();if(this._varsSort.varsOver) {if(this._varsSort.vars.id != this._varsSort.varsOver.id) {this._updateSort();var flag = this.allot({from       : '_mouseupSort',insCurrent : this.insCurrent});this._varsSort = {};if(flag) return;}}this._varsSort = {};this.iniReload();},_mousedownCopy : function(evt,obj) {if(obj) evt.stop();else obj = evt;this._updateCopy({vars : obj.vars});this.allot({from       : '_mousedownCopy',insCurrent : this.insCurrent});this.iniReload();},_updateCopy : function(obj){this.updateVarsValue();this._updateCopyChild({arr  : this.vars.varsDetail,vars : obj.vars});},_updateCopyChild : function(obj){var data;for (var i = 0; i < obj.arr.length; i++) {if(obj.vars.id == obj.arr[i].id) {data = (Object.toJSON(obj.arr[i])).evalJSON();data.id = new Date().getTime();data.numSort = obj.arr.length;break;}}this.vars.varsDetail.unshift(data);this._updateSortSort({arr : this.vars.varsDetail});},_iniAdd : function(){if(!this.vars.varsStatus.flagAddUse) return;this._setAddWrap();this._setAdd();},eleWrapAdd : null,_setAddWrap : function(){var ele = $(document.createElement('div'));ele.addClassName('codeLibFormListAddWrap');this.eleWrap.insert(ele);this.eleWrapAdd = ele;},_setAdd : function(){var str = '';if (this.vars.varsStatus.strAddNow) {if (this.varsLoad.varsWhole.str[this.vars.varsStatus.strAddNow]) {str = this.varsLoad.varsWhole.str[this.vars.varsStatus.strAddNow];} else {str = this.vars.varsStatus.strAddNow;}} else str = this.varsLoad.varsWhole.str.add;var insBtn = new Code_Lib_Btn();insBtn.iniBtn({eleInsert  : this.eleWrapAdd,id         : this.idSelf + 'BtnAdd',strFunc    : '_mousedownAdd',strTitle   : str,insCurrent : this.insSelf});this._setListener({ins : insBtn});},_mousedownAdd : function(){var flag = this.allot({from       : '_mousedownAdd',insCurrent : this});if (!flag) {this._updateAdd();this.iniReload();}},_updateAdd : function(obj){var data = (Object.toJSON(this.vars.templateDetail)).evalJSON();data.id = new Date().getTime();data.numSort = this.vars.varsDetail.length;data.value = '';this.vars.varsDetail.unshift(data);this._updateSortSort({arr : this.vars.varsDetail});},_mousedownBtn : function(evt, obj){if(obj) evt.stop();else obj = evt;if(this._varsEdit.flag) return;this.allot({insCurrent : this.insCurrent,from       : '_mousedownBtn',vars       : obj.vars});},_mouseoverBtn : function(obj){if(this._varsEdit.flag) return;$(this.idSelf + 'Line' + obj.vars.id).addClassName('codeLibFormListLineBtnOver');},_mouseoutBtn : function(obj){if(this._varsEdit.flag) return;$(this.idSelf + 'Line' + obj.vars.id).removeClassName('codeLibFormListLineBtnOver');},_mouseoverTitle : function(obj){var id = this.idSelf + 'Line' + obj.vars.id;$(id).down('.codeLibFormListLineTitle', 0).addClassName('codeLibFormListLineTitleOver');},_mouseoutTitle : function(obj){var id = this.idSelf + 'Line' + obj.vars.id;$(id).down('.codeLibFormListLineTitle',obj.num).removeClassName('codeLibFormListLineTitleOver');},_iniLine : function(){this._setLineWrap();if(this.vars.varsStatus.flagSortUse) {this.vars.varsDetail = this.vars.varsDetail.sortBy(function(v, i) {return v.numSort;});}this._setLine({arr : this.vars.varsDetail});},eleWrapLine : null,_setLineWrap : function(){var ele = $(document.createElement('div'));ele.addClassName('codeLibFormListLineWrap');this.eleWrap.insert(ele);this.eleWrapLine = ele;},_setLineTemplate : function(obj){var eleLine = $(document.createElement('span'));eleLine.unselectable = 'on';eleLine.addClassName('codeLibFormListLine');eleLine.id = this.idSelf + 'Line' + obj.vars.id;eleLine.setStyle({width : this._getWrapWidth() + 'px'});if(this.vars.varsStatus.flagBtnUse && obj.vars.flagBtnUse) {if (obj.flagListener) {this.insListener.set({ bindAsEvent : 1, insCurrent : this, event : 'mousedown',strFunc : '_mousedownBtn', ele : eleLine, vars : {vars : obj.vars}});this.insListener.set({ bindAsEvent : 0, insCurrent : this, event : 'mouseover',strFunc : '_mouseoverBtn', ele : eleLine, vars : {vars : obj.vars}});this.insListener.set({ bindAsEvent : 0, insCurrent : this, event : 'mouseout',strFunc : '_mouseoutBtn', ele : eleLine, vars : {vars : obj.vars}});}}if(obj.flagFirst) {eleLine.setStyle({marginTop : (this._staticLine.numMargin) + 'px'});}obj.eleWrap.insert(eleLine);if(this.vars.varsStatus.flagSortUse && obj.vars.flagSortUse) {var ele = $(document.createElement('span'));ele.addClassName('codeLibFormListSort');ele.addClassName('codeLibFormListBlock');ele.addClassName('codeLibBaseCursorMove');eleLine.insert(ele);if (obj.flagListener) {this.insListener.set({ bindAsEvent : 1, insCurrent : this, event : 'mousedown',strFunc : '_mousedownSort', ele : ele, vars : {vars : obj.vars}});this.insListener.set({ bindAsEvent : 0, insCurrent : this, event : 'mouseover',strFunc : '_mouseoverSort', ele : ele, vars : {vars : obj.vars}});this.insListener.set({ bindAsEvent : 0, insCurrent : this, event : 'mouseout',strFunc : '_mouseoutSort', ele : ele, vars : {vars : obj.vars}});}}if(this.vars.varsStatus.flagCopyUse && obj.vars.flagCopyUse) {var ele = $(document.createElement('span'));ele.addClassName('codeLibFormListCopy');ele.addClassName('codeLibFormListBlock');ele.addClassName('codeLibBaseCursorPointer');eleLine.insert(ele);if (obj.flagListener) {this.insListener.set({ bindAsEvent : 1, insCurrent : this, event : 'mousedown',strFunc : '_mousedownCopy', ele : ele, vars : {vars : obj.vars}});}}if(this.vars.varsStatus.flagRemoveUse && obj.vars.flagRemoveUse) {var ele = $(document.createElement('span'));ele.addClassName('codeLibFormListRemove');ele.addClassName('codeLibFormListBlock');ele.addClassName('codeLibBaseCursorPointer');eleLine.insert(ele);if (obj.flagListener) {this.insListener.set({ bindAsEvent : 1, insCurrent : this, event : 'mousedown',strFunc : '_mousedownRemove', ele : ele, vars : {vars : obj.vars}});}}if(this.vars.varsStatus.flagRemoveUse && obj.vars.flagEditUse) {var ele = $(document.createElement('span'));ele.addClassName('codeLibFormListEdit');ele.addClassName('codeLibFormListBlock');ele.addClassName('codeLibBaseCursorPointer');eleLine.insert(ele);if (obj.flagListener) {this.insListener.set({ bindAsEvent : 1, insCurrent : this, event : 'mousedown',strFunc : '_mousedownEdit', ele : ele, vars : {vars : obj.vars}});}}if(this.vars.varsStatus.flagFormUse && obj.vars.flagFormUse) {var eleTag;var eleForm = $(document.createElement('form'));eleTag = $(document.createElement('input'));eleTag.addClassName('codeLibFormListTag');eleTag.addClassName('codeLibFormListForm');eleTag.addClassName('codeLibBaseMarginLeftFive');eleTag.type = 'text';eleTag.value = obj.vars.value;eleTag.id = this.idSelf + 'LineTag' + obj.vars.id;var width = this._getLineFormWidth({vars : obj.vars});eleTag.setStyle({width : width + 'px'});eleForm.insert(eleTag);eleLine.insert(eleForm);} else {var eleTag;eleTag = $(document.createElement('span'));eleTag.addClassName('codeLibFormListTag');eleTag.addClassName('codeLibBaseMarginLeftFive');eleTag.title = obj.vars.value;var eleText = $(document.createElement('span'));eleText.addClassName('codeLibFormListLineTitle');eleText.addClassName('codeLibBaseCursorPointer');eleText.insert(obj.vars.value);eleTag.insert(eleText);eleTag.id = this.idSelf + 'LineTag' + obj.vars.id;var width = this._getLineFormWidth({vars : obj.vars});eleTag.setStyle({width : width + 'px'});eleLine.insert(eleTag);if(this.vars.varsStatus.flagBtnUse && obj.vars.flagBtnUse) {if (obj.flagListener) {this.insListener.set({ bindAsEvent : 0, insCurrent : this, event : 'mouseover',strFunc : '_mouseoverTitle', ele : eleText, vars : {vars : obj.vars}});this.insListener.set({ bindAsEvent : 0, insCurrent : this, event : 'mouseout',strFunc : '_mouseoutTitle', ele : eleText, vars : {vars : obj.vars}});}}}return eleLine;},_setLine : function(obj){for (var i = 0; i < obj.arr.length; i++) {var eleLine = this._setLineTemplate({eleWrap      : this.eleWrapLine,vars         : obj.arr[i],flagFirst    : (i == 0)? 1 : 0,flagListener : 1,});var eleLineSort = $(document.createElement('div'));eleLineSort.unselectable = 'on';eleLineSort.id = this.idSelf + 'LineSort' + obj.arr[i].id;eleLineSort.addClassName('unselect');eleLineSort.addClassName('codeLibFormListSortLine');eleLineSort.setStyle({width : this._getWrapWidth() + 'px'});this.eleWrapLine.insert(eleLineSort);}},_staticLine : {numMargin : 5, numBlock : 16},_getLineFormWidth : function(obj){var width = this._getWrapWidth();if(obj.vars.flagSortUse) {width = width - this._staticLine.numMargin - this._staticLine.numBlock;}if(obj.vars.flagCopyUse) {width = width - this._staticLine.numMargin - this._staticLine.numBlock;}if(obj.vars.flagRemoveUse) {width = width - this._staticLine.numMargin - this._staticLine.numBlock;}if(obj.vars.flagEditUse) {width = width - this._staticLine.numMargin - this._staticLine.numBlock;}return width;},updateVarsValue : function(){this._updateVarsValueChild({arr : this.vars.varsDetail});},_updateVarsValueChild : function(obj){for (var i = 0; i < obj.arr.length; i++) {if(this.vars.varsStatus.flagFormUse && obj.arr[i].flagFormUse) {if($(this.idSelf + 'Line' + obj.arr[i].id)) {if($(this.idSelf + 'Line' + obj.arr[i].id).down('.codeLibFormListForm', 0)) {obj.arr[i].value = $(this.idSelf + 'LineTag' + obj.arr[i].id).value;}}}}},getValueJson : function(){this.updateVarsValue();var str = this._getValueJson({arr : this.vars.varsDetail});return str;},_getValueJson : function(obj){var array= [];for (var i = 0; i < obj.arr.length; i++) {if(obj.arr[i].value == '') continue;array.push(obj.arr[i].value);}var str = Object.toJSON(array);return str;}});var Code_Lib_FormSelect = Class.create(Code_Lib_ExtLib,{initialize : function(obj){this._extAllot(obj);this._iniVars(obj);this._iniListener();this._iniTemplate();},_iniVars : function(obj){this._extVars(obj);},_iniListener : function(){this._extListener();},_iniTemplate : function(){this._setTemplateListener();},_setTemplateListener : function(obj){this.insListener.set({ bindAsEvent : 0, insCurrent : this, event : 'change',strFunc : '_changeTemplate', ele : this.eleInsert, vars : ''});},_changeTemplate : function(){this.allot({insCurrent : this.insCurrent,vars       : this.eleInsert.value});}});var Code_Lib_FormSensitive = Class.create(Code_Lib_ExtLib,{initialize : function(obj){this._extAllot(obj);this._iniVars(obj);this._iniListener();this._iniSense();},iniReload : function(){},_iniVars : function(obj){this._extVars(obj);this._setVarsKeyNum({arr : this.vars.varsDetail});},_varsKeyNum : {},_setVarsKeyNum : function(obj){this._varsKeyNum = {};for (var i = 0; i < obj.arr.length; i++) {this._varsKeyNum[obj.arr[i].id] = i;}},updateVarsTarget : function(obj){var num = this._varsKeyNum[obj.idTarget];if (obj.strKey) {this.vars.varsDetail[num][obj.strKey] = obj.vars;} else {this.vars.varsDetail[num] = obj.vars;}},getVarsTarget : function(obj){var num = this._varsKeyNum[obj.idTarget];return this.vars.varsDetail[num];},_iniListener : function(){this._extListener();},_iniSense : function(){this._setSense({arr : this.vars.varsDetail});},resetSense : function(){this.stopListener();this._setSense({arr : this.vars.varsDetail});},_setSense : function(obj){for (var i = 0; i < obj.arr.length; i++) {var ele = $(this.vars.varsStatus.id + obj.arr[i].id);if (ele) {ele.removeClassName('codeLibBaseCursorPointer');ele.removeClassName('codeLibBaseBgNoactive');ele.removeClassName('codeLibFormSensitiveBgActive');}if (obj.arr[i].flagForm == 'none' || obj.arr[i].flagForm == '') {continue;}var id = obj.arr[i].id;if (obj.arr[i].flagForm == 'active') {ele.addClassName('codeLibBaseCursorPointer');ele.addClassName('codeLibFormSensitiveBgActive');this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'mousedown',strFunc : '_mousedownBtn', ele : ele, vars : { ele : ele, idTarget : id }});} else {ele.addClassName('codeLibBaseBgNoactive');}}},_mousedownBtn : function(evt, obj){evt.stop();var ele = $(this.vars.varsStatus.id + obj.idTarget + 'Offset');if (!ele) {ele = obj.ele;}this._setEdit({ele : ele, idTarget : obj.idTarget});},_varsEditPrev : {},_setEdit : function(obj){var num = this._varsKeyNum[obj.idTarget];var vars = this.vars.varsDetail[num];this._varsEditPrev = (Object.toJSON(vars)).evalJSON();this.allot({insCurrent : this,from       : '_setEdit',vars       : vars});this.insFormTemp = new Code_Lib_FormTemp({insRoot    : this.insRoot,eleInsert  : $(this.vars.varsStatus.id + obj.idTarget).up('.codeLibWindow', 0),insCurrent : this,idSelf     : this.idSelf + 'Edit',allot      : this._getEditAllot(),vars       : this._getEditVars({ele  : obj.ele,vars : vars})});},_getEditAllot : function(){var allot = function(obj) {var insCurrent = obj.insCurrent;if (obj.from == 'removeWrap') {var strError = insCurrent._checkValueEdit({vars       : obj.vars});insCurrent.allot({insCurrent : insCurrent.insCurrent,from       : 'removeWrap',vars       : obj.vars,varsPrev   : insCurrent._varsEditPrev,strError   : strError});}};return allot;},checkVarsTarget : function(obj){var insCheck = new Code_Lib_CheckValue();var num = this._varsKeyNum[obj.idTarget];var varsTemp = (Object.toJSON(this.vars.varsDetail[num])).evalJSON();varsTemp.value = obj.value;var varsChecked = insCheck.checkValue({arr : [varsTemp]});var strError = this._getErrorStr({flagType : 'common',arr      : varsChecked});return strError;},_checkValueEdit : function(obj){var num = this._varsKeyNum[obj.vars.id];if (this.vars.varsDetail[num].flagNumEscape) {obj.vars.value = this._checkNumValue({value : obj.vars.value});}this.vars.varsDetail[num].value = obj.vars.value;var insCheck = new Code_Lib_CheckValue();var varsChecked = insCheck.checkValue({arr : [obj.vars]});var strError = this._getErrorStr({flagType : 'common',arr      : varsChecked});return strError;},_checkNumValue : function(obj){var insEscape = new Code_Lib_Escape();var insCheck = new Code_Lib_CheckValue();var strValue = obj.value + '';if (strValue === '') {return '';}if (strValue.match(/,/)) {var arr = strValue.split(',');strValue = arr.join('');}strValue = insEscape.get({flagType : 'strToNum',data     : strValue});return strValue;},_getErrorStr : function(obj){for (var i = 0; i < obj.arr.length; i++) {var flag = this._getValueErrorComment({arr      : obj.arr[i].arrayError,id       : obj.arr[i].id,flagType : obj.flagType});return flag;}},_getValueErrorComment : function(obj){for (var i = 0; i < obj.arr.length; i++) {if (obj.arr[i].flagNow) {return obj.arr[i].strComment[obj.flagType];}}return '';},_getEditVars : function(obj){var varsStyle = this.allot({insCurrent : this.insCurrent,from       : '_getEditVars'});var varsFormTemp = (Object.toJSON(this.vars.varsTmpl.varsFormTemp)).evalJSON();varsFormTemp.varsStatus.numTop = obj.ele.offsetTop + varsStyle.numTop;varsFormTemp.varsStatus.numLeft = obj.ele.offsetLeft + varsStyle.numLeft;varsFormTemp.varsDetail = obj.vars;varsFormTemp.varsDetail.numWidth = obj.ele.offsetWidth + varsStyle.numWidth;varsFormTemp.varsDetail.numHeight = obj.ele.offsetHeight + varsStyle.numHeight;return varsFormTemp;}});var Code_Lib_FormTemp = Class.create(Code_Lib_ExtLib,{initialize : function(obj){this._extAllot(obj);this._iniVars(obj);this._iniListener();this._iniWrap();this._iniForm();},_iniListener : function(){this._extListener();},_iniVars : function(obj){this._extVars(obj);this.insTimeZone = this.insRoot.insTimeZone;},_iniLock : function(obj){this._setLock();},insLock : null,_setLock : function() {this.insRoot.vars.varsSystem.num.zIndex ++;this.insLock = new Code_Lib_LockTemp();this.insLock.iniLoad({idSelf     : this.idSelf + 'Lock',idInsert   : this.insRoot.vars.varsSystem.id.root,eleInsert  : this.eleInsert,numZIndex  : this.insRoot.vars.varsSystem.num.zIndex,insCurrent : this.insSelf,strFunc    : 'changeForm'});},eleWrap : null,_iniWrap : function(){this._iniLock();this._setWrap();},_setWrap : function(){var ele = $(document.createElement('form'));this.eleInsert.insert(ele);ele.id = this.idSelf;ele.addClassName('codeLibFormTempWrap');this.eleWrap = ele;this.eleWrap.setStyle({zIndex : this.insRoot.setZIndex(),top    : this.vars.varsStatus.numTop + 'px',left   : this.vars.varsStatus.numLeft + 'px'});},removeWrap : function(){if(this.insLock.eleLock) this.insLock.eleLock.remove();this.stopListener();this._blurCalenderCheck();this.eleWrap.remove();this.allot({insCurrent : this.insCurrent,from       : 'removeWrap',vars       : this.vars.varsDetail});},_iniForm : function(){var cut = this.vars.varsDetail;if (cut.flagTag == 'selectShortCut') {this._setFormSC();} else {this._setForm();}},_setFormSC : function(){this._resetFormSCVars();this._setFormSCWrap();this._setFormSCForm();this._setFormSCTitle();this._setFormSCInput();this._setFormSCList();this._setFormSCStyle();this._setFormSCSelected();this._eleSCInput.focus();},_varsFormSCWidth : 200,_resetFormSCVars : function(){var cut = this.vars.varsDetail;this._varsFormSCWidth = 200;if (cut.numWidth > 200) {this._varsFormSCWidth = cut.numWidth;}},_staticFormSCICon : 16,_staticFormSCIdle : 23,_setFormSCStyle : function(){this._eleSCWrap.style.width = this._varsFormSCWidth + 'px';this._eleSCInputWrap.style.width = this._varsFormSCWidth + 'px';this._eleSCInput.style.width = (this._varsFormSCWidth - this._staticFormSCIdle) + 'px';this._eleSCListWrap.style.width = this._varsFormSCWidth + 'px';this._eleSCListWrap.style.height = this._varsFormSCListHeight + 'px';this._resetFormSCListAuto();var cut = this.vars.varsDetail;var arr = cut.arrayOption;for (var i = 0; i < arr.length; i++) {$(this.idSelf + '_FormSCList_' + i).style.width = (this._varsFormSCWidth - 16) + 'px';}$(this.eleWrap).insert(this._eleSCWrap);},_calcFormSCWidth : function(obj){if (obj.num > this._varsFormSCWidth) {this._varsFormSCWidth = obj.num;}},_staticFormSCHeight : 20,_staticFormSCListHeight : 300,_calcFormSCListHeight : function(obj){this._varsFormSCListHeight = this._staticFormSCListHeight;if (obj.num < this._varsFormSCListHeight) {this._varsFormSCListHeight = obj.num;}},_eleSCWrap : null,_staticFormSCPos : 6,_setFormSCWrap : function(){this.eleWrap.setStyle({top    : (this.vars.varsStatus.numTop - this._staticFormSCPos) + 'px',left   : (this.vars.varsStatus.numLeft - this._staticFormSCPos) + 'px'});var ele = $(document.createElement('div'));$(this.insRoot.vars.varsSystem.id.root).insert(ele);ele.id = this.idSelf + '_SCWrap';ele.addClassName('codeLibFormTempSCWrap');this._eleSCWrap = ele;},_setFormSCForm : function(){var cut = this.vars.varsDetail;var eleTag = $(document.createElement('select'));this.eleTag = eleTag;this.eleWrap.insert(eleTag);this.eleTag.hide();eleTag.id = this.idSelf + '_Form';var temp = cut.value;if (temp == '') {temp = this._getFormSelectValue({arr : cut.arrayOption});}this._setFormSCFormSelect({arr       : cut.arrayOption,now       : temp,eleInsert : eleTag,vars      : cut});eleTag.value = temp;},_varsFormSCTitle : '',_numFormSCSelected : 0,_setFormSCFormSelect : function(obj){this._varsFormSCTitle = '';for (var i = 0; i < obj.arr.length; i++) {if (obj.arr[i].flagDisabled || obj.arr[i].flagNotShortCut) {continue;}if(obj.now == obj.arr[i].value) {var ele = $(document.createElement('option'));ele.value = obj.arr[i].value;ele.selected = true;ele.insert(obj.arr[i].strTitle);this._varsFormSCTitle = obj.arr[i].strTitle;this._numFormSCSelected = i;obj.eleInsert.insert(ele);break;}}},_eleSCTitle : null,_setFormSCTitle : function(obj){var cut = this.vars.varsDetail;var ele = $(document.createElement('span'));ele.addClassName('codeLibFormTempSCTitle');ele.insert(this._varsFormSCTitle);this._eleSCWrap.insert(ele);ele.id = this.idSelf + '_FormSCTitle';this._eleSCTitle = ele;this._calcFormSCWidth({num : ele.offsetWidth});},_eleSCInputWrap : null,_eleSCInput : null,_setFormSCInput : function(){var eleWrap = $(document.createElement('div'));eleWrap.addClassName('codeLibFormTempSCInputWrap');eleWrap.addClassName('clearfix');this._eleSCWrap.insert(eleWrap);this._eleSCInputWrap = eleWrap;var eleTag = $(document.createElement('input'));eleTag.addClassName('codeLibFormTempSCInput');eleTag.type = 'text';this._eleSCInputWrap.insert(eleTag);eleTag.value = '';this._eleSCInput = eleTag;this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'keyup',strFunc : '_keyupInput', ele : eleTag, vars : {ele : eleTag}});var eleBox = $(document.createElement('p'));eleBox.addClassName('codeLibFormTempSCIcon');eleBox.addClassName('unselect');eleBox.addClassName('codeLibBaseCursorDefault');eleBox.unselectable = 'on';eleBox.insert(this.insRoot.vars.varsSystem.str.space);eleBox.style.width = this._staticFormSCICon + 'px';eleBox.style.height = this._staticFormSCICon + 'px';this._eleSCInputWrap.insert(eleBox);},_keyupInput : function (evt, obj){var cut = this.vars.varsDetail;var arr = cut.arrayOption;if (obj.ele.value === '') {this._resetFormSCList({arr : arr});} else {this._updateFormSCList({arr : arr, str : obj.ele.value});}this._eleSCListWrap.style.height = this._varsFormSCListHeight + 'px';this._resetFormSCListAuto();},_resetFormSCListAuto : function (){this._eleSCListWrap.removeClassName('codeLibFormTempSCListWrapAuto');if (this._varsFormSCListHeight == this._staticFormSCListHeight) {this._eleSCListWrap.addClassName('codeLibFormTempSCListWrapAuto');}},_resetFormSCList : function (obj){for (var i = 0; i < obj.arr.length; i++) {var ele = $(this.idSelf + '_FormSCList_' + i);ele.show();}this._calcFormSCListHeight({num : this._staticFormSCListHeight});},_updateFormSCList : function (obj){var num = 0;for (var i = 0; i < obj.arr.length; i++) {var ele = $(this.idSelf + '_FormSCList_' + i);ele.show();if (obj.arr[i].flagDisabled || obj.arr[i].flagNotShortCut) {ele.hide();continue;}var str = obj.str.replace(/([.*+?^=!:${}()|[\]\/\\])/g, "\\$1");if (!obj.arr[i].strTitle.match(new RegExp(str,'im'))) {ele.hide();continue;}num += this._staticFormSCHeight;}this._calcFormSCListHeight({num : num});if (!num) {this._resetFormSCList({arr : obj.arr});}},_eleSCListWrap : null,_eleSCList : null,_staticFormSCLine : {numLength : 100, numIdle : 16},_setFormSCList : function(){var eleWrap = $(document.createElement('div'));eleWrap.addClassName('codeLibFormTempSCListWrap');eleWrap.addClassName('clearfix');this._eleSCWrap.insert(eleWrap);this._eleSCListWrap = eleWrap;var cut = this.vars.varsDetail;var num = 0;var arr = cut.arrayOption;var strHtml = '';for (var i = 0; i < arr.length; i++) {var id = this.idSelf + '_FormSCList_' + i;var strPointer = 'codeLibBaseCursorPointer';var strFont = '';if (arr[i].flagDisabled) {strPointer = 'codeLibBaseCursorDefault';strFont = 'codeLibFormTempSCLineNoactive';}var strTitle = arr[i].strTitle;strHtml += '<span id="' + id + '" class="codeLibFormTempSCLine unselect '+ strPointer + ' ' + strFont + '" style="">' + strTitle + '</span>';num += this._staticFormSCHeight;}this._calcFormSCListHeight({num : num});this._eleSCListWrap.insert(strHtml);this._setFormSCListListener({arr : arr});},_setFormSCListListener : function(obj){for (var i = 0; i < obj.arr.length; i++) {if (obj.arr[i].flagDisabled) {continue;}var ele = $(this.idSelf + '_FormSCList_' + i);this.insListener.set({ bindAsEvent : 1, insCurrent : this, event : 'mousedown',strFunc : '_mousedownFormSCList',ele : ele, vars : {vars : obj.arr[i], ele : ele}});this.insListener.set({ bindAsEvent : 0, insCurrent : this, event : 'mouseover',strFunc : '_mouseoverFormSCList',ele : ele, vars : {vars : obj.arr[i], ele : ele}});this.insListener.set({ bindAsEvent : 0, insCurrent : this, event : 'mouseout',strFunc : '_mouseoutFormSCList',ele : ele, vars : {vars : obj.arr[i], ele : ele}});}},_mousedownFormSCList : function(evt,obj){if (obj) evt.stop();else obj = evt;this.vars.varsDetail.value = obj.vars.value;this.removeWrap();},_mouseoverFormSCList : function(obj){obj.ele.removeClassName('codeLibFormTempSCLineOver');obj.ele.addClassName('codeLibFormTempSCLineOver');},_mouseoutFormSCList : function(obj){obj.ele.removeClassName('codeLibFormTempSCLineOver');},_setFormSCSelected : function(){var id = this.idSelf + '_FormSCList_' + this._numFormSCSelected;if (this._numFormSCSelected >= 3) {idTarget = this.idSelf + '_FormSCList_' + (this._numFormSCSelected - 3);this._eleSCListWrap.scrollTop = $(idTarget).offsetTop;} else {this._eleSCListWrap.scrollTop = 0;}$(id).addClassName('codeLibFormTempSCLineOver');},eleTag : null,_setForm : function(){var cut = this.vars.varsDetail;var eleTag = $(document.createElement(cut.flagTag));this.eleTag = eleTag;this.eleWrap.insert(eleTag);eleTag.addClassName('codeLibFormTempTag');eleTag.id = this.idSelf + 'Tag';if(cut.flagTag == 'input') eleTag.type = cut.flagInputType;eleTag.style.width = cut.numWidth + cut.unitWidth;eleTag.style.height = cut.numHeight + cut.unitHeight;if(cut.numMaxlength) eleTag.maxLength = cut.numMaxlength;if(cut.flagDisabled) eleTag.disabled = true;eleTag.value = cut.value;if (cut.flagTag == 'select') {if(cut.flagMultiple) eleTag.multiple = true;if(cut.numSize) eleTag.size = cut.numSize;this._setFormSelect({arr       : cut.arrayOption,now       : cut.value,eleInsert : eleTag,vars      : cut});if (cut.value == '') {eleTag.value = this._getFormSelectValue({arr : cut.arrayOption});}}if (cut.varsFormCalender) {this._setCalenderListener({eleInsert : eleTag,vars      : cut});}this.insListener.set({bindAsEvent : 0, insCurrent : this, event : 'change', strFunc : 'changeForm',ele : eleTag, vars : {vars : cut}});eleTag.focus();if (cut.flagTag == 'input' && cut.flagInputType == 'text') {eleTag.select();}},_setCalenderListener : function(obj){this.insListener.set({ flagType15 : 1, bindAsEvent : 1, insCurrent : this, event : 'focus',strFunc : '_focusCalenderCheck',ele : obj.eleInsert, vars : '' });this.insListener.set({ flagType15 : 1, bindAsEvent : 1, insCurrent : this, event : 'blur',strFunc : '_blurCalenderCheck', ele : obj.eleInsert, vars : '' });},_focusCalenderCheck : function(obj,evt){if (obj) evt.stop();else obj = evt;if ($(this.idSelf + 'Calender')) return;this._setCalender();},_blurCalenderCheck : function(obj,evt){if (obj) evt.stop();else obj = evt;if (!$(this.idSelf + 'Calender')) return;this.insCalender.removeWrap();},_staticCalender : {numTop : 21, numLeft : 3},insCalender : null,_setCalender : function(obj){var cut = this.vars.varsDetail;cut.varsFormCalender.varsStatus.numLeft = this.vars.varsStatus.numLeft - this._staticCalender.numLeft;cut.varsFormCalender.varsStatus.numTop = this.vars.varsStatus.numTop + this._staticCalender.numTop;this.insCalender = new Code_Lib_Calender({eleInsert  : this.eleTag.up('.codeLibWindow', 0),idRoot     : this.insRoot.vars.varsSystem.id.root,insRoot    : this.insRoot,insCurrent : this.insSelf,idSelf     : this.idSelf + 'Calender',allot      : this._getCalenderAllot(),vars       : cut.varsFormCalender});this._setListener({ins : this.insCalender});},_getCalenderAllot : function(){var allot = function(obj){var insCurrent = obj.insCurrent;if (obj.from == '_mousedownDate') {insCurrent.insCalender.removeWrap();insCurrent._setValue({objTime : obj.objTime});}};return allot;},_setValue : function(obj){var cut = this.vars.varsDetail;var objTime = obj.objTime;var insDisplay = new Code_Lib_TimeDisplay();if (cut.varsFormCalender.varsStatus.flagFormatDisplay) {this.eleTag.value = insDisplay.get({flagType : cut.varsFormCalender.varsStatus.flagFormatDisplay, vars : objTime});} else {this.eleTag.value = insDisplay.get({flagType : 4, vars : objTime});}},changeForm : function(obj){this.vars.varsDetail.value = this.eleTag.value;this.removeWrap();},_getFormSelectValue : function(obj){for (var i = 0; i < obj.arr.length; i++) {if (obj.arr[i].flagDisabled || obj.arr[i].flagNotShortCut) continue;return obj.arr[i].value;}},_setFormSelect : function(obj){for (var i = 0; i < obj.arr.length; i++) {var ele = $(document.createElement('option'));ele.value = obj.arr[i].value;if(obj.now == obj.arr[i].value) ele.selected = true;if (obj.arr[i].flagDisabled)  ele.disabled = true;ele.insert(obj.arr[i].strTitle);obj.eleInsert.insert(ele);}}});var Code_Lib_FormTerm = Class.create({initialize : function(obj){this._iniAllot(obj);this.iniVars(obj);this.iniWrap();this.iniLine();},iniReload : function(){this.stopListener();this.removeWrap();this.iniWrap();this.iniLine();},insRoot : null, insCurrent : null, insSelf : null, idSelf : null, eleInsert : null, vars : null,iniVars : function(obj){this.eleInsert = obj.eleInsert;this.insRoot = obj.insRoot;this.insCurrent = obj.insCurrent;this.insSelf = this;this.idSelf = obj.idSelf;this.vars = (Object.toJSON(obj.vars)).evalJSON();},eleWrap : null,iniWrap : function(){var ele = $(document.createElement('div'));ele.id = this.idSelf;ele.addClassName('codeLibFormTermWrap');ele.setStyle({width : this.getWrapWidth() + 'px'});this.eleInsert.insert(ele);this.eleWrap = ele;},getWrapWidth : function(){var array = this.eleInsert.style.width.split('px');var width = parseFloat(array[0]);return  width;},removeWrap : function(){$(this.idSelf).remove();},getValue : function(){return {stampStart : this.insCalenderStart.eleInsert.value,stampEnd   : this.insCalenderEnd.eleInsert.value};},insCalenderStart : null, insCalenderEnd : null,iniCalender : function(obj){var str = obj.flag.capitalize();this['insCalender' + str] = new Code_Lib_CalenderFormNavi({eleInsert  : obj.eleInsert,insRoot    : this.insRoot,insCurrent : this.insSelf,idSelf     : obj.id + 'Calender' + str,allot      : this['getCalender' + str + 'Allot'](),vars   : this.vars.varsCalender[str]});},getCalenderEndAllot : function(){var allot = function(obj){var insCurrent = obj.insCurrent;if(obj.from.match(/^mousedownDate|blurCheck$/)) {insCurrent.checkCalender({ flag : 'end', vars : obj.vars });}};return allot;},getCalenderStartAllot : function(){var allot = function(obj){var insCurrent = obj.insCurrent;if(obj.from.match(/^mousedownDate|blurCheck$/)) {insCurrent.checkCalender({ flag : 'start', vars : obj.vars });}};return allot;},checkCalender : function(obj){var str = obj.flag;var startValue = this.insCalenderStart.eleInsert.value;if(startValue == '') return;var array = startValue.split('/');if(parseFloat(array[0]) < 1970) {this.insCalenderStart.resetValue();return;}var objTimeStart = this.insRoot.insTimeZone.insTimeZone.adjustTime({stamp : new Date(array[0], parseFloat(array[1]) - 1, array[2]).getTime()});var endValue = this.insCalenderEnd.eleInsert.value;if(endValue == '') return;var array = endValue.split('/');if(parseFloat(array[0]) < 1970) {this.insCalenderEnd.resetValue();return;}var objTimeEnd = this.insRoot.insTimeZone.insTimeZone.adjustTime({stamp : new Date(array[0], parseFloat(array[1])-1, array[2]).getTime()});if(objTimeStart.stamp <= objTimeEnd.stamp) return;this.insCalenderEnd.resetValue();},stopListener : function(){if(this.insCalenderEnd) this.insCalenderEnd.stopListener();if(this.insCalenderStart) this.insCalenderStart.stopListener();},iniLine : function(){this.templateLine();},staticLine : {numMargin : 5, numBlock : 16},templateLine : function(obj){var eleForm = $(document.createElement('form'));this.eleWrap.insert(eleForm);var eleLine = $(document.createElement('div'));eleLine.unselectable = 'on';eleLine.addClassName('codeLibFormTermLine');eleLine.id = this.idSelf + 'Line';eleLine.setStyle({width : this.getWrapWidth() + 'px'});eleLine.setStyle({marginTop : (this.staticLine.numMargin) + 'px'});eleForm.insert(eleLine);var width = this.getWrapWidth();width -= this.staticLine.numBlock;var widthStart = Math.floor(width*0.5);var widthEnd = Math.floor(width*0.5);this.templateLineInput({flag      : 'start',numWidth  : widthStart,eleInsert : eleLine,});this.templateLineInput({flag      : 'end',numWidth  : widthStart,eleInsert : eleLine,});},templateLineInput : function(obj){var str = obj.flag.capitalize();var ele = $(document.createElement('input'));ele.type = 'text';ele.id = this.idSelf + 'Line' + str;ele.addClassName('codeLibFormTerm_' + str);if(str == 'end') ele.addClassName('codeLibBaseMarginLeftFive');var stamp = this.vars.varsCalender[str].varsStatus.stampMain;if(stamp) {var objTime = this.insRoot.insTimeZone.adjustDate({stamp : this.vars.varsCalender[str].varsStatus.stampMain});var insDisplay = new Code_Lib_TimeDisplay();ele.value = insDisplay.get({flagType : 7, vars : objTime});}else ele.value = '';ele.style.width = obj.numWidth + 'px';obj.eleInsert.insert(ele);this.iniCalender({flag : str,eleInsert : ele});},allot : {},_iniAllot : function(obj){this.allot = obj.allot;}});var Code_Lib_Global = Class.create(Code_Lib_ExtLib, {varsLoad : {"strLogin":"\u30ed\u30b0\u30a4\u30f3\u4e2d"},initialize : function(obj){this._extAllot(obj);this._iniVars(obj);this._iniListener();this._iniArea();this._iniNavi();this._iniMove();},_iniVars : function(obj){this._extVars(obj);this.vars.varsDetail = this._updateVars({arr       : this.vars.varsDetail,arrStatus : this.insRoot.vars.varsSystem.status.arrModule});this._iniCake();this.setCake();},_updateVars : function(obj){var array = [];for (var i = 0; i < obj.arr.length; i++) {var id = obj.arr[i].id.toLowerCase();if (id.match(/^logout|base$/)) {array.push(obj.arr[i]);} else {if(!obj.arrStatus[id]) continue;if(!obj.arrStatus[id].flagUse) continue;array.push(obj.arr[i]);}}return array;},_iniCake : function(){this._getCake();},_getCakeVarsUpdate : function(obj){obj.arr = this.vars.varsDetail;var str;for (var i = 0; i < obj.arr.length; i++) {str = 'left' + obj.arr[i].id;if (obj.data[str] != undefined) {obj.arr[i].numLeft = obj.data[str];}str = 'top' + obj.arr[i].id;if (obj.data[str] != undefined) {obj.arr[i].numTop = obj.data[str];}}},_setCakeVars : function(){arr = this.vars.varsDetail;var str;for (var i = 0; i < arr.length; i++) {str = 'left' + arr[i].id;this._varsCake[str] = arr[i].numLeft;str = 'top' + arr[i].id;this._varsCake[str] = arr[i].numTop;str = 'zIndex' + arr[i].id;this._varsCake[str] = arr[i].numZIndex;}},insListener : null,_iniListener : function(){this._extListener();},_iniArea : function(){this._setArea();this._setAreaListener();},_setArea : function(){var eleArea = $(document.createElement('div'));eleArea.id = this.idSelf;eleArea.addClassName('codeLibGlobalArea');eleArea.unselecgloballe = 'on';eleArea.addClassName('unselect');$(this.insRoot.vars.varsSystem.id.root).insert(eleArea);},_setAreaListener : function(obj){this.insListener.set({ bindAsEvent : 1, ele : $(this.idSelf), event : 'mousedown', insCurrent : this,strFunc : '_mousedownArea', vars : ''});},_mousedownArea : function(evt) {evt.stop();var arr = this.vars.varsDetail;for (var i = 0; i < arr.length; i++) {arr[i].numZIndex = this.insRoot.setZIndex();$(this.idSelf + arr[i].id + 'Wrap').setStyle({'zIndex' : arr[i].numZIndex});}this.setCake();},_iniNavi : function(){this._setNavi({arr : this.vars.varsDetail});},_setNavi : function(obj){var strCodeName = this.insRoot.vars.varsSystem.status.strCodeName + ' ' + this.varsLoad.strLogin;var eleTitleStrCodeName = $(document.createElement('div'));eleTitleStrCodeName.addClassName('codeLibGlobalNaviStrCodeName');eleTitleStrCodeName.insert(strCodeName);eleTitleStrCodeName.unselecgloballe='on';eleTitleStrCodeName.addClassName('unselect');$(this.insRoot.vars.varsSystem.id.root).insert(eleTitleStrCodeName);eleTitleStrCodeName.style.top = 10 + 'px';eleTitleStrCodeName.style.left = 10 + 'px';for (var i = 0; i < obj.arr.length; i++) {var eleWrap = $(document.createElement('div'));eleWrap.unselecgloballe='on';eleWrap.addClassName('unselect');eleWrap.addClassName('codeLibGlobalNaviWrap');eleWrap.id = this.idSelf + obj.arr[i].id + 'Wrap';eleWrap.style.top = obj.arr[i].numTop + 'px';eleWrap.style.left = obj.arr[i].numLeft + 'px';eleWrap.style.zIndex = obj.arr[i].numZIndex;$(this.insRoot.vars.varsSystem.id.root).insert(eleWrap);var ele = $(document.createElement('div'));ele.addClassName('codeLibGlobalNaviFloat');ele.addClassName('codeLibBaseCursorPointer');ele.title = obj.arr[i].strTitle;var eleTitle = $(document.createElement('span'));eleTitle.addClassName('codeLibGlobalNaviTitle');eleTitle.id = this.idSelf + obj.arr[i].id + '_title';eleTitle.addClassName('unselect');eleTitle.unselectable = 'on';eleTitle.addClassName('codeLibGlobalNaviFloat');var strTitle = obj.arr[i].strTitle;eleTitle.insert(strTitle);$(this.insRoot.vars.varsSystem.id.root).insert(eleTitle);var numWidth = eleTitle.offsetWidth;var eleTitleWrap = $(document.createElement('span'));eleTitleWrap.addClassName('unselect');eleTitleWrap.unselectable = 'on';eleTitleWrap.addClassName('codeLibGlobalNaviFloat');var eleTitleIdleLeft = $(document.createElement('div'));eleTitleIdleLeft.addClassName('unselect');eleTitleIdleLeft.unselectable = 'on';eleTitleIdleLeft.addClassName('codeLibGlobalNaviFloat');var eleTitleIdleRight = $(document.createElement('div'));eleTitleIdleRight.addClassName('unselect');eleTitleIdleRight.unselectable = 'on';eleTitleIdleRight.addClassName('codeLibGlobalNaviFloat');var eleImgWrap = $(document.createElement('div'));eleImgWrap.addClassName('unselect');eleImgWrap.unselectable = 'on';eleImgWrap.addClassName('codeLibGlobalNaviFloat');var eleImg = $(document.createElement('div'));eleImg.addClassName(obj.arr[i].strClass);eleImg.id = this.idSelf + obj.arr[i].id;eleImg.addClassName('codeLibGlobalNavi');eleImg.addClassName('unselect');eleImg.unselectable = 'on';eleImg.addClassName('codeLibGlobalNaviFloat');var eleImgIdleLeft = $(document.createElement('div'));eleImgIdleLeft.addClassName('unselect');eleImgIdleLeft.unselectable = 'on';eleImgIdleLeft.addClassName('codeLibGlobalNaviFloat');var eleImgIdleRight = $(document.createElement('div'));eleImgIdleRight.addClassName('unselect');eleImgIdleRight.unselectable = 'on';eleImgIdleRight.addClassName('codeLibGlobalNaviFloat');eleTitleWrap.insert(eleTitleIdleLeft);eleTitleWrap.insert(eleTitle);eleTitleWrap.insert(eleTitleIdleRight);eleImgWrap.insert(eleImgIdleLeft);eleImgWrap.insert(eleImg);eleImgWrap.insert(eleImgIdleRight);ele.insert(eleImgWrap);ele.insert(eleTitleWrap);var numHeightTitle = 10;if (obj.arr[i].id == 'Logout') {numHeightTitle = 20;}var numHeightImg = 24;eleTitleWrap.style.height = numHeightTitle + 'px';eleTitle.style.height = numHeightTitle + 'px';eleTitleIdleLeft.style.height = numHeightTitle + 'px';eleTitleIdleRight.style.height = numHeightTitle + 'px';eleImgWrap.style.height = numHeightImg + 'px';eleImg.style.height = numHeightImg + 'px';eleImgIdleLeft.style.height = numHeightImg + 'px';eleImgIdleRight.style.height = numHeightImg + 'px';var numBase = 24;var num = numBase - numWidth;var numIdleLeft = 0;var numIdleRight = 0;if (num > 0) {numIdleLeft = num / 2;numIdleRight = numBase - numWidth - numIdleLeft;ele.style.width = numBase + 'px';eleImgWrap.style.width = numBase + 'px';eleImg.style.width = numBase + 'px';eleTitleWrap.style.width = numBase + 'px';eleTitle.style.width = numWidth + 'px';eleTitleIdleLeft.style.width = numIdleLeft + 'px';eleTitleIdleRight.style.width = numIdleRight + 'px';eleWrap.style.width = (numWidth + 20) + 'px';} else if (num < 0) {numIdleLeft = Math.abs(num) / 2;numIdleRight = numWidth - numIdleLeft;ele.style.width = numWidth + 'px';eleImgWrap.style.width = numWidth + 'px';eleImg.style.width = numBase + 'px';eleImgIdleLeft.style.width = numIdleLeft + 'px';eleImgIdleRight.style.width = numIdleRight + 'px';eleTitleWrap.style.width = numWidth + 'px';eleTitle.style.width = numWidth + 'px';eleWrap.style.width = (numWidth + 20) + 'px';} else {ele.style.width = numBase + 'px';eleTitleWrap.style.width = numBase + 'px';eleTitle.style.width = numBase + 'px';eleImgWrap.style.width = numBase + 'px';eleImg.style.width = numBase + 'px';eleWrap.style.width = (numBase + 20) + 'px';}var eleList = null;if (obj.arr[i].id != 'Logout') {eleList = $(document.createElement('div'));eleList.addClassName('codeLibGlobalMenu');eleList.addClassName('codeLibBaseCursorPointer');}eleWrap.insert(ele);if (eleList) eleWrap.insert(eleList);this.insListener.set({ bindAsEvent : 1, insCurrent : this, event : 'dblclick',strFunc : '_dblclickNavi', ele : eleWrap, vars : { vars : obj.arr[i]}});this.insListener.set({ bindAsEvent : 1, insCurrent : this, event : 'mousedown',strFunc : '_mousedownNavi', ele : eleWrap, vars : { vars : obj.arr[i]}});this.insListener.set({ bindAsEvent : 0, insCurrent : this, event : 'mouseover',strFunc : '_mouseoverNavi', ele : eleWrap, vars : { vars : obj.arr[i]}});this.insListener.set({ bindAsEvent : 0, insCurrent : this, event : 'mouseout',strFunc : '_mouseoutNavi', ele : eleWrap, vars : { vars : obj.arr[i]}});new Draggable(eleWrap,{zIndex : 1000000000});this.insListener.set({ bindAsEvent : 1, insCurrent : this, event : 'mousedown',strFunc : '_mousedownMove', ele : eleWrap, vars : { vars : obj.arr[i]}});if (eleList) {this.insListener.set({ bindAsEvent : 1, insCurrent : this, event : 'mousedown', strFunc : '_mousedownMenu',ele : eleList, vars : {vars : obj.arr[i], ele : eleWrap}});this.insListener.set({ bindAsEvent : 0, insCurrent : this, event : 'mouseover', strFunc : '_mouseoverMenu',ele : eleList, vars : { vars : obj.arr[i], ele : eleList}});this.insListener.set({ bindAsEvent : 0, insCurrent : this, event : 'mouseout', strFunc : '_mouseoutMenu',ele : eleList, vars : { vars : obj.arr[i], ele : eleList}});}}},_varsMenu : [],eventMenu : function(obj){var data = {id           : obj.id,strTitle     : obj.strTitle,flagCheckUse : 1,flagCheckNow : 1};this._varsMenu.push(data);},updateMenuVars : function(obj){obj.arr = this._varsMenu;for (var i = 0; i < obj.arr.length; i++) {if (obj.id == obj.arr[i].id) {obj.arr[i].flagCheckUse = obj.flagCheckUse;obj.arr[i].flagCheckNow = obj.flagCheckNow;}}},_mousedownMenu : function(evt, obj){evt.stop();var vars = this._getMenuVars(obj);this._setMenu({vars : vars});},_staticMenu : {numMargin : 24},_getMenuVars : function(obj){var varsTmpl = (Object.toJSON(this.vars.tmplContext)).evalJSON();var idTarget = 'Window' + obj.vars.id;obj.arr = this._varsMenu;for (var i = 0; i < obj.arr.length; i++) {var re = new RegExp("^Window" + obj.vars.id);if (obj.arr[i].id.match(re)) {var dataDetail = (Object.toJSON(this.vars.tmplContext.tmplDetail)).evalJSON();dataDetail.id = obj.arr[i].id;if (obj.vars.strClassSmall) {dataDetail.strClass = obj.vars.strClassSmall;}dataDetail.vars.idTarget = obj.arr[i].id;dataDetail.strTitle = obj.arr[i].strTitle;dataDetail.flagCheckUse = obj.arr[i].flagCheckUse;dataDetail.vars.flagCheckUse = obj.arr[i].flagCheckUse;dataDetail.flagCheckNow = obj.arr[i].flagCheckNow;dataDetail.vars.flagCheckNow = obj.arr[i].flagCheckNow;varsTmpl.varsDetail.push(dataDetail);}}varsTmpl.varsStatus.numTop = obj.ele.offsetTop;varsTmpl.varsStatus.numLeft = obj.ele.offsetLeft + this._staticMenu.numMargin;return varsTmpl;},insMenu : null,_setMenu : function(obj){this.insMenu = new Code_Lib_Context({insRoot    : this.insRoot,eleInsert  : $(this.insRoot.vars.varsSystem.id.root),insCurrent : this,idSelf     : this.idSelf + 'Menu',allot      : this._getMenuAllot(),vars       : obj.vars});},_getMenuAllot : function(){var allot = function(obj) {var insCurrent = obj.insCurrent;if (obj.from == '_mousedownLine') {insCurrent.allot({insCurrent : insCurrent.insCurrent,from       : '_mousedownLine',vars       : {idTarget : obj.vars.vars.idTarget,flagCheckUse : obj.vars.vars.flagCheckUse,flagCheckNow : obj.vars.vars.flagCheckNow}});}};return allot;},_mouseoverMenu : function(obj){obj.ele.addClassName('codeLibGlobalMenuOver');$(this.idSelf + obj.vars.id).addClassName(obj.vars.strClassOver);},_mouseoutMenu : function(obj){obj.ele.removeClassName('codeLibGlobalMenuOver');$(this.idSelf + obj.vars.id).removeClassName(obj.vars.strClassOver);},_mousedownNavi : function(evt, obj) {obj.vars.numZIndex = this.insRoot.setZIndex();$(this.idSelf + obj.vars.id + 'Wrap').setStyle({ 'zIndex' : obj.vars.numZIndex });},_dblclickNavi : function (evt, obj) {evt.stop();var flag = this.allot({insCurrent : this.insCurrent,from       : 'dblclickNavi',vars       : obj.vars});},_mouseoverNavi : function(obj){$(this.idSelf + obj.vars.id).addClassName(obj.vars.strClassOver);$(this.idSelf + obj.vars.id + '_title').addClassName('codeLibGlobalNaviTitleOver');},_mouseoutNavi : function(obj){$(this.idSelf + obj.vars.id).removeClassName(obj.vars.strClassOver);$(this.idSelf + obj.vars.id + '_title').removeClassName('codeLibGlobalNaviTitleOver');},eventBasePortal : function(obj){var vars = this._getVars({id  : obj.idTarget,arr : this.vars.varsDetail});if (!vars.flagCheckNow) {this._varNaviUpdate({vars : vars});this.setCake();}},_getVars : function(obj){for (var i = 0; i < obj.arr.length; i++) {if(obj.arr[i].id == obj.id) return obj.arr[i];}},_staticMove : {block : 34},_iniMove : function(){this._setMoveListener();},_setMoveListener : function(obj){this.insListener.set({ bindAsEvent : 1, insCurrent : this, event : 'mouseup',strFunc : '_mouseupMove', ele : document, vars : ''});},_varsMove : {},_mousedownMove : function(evt, obj) {this._varsMove = {};this._varsMove = {flag : 1,vars : obj.vars};evt.stop();},_mouseupMove : function(evt, obj) {if(!this._varsMove.flag) return;var viewSize = document.viewport.getDimensions();var topMax = viewSize.height - $(this.idSelf + this._varsMove.vars.id + 'Wrap').offsetHeight;var leftMax = viewSize.width - $(this.idSelf + this._varsMove.vars.id + 'Wrap').offsetWidth;var numTop = 0;var numLeft = 0;if($(this.idSelf + this._varsMove.vars.id + 'Wrap').offsetTop <= 0) numTop = 0;else if($(this.idSelf + this._varsMove.vars.id + 'Wrap').offsetTop > topMax) numTop = topMax;else numTop = $(this.idSelf + this._varsMove.vars.id + 'Wrap').offsetTop;$(this.idSelf + this._varsMove.vars.id + 'Wrap').style.top = numTop + 'px';if($(this.idSelf + this._varsMove.vars.id + 'Wrap').offsetLeft <= 0) numLeft = 0;else if($(this.idSelf + this._varsMove.vars.id + 'Wrap').offsetLeft > leftMax) numLeft = leftMax;else numLeft =$(this.idSelf + this._varsMove.vars.id + 'Wrap').offsetLeft;$(this.idSelf + this._varsMove.vars.id + 'Wrap').style.left = numLeft + 'px';this._varsMove.vars.numTop = numTop;this._varsMove.vars.numLeft = numLeft;this.setCake();evt.stop();this._varsMove = {};}});var Code_Lib_Layout = Class.create(Code_Lib_ExtLib,{varsLoad : {"varsWhole":{"strSwitch":"\u30ec\u30a4\u30a2\u30a6\u30c8\u5207\u66ff"}},initialize : function(obj){this._extAllot(obj);this._iniVars(obj);this._iniListener();this._iniWrap();this._iniTemplate();this._iniResize();this._iniMove();this._iniSwitch();},iniReload : function(){this.stopListener();this._removeResize();this._varTemplateWrap();this._varTemplate({arr : this.vars.varsDetail});this._varTemplateBox({arr : this.vars.varsDetail});this._styleTemplateUpdate({arr : this.vars.varsDetail});this._iniResize();this._templateMoveListener({arr : this.vars.varsDetail});this._templateSwitchListener({arr : this.vars.varsDetail});},_iniVars : function(obj){this._extVars(obj);this._iniCake();},_iniCake : function(){this._getCake();},_getCakeVarsUpdate : function(obj){if (!this.vars.varsStatus.flagCakeUse) return;obj.arr = this.vars.varsDetail;var str = 'flagNow';if(obj.data[str]) this.vars.varsStatus.flagNow = obj.data[str];str = 'flagSwitchNow';if(obj.data[str]) this.vars.varsStatus.flagSwitchNow = obj.data[str];for (var i = 0; i < obj.arr.length; i++) {for (var i = 0; i < obj.arr.length; i++) {if (this.vars.varsStatus.flagMoveUse) {var str = 'numSort' + obj.arr[i].id;obj.arr[i].numSort = obj.data[str];}if (this.vars.varsStatus.flagResizeUse) {var str = 'numWidth' + obj.arr[i].id;obj.arr[i].numWidth = obj.data[str];var str = 'numHeight' + obj.arr[i].id;obj.arr[i].numHeight = obj.data[str];}if (this.vars.varsStatus.flagSwitchUse) {var array = this._staticCake;for (var j = 0; j < array.length; j++) {var str = 'switch' + array[j] + obj.arr[i].id;obj.arr[i][array[j]] = obj.data[str];}}}}},_staticCake : ['numHeightStandard', 'numWidthStandard','numHeightWide', 'numWidthWide','numHeightClassic', 'numWidthClassic'],_setCakeVars : function(obj){if (!this.vars.varsStatus.flagCakeUse) return;var obj = {};obj.arr = this.vars.varsDetail;this._varsCake['flagNow'] = this.vars.varsStatus.flagNow;this._varsCake['flagSwitchNow'] = this.vars.varsStatus.flagSwitchNow;for (var i = 0; i < obj.arr.length; i++) {if (this.vars.varsStatus.flagMoveUse) {var str = 'numSort' + obj.arr[i].id;this._varsCake[str] = obj.arr[i].numSort;}if (this.vars.varsStatus.flagResizeUse) {var str = 'numWidth' + obj.arr[i].id;this._varsCake[str] = obj.arr[i].numWidth;var str = 'numHeight' + obj.arr[i].id;this._varsCake[str] = obj.arr[i].numHeight;}if (this.vars.varsStatus.flagSwitchUse) {var array = this._staticCake;for (var j = 0; j < array.length; j++) {var str = 'switch' + array[j] + obj.arr[i].id;this._varsCake[str] = obj.arr[i][array[j]];}}}},_iniWrap : function(){var ele = $(document.createElement('div'));ele.id = this.idSelf;ele.addClassName('clearfix');ele.addClassName('codeLibLayoutWrap');this.eleInsert.insert(ele);this.eleInsert.addClassName('codeLibLayoutBg');},_iniListener : function(){this._extListener();},_staticTemplate : {numPadding : 2, numBoxLeftWidth : 3, numBoxHeight : 40,numLayoutTopHeight : 8, numLayoutBottomHeight : 6, numLayoutLeftWidth : 6},_iniTemplate : function(){this._varTemplateWrap();this._varTemplate({arr : this.vars.varsDetail});this._setTemplate({arr : this.vars.varsDetail});this._varTemplateBox({arr : this.vars.varsDetail});this._setTemplateBox({arr : this.vars.varsDetail});},_errTemplate : function(obj){alert('template vars error ' + obj.flag);},_varTemplate : function(obj){obj.arr = obj.arr.sortBy(function(v, i) {return v.numSort;});for (var i = 0; i < obj.arr.length; i++) {obj.arr[i].numSort = i;}obj.arr = obj.arr.sortBy(function(v, i) {return v.numPriority;});for (var i = 0; i < obj.arr.length; i++) {obj.arr[i].numPriority = i;}var flagSwitcNow = this.vars.varsStatus.flagSwitchNow;if (this.vars.varsStatus.flagNow == 1) {var numHeight = this._varsTemplateWrap.numHeight- (this._staticTemplate.numLayoutTopHeight + this._staticTemplate.numLayoutBottomHeight);var numWidth = this._varsTemplateWrap.numWidth- (this._staticTemplate.numLayoutLeftWidth * 2);for (var i = 0; i < obj.arr.length; i++) {obj.arr[i].numHeight = numHeight;obj.arr[i].numWidth = numWidth;}} else if (this.vars.varsStatus.flagNow == 2) {if (flagSwitcNow == 'Standard') {var numHeight = this._varsTemplateWrap.numHeight- (this._staticTemplate.numLayoutTopHeight + this._staticTemplate.numLayoutBottomHeight);var numWidth = this._varsTemplateWrap.numWidth- (this._staticTemplate.numLayoutLeftWidth * 2) * 2;var numWidthMin = obj.arr[0].numWidthMin + obj.arr[1].numWidthMin;if(numWidthMin > numWidth) {this._errTemplate({flag : flagSwitcNow + ' = ' + (numWidthMin - numWidth)});}for (var i = 0; i < obj.arr.length; i++) {obj.arr[i].numHeight = numHeight;if (i == 0) {obj.arr[0].numWidth = obj.arr[0].numWidth;obj.arr[1].numWidth = numWidth - obj.arr[0].numWidth;if(obj.arr[1].numWidth < obj.arr[1].numWidthMin){obj.arr[1].numWidth = obj.arr[1].numWidthMin;obj.arr[0].numWidth = numWidth - obj.arr[1].numWidth;}}obj.arr[i]['numHeight' + flagSwitcNow] = numHeight;obj.arr[i]['numWidth' + flagSwitcNow] = numWidth;}} else if (flagSwitcNow == 'Wide') {var numHeight = this._varsTemplateWrap.numHeight- (this._staticTemplate.numLayoutTopHeight+ this._staticTemplate.numLayoutBottomHeight) * 2;var numWidth = this._varsTemplateWrap.numWidth- (this._staticTemplate.numLayoutLeftWidth * 2);var numHeightMin = obj.arr[0].numHeightMin + obj.arr[1].numHeightMin;if(numHeightMin > numHeight) {this._errTemplate({flag : flagSwitcNow + ' = ' + (numHeightMin - numHeight)});}for (var i = 0; i < obj.arr.length; i++) {obj.arr[i].numWidth = numWidth;if (i == 0) {obj.arr[0].numHeight = obj.arr[0].numHeight;obj.arr[1].numHeight = numHeight - obj.arr[0].numHeight;if(obj.arr[1].numHeight < obj.arr[1].numHeightMin){obj.arr[1].numHeight = obj.arr[1].numHeightMin;obj.arr[0].numHeight = numHeight - obj.arr[1].numHeight;}}obj.arr[i]['numHeight' + flagSwitcNow] = numHeight;obj.arr[i]['numWidth' + flagSwitcNow] = numWidth;}}} else if (this.vars.varsStatus.flagNow == 3) {if (flagSwitcNow == 'Standard') {var numHeight = this._varsTemplateWrap.numHeight- (this._staticTemplate.numLayoutTopHeight + this._staticTemplate.numLayoutBottomHeight);var numWidth = this._varsTemplateWrap.numWidth- (this._staticTemplate.numLayoutLeftWidth * 2) * 3;var numWidthMin = obj.arr[0].numWidthMin + obj.arr[1].numWidthMin + obj.arr[2].numWidthMin;if(numWidthMin > numWidth) {this._errTemplate({flag : flagSwitcNow + ' = ' + (numWidthMin - numWidth)});}for (var i = 0; i < obj.arr.length; i++) {obj.arr[i].numHeight = numHeight;if (i == 0) {obj.arr[0].numWidth = obj.arr[0].numWidth;obj.arr[1].numWidth = obj.arr[1].numWidth;obj.arr[2].numWidth = numWidth - obj.arr[0].numWidth - obj.arr[1].numWidth;if (obj.arr[2].numWidth < obj.arr[2].numWidthMin) {obj.arr[2].numWidth = obj.arr[2].numWidthMin;obj.arr[1].numWidth = numWidth - obj.arr[0].numWidth - obj.arr[2].numWidth;if (obj.arr[1].numWidth < obj.arr[1].numWidthMin) {obj.arr[1].numWidth = obj.arr[1].numWidthMin;obj.arr[0].numWidth = numWidth - obj.arr[1].numWidth - obj.arr[2].numWidth;}}}}} else if (flagSwitcNow == 'Wide') {obj.arr = obj.arr.sortBy(function(v, i) {return v.numSort;});var numHeightSpan =(this._staticTemplate.numLayoutTopHeight + this._staticTemplate.numLayoutBottomHeight) * 2;var numWidthSpan = (this._staticTemplate.numLayoutLeftWidth * 2);var numHeight = this._varsTemplateWrap.numHeight - numHeightSpan;var numHeightRight = 0;var numWidth = this._varsTemplateWrap.numWidth - numWidthSpan;var numWidthBottom = numWidth;obj.arr[2].numWidth = numWidthBottom;numWidth -= numWidthSpan;var numWidthMin = obj.arr[0].numWidthMin + obj.arr[1].numWidthMin;if(numWidthMin > numWidth || obj.arr[2].numWidthMin > numWidth) {this._errTemplate({flag : flagSwitcNow + ' = Width'});}obj.arr = obj.arr.sortBy(function(v, i) {return v.numPriority;});var numFirst = null;var numSecond = null;var numBottom = null;var flagPriorityBottom = 0;for (var i = 0; i < obj.arr.length; i++) {if(obj.arr[i].numSort == 2) {numBottom = i;if(obj.arr[i].numPriority == 0) flagPriorityBottom = 1;continue;}if(numFirst == null) numFirst = i;else numSecond = i;}obj.arr[numFirst].numWidth = obj.arr[numFirst].numWidth;obj.arr[numSecond].numWidth = numWidth - obj.arr[numFirst].numWidth;if(obj.arr[numSecond].numWidth < obj.arr[numSecond].numWidthMin){obj.arr[numSecond].numWidth = obj.arr[numSecond].numWidthMin;obj.arr[numFirst].numWidth = numWidth - obj.arr[numSecond].numWidth;}var numTop;if (obj.arr[numFirst].numHeightMin > obj.arr[numSecond].numHeightMin) {numTop = numFirst;obj.arr[numSecond].numHeightMin = obj.arr[numFirst].numHeightMin;} else {numTop = numSecond;obj.arr[numFirst].numHeightMin = obj.arr[numSecond].numHeightMin;}var numHeightMin = obj.arr[numTop].numHeightMin + obj.arr[numBottom].numHeightMin;if(numHeightMin > numHeight) {this._errTemplate({flag : flagSwitcNow + ' = ' + (numHeightMin - numHeight)});}if (flagPriorityBottom) {obj.arr[numBottom].numHeight = obj.arr[numBottom].numHeight;obj.arr[numFirst].numHeight = numHeight - obj.arr[numBottom].numHeight;obj.arr[numSecond].numHeight = numHeight - obj.arr[numBottom].numHeight;if(obj.arr[numTop].numHeight < obj.arr[numTop].numHeightMin){obj.arr[numFirst].numHeight = obj.arr[numTop].numHeightMin;obj.arr[numSecond].numHeight = obj.arr[numTop].numHeightMin;obj.arr[numBottom].numHeight = numHeight - obj.arr[numTop].numHeight;}} else {obj.arr[numFirst].numHeight = obj.arr[numTop].numHeight;obj.arr[numSecond].numHeight = obj.arr[numTop].numHeight;obj.arr[numBottom].numHeight = numHeight - obj.arr[numTop].numHeight;if(obj.arr[numBottom].numHeight < obj.arr[numBottom].numHeightMin){obj.arr[numBottom].numHeight = obj.arr[numBottom].numHeight;obj.arr[numFirst].numHeight = numHeight - obj.arr[numBottom].numHeightMin;obj.arr[numSecond].numHeight = numHeight - obj.arr[numBottom].numHeightMin;}}} else if (flagSwitcNow == 'Classic') {obj.arr = obj.arr.sortBy(function(v, i) {return v.numSort;});var numHeightSpan = this._staticTemplate.numLayoutTopHeight+ this._staticTemplate.numLayoutBottomHeight;var numWidthSpan = ( this._staticTemplate.numLayoutLeftWidth * 2 ) * 2;var numHeight = this._varsTemplateWrap.numHeight - numHeightSpan;var numWidth = this._varsTemplateWrap.numWidth - numWidthSpan;obj.arr[0].numHeight = numHeight;numHeight -= numHeightSpan;var numHeightMin = obj.arr[1].numHeightMin + obj.arr[2].numHeightMin;if(numHeightMin > numHeight || obj.arr[0].numHeightMin > numHeight) {this._errTemplate({flag : flagSwitcNow + ' = Height'});}obj.arr = obj.arr.sortBy(function(v, i) {return v.numPriority;});var numFirst = null;var numSecond = null;var numLeft = null;var flagPriorityLeft = 0;for (var i = 0; i < obj.arr.length; i++) {if(obj.arr[i].numSort == 0) {numLeft = i;if(obj.arr[i].numPriority == 0) flagPriorityLeft = 1;continue;}if(numFirst == null) numFirst = i;else numSecond = i;}obj.arr[numFirst].numHeight = obj.arr[numFirst].numHeight;obj.arr[numSecond].numHeight = numHeight - obj.arr[numFirst].numHeight;if(obj.arr[numSecond].numHeight < obj.arr[numSecond].numHeightMin){obj.arr[numSecond].numHeight = obj.arr[numSecond].numHeightMin;obj.arr[numFirst].numHeight = numHeight - obj.arr[numSecond].numHeight;}var numRight;if (obj.arr[numFirst].numWidthMin > obj.arr[numSecond].numWidthMin) {numRight = numFirst;obj.arr[numSecond].numWidthMin = obj.arr[numFirst].numWidthMin;} else {numRight = numSecond;obj.arr[numFirst].numWidthMin = obj.arr[numSecond].numWidthMin;}var numWidthMin = obj.arr[numRight].numWidthMin + obj.arr[numLeft].numWidthMin;if(numWidthMin > numWidth) {this._errTemplate({flag : flagSwitcNow + ' = ' + (numWidthMin - numWidth)});}if (flagPriorityLeft) {obj.arr[numLeft].numWidth = obj.arr[numLeft].numWidth;obj.arr[numFirst].numWidth = numWidth - obj.arr[numLeft].numWidth;obj.arr[numSecond].numWidth = numWidth - obj.arr[numLeft].numWidth;if(obj.arr[numRight].numWidth < obj.arr[numRight].numWidthMin){obj.arr[numFirst].numWidth = obj.arr[numRight].numWidthMin;obj.arr[numSecond].numWidth = obj.arr[numRight].numWidthMin;obj.arr[numLeft].numWidth = numWidth - obj.arr[numRight].numWidth;}} else {obj.arr[numFirst].numWidth = obj.arr[numRight].numWidth;obj.arr[numSecond].numWidth = obj.arr[numRight].numWidth;obj.arr[numLeft].numWidth = numWidth - obj.arr[numRight].numWidth;if(obj.arr[numLeft].numWidth < obj.arr[numLeft].numWidthMin){obj.arr[numLeft].numWidth = obj.arr[numLeft].numWidth;obj.arr[numFirst].numWidth = numWidth - obj.arr[numLeft].numWidthMin;obj.arr[numSecond].numWidth = numWidth - obj.arr[numLeft].numWidthMin;}}}}this.vars.varsDetail = obj.arr.sortBy(function(v, i) {return v.numSort;});},_varsTemplateWrap : {numHeight : 0, numWidth : 0},_varTemplateWrap : function(){var array = this.eleInsert.style.height.split('px');this._varsTemplateWrap.numHeight = parseFloat(array[0]) - this._staticTemplate.numPadding * 2;array = this.eleInsert.style.width.split('px');this._varsTemplateWrap.numWidth = parseFloat(array[0]) - this._staticTemplate.numPadding * 2;},_setTemplate : function(obj){for (var i = 0; i < obj.arr.length; i++) {var insTemplate = new Code_Lib_Template();var data = insTemplate.get({flagType  : 'shadowBox',numWidth  : obj.arr[i].numWidth,numHeight : obj.arr[i].numHeight,id        : (this.idSelf + obj.arr[i].id)});this.eleInsert.down('.codeLibLayoutWrap',0).insert(data);}},_varTemplateBox : function(obj){for (var i = 0; i < obj.arr.length; i++) {if (!obj.arr[i].flagBoxUse) continue;obj.arr[i].numWidthBox =  obj.arr[i].numWidth - this._staticTemplate.numBoxLeftWidth * 2;obj.arr[i].numHeightBox =  this._staticTemplate.numBoxHeight;}},_setTemplateBox : function(obj){for (var i = 0; i < obj.arr.length; i++) {if (!obj.arr[i].flagBoxUse) continue;var insTemplate = new Code_Lib_Template();var data = insTemplate.get({flagType  : 'normalBox',numWidth  : obj.arr[i].numWidthBox,numHeight : obj.arr[i].numHeightBox,id        : (this.idSelf + obj.arr[i].id)+'Box'});var id = this.idSelf + obj.arr[i].id;$(id).down('.codeLibTemplateShadowBoxMiddleMiddle',0).insert(data);$(id).down('.codeLibTemplateNormalBoxMiddleMiddle',0).addClassName('codeLibLayoutBoxBg');}},_styleTemplateUpdate : function(obj){for (var i = 0; i < obj.arr.length; i++) {var insTemplate = new Code_Lib_Template();insTemplate.updateStyle({flagType  : 'shadowBox',id        : (this.idSelf + obj.arr[i].id),numHeight : obj.arr[i].numHeight,numWidth  : obj.arr[i].numWidth});if (!obj.arr[i].flagBoxUse) continue;insTemplate.updateStyle({flagType  : 'normalBox',id        : (this.idSelf + obj.arr[i].id) + 'Box',numHeight : obj.arr[i].numHeightBox,numWidth  : obj.arr[i].numWidthBox});}for (var i = 0; i < obj.arr.length; i++) {this.eleInsert.down('.codeLibLayoutWrap',0).insert($((this.idSelf + obj.arr[i].id)));}},_iniSwitch : function(){if (!this.vars.varsStatus.flagSwitchUse) return;this._templateSwitch();this._templateSwitchListener();},_templateSwitch : function(){var ele = $(document.createElement('li'));ele.addClassName('codeLibWindowNaviSwitch');ele.addClassName('codeLibBaseCursorPointer');ele.hide();ele.title = this.varsLoad.varsWhole.strSwitch;$(this.idWindow).down('.codeLibWindowNavi', 0).insert(ele);new Effect.Appear(ele);},_templateSwitchListener : function(){if (!this.vars.varsStatus.flagSwitchUse) return;this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'mousedown',strFunc : '_mousedownSwitch', ele : $(this.idWindow).down('.codeLibWindowNaviSwitch', 0),vars : ''});this.insListener.set({bindAsEvent : 0, insCurrent : this, event : 'mouseover',strFunc : '_mouseoverSwitch', ele : $(this.idWindow).down('.codeLibWindowNaviSwitch', 0),vars : ''});this.insListener.set({bindAsEvent : 0, insCurrent : this, event : 'mouseout',strFunc : '_mouseoutSwitch', ele : $(this.idWindow).down('.codeLibWindowNaviSwitch', 0),vars : ''});},_mouseoverSwitch : function(){var ele = $(this.idWindow).down('.codeLibWindowNaviSwitch', 0);ele.addClassName('codeLibWindowNaviSwitchOver');},_mouseoutSwitch : function(){var ele = $(this.idWindow).down('.codeLibWindowNaviSwitch', 0);ele.removeClassName('codeLibWindowNaviSwitchOver');},_varsSwitch : {},_mousedownSwitch : function(evt){evt.stop();this._varsSwitch = {};this._varsSwitch = {flagPast   : null};this.allot({insCurrent : this.insCurrent,from       : '_preMousedownSwitch'});this._varSwitchNowUpdate({arr : this.vars.varsStatus.switchList});this._varSwitchUpdate({arr : this.vars.varsDetail});this.iniReload();this.setCake();this.allot({insCurrent : this.insCurrent,from       : '_mousedownSwitch'});this._varsSwitch = {};},_varSwitchUpdate : function(obj){var strWidth = 'numWidth' + this.vars.varsStatus.flagSwitchNow;var strHeight = 'numHeight' + this.vars.varsStatus.flagSwitchNow;var strWidthPast = 'numWidth' + this._varsSwitch.flagPast;var strHeightPast = 'numHeight' + this._varsSwitch.flagPast;for (var i = 0; i < obj.arr.length; i++) {if (this.vars.varsStatus.flagNow != 1) {obj.arr[i][strWidthPast] = obj.arr[i].numWidth;obj.arr[i][strHeightPast] = obj.arr[i].numHeight;obj.arr[i].numWidth = obj.arr[i][strWidth];obj.arr[i].numHeight = obj.arr[i][strHeight];}}},_varSwitchNowUpdate : function(obj){var flagPast = this.vars.varsStatus.flagSwitchNow;this._varsSwitch.flagPast = flagPast;var flag = '';for (var i = 0; i < obj.arr.length; i++) {if (this.vars.varsStatus.flagSwitchNow == obj.arr[i]) flag = i;}var num = obj.arr.length - 1;if (flag == num) flag = 0;else flag++;this.vars.varsStatus.flagSwitchNow = obj.arr[flag];},_varsResize : {},_iniResize : function(){if (!this.vars.varsStatus.flagResizeUse) return;this._templateResize({arr : this.vars.varsDetail});this._templateResizeListener({arr : this.vars.varsDetail});},_removeResize : function(){for (var i = 0; i < this._varsResizeEle.length; i++) {this._varsResizeEle[i].remove();}this._varsResizeEle = [];},_varsResizeEle : [],_templateResize : function(obj){if (!this.vars.varsStatus.flagResizeUse) return;this._varsResizeEle = [];if (this.vars.varsStatus.flagNow == 2) {var ele = $(document.createElement('div'));ele.addClassName('codeLibLayoutNavi');this._varsResizeEle.push(ele);for (var i = 0; i < obj.arr.length; i++) {if (i == 0) {if (this.vars.varsStatus.flagSwitchNow == 'Standard') {ele.addClassName('codeLibLayoutNaviXArea');ele.addClassName('codeLibBaseCursorE-resize');var id = this.idSelf + obj.arr[i].id;$(id).down('.codeLibTemplateShadowBoxMiddleRight',0).insert(ele);} else if (this.vars.varsStatus.flagSwitchNow == 'Wide') {ele.addClassName('codeLibLayoutNaviYArea');ele.addClassName('codeLibBaseCursorS-resize');var id = this.idSelf + obj.arr[i].id;$(id).down('.codeLibTemplateShadowBoxBottomMiddle',0).insert(ele);}}}} else if (this.vars.varsStatus.flagNow == 3) {var eleA = $(document.createElement('div'));eleA.addClassName('codeLibLayoutNavi');var eleB = $(document.createElement('div'));eleB.addClassName('codeLibLayoutNavi');this._varsResizeEle.push(eleA);this._varsResizeEle.push(eleB);for (var i = 0; i < obj.arr.length; i++) {if (i == 0) {eleA.addClassName('codeLibLayoutNaviXArea');eleA.addClassName('codeLibBaseCursorE-resize');var id = this.idSelf + obj.arr[i].id;$(id).down('.codeLibTemplateShadowBoxMiddleRight',0).insert(eleA);} else if (i == 1) {if (this.vars.varsStatus.flagSwitchNow == 'Standard') {eleB.addClassName('codeLibLayoutNaviXArea');eleB.addClassName('codeLibBaseCursorE-resize');var id = this.idSelf + obj.arr[i].id;$(id).down('.codeLibTemplateShadowBoxMiddleRight',0).insert(eleB);}} else if (i == 2) {if (this.vars.varsStatus.flagSwitchNow == 'Wide'|| this.vars.varsStatus.flagSwitchNow == 'Classic') {eleB.addClassName('codeLibLayoutNaviYArea');eleB.addClassName('codeLibBaseCursorS-resize');var id = this.idSelf + obj.arr[i].id;$(id).down('.codeLibTemplateShadowBoxTopMiddle',0).insert(eleB);}}}}},_templateResizeListener : function(obj){if (!this.vars.varsStatus.flagResizeUse) return;if (this.vars.varsStatus.flagNow == 2) {for (var i = 0; i < obj.arr.length; i++) {if (i == 0) {if (this.vars.varsStatus.flagSwitchNow == 'Standard') {this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'mousedown',strFunc : '_mousedownResize',ele : $((this.idSelf + obj.arr[i].id)).down('.codeLibLayoutNaviXArea',0),vars : {flagArrection : 0, sortThis : 0, sortThat : 1}});} else if (this.vars.varsStatus.flagSwitchNow == 'Wide') {this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'mousedown',strFunc : '_mousedownResize',ele : $((this.idSelf + obj.arr[i].id)).down('.codeLibLayoutNaviYArea',0),vars : {flagArrection : 0, sortThis : 0, sortThat : 1}});}}}} else if (this.vars.varsStatus.flagNow == 3) {for (var i = 0; i < obj.arr.length; i++) {if (i == 0) {this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'mousedown',strFunc : '_mousedownResize',ele : $((this.idSelf + obj.arr[i].id)).down('.codeLibLayoutNaviXArea',0),vars : {flagArrection : 0, sortThis : 0, sortThat : 1}});} else if (i == 1) {if (this.vars.varsStatus.flagSwitchNow == 'Standard') {this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'mousedown',strFunc : '_mousedownResize',ele : $((this.idSelf + obj.arr[i].id)).down('.codeLibLayoutNaviXArea',0),vars : {flagArrection : 1, sortThis : 1, sortThat : 2}});}} else if (i == 2) {if (this.vars.varsStatus.flagSwitchNow == 'Wide'|| this.vars.varsStatus.flagSwitchNow == 'Classic') {this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'mousedown',strFunc : '_mousedownResize',ele : $((this.idSelf + obj.arr[i].id)).down('.codeLibLayoutNaviYArea',0),vars : {flagArrection : 1, sortThis : 1, sortThat : 2}});}}}}this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'mousemove',strFunc : '_mousemoveResize', ele : document, vars : ''});this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'mouseup',strFunc : '_mouseupResize', ele : document, vars : ''});},getResizeSort : function(obj){for (var i = 0; i < obj.arr.length; i++) {if (obj.num == i) return obj.arr[i];}},getResizeArrection : function(obj){for (var i = 0; i < obj.arr.length; i++) {if (obj.num == i) {if ($((this.idSelf + obj.arr[i].id)).down('.codeLibLayoutNaviXArea',0)) return 'x';else return 'y';}}},_staticResize : {numWindowHead : 48, numLayoutTopHeight : 8, numLayoutBottomHeight : 6,numLayoutLeftWidth : 6, numBoxLeftWidth : 3, numPadding : 2},_mousedownResize : function(evt, obj) {var array = (this.eleInsert.up('.codeLibWindow',0).style.top).split('px');var numDisplayTop = parseFloat(array[0]) + this._staticResize.numWindowHead;this._varsResize = {};this._varsResize = {flag             : 1,ele              : evt.element(),sortThis         : this.getResizeSort({arr : this.vars.varsDetail, num : obj.sortThis}),sortThat         : this.getResizeSort({arr : this.vars.varsDetail, num : obj.sortThat}),flagArrection    : this.getResizeArrection({arr : this.vars.varsDetail, num : obj.flagArrection}),numDisplayLeft   : this.eleInsert.up('.codeLibWindow',0).offsetLeft + this.eleInsert.offsetLeft,numDisplayTop    : numDisplayTop,numLayoutLeftMin : 0,numLayoutTopMin  : 0,numLayoutLeftMax : 0,numLayoutTopMax  : 0,numMouseLeft     : evt.pointerX(),numMouseTop      : evt.pointerY(),numNaviBarXLeft  : evt.pointerX(),numNaviBarXTop   : 0,numNaviBarYLeft  : 0,numNaviBarYTop   : evt.pointerY(),eleBarX          : null,eleBarY          : null,eleLock          : null};var omit = this._varsResize;if (this.vars.varsStatus.flagNow == 2) {if (this.vars.varsStatus.flagSwitchNow == 'Standard') {var numRight = omit.numDisplayLeft+ this.eleInsert.offsetWidth- this._staticResize.numPadding- this._staticResize.numLayoutLeftWidth;var numLeft = omit.numDisplayLeft+ $(this.idSelf+ omit.sortThis.id).down('.codeLibTemplateShadowBoxMiddleMiddle',0).offsetLeft;omit.numLayoutLeftMin = numLeft + omit.sortThis.numWidthMin;omit.numLayoutLeftMax = numRight - omit.sortThat.numWidthMin;} else if (this.vars.varsStatus.flagSwitchNow == 'Wide') {var numTop = omit.numDisplayTop + this._staticResize.numLayoutTopHeight;var bottom = omit.numDisplayTop+ this.eleInsert.offsetHeight- this._staticResize.numPadding- this._staticResize.numLayoutBottomHeight;omit.numLayoutTopMin = numTop + omit.sortThis.numHeightMin;omit.numLayoutTopMax = bottom - omit.sortThat.numHeightMin;}} else if (this.vars.varsStatus.flagNow == 3) {if (this.vars.varsStatus.flagSwitchNow == 'Standard') {var ele = $(this.idSelf + omit.sortThis.id).down('.codeLibTemplateShadowBoxMiddleMiddle',0);var numLeft = omit.numDisplayLeft + ele.offsetLeft;if (omit.sortThis.numSort == 0) {var idThis = this.idSelf + omit.sortThis.id;var idThat = this.idSelf + omit.sortThat.id;var eleThis = $(idThis).down('.codeLibTemplateShadowBoxMiddleMiddle',0);var eleThat = $(idThat).down('.codeLibTemplateShadowBoxMiddleMiddle',0);var numRight = omit.numDisplayLeft+ this._staticResize.numPadding+ eleThis.offsetWidth+ this._staticResize.numLayoutLeftWidth * 4+ eleThat.offsetWidth;omit.numLayoutLeftMin = numLeft + omit.sortThis.numWidthMin;omit.numLayoutLeftMax = numRight - omit.sortThat.numWidthMin;} else if (omit.sortThis.numSort == 1) {var numRight = omit.numDisplayLeft+ this.eleInsert.offsetWidth- this._staticResize.numPadding- this._staticResize.numLayoutLeftWidth;omit.numLayoutLeftMin = numLeft + omit.sortThis.numWidthMin;omit.numLayoutLeftMax = numRight - omit.sortThat.numWidthMin;}} else if (this.vars.varsStatus.flagSwitchNow == 'Wide'|| this.vars.varsStatus.flagSwitchNow == 'Classic') {if (omit.sortThis.numSort == 0) {var ele = $(this.idSelf + omit.sortThis.id).down('.codeLibTemplateShadowBoxMiddleMiddle',0);var numLeft = omit.numDisplayLeft + ele.offsetLeft;var numRight = omit.numDisplayLeft+ this.eleInsert.offsetWidth- this._staticResize.numPadding- this._staticResize.numLayoutLeftWidth;omit.numLayoutLeftMin = numLeft + omit.sortThis.numWidthMin;omit.numLayoutLeftMax = numRight - omit.sortThat.numWidthMin;} else if (omit.sortThis.numSort == 1) {var numTop = omit.numDisplayTop + this._staticResize.numLayoutTopHeight;var bottom = omit.numDisplayTop+ this.eleInsert.offsetHeight- this._staticResize.numPadding- this._staticResize.numLayoutBottomHeight;omit.numLayoutTopMin = numTop + omit.sortThis.numHeightMin;omit.numLayoutTopMax = bottom - omit.sortThat.numHeightMin;}}}this._templateResizeNavi({evt : evt});evt.stop();},_templateResizeNavi : function(obj){var ele = $(document.createElement('span'));var viewSize = document.viewport.getDimensions();var scroll = document.viewport.getScrollOffsets();var ZIndex = this.insRoot.setZIndex();var eleLock = $(document.createElement('div'));eleLock.addClassName('codeLibLockView');eleLock.setStyle({zIndex : ZIndex});$(this.insRoot.vars.varsSystem.id.root).insert(eleLock);this._varsResize.eleLock = eleLock;if (this._varsResize.flagArrection == 'x') {ele.setStyle({height : viewSize.height + scroll.top + 'px',top    : '0px',left   : obj.evt.pointerX() + 'px',zIndex : ZIndex});ele.addClassName('codeLibLayoutNaviX');this._varsResize.eleBarX = ele;} else if (this._varsResize.flagArrection == 'y') {ele.setStyle({width  : viewSize.width + scroll.left + 'px',top    : obj.evt.pointerY() + 'px',left   : '0px',zIndex : ZIndex});ele.addClassName('codeLibLayoutNaviY');this._varsResize.eleBarY = ele;}$(this.insRoot.vars.varsSystem.id.root).insert(ele);},_getResizeLeftMin : function(evt){var data = (this._varsResize.numLayoutLeftMin > evt.pointerX()) ? 1  : 0 ;return data;},_getResizeLeftMax : function(evt){var data = (this._varsResize.numLayoutLeftMax < evt.pointerX()) ? 1  : 0 ;return data;},_getResizeTopMin : function(evt){var data = (this._varsResize.numLayoutTopMin > evt.pointerY()) ? 1  : 0 ;return data;},_getResizeTopMax : function(evt){var data = (this._varsResize.numLayoutTopMax < evt.pointerY()) ? 1  : 0 ;return data;},_mousemoveResize : function(evt){if (!this._varsResize.flag) return;if (this._varsResize.flagArrection == 'x') {if (this._getResizeLeftMin(evt)) {this._varsResize.eleBarX.setStyle({left : this._varsResize.numLayoutLeftMin + 'px',top  : '0px'});this._varsResize.numNaviBarXLeft = this._varsResize.numLayoutLeftMin;this._varsResize.numNaviBarXTop = 0;} else if (this._getResizeLeftMax(evt)) {this._varsResize.eleBarX.setStyle({left : this._varsResize.numLayoutLeftMax + 'px',top  : '0px'});this._varsResize.numNaviBarXLeft = this._varsResize.numLayoutLeftMax;this._varsResize.numNaviBarXTop = 0;} else {this._varsResize.eleBarX.setStyle({left : evt.pointerX() + 'px',top  : '0px'});this._varsResize.numNaviBarXLeft = evt.pointerX();this._varsResize.numNaviBarXTop = 0;}} else if (this._varsResize.flagArrection == 'y') {if (this._getResizeTopMin(evt)) {this._varsResize.eleBarY.setStyle({top  : this._varsResize.numLayoutTopMin + 'px',left : '0px'});this._varsResize.numNaviBarYTop = this._varsResize.numLayoutTopMin;this._varsResize.numNaviBarYLeft = 0;} else if (this._getResizeTopMax(evt)) {this._varsResize.eleBarY.setStyle({top  : this._varsResize.numLayoutTopMax + 'px',left : '0px'});this._varsResize.numNaviBarYTop = this._varsResize.numLayoutTopMax;this._varsResize.numNaviBarYLeft = 0;} else {this._varsResize.eleBarY.setStyle({top  : evt.pointerY() + 'px',left : '0px'});this._varsResize.numNaviBarYTop = evt.pointerY();this._varsResize.numNaviBarYLeft = 0;}}evt.stop();},_getResizeCalc : function(){var omit = this._varsResize;var difX = omit.numNaviBarXLeft - omit.numMouseLeft;var difY = omit.numNaviBarYTop - omit.numMouseTop;if (this.vars.varsStatus.flagNow == 2) {if (this.vars.varsStatus.flagSwitchNow == 'Standard') {omit.sortThis.numWidth += difX;omit.sortThat.numWidth -= difX;this._checkResizeCalcWidthMin();} else if (this.vars.varsStatus.flagSwitchNow == 'Wide') {omit.sortThis.numHeight += difY;omit.sortThat.numHeight -= difY;this._checkResizeCalcHeightMin();}} else if (this.vars.varsStatus.flagNow == 3) {if (this.vars.varsStatus.flagSwitchNow == 'Standard') {omit.sortThis.numWidth += difX;omit.sortThat.numWidth -= difX;this._checkResizeCalcWidthMin();} else if (this.vars.varsStatus.flagSwitchNow == 'Wide'|| this.vars.varsStatus.flagSwitchNow == 'Classic') {if (omit.sortThis.numSort == 0) {omit.sortThis.numWidth += difX;omit.sortThat.numWidth -= difX;this._checkResizeCalcWidthMin();} else if (omit.sortThis.numSort == 1) {omit.sortThis.numHeight += difY;omit.sortThat.numHeight -= difY;this._checkResizeCalcHeightMin();}}}omit.sortThat.numWidth = (omit.sortThat.numWidthMin > omit.sortThat.numWidth)?  omit.sortThat.numWidthMin  : omit.sortThat.numWidth;omit.sortThis.numHeight = (omit.sortThis.numHeightMin > omit.sortThis.numHeight)?  omit.sortThis.numHeightMin  : omit.sortThis.numHeight;omit.sortThat.numHeight = (omit.sortThat.numHeightMin > omit.sortThat.numHeight)?omit.sortThat.numHeightMin  : omit.sortThat.numHeight;},_checkResizeCalcWidthMin : function(){var omit = this._varsResize;var idle = 0;if (omit.sortThis.numWidthMin > omit.sortThis.numWidth) {idle = omit.sortThis.numWidthMin - omit.sortThis.numWidth;omit.sortThis.numWidth += idle;omit.sortThat.numWidth -= idle;}if (omit.sortThat.numWidthMin > omit.sortThat.numWidth) {idle = omit.sortThat.numWidthMin - omit.sortThat.numWidth;omit.sortThis.numWidth -= idle;omit.sortThat.numWidth += idle;}},_checkResizeCalcHeightMin : function(){var omit = this._varsResize;var idle = 0;if (omit.sortThis.numHeightMin > omit.sortThis.numHeight) {idle = omit.sortThis.numHeightMin - omit.sortThis.numHeight;omit.sortThis.numHeight += idle;omit.sortThat.numHeight -= idle;}if (omit.sortThat.numHeightMin > omit.sortThat.numHeight) {idle = omit.sortThat.numHeightMin - omit.sortThat.numHeight;omit.sortThis.numHeight -= idle;omit.sortThat.numHeight += idle;}},_mouseupResize : function(evt){if (!this._varsResize.flag) return;this.allot({insCurrent : this.insCurrent,from       : '_preMouseupResize'});this._getResizeCalc();this._varResizeUpdate({arr : this.vars.varsDetail});this.iniReload();this.setCake();this.allot({insCurrent : this.insCurrent,from       : '_mouseupResize'});if (this._varsResize.flagArrection == 'x') this._varsResize.eleBarX.remove();else if (this._varsResize.flagArrection == 'y') this._varsResize.eleBarY.remove();this._varsResize.eleLock.remove();evt.stop();this._varsResize = {};},_varResizeUpdate : function(obj){var omit = this._varsResize;if (this.vars.varsStatus.flagNow == 2) {for (var i = 0; i < obj.arr.length; i++) {if ((this.idSelf + obj.arr[i].id) == (this.idSelf + omit.sortThis.id)) {obj.arr[i].numWidth = omit.sortThis.numWidth;obj.arr[i].numHeight = omit.sortThis.numHeight;} else if ((this.idSelf + obj.arr[i].id) == (this.idSelf + omit.sortThat.id)) {obj.arr[i].numWidth = omit.sortThat.numWidth;obj.arr[i].numHeight = omit.sortThat.numHeight;}if (!obj.arr[i].flagBoxUse) continue;obj.arr[i].numWidthBox =  obj.arr[i].numWidth - this._staticResize.numBoxLeftWidth * 2;}} else if (this.vars.varsStatus.flagNow == 3) {if (this.vars.varsStatus.flagSwitchNow == 'Standard') {for (var i = 0; i < obj.arr.length; i++) {if ((this.idSelf + obj.arr[i].id) == (this.idSelf + omit.sortThis.id)) {obj.arr[i].numWidth = omit.sortThis.numWidth;obj.arr[i].numHeight = omit.sortThis.numHeight;} else if ((this.idSelf + obj.arr[i].id) == (this.idSelf + omit.sortThat.id)) {obj.arr[i].numWidth = omit.sortThat.numWidth;obj.arr[i].numHeight = omit.sortThat.numHeight;}if (!obj.arr[i].flagBoxUse) continue;obj.arr[i].numWidthBox =  obj.arr[i].numWidth - this._staticResize.numBoxLeftWidth * 2;}} else if (this.vars.varsStatus.flagSwitchNow == 'Wide') {for (var i = 0; i < obj.arr.length; i++) {if (omit.sortThis.numSort == 0) {if ((this.idSelf + obj.arr[i].id) == (this.idSelf + omit.sortThis.id)) {obj.arr[i].numWidth = omit.sortThis.numWidth;obj.arr[i].numHeight = omit.sortThis.numHeight;} else if ((this.idSelf + obj.arr[i].id) == (this.idSelf + omit.sortThat.id)) {obj.arr[i].numWidth = omit.sortThat.numWidth;obj.arr[i].numHeight = omit.sortThat.numHeight;}} else if (omit.sortThis.numSort == 1) {if ((this.idSelf + obj.arr[i].id) == (this.idSelf + omit.sortThis.id)) {obj.arr[i].numWidth = omit.sortThis.numWidth;obj.arr[i].numHeight = omit.sortThis.numHeight;} else if ((this.idSelf + obj.arr[i].id) == (this.idSelf + omit.sortThat.id)) {obj.arr[i].numWidth = omit.sortThat.numWidth;obj.arr[i].numHeight = omit.sortThat.numHeight;} else {obj.arr[i].numHeight = omit.sortThis.numHeight;}}if (!obj.arr[i].flagBoxUse) continue;obj.arr[i].numWidthBox =  obj.arr[i].numWidth - this._staticResize.numBoxLeftWidth * 2;}} else if (this.vars.varsStatus.flagSwitchNow == 'Classic') {for (var i = 0; i < obj.arr.length; i++) {if (omit.sortThis.numSort == 0) {if ((this.idSelf + obj.arr[i].id) == (this.idSelf + omit.sortThis.id)) {obj.arr[i].numWidth = omit.sortThis.numWidth;obj.arr[i].numHeight = omit.sortThis.numHeight;} else if ((this.idSelf + obj.arr[i].id) == (this.idSelf + omit.sortThat.id)) {obj.arr[i].numWidth = omit.sortThat.numWidth;obj.arr[i].numHeight = omit.sortThat.numHeight;} else {obj.arr[i].numWidth = omit.sortThat.numWidth;}} else if (omit.sortThis.numSort == 1) {if ((this.idSelf + obj.arr[i].id) == (this.idSelf + omit.sortThis.id)) {obj.arr[i].numWidth = omit.sortThis.numWidth;obj.arr[i].numHeight = omit.sortThis.numHeight;} else if ((this.idSelf + obj.arr[i].id) == (this.idSelf + omit.sortThat.id)) {obj.arr[i].numWidth = omit.sortThat.numWidth;obj.arr[i].numHeight = omit.sortThat.numHeight;}}if (!obj.arr[i].flagBoxUse) continue;obj.arr[i].numWidthBox =  obj.arr[i].numWidth - this._staticResize.numBoxLeftWidth * 2;}}}},_iniMove : function(){if (!this.vars.varsStatus.flagMoveUse) return;this._templateMoveListener({arr : this.vars.varsDetail});this._setMoveCursor({arr : this.vars.varsDetail});},_templateMoveListener : function(obj){if (!this.vars.varsStatus.flagMoveUse) return;for (var i = 0; i < obj.arr.length; i++) {if (!obj.arr[i].flagBoxUse) continue;this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'mousedown',strFunc : '_mousedownMove',ele : $((this.idSelf + obj.arr[i].id)).down('.codeLibTemplateNormalBoxMiddleMiddle', 0),vars : {id : (this.idSelf + obj.arr[i].id)}});this.insListener.set({bindAsEvent : 0, insCurrent : this, event : 'mouseover',strFunc : '_mouseoverMove',ele : $((this.idSelf + obj.arr[i].id)).down('.codeLibTemplateNormalBoxMiddleMiddle', 0),vars : {id : (this.idSelf + obj.arr[i].id)}});this.insListener.set({bindAsEvent : 0, insCurrent : this, event : 'mouseout',strFunc : '_mouseoutMove',ele : $((this.idSelf + obj.arr[i].id)).down('.codeLibTemplateNormalBoxMiddleMiddle', 0),vars : {id : (this.idSelf + obj.arr[i].id)}});}this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'mousemove',strFunc : '_mousemoveMove', ele : document, vars : ''});this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'mouseup',strFunc : '_mouseupMove', ele : document, vars : ''});},_setMoveCursor : function(obj){for (var i = 0; i < obj.arr.length; i++) {if (!obj.arr[i].flagBoxUse) continue;var ele = $((this.idSelf + obj.arr[i].id)).down('.codeLibTemplateNormalBoxMiddleMiddle', 0);ele.addClassName('codeLibBaseCursorMove');}},_removeMoveCursor : function(obj){for (var i = 0; i < obj.arr.length; i++) {if (!obj.arr[i].flagBoxUse) continue;var ele = $((this.idSelf + obj.arr[i].id)).down('.codeLibTemplateNormalBoxMiddleMiddle', 0);ele.removeClassName('codeLibBaseCursorMove');}},_removeMoveImg : function(obj){for (var i = 0; i < obj.arr.length; i++) {if (!obj.arr[i].flagBoxUse) continue;var id = (this.idSelf + obj.arr[i].id) + 'MoveNavi';$(id).down('.codeLibTemplateNormalBoxMiddleMiddle',0).removeClassName('codeLibLayoutMoveNaviYes');}},_mouseoverMove : function(obj){if (!this._varsMove.flag) return;this._varsMove.idOver = obj.id;var id = obj.id + 'MoveNavi';$(id).down('.codeLibTemplateNormalBoxMiddleMiddle',0).addClassName('codeLibLayoutMoveNaviYes');},_mouseoutMove : function(obj){if (!this._varsMove.flag) return;this._removeMoveImg({arr : this.vars.varsDetail});this._varsMove.idOver = this._varsMove.idDown;},_mousemoveMove : function(evt){if (!this._varsMove.flag) return;this._varsMove.eleNavi.setStyle({left : (evt.pointerX() + this._staticMove.numNaviLeft) + 'px',top  : (evt.pointerY() + this._staticMove.numNaviTop) + 'px'});evt.stop();},_mousedownMove : function(evt, obj){this._varsMove = {};this._varsMove = {flag       : 1,flagChange : 0,eleNavi    : null,idOver     : '',idDown     : obj.id};this._removeMoveCursor({arr : this.vars.varsDetail});this._templateMoveNavi({evt : evt,arr : this.vars.varsDetail});evt.stop();},_varsMove : {},_templateMoveNavi : function(obj){var ele = $(document.createElement('div'));ele.addClassName('codeLibLayoutMoveNavi');var ZIndex = this.insRoot.setZIndex();ele.setStyle({top    : (obj.evt.pointerY() + this._staticMove.numNaviTop) + 'px',left   : (obj.evt.pointerX() + this._staticMove.numNaviLeft) + 'px',zIndex : ZIndex});$(this.insRoot.vars.varsSystem.id.root).insert(ele);if (this.vars.varsStatus.flagNow == 2) {if (this.vars.varsStatus.flagSwitchNow == 'Standard') {ele.setStyle({width : (this._staticMove.numWrapLayoutWidth * 2) + 'px'});} else if (this.vars.varsStatus.flagSwitchNow == 'Wide') {ele.setStyle({width : (this._staticMove.numWrapLayoutWidth) + 'px'});}} else if (this.vars.varsStatus.flagNow == 3) {if (this.vars.varsStatus.flagSwitchNow == 'Standard') {ele.setStyle({width : (this._staticMove.numWrapLayoutWidth * 3) + 'px'});} else if (this.vars.varsStatus.flagSwitchNow == 'Wide') {ele.setStyle({width  : (this._staticMove.numWrapLayoutWidth * 2) + 'px',height : (this._staticMove.numWrapLayoutHeight * 2) + 'px'});} else if (this.vars.varsStatus.flagSwitchNow == 'Classic') {ele.setStyle({width  : (this._staticMove.numWrapLayoutWidth * 2) + 'px',height : (this._staticMove.numWrapLayoutHeight * 2) + 'px'});}}var data;for (var i = 0; i < obj.arr.length; i++) {if (!obj.arr[i].flagBoxUse) continue;if (this.vars.varsStatus.flagNow == 2) {var insTemplate = new Code_Lib_Template();data = insTemplate.get({flagType  : 'shadowBox',id        : (this.idSelf + obj.arr[i].id) + 'MoveNavi',numWidth  : this._staticMove.numLayoutWidth,numHeight : this._staticMove.numLayoutHeight});ele.insert(data);data = insTemplate.get({flagType  : 'normalBox',id        : (this.idSelf + obj.arr[i].id) + 'MoveNaviBox',numWidth  : this._staticMove.numBoxWidth,numHeight : this._staticMove.numBoxHeight});var id = (this.idSelf + obj.arr[i].id) + 'MoveNavi';var eleChild = $(id).down('.codeLibTemplateShadowBoxMiddleMiddle',0);eleChild.insert(data);} else if (this.vars.varsStatus.flagNow == 3) {if (i == 2 && this.vars.varsStatus.flagSwitchNow == 'Wide') {var insTemplate = new Code_Lib_Template();data = insTemplate.get({flagType  : 'shadowBox',numWidth  : this._staticMove.numLayoutWidth * 2 + this._staticMove.numLayoutLeftWidth * 2,numHeight : this._staticMove.numLayoutHeight,id        : (this.idSelf + obj.arr[i].id) + 'MoveNavi'});ele.insert(data);data = insTemplate.get({flagType  : 'normalBox',numWidth  : this._staticMove.numBoxWidth * 2+ this._staticMove.numLayoutLeftWidth * 2+ this._staticMove.numBoxLeftWidth * 2,numHeight : this._staticMove.numBoxHeight,id        : (this.idSelf + obj.arr[i].id)+'MoveNaviBox'});var id = (this.idSelf + obj.arr[i].id) + 'MoveNavi';var eleChild = $(id).down('.codeLibTemplateShadowBoxMiddleMiddle',0);eleChild.insert(data);} else if (i == 0 && this.vars.varsStatus.flagSwitchNow == 'Classic') {var insTemplate = new Code_Lib_Template();data = insTemplate.get({flagType  : 'shadowBox',numWidth  : this._staticMove.numLayoutWidth,id        : (this.idSelf + obj.arr[i].id) + 'MoveNavi',numHeight : this._staticMove.numLayoutHeight * 2+ this._staticMove.numLayoutBottomHeight+ this._staticMove.numLayoutTopHeight});ele.insert(data);data = insTemplate.get({flagType  : 'normalBox',id        : (this.idSelf + obj.arr[i].id) + 'MoveNaviBox',numWidth  : this._staticMove.numBoxWidth,numHeight : this._staticMove.numBoxHeight * 2+ this._staticMove.numLayoutBottomHeight+ this._staticMove.numLayoutTopHeight+ this._staticMove.numBoxLeftWidth * 2});var id = (this.idSelf + obj.arr[i].id) + 'MoveNavi';var eleChild = $(id).down('.codeLibTemplateShadowBoxMiddleMiddle',0);eleChild.insert(data);} else {var insTemplate = new Code_Lib_Template();data = insTemplate.get({flagType  : 'shadowBox',id        : (this.idSelf + obj.arr[i].id) + 'MoveNavi',numWidth  : this._staticMove.numLayoutWidth,numHeight : this._staticMove.numLayoutHeight});ele.insert(data);data = insTemplate.get({flagType  : 'normalBox',id        : (this.idSelf + obj.arr[i].id) + 'MoveNaviBox',numWidth  : this._staticMove.numBoxWidth,numHeight : this._staticMove.numBoxHeight});var id = (this.idSelf + obj.arr[i].id) + 'MoveNavi';var eleChild = $(id).down('.codeLibTemplateShadowBoxMiddleMiddle',0);eleChild.insert(data);}}}var eleBg = $(document.createElement('div'));eleBg.addClassName('codeLibBaseBgCcc');eleBg.setStyle({height : 100 + '%',width  : 100 + '%'});var id = this._varsMove.idDown + 'MoveNavi';$(id).down('.codeLibTemplateNormalBoxMiddleMiddle',0).insert(eleBg);this._varsMove.eleNavi = ele;},_mouseupMove : function(evt, obj){if (!this._varsMove.flag) return;this._varsMove.flag = 0;this._checkMoveChange({arr : this.vars.varsDetail});if (this._varsMove.flagChange) {this.allot({insCurrent : this.insCurrent,from       : '_preMouseupMove'});this._varMoveUpdate({arr : this.vars.varsDetail});this.iniReload();this.setCake();this.allot({insCurrent : this.insCurrent,from       : '_mouseupMove'});}this._setMoveCursor({arr : this.vars.varsDetail});this._varsMove.eleNavi.remove();evt.stop();this._varsMove = {};},_checkMoveChange : function(obj){for (var i = 0; i < obj.arr.length; i++) {if (this._varsMove.idOver == (this.idSelf + obj.arr[i].id)&& this._varsMove.idDown != this._varsMove.idOver) {this._varsMove.flagChange = 1;}}},_varMoveUpdate : function(obj){var numSortOver = 0;var numSortDown = 0;for (var i = 0; i < obj.arr.length; i++) {if (this._varsMove.idOver == (this.idSelf + obj.arr[i].id)) {numSortOver = obj.arr[i].numSort;} else if (this._varsMove.idDown == (this.idSelf + obj.arr[i].id)) {numSortDown = obj.arr[i].numSort;}}for (var i = 0; i < obj.arr.length; i++) {if (this._varsMove.idOver == (this.idSelf + obj.arr[i].id)) {obj.arr[i].numSort = numSortDown;} else if (this._varsMove.idDown == (this.idSelf + obj.arr[i].id)) {obj.arr[i].numSort = numSortOver;}}this.vars.varsDetail = obj.arr.sortBy(function(v, i) {return v.numSort;});},_staticMove : {numWrapLayoutWidth : 48, numWrapLayoutHeight : 48, numLayoutWidth : 36, numLayoutHeight : 36,numBoxWidth : 30, numBoxHeight : 30, numBoxHeightTool : 40, numBoxLeftWidth : 3,numLayoutTopHeight : 8, numLayoutBottomHeight : 6, numLayoutLeftWidth : 6, numNaviLeft : 15, numNaviTop : 5}});var Code_Lib_Listener = Class.create({vars : null,initialize : function(){this.vars = [];},set : function(obj){var wrapper;if(!obj.flagType15) obj.flagType15 = 0;if(obj.flagType15) {wrapper = obj.insCurrent[obj.strFunc].bind(obj.insCurrent, obj.vars);Event.observe(obj.ele, obj.event, wrapper);} else {if(obj.bindAsEvent) {if(obj.vars) {wrapper = obj.insCurrent[obj.strFunc].bindAsEventListener(obj.insCurrent, obj.vars);} else {wrapper = obj.insCurrent[obj.strFunc].bindAsEventListener(obj.insCurrent);}obj.ele.observe(obj.event, wrapper);} else {if(obj.vars) {wrapper = obj.insCurrent[obj.strFunc].bind(obj.insCurrent, obj.vars);} else {wrapper = obj.insCurrent[obj.strFunc].bind(obj.insCurrent);}obj.ele.observe(obj.event, wrapper);}}var data = {flagType15 : obj.flagType15,insCurrent : obj.insCurrent,strFunc    : obj.strFunc,ele        : obj.ele,event      : obj.event,wrapper    : wrapper};this.vars.push(data);},stop : function(){this._stopChild({arr : this.vars});this.reset();},_stopChild : function(obj){for (var i = 0; i < obj.arr.length; i++) {if(obj.arr[i].flagType15) {Event.stopObserving(obj.arr[i].ele, obj.arr[i].event, obj.arr[i].wrapper);} else {obj.arr[i].ele.stopObserving(obj.arr[i].event, obj.arr[i].wrapper);}}},reset : function(){this.vars = [];}});var Code_Lib_Lock = Class.create({varsLock : null, vars : null,setLock : function(obj){this.vars = obj;this.varsLock = '';var ele = $(document.createElement('div'));this.varsLock = 'lock' + (new Date()).getTime();ele.id = this.varsLock;ele.addClassName('codeLibLock');if(obj.flagType == 'wait') {ele.addClassName('codeLibLockOpacityZero');ele.addClassName('codeLibLockCursorWait');} else if(obj.flagType == 'window') {ele.addClassName('codeLibLockBg');}$(obj.idInsert).insert(ele);this.styleLock();},styleLock : function(){$(this.varsLock).setStyle({zIndex : (this.vars.numZIndex)? this.vars.numZIndex : 100000});},hideLock : function(){if(this.varsLock) {$(this.varsLock).hide();}},showLock : function(){if(this.varsLock) {$(this.varsLock).show();}},removeLock : function(){if(this.varsLock) {$(this.varsLock).remove();this.varsLock = null;}}});var Code_Lib_LockTemp = Class.create({insListener : null,_iniListener : function(){this.insListener = new Code_Lib_Listener();},vars : null, eleLock : null,iniLoad : function(obj){this._iniListener();this.vars = obj;this._setLock();this._setLockListener();},_setLock : function(obj){var eleLock = $(document.createElement('div'));eleLock.id = this.vars.idSelf;eleLock.addClassName('codeLibLockView');if (this.vars.eleInsert) this.vars.eleInsert.insert(eleLock);else $(this.vars.idInsert).insert(eleLock);this.eleLock = eleLock;this._styleLock();},_setLockListener : function(){this.insListener.set({ bindAsEvent : 1, insCurrent : this, event : 'mousedown',strFunc : '_mousedownLock', ele : this.eleLock, vars : ''});},_styleLock : function(){this.eleLock.setStyle({zIndex : this.vars.numZIndex});},hideLock : function(){if(this.eleLock) {this.eleLock.hide();}},showLock : function(){if(this.eleLock) {this.eleLock.show();this._styleLock();}},_mousedownLock : function(evt, obj) {if(obj) evt.stop();else obj = evt;if(this.eleLock) {if(this.vars.flagHideUse) {this.eleLock.hide();} else {this.eleLock.remove();this.eleLock = null;}}this.vars.insCurrent[this.vars.strFunc]();}});var Code_Lib_Popup = Class.create(Code_Lib_ExtLib,{varsLoad : {"varsStatus":{"flagAppearUse":1,"flagNow":"logout"},"reload":{"varsWindow":{"id":"window","strTitle":"Information","strClass":"codeLibPopupImgConnect","flagLockUse":1,"flagLockNow":"fixed","flagCakeUse":0,"flagRemoveUse":0,"flagCoverUse":0,"flagCoverNow":0,"flagHideUse":0,"flagHideNow":1,"flagFoldUse":0,"flagFoldNow":0,"flagMoveUse":0,"flagZIndexUse":1,"flagResizeUse":0,"flagResizeIni":"all","flagResizeNow":"all","flagSkeletonUse":0,"flagBootUse":0,"flagSwitchUse":0,"numWidthTitle":0,"numLeft":0,"numTop":0,"numWidth":250,"numHeight":60,"numWidthMin":250,"numHeightMin":60,"numZIndex":10000000},"varsForm":{"varsStatus":{"flagBtnBottomUse":0},"varsBtn":[],"varsDetail":[{"flagMustUse":0,"id":"comment","strTitle":"","strExplain":"","value":1,"flagErrorNow":0,"arrayError":[],"flagContentUse":0,"flagCommentUse":1,"strCommentTitle":"\u81ea\u52d5\u30da\u30fc\u30b8\u66f4\u65b0\u59cb\u52d5","strComment":"\u30c7\u30fc\u30bf\u3092\u66f4\u65b0\u3059\u308b\u305f\u3081\u30da\u30fc\u30b8\u3092\u66f4\u65b0\u3057\u307e\u3059...<br>\u3057\u3070\u3089\u304f\u304a\u5f85\u3061\u304f\u3060\u3055\u3044\u3002","flagTag":"","inputType":"","maxlength":0,"unitWidth":"","numWidth":0,"unitHeight":"","numHeight":0,"arrayOption":[]}]}},"version":{"varsWindow":{"id":"window","strTitle":"Information","strClass":"codeLibPopupImgConnect","flagLockUse":1,"flagLockNow":"fixed","flagCakeUse":0,"flagRemoveUse":0,"flagCoverUse":0,"flagCoverNow":0,"flagHideUse":0,"flagHideNow":1,"flagFoldUse":0,"flagFoldNow":0,"flagMoveUse":0,"flagZIndexUse":1,"flagResizeUse":0,"flagResizeIni":"all","flagResizeNow":"all","flagSkeletonUse":0,"flagBootUse":0,"flagSwitchUse":0,"numWidthTitle":0,"numLeft":0,"numTop":0,"numWidth":250,"numHeight":60,"numWidthMin":250,"numHeightMin":60,"numZIndex":10000000},"varsForm":{"varsStatus":{"flagBtnBottomUse":0},"varsBtn":[],"varsDetail":[{"flagMustUse":0,"id":"comment","strTitle":"","strExplain":"","value":1,"flagErrorNow":0,"arrayError":[],"flagContentUse":0,"flagCommentUse":1,"strCommentTitle":"\u30d0\u30fc\u30b8\u30e7\u30f3\u66f4\u65b0\u4f5c\u696d\u958b\u59cb","strComment":"\u30da\u30fc\u30b8\u3092\u66f4\u65b0\u3057\u307e\u3059...<br>\u3057\u3070\u3089\u304f\u304a\u5f85\u3061\u304f\u3060\u3055\u3044\u3002","flagTag":"","inputType":"","maxlength":0,"unitWidth":"","numWidth":0,"unitHeight":"","numHeight":0,"arrayOption":[]}]}},"logout":{"varsWindow":{"id":"window","strTitle":"Information","strClass":"codeLibPopupImgConnect","flagLockUse":1,"flagLockNow":"fixed","flagCakeUse":0,"flagRemoveUse":0,"flagCoverUse":0,"flagCoverNow":0,"flagHideUse":0,"flagHideNow":1,"flagFoldUse":0,"flagFoldNow":0,"flagMoveUse":0,"flagZIndexUse":1,"flagResizeUse":0,"flagResizeIni":"all","flagResizeNow":"all","flagSkeletonUse":0,"flagBootUse":0,"flagSwitchUse":0,"numWidthTitle":0,"numLeft":0,"numTop":0,"numWidth":200,"numHeight":60,"numWidthMin":200,"numHeightMin":60,"numZIndex":10000000},"varsForm":{"varsStatus":{"flagBtnBottomUse":0},"varsBtn":[],"varsDetail":[{"flagMustUse":0,"id":"comment","strTitle":"","strExplain":"","value":1,"flagErrorNow":0,"arrayError":[],"flagContentUse":0,"flagCommentUse":1,"strCommentTitle":"\u30ed\u30b0\u30a2\u30a6\u30c8\u59cb\u52d5","strComment":"\u30ed\u30b0\u30a2\u30a6\u30c8\u51e6\u7406\u4e2d...<br>\u3057\u3070\u3089\u304f\u304a\u5f85\u3061\u304f\u3060\u3055\u3044\u3002","flagTag":"","inputType":"","maxlength":0,"unitWidth":"","numWidth":0,"unitHeight":"","numHeight":0,"arrayOption":[]}]}},"autoLogout":{"varsWindow":{"id":"window","strTitle":"Information","strClass":"codeLibPopupImgConnect","flagLockUse":1,"flagLockNow":"fixed","flagCakeUse":0,"flagRemoveUse":0,"flagCoverUse":0,"flagCoverNow":0,"flagHideUse":0,"flagHideNow":1,"flagFoldUse":0,"flagFoldNow":0,"flagMoveUse":0,"flagZIndexUse":1,"flagResizeUse":0,"flagResizeIni":"all","flagResizeNow":"all","flagSkeletonUse":0,"flagBootUse":0,"flagSwitchUse":0,"numWidthTitle":0,"numLeft":0,"numTop":0,"numWidth":200,"numHeight":60,"numWidthMin":200,"numHeightMin":60,"numZIndex":10000000},"varsForm":{"varsStatus":{"flagBtnBottomUse":0},"templateComment":"<%replace%>\u5206\u307b\u3069\u64cd\u4f5c\u304c\u306a\u304b\u3063\u305f\u305f\u3081\u3001<br>\u5f37\u5236\u7684\u306b\u30ed\u30b0\u30a2\u30a6\u30c8\u81f4\u3057\u307e\u3059\u3002","varsBtn":[],"varsDetail":[{"flagMustUse":0,"id":"comment","strTitle":"","strExplain":"","value":1,"flagErrorNow":0,"arrayError":[],"flagContentUse":0,"flagCommentUse":1,"strCommentTitle":"\u81ea\u52d5\u30ed\u30b0\u30a2\u30a6\u30c8\u59cb\u52d5","strComment":"","flagTag":"","inputType":"","maxlength":0,"unitWidth":"","numWidth":0,"unitHeight":"","numHeight":0,"arrayOption":[]}]}},"news":{"varsWindow":{"id":"News","strTitle":"Information","strClass":"codeLibPopupImgConnect","flagLockUse":1,"flagLockNow":"temp","flagCakeUse":0,"flagRemoveUse":1,"flagCoverUse":0,"flagCoverNow":0,"flagHideUse":0,"flagHideNow":1,"flagFoldUse":0,"flagFoldNow":0,"flagMoveUse":0,"flagZIndexUse":1,"flagResizeUse":0,"flagResizeIni":"all","flagResizeNow":"all","flagSkeletonUse":0,"flagBootUse":0,"flagSwitchUse":0,"numWidthTitle":0,"numLeft":0,"numTop":0,"numWidth":200,"numHeight":45,"numWidthMin":200,"numHeightMin":45,"numZIndex":10000000},"varsForm":{"varsStatus":{"flagBtnBottomUse":0},"templateComment":"<%replace%>\u4ef6\u65b0\u7740\u30ed\u30b0\u3092\u78ba\u8a8d\u3057\u307e\u3057\u305f\u3002","varsBtn":[],"varsDetail":[{"flagMustUse":0,"id":"Comment","strTitle":"","strExplain":"","value":1,"flagErrorNow":0,"arrayError":[],"flagContentUse":0,"flagCommentUse":1,"strCommentTitle":"\u65b0\u7740\u30ed\u30b0\u78ba\u8a8d","strComment":"","flagTag":"select","inputType":"","maxlength":0,"unitWidth":"%","numWidth":40,"unitHeight":"","numHeight":0,"arrayOption":[]}]}}},initialize : function(obj){this._extAllot(obj);this._iniVars(obj);this._iniWrap();this._iniWindow();this._iniForm();this._iniAppear();},_iniVars : function(obj){this._extVars(obj);this.varsLoad.varsStatus.flagNow = obj.vars.flag;if(this.varsLoad.varsStatus.flagNow == 'news') {var varsTmpl = (Object.toJSON(this.varsLoad.news.varsForm.templateComment)).evalJSON();varsTmpl = varsTmpl.replace(/<%replace%>/, obj.vars.numNews);this.varsLoad.varsStatus.flagAppearUse = 1;this.varsLoad.news.varsForm.varsDetail[0].strComment = varsTmpl;} else if (this.varsLoad.varsStatus.flagNow == 'logout') {this.varsLoad.varsStatus.flagAppearUse = 0;} else if (this.varsLoad.varsStatus.flagNow == 'autoLogout') {var varsTmpl = (Object.toJSON(this.varsLoad.autoLogout.varsForm.templateComment)).evalJSON();varsTmpl = varsTmpl.replace(/<%replace%>/, this.insRoot.vars.varsSystem.status.numAutoLogout);this.varsLoad.varsStatus.flagAppearUse = 0;this.varsLoad.autoLogout.varsForm.varsDetail[0].strComment = varsTmpl;} else if (this.varsLoad.varsStatus.flagNow == 'reload') {this.varsLoad.varsStatus.flagAppearUse = 0;}},eleWrap : null,_iniWrap : function(){this._setWrap();},_setWrap : function(){var ele = $(document.createElement('div'));var str = 'codeLibPopupWrap' + this.varsLoad.varsStatus.flagNow.capitalize();ele.addClassName(str);ele.id = this.idSelf;this.eleInsert.insert(ele);this.eleWrap = ele;this.eleWrap.setStyle({'zIndex' : this.insRoot.vars.varsSystem.num.zIndex + 1});if(this.varsLoad.varsStatus.flagAppearUse) this.eleWrap.hide();},_iniForm : function(){this._setForm();},insForm : null,_setForm : function(){this.insForm = new Code_Lib_Form({eleInsertBtnLeft  : null,eleInsertBtnRight : null,eleInsert         : $(this.insWindow.idSelf).down('.codeLibWindowBodyTopMiddleWrap', 0),insRoot           : this.insRoot,insCurrent        : this.insSelf,idSelf            : this.idSelf + 'Form',allot             : function(){},vars              : this.varsLoad[this.varsLoad.varsStatus.flagNow].varsForm});},removeWrap : function(){if(this._varsStay) this._resetStay();this.eleWrap.remove();this.allot({insCurrent : this.insCurrent,from       : 'removeWrap'});},insWindow : null,_iniWindow : function(){this._setWindow();},_setWindow : function(){this.insWindow = new Code_Lib_Window();this.insWindow.iniLoad({eleInsert  : this.eleWrap,insRoot    : this.insRoot,insCurrent : this,idSelf     : this.idSelf + this.varsLoad[this.varsLoad.varsStatus.flagNow].varsWindow.id,allot      : this._getWindowAllot(),vars       : this.varsLoad[this.varsLoad.varsStatus.flagNow].varsWindow});$(this.insWindow.idWindow).down('.codeLibWindowBodyTopMiddleWrap', 0).setStyle({overFlow : 'auto'});},_getWindowAllot : function(){var allot = function(obj){var insCurrent = obj.insCurrent;if(obj.from == '_mousedownRemove') insCurrent.insCurrent._fadeWindow(obj);};return allot;},_fadeWindow : function(obj){new Effect.Fade($(obj.insCurrent.idWindow), {afterFinish : function(){obj.insCurrent.removeWrap();obj.insCurrent.insCurrent.removeWrap();}});},_iniAppear : function(){if(!this.varsLoad.varsStatus.flagAppearUse) return;this._setAppear();},_setAppear : function(){var insCurrent = this.insSelf;new Effect.Appear(this.eleWrap, {afterFinish:function(){insCurrent._iniStay();}});},_iniStay : function(){this._setStay();},_varsStay : null,_staticStay : { numLimit : 5000 },_setStay : function(){this._varsStay = {interval : setInterval(this._runStay.bind(this), 1000),stamp    : (new Date()).getTime()};},_runStay : function(){var run = (new Date()).getTime() - this._varsStay.stamp;if(run >= this._staticStay.limit) {this._resetStay();this._fadeWindow({insCurrent : this.insWindow});}},_resetStay : function(){clearInterval(this._varsStay.interval);this._varsStay = null;}});var Code_Lib_PopupTimer = Class.create(Code_Lib_ExtLib, {initialize : function(obj){this._extAllot(obj);this._iniVars(obj);this._iniTimer();},_iniVars : function(obj){this._extVars(obj);},_iniTimer : function(){this._setTimer();},_varsTimer : null,_setTimer : function(){var set = this.insRoot.vars.varsSystem.status.numAutoPopup * 1000;this._varsTimer = {interval : setInterval(this._runTimer.bind(this), set),stamp    : (new Date()).getTime(),flagUse  : 1,loop     : 1};},_runTimer : function(){if(this.insRoot.vars.varsSystem.status.numAutoPopup == 0 || !this._varsTimer.flagUse) return;var cut = this.insRoot.vars.varsSystem.status;var num = cut.numAutoPopup * 60 * 1000 * this._varsTimer.loop;var run = (new Date()).getTime() - this._varsTimer.stamp;if(run > num) {this._varsTimer.loop++;this._sendTimer();}},_sendTimer : function(){var arrayKey = ['class', 'module', 'ext', 'child', 'func', 'db'];var arrayValue = ['Core', 'Base', 'Popup', '', 'Send', 'slave'];this.insRoot.insRequest.set({flagLock        : 1,idInsert        : this.insRoot.vars.varsSystem.id.root,numZiIndex      : this.insRoot.vars.varsSystem.num.zIndex,insCurrent      : this.insSelf,flagEscape      : 1,path            : this.insRoot.vars.varsSystem.path.post,querysKey       : arrayKey,querysValue     : arrayValue,functionSuccess : '_sendTimerSuccess',functionFail    : '_sendTimerFail'});},_sendTimerSuccess : function(obj){if (obj.response.responseText.isJSON()) {var json = obj.response.responseText.evalJSON();var numNews = parseFloat(json.numNews);if (json.flag == 1 && numNews) {this.insRoot.iniPopup({flag : 'news', numNews : numNews});}} else {this._varsTimer.flagUse = 0;alert(this.insRoot.vars.varsSystem.str.errorRequest);}},_sendTimerFail : function(obj){this._varsTimer.flagUse = 0;alert(this.insRoot.vars.varsSystem.str.errorRequest);}});var Code_Lib_Request = Class.create({varsLoad : {"varsWhole":{"num":{"limit":0},"str":{"limit":"\u30ea\u30af\u30a8\u30b9\u30c8\u6570\u304c\u8a31\u5bb9\u7bc4\u56f2\u3092\u8d85\u3048\u305f\u305f\u3081\u3001\u30a4\u30d9\u30f3\u30c8\u3092\u5f37\u5236\u505c\u6b62\u81f4\u3057\u307e\u3057\u305f\u3002\u3053\u306e\u30dd\u30c3\u30d7\u30a2\u30c3\u30d7\u5f8c\u3001\u5f37\u5236\u505c\u6b62\u306e\u5f71\u97ff\u3067\u610f\u56f3\u3057\u305f\u901a\u308a\u30b7\u30b9\u30c6\u30e0\u304c\u52d5\u304b\u306a\u3044\u5834\u5408\u304c\u3042\u308a\u307e\u3059\u3002\u305d\u306e\u969b\u306f\u3001\u30da\u30fc\u30b8\u3092\u66f4\u65b0\u3057\u3066\u304f\u3060\u3055\u3044\u3002"}}},insRoot: null,initialize : function(obj){this.insRoot = obj.insRoot;},_vars : [],set : function(obj){if (this.insRoot.removePrint) {this.insRoot.removePrint();}if (this._vars.length == this.varsLoad.varsWhole.num.limit && this.varsLoad.varsWhole.num.limit) {alert(this.varsLoad.varsWhole.str.limit);return;}var insLock = new Code_Lib_Lock();obj.cache = (new Date()).getTime();obj.insSelf = this;var data = {cache   : obj.cache,data    : obj,insLock : insLock};this._vars.push(data);if (obj.flagLock) {insLock.setLock({action    : 'wait',idInsert  : this.insRoot.vars.varsSystem.id.root,numZIndex : this.insRoot.vars.varsSystem.num.zIndex,});}if (data.data.eleLoadStatus) {data.data.eleLoadStatus.addClassName('codeLibRequestImgLoading');}var objQuery = {};objQuery.cache = obj.cache;objQuery.token = (this.insRoot.vars.varsSystem.token)? this.insRoot.vars.varsSystem.token : '';var insEscape = new Code_Lib_Escape();for (var i=0; i<obj.querysKey.length; i++) {var str = insEscape.get({flagType : 'strUnique',data     : obj.querysValue[i]});objQuery[obj.querysKey[i]] = insEscape.get({flagType : 'toTag',data     : str});}var query = $H(objQuery).toQueryString();new Ajax.Request(obj.path,{method     : 'post',parameters : query,evalJS     : false,onSuccess  : function(response) {obj.insCurrent[obj.functionSuccess]({response : response});obj.insSelf._setSuccess({cache : obj.cache});},onFailure:function(response) {obj.insCurrent[obj.functionFail]({response : response});obj.insSelf._setFail({cache : obj.cache});}});},_setSuccess : function(obj){this._vars = this._removeVars({arr : this._vars, cache : obj.cache});},_setFail : function(obj){this._vars = this._removeVars({arr : this._vars, cache : obj.cache});},_removeVars : function(obj){var num = 0;for (var i = 0; i < obj.arr.length; i++) {if (obj.arr[i].cache == obj.cache) {num = i;}}if (obj.arr[num].data.eleLoadStatus) {obj.arr[num].data.eleLoadStatus.removeClassName('codeLibRequestImgLoading');}if (obj.arr[num].data.flagLock) {obj.arr[num].insLock.removeLock();}obj.arr = obj.arr.slice(0, num).concat(obj.arr.slice((num + 1), obj.arr.length));return (!obj.arr)? [] : obj.arr;}});var Code_Lib_Schedule = Class.create(Code_Lib_ExtLib,{iniLoad : function(obj){this._extAllot(obj);this._iniVars(obj);this._iniListener();this._iniWrap();this._iniFormat();this._iniVar();this._iniNavi();this._iniChild();},iniReload : function(){this.insChild.stopListener();this.stopListener();$(this.idSelf).remove();this._iniWrap();this._iniFormat();this._iniVar();this._iniNavi();this._iniChild();},_iniVars : function(obj){var insLoad = new Code_Lib_CalenderVars();this.varsLoad = insLoad.iniLoad();this._extVars(obj);this.insTimeZone = this.insRoot.insTimeZone;this._setVars();this._iniCake();this._iniLogBtnVars();this.allot({insCurrent : this.insCurrent,from       : '_iniVars'});},_setVars : function(){var cut = this.vars.varsStatus;var objTime = this.insTimeZone.adjustTime({stamp : new Date().getTime()});if (cut.flagMainUse && cut.flagMainAutoUse) cut.stampMain = objTime.stamp;if (cut.flagMaxUse && cut.flagMaxAutoUse) cut.stampMax = objTime.stamp;if (cut.flagMinUse && cut.flagMinAutoUse) cut.stampMin = objTime.stamp;if (cut.flagMainUse && cut.flagMaxUse && cut.stampMax < cut.stampMain) cut.stampMain = cut.stampMax;if (cut.flagMainUse && cut.flagMinUse && cut.stampMin > cut.stampMain) cut.stampMain = cut.stampMin;},updateVars : function(){this.allot({insCurrent : this.insCurrent,from : 'updateVars',vars : {vars       : this.vars,varsSelect : this.varsLogBtn}});},_iniCake : function(){this._getCake();},_getCakeVarsUpdate : function(obj){var str = 'stampMain';this.vars.varsStatus.stampMain = obj.data[str];str = 'flagNow';this.vars.varsStatus.flagNow = obj.data[str];},_setCakeVars : function(){var str;str = 'stampMain';this._varsCake[str] = this.vars.varsStatus.stampMain;str = 'flagNow';this._varsCake[str] = this.vars.varsStatus.flagNow;},_iniWrap : function(){this._extWrap();this.eleWrap.style.width = this._getWrapWidth() + 'px';this.eleWrap.style.height = (this._getWrapHeight() - 1) + 'px';},_iniListener : function(){this._extListener();},_iniFormat : function(){this._extFormat();},_iniVar : function(obj){this._setVarTime();this._setVar();},_varsVarTime : null,_setVarTime : function() {this._varsVarTime = {now  : this.insTimeZone.adjustTime({stamp : new Date().getTime()}),main : this._setVarTime_({str : 'main'}),max  : this._setVarTime_({str : 'max'}),min  : this._setVarTime_({str : 'min'})};},_setVarTime_ : function(obj){var objTime = null;var str = obj.str.capitalize();if (this.vars.varsStatus[ 'flag' + str + 'Use' ]) {objTime = this.insTimeZone.adjustDate({stamp : this.vars.varsStatus[ 'stamp' + str ]});}return objTime;},varsVar : null,_setVar : function(){var cut = this._varsVarTime.main;var numYear = cut.numYear;var numMonth = cut.numMonth;var numDate = cut.numDate;var numDay = cut.numDay;var numWeek = this._getNumWeek({numYear : numYear, numMonth : numMonth, numDate : numDate});this.varsVar = {navi : {numWeek        : numWeek,strMain        : this._getVarMain({numWeek : numWeek }),flagDoublePrev : this._getVarDoublePrevFlag(),flagDoubleNext : this._getVarDoubleNextFlag(),flagSinglePrev : this._getVarSinglePrevFlag(),flagSingleNext : this._getVarSingleNextFlag()},month : {prev                : [],main                : [],next                : [],strPrevEnd          : '',strMainStart        : '',strMainEnd          : '',strNextStart        : '',flagDateNow         : 0,mainTime            : [],flagActive          : [],flagHoliday         : [],flagHolidayTransfer : [],flagSunday          : []},week : {flagDateNow         : 0,flagHourNow         : 0,dateTime            : [],hourTime0           : [],hourTime1           : [],hourTime2           : [],hourTime3           : [],hourTime4           : [],hourTime5           : [],hourTime6           : [],flagActive          : [],flagHoliday         : [],flagHolidayTransfer : [],flagSunday          : []}};this._getVarDateMonth();this._getVarDateWeek();},_getNumWeek : function(obj){var numYear = obj.numYear;var numMonth = obj.numMonth;var numDate = obj.numDate;var objTime = this.insTimeZone.adjustTime({stamp : new Date(numYear, numMonth + 1 , 1 - 1).getTime()});var mainSpan = objTime.numDate;var num = 1;for (var j = 1; j <= mainSpan; j++) {var objTime = this.insTimeZone.adjustTime({stamp : new Date(numYear, numMonth, j).getTime()});if (j == numDate) return num;if (objTime.numDay == 6) num++;}},_getVarDoubleNextFlag : function(obj){var cut = this._varsVarTime.main;var numYear = cut.numYear;var numMonth = cut.numMonth;var objTime;if (this.vars.varsStatus.flagNow == 'month') {numYear++;objTime = this.insTimeZone.adjustTime({stamp : new Date(numYear, numMonth, 1).getTime()});} else if (this.vars.varsStatus.flagNow == 'week') {numMonth++;if (numMonth == 12) {numMonth = 0;numYear++;}objTime = this.insTimeZone.adjustTime({stamp : new Date(numYear, numMonth, 1).getTime()});}if (this.vars.varsStatus.flagMaxUse) {if (this._varsVarTime.max.stamp >= objTime.stamp) return 1;else return 0;}else return 1;},_getVarDoublePrevFlag : function(){var cut = this._varsVarTime.main;var numYear = cut.numYear;var numMonth = cut.numMonth;var objTime;if (this.vars.varsStatus.flagNow == 'month') {numYear--;objTime = this.insTimeZone.adjustTime({stamp : new Date(numYear, numMonth, 1).getTime()});} else if (this.vars.varsStatus.flagNow == 'week') {numMonth--;if (numMonth == -1) {numMonth = 11;numYear--;}objTime = this.insTimeZone.adjustTime({stamp : new Date(numYear, numMonth, 1).getTime()});}if (this.vars.varsStatus.flagMinUse) {if (this._varsVarTime.min.stamp <= objTime.stamp) return 1;else return 0;}else return 1;},_getVarSingleNextFlag : function(){var cut = this._varsVarTime.main;var numYear = cut.numYear;var numMonth = cut.numMonth;var stamp = cut.stamp;var objTime;if (this.vars.varsStatus.flagNow == 'month') {numMonth++;if (numMonth == 12) {numMonth = 0;numYear++;}objTime = this.insTimeZone.adjustTime({stamp : new Date(numYear, numMonth, 1).getTime()});} else if (this.vars.varsStatus.flagNow == 'week') {stamp += 7 * 86400 * 1000;objTime = this.insTimeZone.adjustTime({stamp : stamp});}if (this.vars.varsStatus.flagMaxUse) {if (this._varsVarTime.max.stamp >= objTime.stamp) return 1;else return 0;}else return 1;},_getVarSinglePrevFlag : function(){var cut = this._varsVarTime.main;var numYear = cut.numYear;var numMonth = cut.numMonth;var stamp = cut.stamp;var objTime;if (this.vars.varsStatus.flagNow == 'month') {numMonth--;if (numMonth == -1) {numMonth = 11;numYear--;}objTime = this.insTimeZone.adjustTime({stamp : new Date(numYear, numMonth, 1).getTime()});} else if (this.vars.varsStatus.flagNow == 'week') {stamp -= 7*86400*1000;objTime = this.insTimeZone.adjustTime({stamp : stamp});}if (this.vars.varsStatus.flagMinUse) {if (this._varsVarTime.min.stamp <= objTime.stamp) return 1;else return 0;}else return 1;},_getVarDateMonth : function(){var cut = this._varsVarTime.main;var numYear = cut.numYear;var numMonth = cut.numMonth;var numDate = cut.numDate;var objTime = this.insTimeZone.adjustTime({stamp : new Date(numYear, numMonth, 1).getTime()});var prevSpan = objTime.numDay;objTime = this.insTimeZone.adjustTime({stamp : new Date(numYear, numMonth, 1 - 1).getTime()});var prevStart = objTime.numDate - prevSpan;this.varsVar.month.strPrevEnd = objTime.numYear + '/' + (objTime.numMonth + 1) + '/' + objTime.numDate;objTime = this.insTimeZone.adjustTime({stamp : new Date(numYear, numMonth + 1 , 1 - 1).getTime()});var mainSpan = objTime.numDate;this.varsVar.month.strMainStart = objTime.numYear + '/' + (objTime.numMonth + 1) + '/' + 1;this.varsVar.month.strMainEnd = objTime.numYear + '/' + (objTime.numMonth + 1) + '/' + mainSpan;objTime = this.insTimeZone.adjustTime({stamp : new Date(numYear, numMonth + 1 , 1).getTime()});this.varsVar.month.strNextStart = objTime.numYear + '/' + (objTime.numMonth + 1) + '/' + 1;var i = 0;var p = 0;var num = prevStart;for (i = 1; i <= prevSpan; i++) {num++;if (num >= 7) {p++;}this.varsVar.month.prev.push(num);}var insCheck = new Code_Lib_CheckTime();var str = this.insRoot.vars.varsSystem.status.strHoliday;var arrayHoliday = [];if (this.varsLoad.varsHoliday[str]) {arrayHoliday = this.varsLoad.varsHoliday[str].varsDetail;}var cut = this._varsVarTime.now;for (var j = 1; j <= mainSpan; j++, i++) {objTime = this.insTimeZone.adjustTime({stamp : new Date(numYear, numMonth, j).getTime()});var objStartWrap = this.insTimeZone.adjustTime({stamp : new Date(numYear, numMonth, j).getTime()});var objEndWrap = this.insTimeZone.adjustTime({stamp : new Date(numYear, numMonth, j + 1).getTime()});var flagHoliday = 0;for (k = 0; k < arrayHoliday.length; k++) {var str = arrayHoliday[k].flagType;var strFunc = 'get' + str.capitalize();if (str == 'term') {arrayHoliday[k][str].stampWrapStart = objStartWrap.stamp;arrayHoliday[k][str].stampWrapEnd = objEndWrap.stamp;flagHoliday = insCheck[strFunc](arrayHoliday[k][str]);} else if (str == 'loop') {arrayHoliday[k][str].objStartWrap = objStartWrap;arrayHoliday[k][str].objEndWrap = objEndWrap;arrayHoliday[k][str].insTimeZone = this.insTimeZone;}flagHoliday = insCheck[strFunc](arrayHoliday[k][str]);if (flagHoliday) break;}if (flagHoliday) this.varsVar.month.flagHoliday.push(arrayHoliday[k]);else this.varsVar.month.flagHoliday.push(0);this.varsVar.month.flagHolidayTransfer.push(0);if (objTime.numDay == 0) this.varsVar.month.flagSunday.push(1);else this.varsVar.month.flagSunday.push(0);if (objTime.numYear == cut.numYear && objTime.numMonth == cut.numMonth && objTime.numDate == cut.numDate) {this.varsVar.month.flagDateNow = j;}this.varsVar.month.main.push(j);if (this.vars.varsStatus.flagMaxUse && this.vars.varsStatus.flagMinUse) {if (objTime.stamp <= this._varsVarTime.max.stamp &&objTime.stamp >= this._varsVarTime.min.stamp) {this.varsVar.month.flagActive.push(1);} else {this.varsVar.month.flagActive.push(0);}} else if (this.vars.varsStatus.flagMaxUse) {if (objTime.stamp <= this._varsVarTime.max.stamp) this.varsVar.month.flagActive.push(1);else this.varsVar.month.flagActive.push(0);} else if (this.vars.varsStatus.flagMinUse) {if (objTime.stamp >= this._varsVarTime.min.stamp) this.varsVar.month.flagActive.push(1);else this.varsVar.month.flagActive.push(0);} else {this.varsVar.month.flagActive.push(1);}this.varsVar.month.mainTime.push(objTime);}if (this.insRoot.vars.varsSystem.status.strHoliday == 'jp') {for (var j = 0; j <= mainSpan + 1; j++) {if (this.varsVar.month.flagHoliday[j] && this.varsVar.month.flagSunday[j]) {var num = this._checkVarHolidayTransfer({allNum     : mainSpan,arrHoliday : this.varsVar.month.flagHoliday,arrSunday  : this.varsVar.month.flagSunday,num        : j + 1});this.varsVar.month.flagHolidayTransfer[num] = 1;}}}for (var j = 1; i <= 42; j++, i++) {this.varsVar.month.next.push(j);}},_getVarDateWeek : function() {var omit = this._varsVarTime.main;var numYear = omit.numYear;var numMonth = omit.numMonth;var numDate = omit.numDate;var objTime = this.insTimeZone.adjustTime({stamp : new Date(numYear, numMonth, numDate).getTime()});var stamp = objTime.stamp;var insCheck = new Code_Lib_CheckTime();var str = this.insRoot.vars.varsSystem.status.strHoliday;var arrayHoliday = [];if (this.varsLoad.varsHoliday[str]) {arrayHoliday = this.varsLoad.varsHoliday[str].varsDetail;}var cut = this._varsVarTime.now;for (var i = 0; i < 7; i++) {for (var j = 0; j < 24; j++) {objTime = this.insTimeZone.adjustDate({stamp : stamp});var str = 'hourTime' + i;this.varsVar.week[str].push(objTime);if (objTime.numYear == cut.numYear&& objTime.numMonth == cut.numMonth&& objTime.numDate == cut.numDate&& objTime.hour == cut.hour) {this.varsVar.week.flagHourNow = cut.hour;}stamp += 3600 * 1000;}var objStartWrap = objTime;var objEndWrap = this.insTimeZone.adjustDate({stamp : stamp});var flagHoliday = 0;for (k = 0; k < arrayHoliday.length; k++) {var str = arrayHoliday[k].flagType;var strFunc = 'get' + str.capitalize();if (str == 'term') {arrayHoliday[k][str].stampWrapStart = objStartWrap.stamp;arrayHoliday[k][str].stampWrapEnd = objEndWrap.stamp;flagHoliday = insCheck[strFunc](arrayHoliday[k][str]);} else if (str == 'loop') {arrayHoliday[k][str].objStartWrap = objStartWrap;arrayHoliday[k][str].objEndWrap = objEndWrap;arrayHoliday[k][str].insTimeZone = this.insTimeZone;}flagHoliday = insCheck[strFunc](arrayHoliday[k][str]);if (flagHoliday) break;}if (flagHoliday) this.varsVar.week.flagHoliday.push(arrayHoliday[k]);else this.varsVar.week.flagHoliday.push(0);this.varsVar.week.flagHolidayTransfer.push(0);if (objTime.numDay == 0) this.varsVar.week.flagSunday.push(1);else this.varsVar.week.flagSunday.push(0);if (objTime.numYear == cut.numYear&& objTime.numMonth == cut.numMonth&& objTime.numDate == cut.numDate) {this.varsVar.week.flagDateNow =  cut.numDate;}if (this.vars.varsStatus.flagMaxUse && this.vars.varsStatus.flagMinUse) {if (objTime.stamp <= this._varsVarTime.max.stamp&& objTime.stamp >= this._varsVarTime.min.stamp) {this.varsVar.week.flagActive.push(1);}else this.varsVar.week.flagActive.push(0);} else if (this.vars.varsStatus.flagMaxUse) {if (objTime.stamp <= this._varsVarTime.max.stamp) this.varsVar.week.flagActive.push(1);else this.varsVar.week.flagActive.push(0);} else if (this.vars.varsStatus.flagMinUse) {if (objTime.stamp >= this._varsVarTime.min.stamp) this.varsVar.week.flagActive.push(1);else this.varsVar.week.flagActive.push(0);} else {this.varsVar.week.flagActive.push(1);}this.varsVar.week.dateTime.push(objTime);}if (this.insRoot.vars.varsSystem.status.strHoliday == 'jp') {for (var j = 0; j < 7; j++) {if (this.varsVar.week.flagHoliday[j] && this.varsVar.week.flagSunday[j]) {var num = this._checkVarHolidayTransfer({allNum     : 7,arrHoliday : this.varsVar.week.flagHoliday,arrSunday  : this.varsVar.week.flagSunday,num        : j + 1});this.varsVar.week.flagHolidayTransfer[num] = 1;}}if (this.varsVar.week.flagSunday[0]) return;objTime = this.insTimeZone.adjustTime({stamp : new Date(numYear, numMonth, numDate).getTime()});var stamp = objTime.stamp;for (var j = 1; j <= 31; j++) {var objStartWrap = this.insTimeZone.adjustDate({stamp : stamp - 86400 * 1000 * j});var objEndWrap = this.insTimeZone.adjustDate({stamp : stamp - 86400 * 1000 * j + 86400 * 1000 });var flagHoliday = 0;for (k = 0; k < arrayHoliday.length; k++) {var str = arrayHoliday[k].flagType;var strFunc = 'get' + str.capitalize();if (str == 'term') {arrayHoliday[k][str].stampWrapStart = objStartWrap.stamp;arrayHoliday[k][str].stampWrapEnd = objEndWrap.stamp;flagHoliday = insCheck[strFunc](arrayHoliday[k][str]);} else if (str == 'loop') {arrayHoliday[k][str].objStartWrap = objStartWrap;arrayHoliday[k][str].objEndWrap = objEndWrap;arrayHoliday[k][str].insTimeZone = this.insTimeZone;}flagHoliday = insCheck[strFunc](arrayHoliday[k][str]);if (flagHoliday) break;}var flagSunday = 0;if (objStartWrap.numDay == 0) flagSunday = 1;if (!flagSunday && flagHoliday) continue;else if (flagSunday && flagHoliday) this.varsVar.week.flagHolidayTransfer[0] = 1;return;}}},_checkVarHolidayTransfer : function(obj){for (var i = obj.num; i < obj.allNum; i++) {if (obj.arrHoliday[i] || obj.arrSunday[i]) continue;return i;}},_getVarMain : function(obj){var cut = this._varsVarTime.main;var numYear = cut.numYear;var numMonth = cut.numMonth;var numDay = cut.numDay;var numWeek = obj.numWeek;numMonth++;if (numMonth < 10) numMonth = '0' + numMonth;var str = numYear + '/' + numMonth;var numDate = cut.numDate;if (numDate < 10) numDate = '0' + numDate;str = str + '/' + numDate + ' (' + this.varsLoad.varsWhole.week[numDay] + ') '+ numWeek + this.varsLoad.varsWhole.str.week;return str;},_staticLog : {numWidthSide : 5, numLeft : 5, numRight : 5, numResize : 5,numResize : 5, numMargin : 1, numBlock : 16, numIdle : 5},iniLog : function(obj){var data = this._setLog(obj);obj.eleInsert.insert(data);this._setLogListener(obj);},_setLogListener : function(obj) {this._setLogBtnListener(obj);this._setLogMoveListener(obj);this._setLogResizeListener(obj);},_iniLogBtnVars : function(){this.varsLogBtn = [];},varsLogBtn : [],_setLogBtnListener : function(obj){if (!obj.flagBtnUse) return;var ele = $(obj.id);var eleText = $(obj.id).down('.codeLibScheduleTemplateMiddleStrTitle', 0);this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'mousedown',strFunc : '_mousedownLogBtn', ele : ele, vars : { vars : obj.vars, mainTime : obj.mainTime}});this.insListener.set({bindAsEvent : 0, insCurrent : this, event : 'mouseover',strFunc : '_mouseoverLogBtn', ele : eleText, vars : { ele : eleText}});this.insListener.set({bindAsEvent : 0, insCurrent : this, event : 'mouseout',strFunc : '_mouseoutLogBtn', ele : eleText, vars : { ele : eleText}});this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'dblclick',strFunc : '_dblclickLogBtn', ele : ele, vars : {ele : ele, vars : obj.vars,mainTime : obj.mainTime}});},removeBtnSelect : function(){this.varsLogBtn = [];},_dblclickLogBtn : function(evt, obj){if (obj) evt.stop();else obj = evt;this.allot({insCurrent : this.insCurrent,from       : '_dblclickLogBtn',vars       : {detailLog : obj.vars,mainTime  : obj.mainTime}});},_mousedownLogBtn : function(evt, obj){if (obj) evt.stop();else obj = evt;this.varsLogBtn = [];this.varsLogBtn.push(obj.vars);this.insChild.iniBtnSelect();this.allot({insCurrent : this.insCurrent,from       : '_mousedownLogBtn',vars       : {detailLog : obj.vars,mainTime  : obj.mainTime}});},_mouseoverLogBtn : function(obj){obj.ele.addClassName('codeLibBaseUnderline');},_mouseoutLogBtn : function(obj){obj.ele.removeClassName('codeLibBaseUnderline');},_setLogResizeListener : function(obj){if (!obj.flagResizeUse) return;if (obj.flagResizeLeftUse) this.insListener.set({bindAsEvent : 1, insCurrent : this,event : 'mousedown',strFunc : '_mousedownLogResize',ele : $(obj.id).down('.codeLibScheduleTemplateMiddleResize', 0),vars : { vars : obj, flagType : 'left' }});if (obj.flagResizeRightUse) this.insListener.set({bindAsEvent : 1, insCurrent : this,event : 'mousedown',strFunc : '_mousedownLogResize',ele : $(obj.id).down('.codeLibScheduleTemplateMiddleResize',1),vars : { vars : obj, flagType : 'right' }});},_mousedownLogResize : function(evt, obj) {if (obj) evt.stop();else obj = evt;this.insChild.mousedownResize(evt, obj);},_setLogMoveListener : function(obj){if (!obj.flagMoveUse) return;var ele = $(obj.id).down('.codeLibScheduleTemplateMiddleMove', 0);this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'mousedown',strFunc : '_mousedownLogMove', ele : ele, vars : obj});},_mousedownLogMove : function(evt, obj) {if (obj) evt.stop();else obj = evt;this.insChild.mousedownMove(evt, obj);},_setLog : function(obj) {obj.strClassBg = 'codeLibBaseBgYellow';obj.numWidthMiddle = obj.numWidth;obj.numHeight = this._staticLog.numBlock;obj.numWidthSide = this._staticLog.numWidthSide;obj.numWidthTop = obj.numWidth - this._staticLog.numMargin * 2;if (!obj.flagRightUse) {obj.numWidthTitle = obj.numWidthMiddle - this._staticLog.numIdle * 2;}else {obj.numWidthTitle = obj.numWidthMiddle - this._staticLog.numIdle;}if (obj.flagLeftUse) {obj.numWidthTitle -= this._staticLog.numLeft + this._staticLog.numIdleLeft;}if (obj.strClass) {obj.numWidthTitle -= this._staticLog.numBlock + this._staticLog.numIdle;}if (obj.flagRightUse) {obj.numWidthTitle -= this._staticLog.numRight + this._staticLog.numIdle + this._staticLog.numIdleLeft;}var tmplstr='<span id="#{id}" class="codeLibScheduleTemplateWrap codeLibBaseCursorPointer" style = "top : #{numTop}px; left : #{numLeft}px; width : #{numWidth}px;" title = "#{strTitle} #{strTime}" >';tmplstr += '<span class="codeLibScheduleTemplateTop #{strClassBg}" style = "width : #{numWidthTop}px;"></span>';tmplstr += '<span class="codeLibScheduleTemplateMiddle #{strClassBg}" style = " width : #{numWidthMiddle}px;">';if (obj.flagLeftUse) {if (obj.flagResizeUse) {if (obj.flagResizeLeftUse) {tmplstr += '<span class="codeLibScheduleTemplateMiddleLeft codeLibScheduleTemplateMiddleResize codeLibBaseCursorE-resize" style = "margin-left : 2px;"></span>';}else {tmplstr += '<span class="codeLibScheduleTemplateMiddleLeft codeLibScheduleTemplateMiddleResize" style = "margin-left : 2px;"></span>';}}else {tmplstr += '<span class="codeLibScheduleTemplateMiddleLeft" style = "margin-left : 2px;"></span>';}}else {if (obj.flagResizeUse) {if (obj.flagResizeLeftUse) {tmplstr += '<span class="codeLibScheduleTemplateMiddleResize codeLibBaseCursorE-resize" style = "width : #{numWidthSide}px; height : #{numHeight}px;"></span>';}else {tmplstr += '<span class="codeLibScheduleTemplateMiddleResize" style = "width : #{numWidthSide}px; height : #{numHeight}px;"></span>';}}}if (obj.strClass) {if (obj.flagMoveUse) {if (!obj.flagLeftUse && obj.flagResizeUse) {if (obj.strClassLoad) { tmplstr += '<span class="codeLibScheduleTemplateMiddleIcon codeLibScheduleTemplateMiddleMove codeLibBaseCursorMove #{strClassLoad}"></span>'; }else { tmplstr += '<span class="codeLibScheduleTemplateMiddleIcon codeLibScheduleTemplateMiddleMove codeLibBaseCursorMove #{strClass}"></span>'; }}else {if (obj.strClassLoad) { tmplstr += '<span class="codeLibScheduleTemplateMiddleIcon codeLibBaseMarginLeftFive codeLibScheduleTemplateMiddleMove codeLibBaseCursorMove #{strClassLoad}"></span>'; }else { tmplstr += '<span class="codeLibScheduleTemplateMiddleIcon codeLibBaseMarginLeftFive codeLibScheduleTemplateMiddleMove codeLibBaseCursorMove #{strClass}"></span>'; }}}else {if (!obj.flagLeftUse && obj.flagResizeUse) {if (obj.strClassLoad) { tmplstr += '<span class="codeLibScheduleTemplateMiddleIcon #{strClassLoad}"></span>'; }else { tmplstr += '<span class="codeLibScheduleTemplateMiddleIcon #{strClass}"></span>'; }}else {if (obj.strClassLoad) { tmplstr += '<span class="codeLibScheduleTemplateMiddleIcon codeLibBaseMarginLeftFive #{strClassLoad}"></span>'; }else { tmplstr += '<span class="codeLibScheduleTemplateMiddleIcon codeLibBaseMarginLeftFive #{strClass}"></span>'; }}}}if (obj.flagBoldNow) {if (!obj.flagLeftUse && obj.flagResizeUse && !obj.strClass) { tmplstr += '<span class="codeLibScheduleTemplateMiddleTitle" style = "width : #{numWidthTitle}px;"><span class="codeLibScheduleTemplateMiddleStrTitle codeLibBaseFontBold #{strClassFont}">#{strTitle}</span></span>'; }else { tmplstr += '<span class="codeLibScheduleTemplateMiddleTitle codeLibBaseMarginLeftFive" style = "width : #{numWidthTitle}px;"><span class="codeLibScheduleTemplateMiddleStrTitle codeLibBaseFontBold #{strClassFont}">#{strTitle}</span></span>'; }}else {if (!obj.flagLeftUse && obj.flagResizeUse && !obj.strClass) { tmplstr += '<span class="codeLibScheduleTemplateMiddleTitle codeLibBaseCursorPointer" style = "width : #{numWidthTitle}px;"><span class="codeLibScheduleTemplateMiddleStrTitle #{strClassFont}">#{strTitle}</span></span>'; }else { tmplstr += '<span class="codeLibScheduleTemplateMiddleTitle codeLibBaseMarginLeftFive codeLibBaseCursorPointer" style = "width : #{numWidthTitle}px;"><span class="codeLibScheduleTemplateMiddleStrTitle #{strClassFont}">#{strTitle}</span></span>'; }}if (obj.flagRightUse) {if (obj.flagResizeUse) {if (obj.flagResizeRightUse) {tmplstr += '<span class="codeLibScheduleTemplateMiddleRight codeLibScheduleTemplateMiddleResize codeLibBaseCursorE-resize" style = "margin-left : 5px;"></span>';}else {tmplstr += '<span class="codeLibScheduleTemplateMiddleRight codeLibScheduleTemplateMiddleResize" style = "margin-left : 5px;"></span>';}}else {tmplstr += '<span class="codeLibScheduleTemplateMiddleRight" style = "margin-left : 5px;"></span>';}}else {if (obj.flagResizeUse) {if (obj.flagResizeRightUse) {tmplstr += '<span class="codeLibScheduleTemplateMiddleResize codeLibBaseCursorE-resize" style = "width : #{numWidthSide}px; height : #{numHeight}px;"></span>';}else {tmplstr += '<span class="codeLibScheduleTemplateMiddleResize" style = "width : #{numWidthSide}px; height : #{numHeight}px;"></span>';}}}tmplstr += '</span>';tmplstr += '<span class="codeLibScheduleTemplateBottom #{strClassBg}" style = "width : #{numWidthTop}px;"></span>';tmplstr += '</span>';var data = tmplstr.interpolate(obj);return data;},iniBtnBottom : function(){this._extBtnBottom();},iniPage : function(){this._extPage();},_iniChild : function(){this._setChild();},insChild : null,_setChild : function(){var cut = this.vars.varsStatus.flagNow;var ele = this.insFormat.eleTemplate.header.down('.codeLibTemplateListFormatHeaderGraduationWrap', 0);var vars = {eleInsertBtnLeft    : this.eleInsertBtnLeft,eleInsertBtnRight   : this.eleInsertBtnRight,eleInsert           : this.insFormat.eleTemplate.body,eleInsertGraduation : ele,insRoot             : this.insRoot,insCurrent          : this.insSelf,idSelf              : this.idSelf + cut,vars                : this.vars[cut]};if (cut == 'week') {this.insChild = new Code_Lib_ScheduleWeek(vars);} else {this.insChild = new Code_Lib_ScheduleMonth(vars);}},insNavi : null,_iniNavi : function(){this._setNaviWrap();this._setNaviPrevSingle();this._setNaviNextSingle();this._setNaviSwitch();this._setNaviPrevDouble();this._setNaviNextDouble();this._setNaviMain();this._setNaviWrapWidth();},eleWrapNavi : null,_setNaviWrap : function(){var ele = $(document.createElement('div'));ele.addClassName('codeLibScheduleNaviWrap');ele.unselectable = 'on';ele.addClassName('unselect');this.insFormat.eleTemplate.header.down('.codeLibTemplateListFormatHeaderNaviWrap', 0).insert(ele);this.eleWrapNavi = ele;this.eleWrapNavi.style.height = this._getNaviHeight() + 'px';},_setNaviWrapWidth : function(){this.eleWrapNavi.style.width = this._getNaviWidth() + 'px';},_getNaviWidth : function(){var width = 0;width += $(this.idSelf + 'NaviSwitch').offsetWidth + this._staticNavi.numMargin;width += $(this.idSelf + 'NaviMain').offsetWidth + this._staticNavi.numMargin;if (this.varsVar.navi.flagSinglePrev) {width += $(this.idSelf + 'NaviPrevSingle').offsetWidth + this._staticNavi.numMargin;}if (this.varsVar.navi.flagDoublePrev) {width += $(this.idSelf + 'NaviPrevDouble').offsetWidth + this._staticNavi.numMargin;}if (this.varsVar.navi.flagSingleNext) {width += $(this.idSelf + 'NaviNextSingle').offsetWidth + this._staticNavi.numMargin;}if (this.varsVar.navi.flagDoubleNext) {width += $(this.idSelf + 'NaviNextDouble').offsetWidth + this._staticNavi.numMargin;}return width;},_getNaviHeight : function(){var ele = this.insFormat.eleTemplate.header.down('.codeLibTemplateListFormatHeaderNaviWrap', 0);var array = ele.style.height.split('px');var data = parseFloat(array[0]);return data;},_setNaviSwitch : function(){var strTitle = '';var cut = this.vars.varsStatus.flagNow;var omit = this.varsLoad.varsWhole.str;if (cut == 'month') {strTitle = omit.week + omit.unit;var insBtn = new Code_Lib_Btn();insBtn.iniBtn({eleInsert  : this.eleWrapNavi,id         : this.idSelf + 'NaviSwitch',strFunc    : '_mousedownNaviSwitch',strTitle   : strTitle,numWidth   : this._staticNavi.numMargin*2 + this._staticNavi.numImg,strClass   : 'codeLibScheduleImgSingleBottomWhite',insCurrent : this.insSelf,vars   : ''});this._setListener({ins : insBtn});$(this.idSelf + 'NaviSwitch').down('.codeLibBtnMiddle', 0).setStyle({paddingTop    : this._staticNavi.numPadding + 'px',paddingBottom : this._staticNavi.numPadding + 'px'});} else {strTitle = omit.month + omit.unit;var insBtn = new Code_Lib_Btn();insBtn.iniBtn({eleInsert  : this.eleWrapNavi,id         : this.idSelf + 'NaviSwitch',strFunc    : '_mousedownNaviSwitch',strTitle   : strTitle,numWidth   : this._staticNavi.numMargin*2 + this._staticNavi.numImg,strClass   : 'codeLibScheduleImgSingleTopWhite',insCurrent : this.insSelf,vars   : ''});this._setListener({ins : insBtn});$(this.idSelf + 'NaviSwitch').down('.codeLibBtnMiddle', 0).setStyle({paddingTop    : this._staticNavi.numPadding + 'px',paddingBottom : this._staticNavi.numPadding + 'px'});}$(this.idSelf + 'NaviSwitch').setStyle({marginLeft : this._staticNavi.numMargin + 'px',});},_mousedownNaviSwitch : function(){if (this.vars.varsStatus.flagNow == 'month') this.vars.varsStatus.flagNow = 'week';else this.vars.varsStatus.flagNow = 'month';this.setCake();this.iniReload();},_setNaviPrevDouble : function(){var strTitle = '';var cut = this.vars.varsStatus.flagNow;var omit = this.varsLoad.varsWhole.str;if (this.varsVar.navi.flagDoublePrev) {if (cut == 'month') strTitle = omit.prevYear;else if (cut == 'week') strTitle = omit.prevMonth;var insBtn = new Code_Lib_Btn();insBtn.iniBtn({eleInsert  : this.eleWrapNavi,id         : this.idSelf + 'NaviPrevDouble',strFunc    : '_mousedownNaviPrevDouble',strTitle   : strTitle,numWidth   : this._staticNavi.numMargin*2 + this._staticNavi.numImg,strClass   : 'codeLibScheduleImgDoubleLeftWhite',insCurrent : this.insSelf,vars   : ''});this._setListener({ins : insBtn});$(this.idSelf + 'NaviPrevDouble').down('.codeLibBtnMiddle', 0).setStyle({paddingTop    : this._staticNavi.numPadding + 'px',paddingBottom : this._staticNavi.numPadding + 'px'});} else {var insTemplate = new Code_Lib_Template();var ele = insTemplate.get({flagType : 'circleBox',id       : this.idSelf + 'NaviPrevDouble',bgColor  : this._staticNavi.bgColor,strTitle : strTitle,numWidth : this._staticNavi.numMargin*2 + this._staticNavi.numImg,strClass : 'codeLibScheduleImgDoubleLeftWhite'});this.eleWrapNavi.insert(ele);$(this.idSelf + 'NaviPrevDouble').down('.codeLibTemplateCircleBoxMiddle', 0).setStyle({paddingTop    : this._staticNavi.numPadding + 'px',paddingBottom : this._staticNavi.numPadding + 'px'});}$(this.idSelf + 'NaviPrevDouble').setStyle({marginLeft : this._staticNavi.numMargin + 'px',});},_staticNavi : {numPadding : 1, numMargin : 5, numImg : 16, bgColor : '#eee'},_mousedownNaviPrevDouble : function(){var cut = this.vars.varsStatus.flagNow;if (cut == 'month') {var numYear = this._varsVarTime.main.numYear;var numMonth = this._varsVarTime.main.numMonth;numYear--;var objTime = this.insTimeZone.adjustTime({stamp : new Date(numYear, numMonth, 1).getTime()});this.vars.varsStatus.stampMain = objTime.stamp;} else if (cut == 'week') {var numYear = this._varsVarTime.main.numYear;var numMonth = this._varsVarTime.main.numMonth;numMonth--;if (numMonth == -1) {numYear--;numMonth = 11;}var objTime = this.insTimeZone.adjustTime({stamp : new Date(numYear, numMonth, 1).getTime()});this.vars.varsStatus.stampMain = objTime.stamp;}this.setCake();this.iniReload();},_setNaviPrevSingle : function(){var strTitle = '';var cut = this.vars.varsStatus.flagNow;var omit = this.varsLoad.varsWhole.str;if (this.varsVar.navi.flagSinglePrev) {if (cut == 'month') strTitle = omit.prevMonth;else if (cut == 'week') strTitle = omit.prevWeek;var insBtn = new Code_Lib_Btn();insBtn.iniBtn({eleInsert  : this.eleWrapNavi,id         : this.idSelf + 'NaviPrevSingle',strFunc    : '_mousedownNaviPrevSingle',strTitle   : strTitle,numWidth   : this._staticNavi.numMargin * 2 + this._staticNavi.numImg * 2,strClass   : 'codeLibScheduleImgSingleLeftWhite',insCurrent : this.insSelf,vars   : ''});this._setListener({ins : insBtn});$(this.idSelf + 'NaviPrevSingle').down('.codeLibBtnMiddle', 0).setStyle({paddingTop    : this._staticNavi.numPadding + 'px',paddingBottom : this._staticNavi.numPadding + 'px'});} else {var insTemplate = new Code_Lib_Template();var ele = insTemplate.get({flagType : 'circleBox',id       : this.idSelf + 'NaviPrevSingle',bgColor  : this._staticNavi.bgColor,strTitle : strTitle,numWidth : this._staticNavi.numMargin * 2 + this._staticNavi.numImg,strClass : 'codeLibScheduleImgDoubleLeftWhite'});this.eleWrapNavi.insert(ele);$(this.idSelf + 'NaviPrevSingle').down('.codeLibTemplateCircleBoxMiddle', 0).setStyle({paddingTop    : this._staticNavi.numPadding + 'px',paddingBottom : this._staticNavi.numPadding + 'px'});}$(this.idSelf + 'NaviPrevSingle').setStyle({marginLeft : this._staticNavi.numMargin + 'px',});},_mousedownNaviPrevSingle : function(){var cut = this.vars.varsStatus.flagNow;if (cut == 'month') {var numYear = this._varsVarTime.main.numYear;var numMonth = this._varsVarTime.main.numMonth;numMonth--;if (numMonth == -1) {numYear--;numMonth = 11;}var objTime = this.insTimeZone.adjustTime({stamp : new Date(numYear, numMonth, 1).getTime()});this.vars.varsStatus.stampMain = objTime.stamp;} else if (cut == 'week') {this.vars.varsStatus.stampMain = this._varsVarTime.main.stamp - 7*86400*1000;}this.setCake();this.iniReload();},_setNaviNextSingle : function(){var strTitle = '';var cut = this.vars.varsStatus.flagNow;var omit = this.varsLoad.varsWhole.str;if (this.varsVar.navi.flagSingleNext) {if (cut == 'month') strTitle = omit.nextMonth;else if (cut == 'week') strTitle = omit.nextWeek;var insBtn = new Code_Lib_Btn();insBtn.iniBtn({eleInsert  : this.eleWrapNavi,id         : this.idSelf + 'NaviNextSingle',strFunc    : '_mousedownNaviNextSingle',strTitle   : strTitle,numWidth   : this._staticNavi.numMargin*2 + this._staticNavi.numImg*2,strClass   : 'codeLibScheduleImgSingleRightWhite',insCurrent : this.insSelf,vars   : ''});this._setListener({ins : insBtn});$(this.idSelf + 'NaviNextSingle').down('.codeLibBtnMiddle', 0).setStyle({paddingTop    : this._staticNavi.numPadding + 'px',paddingBottom : this._staticNavi.numPadding + 'px'});} else {var insTemplate = new Code_Lib_Template();var ele = insTemplate.get({flagType : 'circleBox',id       : this.idSelf + 'NaviNextSingle',bgColor  : this._staticNavi.bgColor,strTitle : strTitle,numWidth : this._staticNavi.numMargin*2 + this._staticNavi.numImg,strClass : 'codeLibScheduleImgSingleRightWhite'});this.eleWrapNavi.insert(ele);$(this.idSelf + 'NaviNextSingle').down('.codeLibTemplateCircleBoxMiddle', 0).setStyle({paddingTop    : this._staticNavi.numPadding + 'px',paddingBottom : this._staticNavi.numPadding + 'px'});}$(this.idSelf + 'NaviNextSingle').setStyle({marginLeft : this._staticNavi.numMargin + 'px',});},_mousedownNaviNextSingle : function(){var cut = this.vars.varsStatus.flagNow;if (cut == 'month') {var numYear = this._varsVarTime.main.numYear;var numMonth = this._varsVarTime.main.numMonth;numMonth++;if (numMonth == 12) {numYear++;numMonth = 0;}var objTime = this.insTimeZone.adjustTime({stamp : new Date(numYear, numMonth, 1).getTime()});this.vars.varsStatus.stampMain = objTime.stamp;} else if (cut == 'week') {this.vars.varsStatus.stampMain = this._varsVarTime.main.stamp + 7*86400*1000;}this.setCake();this.iniReload();},_setNaviNextDouble : function(){var strTitle = '';var cut = this.vars.varsStatus.flagNow;var omit = this.varsLoad.varsWhole.str;if (this.varsVar.navi.flagDoubleNext) {if (cut == 'month') strTitle = omit.nextYear;else if (cut == 'week') strTitle = omit.nextMonth;var insBtn = new Code_Lib_Btn();insBtn.iniBtn({eleInsert  : this.eleWrapNavi,id         : this.idSelf + 'NaviNextDouble',strFunc    : '_mousedownNaviNextDouble',strTitle   : strTitle,numWidth   : this._staticNavi.numMargin*2 + this._staticNavi.numImg,strClass   : 'codeLibScheduleImgDoubleRightWhite',insCurrent : this.insSelf,vars   : ''});this._setListener({ins : insBtn});$(this.idSelf + 'NaviNextDouble').down('.codeLibBtnMiddle', 0).setStyle({paddingTop    : this._staticNavi.numPadding + 'px',paddingBottom : this._staticNavi.numPadding + 'px'});} else {var insTemplate = new Code_Lib_Template();var ele = insTemplate.get({flagType : 'circleBox',id       : this.idSelf + 'NaviNextDouble',bgColor  : this._staticNavi.bgColor,strTitle : strTitle,numWidth : this._staticNavi.numMargin*2 + this._staticNavi.numImg,strClass : 'codeLibScheduleImgDoubleRightWhite',});this.eleWrapNavi.insert(ele);$(this.idSelf + 'NaviNextDouble').down('.codeLibTemplateCircleBoxMiddle', 0).setStyle({paddingTop    : this._staticNavi.numPadding + 'px',paddingBottom : this._staticNavi.numPadding + 'px'});}$(this.idSelf + 'NaviNextDouble').setStyle({marginLeft : this._staticNavi.numMargin + 'px',});},_mousedownNaviNextDouble : function(){var cut = this.vars.varsStatus.flagNow;if (cut == 'month') {var numYear = this._varsVarTime.main.numYear;var numMonth = this._varsVarTime.main.numMonth;numYear++;var objTime = this.insTimeZone.adjustTime({stamp : new Date(numYear, numMonth, 1).getTime()});this.vars.varsStatus.stampMain = objTime.stamp;} else if (cut == 'week') {var numYear = this._varsVarTime.main.numYear;var numMonth = this._varsVarTime.main.numMonth;numMonth++;if (numMonth == 12) {numYear++;numMonth = 0;}var objTime = this.insTimeZone.adjustTime({stamp : new Date(numYear, numMonth, 1).getTime()});this.vars.varsStatus.stampMain = objTime.stamp;}this.setCake();this.iniReload();},_setNaviMain : function(){var insBtn = new Code_Lib_Btn();insBtn.iniBtn({eleInsert  : this.eleWrapNavi,id         : this.idSelf + 'NaviMain',strFunc    : '_mousedownNaviMain',strTitle   : this.varsVar.navi.strMain,insCurrent : this.insSelf,vars   : ''});this._setListener({ins : insBtn});$(this.idSelf + 'NaviMain').setStyle({marginLeft : this._staticNavi.numMargin + 'px',});},_mousedownNaviMain : function(){this.vars.varsStatus.stampMain = this._varsVarTime.now.stamp;this.setCake();this.iniReload();},_setNaviMainListener : function(obj){this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'mousedown',strFunc : '_mousedownNaviMain', ele : obj.ele, vars : ''});this.insListener.set({bindAsEvent : 0, insCurrent : this, event : 'mouseover',strFunc : '_mouseoverNaviMain', ele : obj.ele, vars : { vars : obj }});this.insListener.set({bindAsEvent : 0, insCurrent : this, event : 'mouseout',strFunc : '_mouseoutNaviMain', ele : obj.ele, vars : { vars : obj }});},_mouseoverNaviMain : function(obj){$(obj.vars.ele).addClassName('codeLibScheduleBoxMainOver');},_mouseoutNaviMain : function(obj){$(obj.vars.ele).removeClassName('codeLibScheduleBoxMainOver');}});var Code_Lib_ScheduleMonth = Class.create(Code_Lib_Schedule,{initialize : function(obj){this._iniVars(obj);this._iniListener();this._iniGraduation();this._iniBody();this.insCurrent.iniBtnBottom();this.insCurrent.iniPage();this._iniLog();this._iniFold();this.iniBtnSelect();},eleInsertGraduation : null,_iniVars : function(obj){this._extVars(obj);this.eleInsertGraduation = obj.eleInsertGraduation;this._iniCake();},updateVars : function(){this.insCurrent.updateVars();},_iniFold : function(){if (!this.insCurrent.vars.varsStatus.flagFoldUse) return;this._setFoldListener({arr : this.vars.varsFold});this._setFold({arr : this.vars.varsFold});},_setFoldListener : function(obj){this.insListener.set({ bindAsEvent : 1, insCurrent : this, event : 'mousedown',strFunc : '_mousedownFoldAll',ele : $(this.idSelf + 'GraduationWrap').down('.codeLibScheduleGraduationFold', 0),vars : '' });for (var i = 0; i < obj.arr.length; i++) {this.insListener.set({ bindAsEvent : 1, insCurrent : this, event : 'mousedown',strFunc : '_mousedownFold',ele : $(this.idSelf + 'BodyLineWrap' + i).down('.codeLibScheduleMonthBodyLineFold', 0),vars : { vars : {id : i }}});}},_setFold : function(obj){for (var i = 0; i < obj.arr.length; i++) {this._styleFoldUpdate({flagEffect : 0,arr        : obj.arr,vars       : {id : i}});}},_mousedownFold : function(evt,obj) {if (obj) evt.stop();else obj = evt;this._varFoldUpdate({arr : this.vars.varsFold, vars : obj.vars});this._styleFoldUpdate({flagEffect : 1,arr        : this.vars.varsFold,vars       : obj.vars});this.setCake();},_varFoldUpdate : function(obj){var num = obj.vars.id;if (obj.arr[num].flagFoldNow) obj.arr[num].flagFoldNow = 0;else obj.arr[num].flagFoldNow = 1;},_styleFoldUpdate : function(obj){var num = obj.vars.id;var eleBox = $(this.idSelf + 'BodyLineWrap' + num ).down('.codeLibScheduleMonthBodyLineFold', 0);eleBox.removeClassName('codeLibScheduleFoldClose');eleBox.removeClassName('codeLibScheduleFoldOpen');var eleMiddle = $(this.idSelf + 'BodyLineWrap' + num).down('.codeLibScheduleMonthBodyLineMiddle', 0);if (obj.arr[num].flagFoldNow) {eleBox.addClassName('codeLibScheduleFoldOpen');if (obj.flagEffect) {new Effect.BlindDown(eleMiddle,{duration : 0.5});} else {eleMiddle.show();}} else {eleBox.addClassName('codeLibScheduleFoldClose');if (obj.flagEffect) {new Effect.BlindUp(eleMiddle,{duration : 0.5});} else {eleMiddle.hide();}}},_mousedownFoldAll : function(evt) {evt.stop();if (this.insCurrent.vars.varsStatus.flagFoldNow) {this.insCurrent.vars.varsStatus.flagFoldNow = 0;this._varFoldUpdateAll({arr         : this.vars.varsFold,flagFoldNow : this.insCurrent.vars.varsStatus.flagFoldNow});} else {this.insCurrent.vars.varsStatus.flagFoldNow = 1;this._varFoldUpdateAll({arr         : this.vars.varsFold,flagFoldNow : this.insCurrent.vars.varsStatus.flagFoldNow});}this._styleFoldUpdateAll({arr         : this.vars.varsFold,flagEffect  : 1,flagFoldNow : this.insCurrent.vars.varsStatus.flagFoldNow});this.setCake();},_varFoldUpdateAll : function(obj){for (var i = 0; i < obj.arr.length; i++) {obj.arr[i].flagFoldNow = obj.flagFoldNow;}},_styleFoldUpdateAll : function(obj){var eleGraduation = $(this.idSelf + 'GraduationWrap').down('.codeLibScheduleGraduationFold', 0);eleGraduation.removeClassName('codeLibScheduleFoldClose');eleGraduation.removeClassName('codeLibScheduleFoldOpen');if (obj.flagFoldNow) eleGraduation.addClassName('codeLibScheduleFoldOpen');else eleGraduation.addClassName('codeLibScheduleFoldClose');for (var i = 0; i < obj.arr.length; i++) {var eleBox = $(this.idSelf + 'BodyLineWrap' + i).down('.codeLibScheduleMonthBodyLineFold', 0);var eleMiddle = $(this.idSelf + 'BodyLineWrap' + i).down('.codeLibScheduleMonthBodyLineMiddle', 0);eleBox.removeClassName('codeLibScheduleFoldClose');eleBox.removeClassName('codeLibScheduleFoldOpen');if (obj.arr[i].flagFoldNow) {eleBox.addClassName('codeLibScheduleFoldOpen');eleMiddle.show();} else {eleBox.addClassName('codeLibScheduleFoldClose');eleMiddle.hide();}}},_iniLog : function(){this._varLog({arrDetail : (Object.toJSON(this.insCurrent.vars.varsDetail)).evalJSON(),arrLine   : this.vars.varsFold,arrMain   : this.insCurrent.varsVar.month.mainTime});this._checkLogLineHeight({arrDetail : this.insCurrent.vars.varsDetail,arrLine   : this.vars.varsFold,arrMain   : this.insCurrent.varsVar.month.mainTime});this._updateLogLineStyle({arr : this.vars.varsFold});this._setLogMainBottom({arrLine : this.vars.varsFold,arrMain : this.insCurrent.varsVar.month.mainTime});this._setLogLineWrap({arr : this.vars.varsFold});this._setLog({arr : this.vars.varsFold});},_styleLogUpdate : function(obj){for (var i = 0; i < obj.arr.length; i++) {$(this.idSelf + 'BodyLineLogWrap' + i).hide();$(this.idSelf + 'BodyLineWrap' + i).down('.codeLibScheduleMonthBodyLineMiddle', 0).show();$(this.idSelf + 'BodyLineWrap' + i).down('.codeLibScheduleMonthBodyLineMiddle', 0).setStyle({height : this.varsBody.boxMiddleHeight + 'px'});$(this.idSelf + 'BodyLineWrap' + i).down('.codeLibScheduleMonthBodyLineMiddle', 0).setStyle({height : this.varsBody.boxMiddleHeight + 'px'});var ele = $(this.idSelf + 'BodyLineWrap' + i).down('.codeLibScheduleMonthBodyLineMiddle', 0);var array = ele.childNodes;for (var j = 0; j < array.length; j++) {array[j].setStyle({height : this.varsBody.boxMiddleHeight + 'px'});}}for (var j = 0; j < obj.arrMain.length; j++) {if ($(this.idSelf + 'BodyLineBoxBottom' + obj.arrMain[j] + 'BottomBtn')) {$(this.idSelf + 'BodyLineBoxBottom' + obj.arrMain[j] + 'BottomBtn').hide();}}},_styleLogDateUpdate : function(obj){var cut = obj.vars.vars.varsScheduleDetail;var insCheck = new Code_Lib_CheckTime();if (cut.flagType == 'stamp') {for (var j = 0; j < obj.arrLevel.length; j++) {var ele = $(this.idSelf + 'BodyLineBox' + obj.arrLevel[j] + obj.vars.mainTime.numDate);ele.addClassName(obj.vars.strClassBg);}return;} else if (cut.flagType == 'Term') {var objTargetStart = this.insRoot.insTimeZone.adjustDate({ stamp : cut.term.stampStart * 1000 });var objTargetEnd = this.insRoot.insTimeZone.adjustDate({ stamp : cut.term.stampEnd * 1000 });for (var j = objTargetStart.date - 1; j < obj.arrMain.length; j++) {var flag = insCheck.getTerm({stampStart     : objTargetStart.stamp,stampEnd       : objTargetEnd.stamp,stampWrapStart : obj.arrMain[j].stamp,stampWrapEnd   : obj.arrMain[j].stamp + 86400 * 1000});if (!flag) continue;for (var k = 0; k < obj.arrLevel.length; k++) {var ele = $(this.idSelf + 'BodyLineBox' + obj.arrLevel[k] + obj.arrMain[j].date);ele.addClassName(obj.vars.strClassBg);ele.removeClassName('codeLibScheduleNow');}}}},_setLogLineWrap : function(obj){for (var i = 0; i < obj.arr.length; i++) {var eleInsert = $(this.idSelf + 'BodyLineWrap' + i).down('.codeLibScheduleMonthBodyLineMiddle', 0);var eleWrap = $(document.createElement('div'));eleWrap.addClassName('codeLibScheduleMonthBodyLineMiddleLogWrap');eleWrap.id = this.idSelf + 'BodyLineLogWrap' + i;eleWrap.setStyle({position : 'relative',height   : eleInsert.offsetHeight + 'px'});eleInsert.insert(eleWrap);}},_setLog : function(obj){for (var i = 0; i < obj.arr.length; i++) {var strLine = 'line' + i;var omit = this._varsBodyMainLine[strLine];if (!omit.length) continue;var eleInsert =$(this.idSelf + 'BodyLineWrap' + i).down('.codeLibScheduleMonthBodyLineMiddleLogWrap', 0);var str = 'line' + i;var array = this._varsLog[str];for (var j = 0; j < array.length; j++) {var id = this.idSelf + 'BodyLineLog' + i + array[j].mainTime.numDate + array[j].vars.id;var flagLeftUse = 0 , flagRightUse = 0, flagResizeUse = 0;if (array[j].flag == 'all') {flagLeftUse = 0 , flagRightUse = 0;} else if (array[j].flag == 'left') {flagLeftUse = 1 , flagRightUse = 0;} else if (array[j].flag == 'right') {flagLeftUse = 0 , flagRightUse = 1;} else if (array[j].flag == 'middle') {flagLeftUse = 1 , flagRightUse = 1;}this.insCurrent.iniLog({mainTime           : array[j].mainTime,vars               : array[j].vars,eleInsert          : eleInsert,id                 : id,numTop             : array[j].numTop,numLeft            : array[j].numLeft,numWidth           : array[j].numWidth,strTime            : array[j].strTime,strTitle           : array[j].vars.strTitle,strClass           : array[j].vars.strClass,strClassLoad       : array[j].vars.strClassLoad,strClassBg         : (this.insCurrent.vars.varsStatus.flagBgUse)?array[j].vars.strClassBg : '',strClassFont       : (this.insCurrent.vars.varsStatus.flagFontUse)?array[j].vars.strClassFont : '',flagBoldNow        : array[j].vars.flagBoldNow,flagBtnUse         : array[j].vars.flagBtnUse,flagLeftUse        : flagLeftUse,flagMoveUse        : (this.insCurrent.vars.varsStatus.flagMoveUse&& array[j].vars.flagMoveUse)? 1 : 0,flagResizeUse      : (this.insCurrent.vars.varsStatus.flagResizeUse&& array[j].vars.varsScheduleDetail.flagResizeUse)? 1 : 0,flagResizeLeftUse  : (array[j].flagResizeLeftUse)? 1 : 0,flagResizeRightUse : (array[j].flagResizeRightUse)? 1 : 0,flagRightUse       : flagRightUse});}}},_checkLogLineHeight : function(obj){for (var i = 0; i < obj.arrLine.length; i++) {var strLine = 'line' + i;var omit = this._varsBodyMainLine[strLine];if (!omit.length) continue;var strLineHeight = 'lineHeight' + i;for (var j = 0; j < omit.length; j++) {var num = this._checkLogLineHeightTop({arr     : obj.arrDetail,numDate : omit[j].numDate});if ( num > this._varsLog[strLineHeight] ) this._varsLog[strLineHeight] = num;}}},_checkLogLineHeightTop : function(obj){for (var i = obj.arr.length - 1; i >= 0; i--) {var strDate = 'd' + obj.numDate + '-'+ i;if (this._varsLog.flagTop[strDate]) {return i;}}return 0;},_varsLog : null,_updateLogLineStyle : function(obj){for (var i = 0; i < obj.arr.length; i++) {var strLineHeight = 'lineHeight' + i;var num = this._varsLog[strLineHeight]+1;var ele = $(this.idSelf + 'BodyLineWrap' + i).down('.codeLibScheduleMonthBodyLineMiddle', 0);var a = ele.offsetHeight;var b = num * this._staticLog.numHeight;if (b > a) {ele.setStyle({height : (num * this._staticLog.numHeight) + 'px'});var array = ele.childNodes;for (var j = 0; j < array.length; j++) {array[j].setStyle({height : (num * this._staticLog.numHeight) + 'px'});}}}},_setLogMainBottom : function(obj){for (var i = 0; i < obj.arrLine.length; i++) {var strLine = 'line' + i;var omit = this._varsBodyMainLine[strLine];if (!omit.length) continue;for (var j = 0; j < omit.length; j++) {var strNum = 'n' + omit[j].numDate;if (this._varsLog.numLogMain[strNum]) {var strLogs = this._varsLog.numLogMain[strNum]+ this.insCurrent.varsLoad.varsWhole.str.item+ this.insCurrent.varsLoad.varsWhole.str.hit;var insBtn = new Code_Lib_Btn();var id = this.idSelf + 'BodyLineBoxBottom' + omit[j].numDate + 'BottomBtn';var ele = $(this.idSelf + 'BodyLineBoxBottom' + omit[j].numDate);insBtn.iniBtnText({eleInsert  : ele,id         : id,strFunc    : '_mousedownLogMainBottom',strTitle   : strLogs,insCurrent : this.insSelf,vars       : omit[j]});$(id).setStyle({width     : (ele.offsetWidth - this._staticLog.numPadding * 2) + 'px',textAlign : 'center'});this._setListener({ins : insBtn});}}}},_mousedownLogMainBottom : function(obj){this.insCurrent.vars.varsStatus.stampMain = obj.vars.vars.stamp;if (this.insCurrent.vars.varsStatus.flagNow == 'month') {this.insCurrent.vars.varsStatus.flagNow = 'week';}else this.insCurrent.vars.varsStatus.flagNow = 'month';this.setCake();this.insCurrent.iniReload();},_staticLog : {numHeight : 21, numStartLeft : 21, numPadding : 5, numSeparate : 1 },_varLog : function(obj){this._varsLog = {flagTop    : {},numLogMain : {},line0 : [], lineHeight0 : 0,line1 : [], lineHeight1 : 0,line2 : [], lineHeight2 : 0,line3 : [], lineHeight3 : 0,line4 : [], lineHeight4 : 0,line5 : [], lineHeight5 : 0};var insDisplay = new Code_Lib_TimeDisplay();var insCheck = new Code_Lib_CheckTime();var numWidth = this._varsGraduation.numWidthGraph;obj.arrDetail = obj.arrDetail.sortBy(function(v, i) {return obj.arrDetail[i].stampRegister;});obj.arrDetail = obj.arrDetail.sortBy(function(v, i) {var cut = obj.arrDetail[i].varsScheduleDetail;if (cut.flagType == 'stamp' || cut.flagType == 'loop') return 0;else if (cut.flagType == 'Term') return -1 * (cut.term.stampEnd - cut.term.stampStart);});for (var i = 0; i < obj.arrDetail.length; i++) {var cut = obj.arrDetail[i].varsScheduleDetail;if (cut.flagType == 'stamp') {var objTarget = this.insRoot.insTimeZone.adjustDate({ stamp : cut.stamp * 1000 });var str = insDisplay.get({flagType : 1,vars     : objTarget});var strTime = str;var numHeight = 0;for (var j = 0; j < obj.arrLine.length; j++) {var strLine = 'line' + j;var omit = this._varsBodyMainLine[strLine];if (!omit.length) continue;var stamp = objTarget.stamp;var stampWrapStart = omit[0].stamp;var stampWrapEnd = omit[omit.length - 1].stamp + 86400 * 1000;var flag = insCheck.getStamp({stamp          : stamp,stampWrapStart : stampWrapStart,stampWrapEnd   : stampWrapEnd});if (!flag) continue;var rowData = {flag     : flag,strTime  : strTime,numLeft  : 0,numTop   : 0,numWidth : numWidth,mainTime : null,vars     : this._getLogVars({arr  : this.insCurrent.vars.varsDetail,vars : obj.arrDetail[i]})};for (var k = 0; k < omit.length; k++) {var stamp = objTarget.stamp;var stampWrapStart = omit[k].stamp;var stampWrapEnd = omit[k].stamp + 86400 * 1000;var flag = insCheck.getStamp({stamp          : objTarget.stamp,stampWrapStart : stampWrapStart,stampWrapEnd   : stampWrapEnd});if (!flag) continue;rowData.mainTime = omit[k];rowData.numWidth = numWidth;rowData.numLeft = omit[k].numDay* (numWidth+ this._staticLog.numSeparate)+ this._staticLog.numStartLeft+ this._staticLog.numSeparate;var numTop = this._checkLogTop({arr     : obj.arrDetail,numDate : omit[k].numDate});rowData.numTop = this._staticLog.numHeight * numTop;var strDate = 'd' + omit[k].numDate + '-' + numTop;this._varsLog.flagTop[strDate] = {id : obj.arrDetail[i].id};var strNum = 'n' + omit[k].numDate;if (this._varsLog.numLogMain[strNum]) this._varsLog.numLogMain[strNum]++;else this._varsLog.numLogMain[strNum] = 1;var str = 'line' + j;this._varsLog[str].push(rowData);break;}}} else if (cut.flagType == 'Term') {var objTargetStart = this.insRoot.insTimeZone.adjustDate({stamp : cut.term.stampStart * 1000});var objTargetEnd = this.insRoot.insTimeZone.adjustDate({stamp : cut.term.stampEnd * 1000});var strStart = insDisplay.get({flagType : 1,vars     : objTargetStart});var strEnd = insDisplay.get({flagType : 1,vars     : objTargetEnd});var strTime = '(' + strStart +' ~ '+ strEnd + ')';var numHeight = 0;for (var j = 0; j < obj.arrLine.length; j++) {var strLine = 'line' + j;var omit = this._varsBodyMainLine[strLine];if (!omit.length) continue;var flagLine = insCheck.getTerm({stampStart     : objTargetStart.stamp,stampEnd       : objTargetEnd.stamp,stampWrapStart : omit[0].stamp,stampWrapEnd   : omit[omit.length - 1].stamp + 86400*1000});if (!flagLine) continue;var rowData = {flag               : flagLine,flagResizeLeftUse  : 0,flagResizeRightUse : 0,strTime            : strTime,numLeft            : 0,numTop             : 0,numWidth           : 0,mainTime           : null,vars               : this._getLogVars({arr  : this.insCurrent.vars.varsDetail,vars : obj.arrDetail[i]})};var numStart = 0, numEnd = 0, flagStart = null, flagEnd = null;for (var k = 0; k < omit.length; k++) {flagStart = insCheck.getTerm({stampStart     : objTargetStart.stamp,stampEnd       : objTargetEnd.stamp,stampWrapStart : omit[k].stamp,stampWrapEnd   : omit[k].stamp + 86400 * 1000});if (!flagStart) continue;numStart = k;break;}for (var k = omit.length - 1; k >= 0; k--) {flagEnd = insCheck.getTerm({stampStart     : objTargetStart.stamp,stampEnd       : objTargetEnd.stamp,stampWrapStart : omit[k].stamp,stampWrapEnd   : omit[k].stamp + 86400 * 1000});if (!flagEnd) continue;numEnd = k;break;}rowData.mainTime = omit[numStart];rowData.numLeft = omit[numStart].numDay* (numWidth + this._staticLog.numSeparate)+ this._staticLog.numStartLeft+ this._staticLog.numSeparate;rowData.numWidth = (numEnd - numStart  + 1)* (numWidth + this._staticLog.numSeparate);if (flagLine == 'left') {rowData.numWidth -= this._staticLog.numSeparate;}var omitMonth = this.insCurrent.varsVar.month.mainTime;var flagMonth = insCheck.getTerm({stampStart     : objTargetStart.stamp,stampEnd       : objTargetEnd.stamp,stampWrapStart : omitMonth[0].stamp,stampWrapEnd   : omitMonth[omitMonth.length - 1].stamp});if ((flagMonth == 'right' || flagMonth == 'all') && flagStart == 'right') {rowData.flagResizeLeftUse = 1;}if ((flagMonth == 'left' || flagMonth == 'all') && flagEnd == 'left') {rowData.flagResizeRightUse = 1;}var flagTop = 0, numTop = 0;for (var k = 0; k < omit.length; k++) {numTop = this._checkLogTopId({arr     : obj.arrDetail,id      : obj.arrDetail[i].id,numDate : omit[k].numDate});if (numTop == 'false') continue;flagTop = 1;break;}if (!flagTop) {numTop = this._checkLogTop({arr     : obj.arrDetail,numDate : omit[numStart].numDate});for (var p = omit[numStart].numDate - 1; p < obj.arrMain.length; p++) {var flag = insCheck.getTerm({stampStart     : objTargetStart.stamp,stampEnd       : objTargetEnd.stamp,stampWrapStart : obj.arrMain[p].stamp,stampWrapEnd   : obj.arrMain[p].stamp + 86400 * 1000});if (!flag) break;var strDate = 'd' + obj.arrMain[p].date + numTop;this._varsLog.flagTop[strDate] = {id : obj.arrDetail[i].id};var strNum = 'n' + obj.arrMain[p].numDate;if (this._varsLog.numLogMain[strNum]) this._varsLog.numLogMain[strNum]++;else this._varsLog.numLogMain[strNum] = 1;}}rowData.numTop = this._staticLog.numHeight * numTop;var str = 'line' + j;this._varsLog[str].push(rowData);}} else if (cut.flagType == 'loop') {for (var j = 0; j < obj.arrLine.length; j++) {var strLine = 'line' + j;var omit = this._varsBodyMainLine[strLine];if (!omit.length) continue;for (var k = 0; k < omit.length; k++) {objEndWrap = this.insRoot.insTimeZone.adjustDate({stamp : omit[k].stamp + 86400 * 1000});cut.loop.objStartWrap = omit[k];cut.loop.objEndWrap = objEndWrap;cut.loop.insTimeZone = this.insRoot.insTimeZone;var flag = insCheck.getLoop(cut.loop);if (!flag) continue;var stampStart = omit[k].stamp+ (cut.loop.start.hour * 60 * 60 + cut.loop.start.min * 60) * 1000;var stampEnd =  omit[k].stamp+ (cut.loop.end.hour * 60 * 60 + cut.loop.end.min * 60) * 1000;var strTime = '';if (stampEnd == omit[k].stamp && stampStart == omit[k].stamp) {strTime = insDisplay.get({flagType : 2,vars : this.insRoot.insTimeZone.adjustDate({ stamp : stampStart })});} else if (stampStart == stampEnd) {strTime = insDisplay.get({flagType : 1,vars : this.insRoot.insTimeZone.adjustDate({ stamp : stampStart })});} else {var strStart = insDisplay.get({flagType : 1,vars : this.insRoot.insTimeZone.adjustDate({ stamp : stampStart })});var strEnd = insDisplay.get({flagType : 1,vars : this.insRoot.insTimeZone.adjustDate({ stamp : stampEnd })});strTime = '(' + strStart + ' ~ ' + strEnd + ')';}var rowData = {flag     : 'all',strTime  : strTime,numLeft  : 0,numTop   : 0,numWidth : 0,mainTime : omit[k],vars : this._getLogVars({arr  : this.insCurrent.vars.varsDetail,vars : obj.arrDetail[i]})};rowData.numWidth = numWidth;rowData.numLeft = omit[k].numDay* (numWidth + this._staticLog.numSeparate)+ this._staticLog.numStartLeft+ this._staticLog.numSeparate;var numTop = this._checkLogTop({arr     : obj.arrDetail,numDate : omit[k].numDate});rowData.numTop = this._staticLog.numHeight * numTop;var strDate = 'd' + omit[k].numDate + '-' + numTop;this._varsLog.flagTop[strDate] = {id : obj.arrDetail[i].id};var strNum = 'n' + omit[k].numDate;if (this._varsLog.numLogMain[strNum]) this._varsLog.numLogMain[strNum]++;else this._varsLog.numLogMain[strNum] = 1;var str = 'line' + j;this._varsLog[str].push(rowData);}}}}},_checkLogTopId : function(obj){for (var i = 0; i < obj.arr.length; i++) {var strDate = 'd' + obj.numDate + '-' + i;if (this._varsLog.flagTop[strDate]) {if (obj.id == this._varsLog.flagTop[strDate].id) {return i;}}}return 'false';},_getLogVars : function(obj){for (var i = 0; i < obj.arr.length; i++) {if (obj.arr[i].id == obj.vars.id) return obj.arr[i];}},_checkLogTop : function(obj){for (var i = 0; i < obj.arr.length; i++) {var strDate = 'd' + obj.numDate + '-' + i;if (!this._varsLog.flagTop[strDate]) {return i;}}},_setResizeListener : function(obj){for (var i = 0; i < obj.arr.length; i++) {for (var j = 0; j < obj.arrLevel.length; j++) {var id = this.idSelf + 'BodyLineBox' + obj.arrLevel[j] + obj.arr[i];var ele = $(id);this.insListener.set({ bindAsEvent : 0, insCurrent : this, event : 'mouseover',strFunc : '_mouseoverResize', ele : ele,vars : { id : obj.arr[i], mainTime : this.insCurrent.varsVar.month.mainTime[i] } });this.insListener.set({ bindAsEvent : 0, insCurrent : this, event : 'mouseout',strFunc : '_mouseoutResize', ele : ele, vars : { id : obj.arr[i] } });}}this.insListener.set({ bindAsEvent : 1, insCurrent : this, event : 'mouseup',strFunc : '_mouseupResize', ele : document, vars : '' });},_varsResize : {},mousedownResize : function(evt,obj) {this._setResizeListener({arr      : this.insCurrent.varsVar.month.main,arrLevel : this._staticResize.arrayLevel});this._styleLogUpdate({arrMain : this.insCurrent.varsVar.month.main,arr     : this.vars.varsFold});this._styleLogDateUpdate({arrMain  : this.insCurrent.varsVar.month.mainTime,vars     : obj.vars,arrLevel : this._staticMove.arrayLevel});this._varsResize = {};this._varsResize = {flag         : 1,flagType     : obj.flagType,ele          : evt.element(),vars         : obj.vars,varsOver     : null,fixedTime    : this._checkResizeFixed({arr      : this.vars.varsFold,flagType : obj.flagType,vars     : obj.vars})};},_checkResizeFixed : function(obj){var insCheck = new Code_Lib_CheckTime();var cut = obj.vars.vars.varsScheduleDetail;var objTargetStart = this.insRoot.insTimeZone.adjustDate({stamp : cut.term.stampStart * 1000});var objTargetEnd = this.insRoot.insTimeZone.adjustDate({stamp : cut.term.stampEnd*1000});var omit = this.insCurrent.varsVar.month.mainTime;var flag = insCheck.getTerm({stampStart     : objTargetStart.stamp,stampEnd       : objTargetEnd.stamp,stampWrapStart : omit[0].stamp,stampWrapEnd   : omit[omit.length - 1].stamp});if (obj.flagType == 'right') {if (flag == 'left') return omit[0];else if (flag == 'all') return objTargetStart;else if (flag == 'right') return objTargetStart;} else if (obj.flagType == 'left') {if (flag == 'right') return omit[omit.length-1];else if (flag == 'all') return objTargetEnd;else if (flag == 'left') return objTargetEnd;}},_mouseoverResize : function(obj){if (!this._varsResize.flag) return;this._varsResize.varsOver = obj.mainTime;obj.arrLevel = this._staticResize.arrayLevel;if (this._varsResize.flagType == 'right') {var a = this._varsResize.fixedTime.numDate;var b = obj.mainTime.numDate;for (var i = a; i <= b; i++) {for (var j = 0; j < obj.arrLevel.length; j++) {var id = this.idSelf + 'BodyLineBox' + obj.arrLevel[j] + i;$(id).addClassName('codeLibScheduleMonthBodyLineBoxOverRange');}}} else if (this._varsResize.flagType == 'left') {var a = obj.mainTime.numDate;var b = this._varsResize.fixedTime.numDate;for (var i = b; i >= a; i--) {for (var j = 0; j < obj.arrLevel.length; j++) {var id = this.idSelf + 'BodyLineBox' + obj.arrLevel[j] + i;$(id).addClassName('codeLibScheduleMonthBodyLineBoxOverRange');}}}},_mouseoutResize : function(obj){if (!this._varsResize.flag) return;this._varsResize.varsOver = null;obj.arrLevel = this._staticResize.arrayLevel;this._removeResize({arr      : this.insCurrent.varsVar.month.main,arrLevel : this._staticResize.arrayLevel});},_removeResize : function(obj){for (var i = 0; i < obj.arr.length; i++) {for (var j = 0; j < obj.arrLevel.length; j++) {var id = this.idSelf + 'BodyLineBox' + obj.arrLevel[j] + obj.arr[i];var ele = $(id);ele.removeClassName('codeLibScheduleMonthBodyLineBoxOverRange');}}},_staticResize : {arrayLevel : ['top','middle','bottom']},_mouseupResize : function(evt,obj) {if (obj) evt.stop();else obj = evt;if (!this._varsResize.flag) return;this.insCurrent.allot({insCurrent : this.insCurrent.insCurrent,from       : '_mouseupResize',vars   : this._varsResize.vars,objTime    : {mousedown : this._varsResize.vars.mainTime,mouseup   : this._varsResize.varsOver}});this._varsResize = {};this._removeResize({arr      : this.insCurrent.varsVar.month.main,arrLevel : this._staticResize.arrayLevel,arrPoint : []});this.insCurrent.iniReload();},_setMoveListener : function(obj){if (this.insCurrent.vars.varsStatus.flagMoveRangeUse) {for (var i = 0; i < obj.arr.length; i++) {for (var j = 0; j < obj.arrLevel.length; j++) {var id = this.idSelf + 'BodyLineBox' + obj.arrLevel[j] + obj.arr[i];var ele = $(id);this.insListener.set({ bindAsEvent : 0, insCurrent : this, event : 'mouseover',strFunc : '_mouseoverMove', ele : ele,vars : { id : obj.arr[i], mainTime : this.insCurrent.varsVar.month.mainTime[i] } });this.insListener.set({ bindAsEvent : 0, insCurrent : this, event : 'mouseout',strFunc : '_mouseoutMove', ele : ele, vars : { id : obj.arr[i] } });}}}this.insListener.set({ bindAsEvent : 1, insCurrent : this, event : 'mousemove',strFunc : '_mousemoveMove', ele : document, vars : '' });this.insListener.set({ bindAsEvent : 1, insCurrent : this, event : 'mouseup',strFunc : '_mouseupMove', ele : document, vars : '' });},_varsMove : {},mousedownMove : function(evt, obj){this._setMoveListener({arr      : this.insCurrent.varsVar.month.main,arrLevel : this._staticMove.arrayLevel});if (this.insCurrent.vars.varsStatus.flagMoveRangeUse) {this._styleLogUpdate({arrMain : this.insCurrent.varsVar.month.main,arr     : this.vars.varsFold});this._styleLogDateUpdate({arrMain  : this.insCurrent.varsVar.month.mainTime,vars     : obj,arrLevel : this._staticMove.arrayLevel});}this._varsMove = {};var numDate = 0;if (obj.vars.varsScheduleDetail.flagType == 'Term') {numDate = Math.floor((obj.vars.varsScheduleDetail.term.stampEnd- obj.vars.varsScheduleDetail.term.stampStart) / 86400);}this._varsMove = {flag     : 1,ele      : evt.element(),vars     : obj,varsOver : null,eleNavi  : null,numDate  : numDate};this._setMoveNavi({vars : obj,evt  : evt});this.insCurrent.allot({insCurrent : this.insCurrent.insCurrent,from       : 'mousedownMove',vars       : obj.vars});},_mouseoverMove : function(obj){if (!this._varsMove.flag) return;this._varsMove.varsOver = obj.mainTime;obj.arrLevel = this._staticMove.arrayLevel;obj.arr = this.insCurrent.varsVar.month.main;var cut = this._varsMove.vars.vars.varsScheduleDetail;if (cut.flagType == 'stamp') {for (var j = 0; j < obj.arrLevel.length; j++) {var id = this.idSelf + 'BodyLineBox' + obj.arrLevel[j] + obj.id;$(id).addClassName('codeLibScheduleMonthBodyLineBoxOverRange');}} else if (cut.flagType == 'Term') {var a = obj.mainTime.numDate;var b = obj.mainTime.numDate + this._varsMove.numDate;for (var i = a; i <= obj.arr.length; i++) {for (var j = 0; j < obj.arrLevel.length; j++) {var id = this.idSelf + 'BodyLineBox' + obj.arrLevel[j] + i;$(id).addClassName('codeLibScheduleMonthBodyLineBoxOverRange');}if (b==i) break;}}},_mouseoutMove : function(obj){if (!this._varsMove.flag) return;this._varsMove.varsOver = null;obj.arrLevel = this._staticMove.arrayLevel;obj.arr = this.insCurrent.varsVar.month.main;var cut = this._varsMove.vars.vars.varsScheduleDetail;if (cut.flagType == 'stamp') {for (var j = 0; j < obj.arrLevel.length; j++) {var id = this.idSelf + 'BodyLineBox' + obj.arrLevel[j] + obj.id;$(id).removeClassName('codeLibScheduleMonthBodyLineBoxOverRange');}} else if (cut.flagType == 'Term') {this._removeMove({arr      : this.insCurrent.varsVar.month.main,arrLevel : this._staticMove.arrayLevel});}},_staticMove : {numNaviLeft : 15, numNaviTop : 5, arrayLevel : ['top','middle','bottom']},_setMoveNavi : function(obj){var zIndex = this.insRoot.setZIndex();var ele = $(obj.vars.id).cloneNode(true);$(this.insRoot.vars.varsSystem.id.root).insert(ele);this._varsMove.eleNavi = ele;ele.addClassName('codeLibScheduleNavi');ele.setStyle({left   : (obj.evt.pointerX() + this._staticMove.numNaviLeft) + 'px',top    : (obj.evt.pointerY() + this._staticMove.numNaviTop) + 'px',zIndex : zIndex});},_mousemoveMove : function(evt, obj) {if (!this._varsMove.flag) return;if (obj) evt.stop();else obj = evt;this._varsMove.eleNavi.setStyle({top : (evt.pointerY() + this._staticMove.numNaviTop) + 'px',left : (evt.pointerX() + this._staticMove.numNaviLeft) + 'px'});},_mouseupMove : function(evt,obj) {if (obj) evt.stop();else obj = evt;if (!this._varsMove.flag) return;if (this.insCurrent.vars.varsStatus.flagMoveRangeUse) {this.insCurrent.allot({insCurrent : this.insCurrent.insCurrent,from       : '_mouseupMove',vars       : this._varsMove.vars,objTime    : {mousedown : this._varsMove.vars.mainTime,mouseup   : this._varsMove.varsOver}});this._removeMove({arr      : this.insCurrent.varsVar.month.main,arrLevel : this._staticMove.arrayLevel});} else {this.insCurrent.allot({insCurrent : this.insCurrent.insCurrent,from       : '_mouseupMove',vars       : this._varsMove.vars});}this._varsMove.eleNavi.remove();this._varsMove = {};this.insCurrent.iniReload();},_removeMove : function(obj){for (var i = 0; i < obj.arr.length; i++) {for (var j = 0; j < obj.arrLevel.length; j++) {var id = this.idSelf + 'BodyLineBox' + obj.arrLevel[j] + obj.arr[i];var ele = $(id);ele.removeClassName('codeLibScheduleMonthBodyLineBoxOverRange');}}},iniBtnSelect : function(){if (!this.insCurrent.varsLogBtn) return;this._setBtnSelect({arr       : this.vars.varsFold,arrSelect : this.insCurrent.varsLogBtn});this.updateVars();},_setBtnSelect : function(obj){for (var i = 0; i < obj.arr.length; i++) {var strLine = 'line' + i;var omit = this._varsBodyMainLine[strLine];if (!omit.length) continue;var str = 'line' + i;var array = this._varsLog[str];for (var j = 0; j < array.length; j++) {if (!array[j].vars.flagBtnUse) continue;var id = this.idSelf + 'BodyLineLog' + i + array[j].mainTime.numDate + array[j].vars.id;$(id).down('.codeLibScheduleTemplateTop', 0).removeClassName('codeLibScheduleSelect');$(id).down('.codeLibScheduleTemplateMiddle', 0).removeClassName('codeLibScheduleSelect');$(id).down('.codeLibScheduleTemplateBottom', 0).removeClassName('codeLibScheduleSelect');for (var k = 0; k < obj.arrSelect.length; k++) {if (array[j].vars.id == obj.arrSelect[k].id) {this._removeBtnSelectLoad({vars : array[j].vars,id   : id});this._removeBtnSelectBold({vars : array[j].vars,arr  : obj.arr});$(id).down('.codeLibScheduleTemplateTop', 0).addClassName('codeLibScheduleSelect');$(id).down('.codeLibScheduleTemplateMiddle', 0).addClassName('codeLibScheduleSelect');$(id).down('.codeLibScheduleTemplateBottom', 0).addClassName('codeLibScheduleSelect');}}}}},_removeBtnSelectLoad : function(obj){if (obj.vars.strClassLoad == '') return;$(obj.id).down('.codeLibScheduleTemplateMiddleIcon', 0).removeClassName(obj.vars.strClassLoad);obj.vars.strClassLoad = '';$(obj.id).down('.codeLibScheduleTemplateMiddleIcon', 0).addClassName(obj.vars.strClass);},_removeBtnSelectBold : function(obj){if (!this.insCurrent.vars.varsStatus.flagBoldUse || !obj.vars.flagBoldNow) return;obj.vars.flagBoldNow = 0;for (var i = 0; i < obj.arr.length; i++) {var strLine = 'line' + i;var omit = this._varsBodyMainLine[strLine];if (!omit.length) continue;var str = 'line' + i;var array = this._varsLog[str];for (var j = 0; j < array.length; j++) {if (!array[j].vars.flagBtnUse || array[j].vars.id != obj.vars.id) continue;var id = this.idSelf + 'BodyLineLog' + i + array[j].mainTime.numDate + array[j].vars.id;if ($(id).down('.codeLibScheduleTemplateMiddleStrTitle', 0)) {var ele = $(id).down('.codeLibScheduleTemplateMiddleStrTitle', 0);ele.removeClassName('codeLibBaseFontBold');}}}},_iniCake : function(obj){this._getCake();},_getCakeVarsUpdate : function(obj){obj.arr = this.vars.varsFold;for (var i = 0; i < obj.arr.length; i++) {var str = 'flagFoldNow' + i;obj.arr[i].flagFoldNow = obj.data[str];}},_setCakeVars : function(){var obj = {};obj.arr = this.vars.varsFold;var str;for (var i = 0; i < obj.arr.length; i++) {str = 'flagFoldNow' + i;this._varsCake[str] = obj.arr[i].flagFoldNow;}},_iniBody : function(){this._varBody();this._setBodyWrap();this._setBodyLine({arr     : this.vars.varsFold,arrPrev : this.insCurrent.varsVar.month.prev,arrMain : this.insCurrent.varsVar.month.main,arrNext : this.insCurrent.varsVar.month.next});},_varsBodyMainLine : {line0 : [], line1 : [], line2 : [], line3 : [], line4 : [], line5:[]},_getBodyHeight : function(){var array = this.eleInsert.style.height.split('px');return parseFloat(array[0]);},_varBody : function(){this.varsBody.boxHeight = Math.floor( (this._getBodyHeight() - this._staticGraduation.numSeparate * 6)/ this._staticBody.numBoxLine );this.varsBody.boxMiddleHeight = this.varsBody.boxHeight - this._staticBody.numHeight * 2;},varsBody : {boxHeight : 0, boxMiddleHeight : 0},_staticBody : {numDay : 7, numBoxLine : 6, numHeight : 16, numWidth : 16, numMargin : 5, numLevel : 3 },eleBodyWrap : null,_setBodyWrap : function(obj){var id = this.idSelf + 'BodyWrap';var eleWrap = $(document.createElement('div'));eleWrap.addClassName('codeLibScheduleMonthBodyWrap');eleWrap.id = id;eleWrap.setStyle({width  : this._getGraduationWidth() + 'px',height : this._getBodyHeight() + 'px'});eleWrap.unselectable = 'on';eleWrap.addClassName('unselect');this.eleBodyWrap = eleWrap;this.eleInsert.insert(eleWrap);},_setBodyLineBoxSeparate : function(obj){var eleSeparate = $(document.createElement('span'));eleSeparate.addClassName('codeLibScheduleMonthBodyLineBoxSeparate');eleSeparate.setStyle({height : obj.numHeight + 'px'});obj.ele.insert(eleSeparate);},_setBodyLineBoxTop : function(obj){var ele = $(document.createElement('span'));if (obj.flagType == 'main') {ele.id = this.idSelf + 'BodyLineBoxTop' + obj.id;if (this.insCurrent.varsVar.month.flagDateNow == obj.id) ele.addClassName('codeLibScheduleNow');}ele.addClassName('codeLibBaseCursorDefault');ele.addClassName('codeLibScheduleMonthBodyLineBoxTop');if (!obj.flagFold) ele.addClassName('codeLibScheduleMonthBodyLineBox');ele.setStyle({width  : obj.numWidth + 'px',height : this._staticBody.numHeight + 'px'});if (obj.strHoliday) ele.title = obj.str + ' - ' + obj.strHoliday + ' - ';else ele.title = obj.str;if (obj.color == 'red') ele.addClassName('codeLibBaseFontRed');else if (obj.color == 'ccc') ele.addClassName('codeLibBaseFontCcc');obj.ele.insert(ele);ele.insert(obj.str);if (obj.flagDay) this._setBodyLineBoxSeparate({ numHeight : this._staticBody.numHeight, ele : obj.ele});},_setBodyLineBoxMiddle : function(obj) {var ele = $(document.createElement('span'));if (obj.flagType == 'main') {ele.id = this.idSelf + 'BodyLineBoxMiddle' + obj.id;if (this.insCurrent.varsVar.month.flagDateNow == obj.id) ele.addClassName('codeLibScheduleNow');}if (!obj.flagFold) ele.addClassName('codeLibScheduleMonthBodyLineBox');ele.addClassName('codeLibScheduleMonthBodyLineBoxMiddle');ele.setStyle({width  : obj.numWidth + 'px',height : this.varsBody.boxMiddleHeight + 'px'});if (obj.strHoliday) ele.title = obj.strHoliday;obj.ele.insert(ele);if (obj.flagDay) {this._setBodyLineBoxSeparate({numHeight : this.varsBody.boxMiddleHeight, ele : obj.ele});}},_setBodyLineBoxBottom : function(obj) {var ele = $(document.createElement('span'));if (obj.flagType == 'main') {ele.id = this.idSelf + 'BodyLineBoxBottom' + obj.id;if (this.insCurrent.varsVar.month.flagDateNow == obj.id) ele.addClassName('codeLibScheduleNow');}if (!obj.flagFold) ele.addClassName('codeLibScheduleMonthBodyLineBox');ele.addClassName('codeLibScheduleMonthBodyLineBoxBottom');ele.setStyle({width  : obj.numWidth + 'px',height : this._staticBody.numHeight + 'px'});obj.ele.insert(ele);if (obj.strHoliday) ele.title = obj.strHoliday;if (obj.flagDay) this._setBodyLineBoxSeparate({numHeight : this._staticBody.numHeight, ele : obj.ele});},_setBodyLine : function(obj) {var numBox = 1;var numPrev = 0;var numMain = 0;var numNext = 0;this._varsBodyMainLine = {line0 : [], line1 : [], line2 : [], line3 : [], line4 : [], line5:[]};for (var i = 0; i < obj.arr.length; i++) {var day = 0;var eleLineWrap = $(document.createElement('div'));eleLineWrap.addClassName('codeLibScheduleMonthBodyLineWrap');eleLineWrap.id = this.idSelf + 'BodyLineWrap' + i;this.eleBodyWrap.insert(eleLineWrap);var eleSeparate = $(document.createElement('div'));eleSeparate.addClassName('codeLibScheduleMonthBodyLineSeparate');this.eleBodyWrap.insert(eleSeparate);var eleLineTop = $(document.createElement('div'));eleLineTop.addClassName('codeLibScheduleMonthBodyLineTop');eleLineWrap.insert(eleLineTop);var eleLineMiddle = $(document.createElement('div'));eleLineMiddle.addClassName('codeLibScheduleMonthBodyLineMiddle');eleLineWrap.insert(eleLineMiddle);eleLineMiddle.setStyle({height : this.varsBody.boxMiddleHeight + 'px'});var eleLineBottom = $(document.createElement('div'));eleLineBottom.addClassName('codeLibScheduleMonthBodyLineBottom');eleLineWrap.insert(eleLineBottom);for (var k = 0; k < this._staticBody.numLevel; k++) {if (k == 0) {var eleBoxTop = $(document.createElement('span'));eleBoxTop.setStyle({width  : (this._staticBody.numMargin + this._staticBody.numWidth) + 'px',height : this._staticBody.numHeight + 'px'});eleLineTop.insert(eleBoxTop);this._setBodyLineBoxSeparate({flagDay : 1, numHeight : this._staticBody.numHeight, ele : eleLineTop});var eleFold = $(document.createElement('span'));eleFold.addClassName('codeLibScheduleMonthBodyLineFold');if (this.insCurrent.vars.varsStatus.flagFoldUse) {eleFold.addClassName('codeLibBaseCursorPointer');if (!obj.arr[i].flagFoldNow) eleFold.addClassName('codeLibScheduleFoldClose');else  eleFold.addClassName('codeLibScheduleFoldOpen');eleFold.addClassName('codeLibScheduleBlock');}eleFold.unselectable = 'on';eleFold.addClassName('unselect');eleBoxTop.insert(eleFold);} else if (k == 1) {this._setBodyLineBoxMiddle({flagType : 'fold', id : '', flagFold : 1, flagDay : 1,numWidth : (this._staticBody.numMargin + this._staticBody.numWidth), ele : eleLineMiddle});} else if (k == 2) {this._setBodyLineBoxBottom({flagType : 'fold', id : '', flagFold : 1, flagDay : 1,numWidth : (this._staticBody.numMargin + this._staticBody.numWidth), ele : eleLineBottom});}}var flag = 0;for (var j = numPrev; j < obj.arrPrev.length; j++, numBox++, day++, numPrev++) {if ((day/7) == 1) {flag = 1;break;}var flagDay = 0;if ((day/6) != 1) flagDay = 1;var str = obj.arrPrev[j];if (j == (obj.arrPrev.length - 1)) str = this.insCurrent.varsVar.month.strPrevEnd;for (var k = 0; k < this._staticBody.numLevel; k++) {if (k == 0) {this._setBodyLineBoxTop({flagType : 'prev', id : '', flagFold : 0, flagDay : flagDay,numWidth : this._varsGraduation.numWidth, ele : eleLineTop,str : str, color : 'ccc'});} else if (k == 1) {this._setBodyLineBoxMiddle({ flagType : 'prev', id : '', flagFold : 0, flagDay : flagDay,numWidth : this._varsGraduation.numWidth, ele : eleLineMiddle});} else if (k == 2) {this._setBodyLineBoxBottom({ flagType : 'prev', id : '', flagFold : 0, flagDay : flagDay,numWidth : this._varsGraduation.numWidth, ele : eleLineBottom});}}}for (var j = numMain; j < obj.arrMain.length; j++, numBox++, day++, numMain++) {if ((day/7) == 1) {flag = 1;break;}var flagDay = 0;if ((day/6) != 1) flagDay = 1;var str = obj.arrMain[j];if (j == 0) str = this.insCurrent.varsVar.month.strMainStart;else if (j == (obj.arrMain.length - 1)) str = this.insCurrent.varsVar.month.strMainEnd;var color = '', strHoliday = '';if (this.insCurrent.varsVar.month.flagActive[j]) {if (this.insCurrent.varsVar.month.flagSunday[j]) color = 'red';if (this.insCurrent.varsVar.month.flagHoliday[j]) {strHoliday = this.insCurrent.varsVar.month.flagHoliday[j].strTitle;color = 'red';}if (this.insCurrent.varsVar.month.flagHolidayTransfer[j]) {var strHoliday = this.insRoot.vars.varsSystem.status.strHoliday;strHoliday = this.insCurrent.varsLoad.varsHoliday[strHoliday].transfer;color = 'red';}}else color = 'ccc';for (var k = 0; k < this._staticBody.numLevel; k++) {if (k == 0) {this._setBodyLineBoxTop({flagType : 'main', id : obj.arrMain[j], flagFold : 0, flagDay : flagDay,numWidth : this._varsGraduation.numWidth, ele : eleLineTop, str : str,strHoliday : strHoliday, color : color});} else if (k == 1) {this._setBodyLineBoxMiddle({flagType : 'main', id : obj.arrMain[j], flagFold : 0, flagDay : flagDay,numWidth : this._varsGraduation.numWidth,  ele : eleLineMiddle,strHoliday : strHoliday});} else if (k == 2) {this._setBodyLineBoxBottom({flagType : 'main', id : obj.arrMain[j], flagFold : 0, flagDay : flagDay,numWidth : this._varsGraduation.numWidth,  ele : eleLineBottom,strHoliday : strHoliday});}}var strLine = 'line' + i;this._varsBodyMainLine[strLine].push(this.insCurrent.varsVar.month.mainTime[numMain]);}for (var j = numNext; j < obj.arrMain.length; j++, numBox++, day++, numNext++) {if ((day / 7) == 1) {flag = 1;break;}var flagDay = 0;if ((day / 6) != 1) flagDay = 1;var str = obj.arrNext[j];if (j == 0) str = this.insCurrent.varsVar.month.strNextStart;for (var k = 0; k < this._staticBody.numLevel; k++) {if (k == 0) {this._setBodyLineBoxTop({flagType : 'next', id : numBox,  flagFold : 0, flagDay : flagDay,numWidth : this._varsGraduation.numWidth, ele : eleLineTop, str : str, color : 'ccc'});} else if (k == 1) {this._setBodyLineBoxMiddle({flagType : 'next', id : '',  flagFold : 0, flagDay : flagDay,numWidth : this._varsGraduation.numWidth,  ele : eleLineMiddle});} else if (k == 2) {this._setBodyLineBoxBottom({ flagType : 'next', id : '',  flagFold : 0, flagDay : flagDay,numWidth : this._varsGraduation.numWidth,  ele : eleLineBottom});}}}}},_varsBodyLineHoliday : {flag : null},_checkBodyLineHoliday : function(obj){for (var i = obj.num; i >= 0; i--) {if (obj.arrHoliday[i] && obj.arrSunday[i]) {this._varsBodyLineHoliday.flag = 1;return;}else if (!obj.arrHoliday[i]) return;}},removeWrap : function(){this.eleInsert.innerHTML = '';this.eleInsertGraduation.innerHTML = '';if (this.eleInsertBtnLeft) this.eleInsertBtnLeft.innerHTML = '';if (this.eleInsertBtnRight) this.eleInsertBtnRight.innerHTML = '';},_iniGraduation : function(){this._varGraduation();this._setGraduation({arr : this.insCurrent.varsLoad.varsWhole.week});},_getGraduationWidth : function(){var array = this.eleInsertGraduation.style.width.split('px');return parseFloat(array[0]) - this._staticGraduation.numBar;},_getGraduationHeight : function(){var array = this.eleInsertGraduation.style.height.split('px');return parseFloat(array[0]);},_varGraduation : function(){this._varsGraduation.numWidth = Math.floor( (this._getGraduationWidth()- this._staticGraduation.numPadding * 2 * 7- this._staticGraduation.numSeparate * 7- this._staticGraduation.numWidth- this._staticGraduation.numMargin) / 7 );this._varsGraduation.numWidthGraph = this._varsGraduation.numWidth+ this._staticGraduation.numPadding * 2;},_varsGraduation : {numWidth : 0, numWidthGraph : 0},_staticGraduation : {numBar : 17, numSeparate : 1, numPadding : 5,numMargin : 5, numWidth : 16, numHeight : 16},eleGraduationWrap : null,_setGraduation : function(obj) {var eleWrap = $(document.createElement('div'));eleWrap.addClassName('codeLibScheduleGraduationWrap');eleWrap.id = this.idSelf + 'GraduationWrap';eleWrap.setStyle({width  : this._getGraduationWidth() + 'px',height : this._getGraduationHeight() + 'px'});this.eleInsertGraduation.insert(eleWrap);this.eleGraduationWrap = eleWrap;var eleFold = $(document.createElement('span'));eleFold.addClassName('codeLibScheduleGraduationFold');if (this.insCurrent.vars.varsStatus.flagFoldUse) {eleFold.addClassName('codeLibBaseCursorPointer');if (!this.insCurrent.vars.varsStatus.flagFoldNow) {eleFold.addClassName('codeLibScheduleFoldClose');}else  eleFold.addClassName('codeLibScheduleFoldOpen');eleFold.addClassName('codeLibScheduleBlock');}eleFold.unselectable = 'on';eleFold.addClassName('unselect');eleWrap.insert(eleFold);var width = this._varsGraduation.numWidth;for (var i = 0; i < obj.arr.length; i++) {var ele = $(document.createElement('span'));ele.addClassName('codeLibScheduleGraduation');eleWrap.insert(ele);var eleDay = $(document.createElement('span'));eleDay.addClassName('codeLibScheduleMonthLineBox');eleDay.setStyle({textAlign    : 'right',paddingRight : '5px',width        : width + 'px',height       : this._getGraduationHeight() + 'px'});eleDay.addClassName('codeLibBaseCursorDefault');if (!i) eleDay.addClassName('codeLibBaseFontRed');eleDay.insert(obj.arr[i]);eleWrap.insert(eleDay);}}});var Code_Lib_ScheduleWeek = Class.create(Code_Lib_Schedule,{initialize : function(obj){this._iniVars(obj);this._iniListener();this._iniGraduation();this._iniBody();this.insCurrent.iniBtnBottom();this.insCurrent.iniPage();this._iniFold();this._iniPosition();this._iniLog();this.iniBtnSelect();},eleInsertGraduation : null,_iniVars : function(obj){this._extVars(obj);this.eleInsertGraduation = obj.eleInsertGraduation;this._iniCake();},updateVars : function(){this.insCurrent.updateVars();},_iniFold : function(){if (!this.insCurrent.vars.varsStatus.flagFoldUse) return;this._setFoldListener({arr : this.vars.varsFold});this._setFold({arr:this.vars.varsFold});},_setFoldListener : function(obj){this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'mousedown',strFunc : '_mousedownFoldAll',ele : $(this.idSelf + 'GraduationWrap').down('.codeLibScheduleGraduationFold', 0), vars : ''});for (var i = 0; i < obj.arr.length; i++) {this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'mousedown',strFunc : '_mousedownFold',ele     : $(this.idSelf + 'BodyLineWrap' + i).down('.codeLibScheduleWeekBodyLineFold', 0),vars    : {vars : {id : i}}});}},_setFold : function(obj){for (var i = 0; i < obj.arr.length; i++) {this._styleFoldUpdate({flagEffect : 0,arr        : obj.arr,vars       : {id : i}});}},_mousedownFold : function(evt,obj) {if (obj) evt.stop();else obj = evt;this._varFoldUpdate({arr:this.vars.varsFold, vars:obj.vars});this._styleFoldUpdate({flagEffect : 1,arr        : this.vars.varsFold,vars       : obj.vars});this.setCake();},_varFoldUpdate : function(obj){var num = obj.vars.id;if (obj.arr[num].flagFoldNow) obj.arr[num].flagFoldNow = 0;else obj.arr[num].flagFoldNow = 1;},_styleFoldUpdate : function(obj){var num = obj.vars.id;var eleBox = $(this.idSelf + 'BodyLineWrap' + num ).down('.codeLibScheduleWeekBodyLineFold', 0);eleBox.removeClassName('codeLibScheduleFoldClose');eleBox.removeClassName('codeLibScheduleFoldOpen');var eleBodyWrap = $(this.idSelf + 'BodyLineWrap' + num).down('.codeLibScheduleWeekBodyLineBodyWrap', 0);if (obj.arr[num].flagFoldNow) {eleBox.addClassName('codeLibScheduleFoldOpen');if (obj.flagEffect) {new Effect.BlindDown(eleBodyWrap,{duration : 0.5});} else {eleBodyWrap.show();}} else {eleBox.addClassName('codeLibScheduleFoldClose');if (obj.flagEffect) {new Effect.BlindUp(eleBodyWrap,{duration : 0.5});} else {eleBodyWrap.hide();}}},_mousedownFoldAll : function(evt) {evt.stop();if (this.insCurrent.vars.varsStatus.flagFoldNow) {this.insCurrent.vars.varsStatus.flagFoldNow = 0;this._varFoldUpdateAll({arr         : this.vars.varsFold,flagFoldNow : this.insCurrent.vars.varsStatus.flagFoldNow});} else {this.insCurrent.vars.varsStatus.flagFoldNow = 1;this._varFoldUpdateAll({arr         : this.vars.varsFold,flagFoldNow : this.insCurrent.vars.varsStatus.flagFoldNow});}this._styleFoldUpdateAll({arr         : this.vars.varsFold,flagEffect  : 1,flagFoldNow : this.insCurrent.vars.varsStatus.flagFoldNow});this.setCake();},_varFoldUpdateAll : function(obj){for (var i = 0; i < obj.arr.length; i++) {obj.arr[i].flagFoldNow = obj.flagFoldNow;}},_styleFoldUpdateAll : function(obj){var eleGraduation = $(this.idSelf + 'GraduationWrap').down('.codeLibScheduleGraduationFold', 0);eleGraduation.removeClassName('codeLibScheduleFoldClose');eleGraduation.removeClassName('codeLibScheduleFoldOpen');if (obj.flagFoldNow) eleGraduation.addClassName('codeLibScheduleFoldOpen');else eleGraduation.addClassName('codeLibScheduleFoldClose');for (var i = 0; i < obj.arr.length; i++) {var eleBox = $(this.idSelf + 'BodyLineWrap' + i).down('.codeLibScheduleWeekBodyLineFold', 0);var eleBodyWrap = $(this.idSelf + 'BodyLineWrap' + i).down('.codeLibScheduleWeekBodyLineBodyWrap', 0);eleBox.removeClassName('codeLibScheduleFoldClose');eleBox.removeClassName('codeLibScheduleFoldOpen');if (obj.arr[i].flagFoldNow) {eleBox.addClassName('codeLibScheduleFoldOpen');eleBodyWrap.show();} else {eleBox.addClassName('codeLibScheduleFoldClose');eleBodyWrap.hide();}}},_iniGraduation : function(){this._varGraduation();this._setGraduation();},_getGraduationHeight : function(){var array = this.eleInsertGraduation.style.height.split('px');return parseFloat(array[0]);},_getGraduationWidth : function(){var array = this.eleInsertGraduation.style.width.split('px');return parseFloat(array[0]);},_varsGraduation : {numWidthWrap : 0, numWidth : 0},_staticGraduation : {numWidth : 41, numSeparateSingle : 1, numSeparateDouble : 3,numPadding : 5, numMargin : 5, numBlock : 16, numBar : 17},eleGraduationWrap : null,_varGraduation : function(obj){this._varGraduationWidth({numWidth : this._staticGraduation.numWidth});var numWidthGraduation = this._getGraduationWidth();if (numWidthGraduation > this._varsGraduation.numWidthWrap) {var num = this._staticGraduation.numSeparateDouble * 10+ this._staticGraduation.numSeparateSingle * (24 - 9)+ this._staticGraduation.numMargin+ this._staticGraduation.numBlock;- this._staticGraduation.numBar;var numWidth = Math.floor((numWidthGraduation - num)/24);this._varGraduationWidth({numWidth : numWidth});}},_varGraduationWidth : function(obj){this._varsGraduation.numWidth = obj.numWidth- this._staticGraduation.numPadding * 2;this._varsGraduation.numWidthWrap = obj.numWidth * 24+ this._staticGraduation.numSeparateDouble * 10+ this._staticGraduation.numSeparateSingle * (24 - 9)+ this._staticGraduation.numMargin+ this._staticGraduation.numBlock;},_setGraduation : function(obj) {this.eleInsertGraduation.setStyle({position : 'relative'});var eleWrap = $(document.createElement('div'));eleWrap.addClassName('codeLibScheduleGraduationWrap');eleWrap.id = this.idSelf + 'GraduationWrap';eleWrap.setStyle({width  : this._varsGraduation.numWidthWrap + 'px',height : this._getGraduationHeight() + 'px'});this.eleInsertGraduation.insert(eleWrap);this.eleGraduationWrap = eleWrap;var eleFold = $(document.createElement('span'));eleFold.addClassName('codeLibScheduleGraduationFold');if (this.insCurrent.vars.varsStatus.flagFoldUse) {eleFold.addClassName('codeLibBaseCursorPointer');if (!this.insCurrent.vars.varsStatus.flagFoldNow) {eleFold.addClassName('codeLibScheduleFoldClose');}else  eleFold.addClassName('codeLibScheduleFoldOpen');eleFold.addClassName('codeLibScheduleBlock');}eleFold.unselectable = 'on';eleFold.addClassName('unselect');eleWrap.insert(eleFold);for (var i = 0; i < 25; i++) {var ele = $(document.createElement('span'));if ((i % 3) == 0) ele.addClassName('codeLibScheduleGraduationDouble');else ele.addClassName('codeLibScheduleGraduation');eleWrap.insert(ele);if (i == 24) break;var eleHour = $(document.createElement('span'));eleHour.addClassName('codeLibScheduleWeekLineBox');eleHour.setStyle({textAlign : 'left',width     : this._varsGraduation.numWidth + 'px',height    : this._getGraduationHeight() + 'px'});eleHour.addClassName('codeLibBaseCursorDefault');if ((i % 3) != 0) eleHour.addClassName('codeLibBaseFontCcc');eleHour.insert(i);eleWrap.insert(eleHour);}},_iniBody : function(){this._varBody();this._setBodyWrap();this._setBodyLine({arr : this.vars.varsFold});},_getBodyHeight : function(){var array = this.eleInsert.style.height.split('px');var data = parseFloat(array[0]) - this._staticBody.numBar;return data;},eleBodyWrap : null,_setBodyWrap : function(obj){var id = this.idSelf + 'BodyWrap';var eleWrap = $(document.createElement('div'));eleWrap.addClassName('codeLibScheduleWeekBodyWrap');eleWrap.id = id;eleWrap.setStyle({width  : this._varsGraduation.numWidthWrap + 'px',height : this._getBodyHeight() + 'px'});eleWrap.unselectable = 'on';eleWrap.addClassName('unselect');this.eleBodyWrap = eleWrap;this.eleInsert.insert(eleWrap);},_staticBody : {numBar : 17, numLine : 7, numSeparateLine : 1,numHeight : 20, numBlock : 16, numMargin : 5},_varBody : function(){this._varsBody.numHeightBodyWrap = Math.floor( (this._getBodyHeight() - this._staticBody.numHeight * 7 - this._staticBody.numSeparateLine * 13) / this._staticBody.numLine );this._varsBody.numHeightBody = this._varsBody.numHeightBodyWrap- this._staticBody.numSeparateLine;},_varsBody : {numHeightBodyWrap : 0, numHeightBody : 0},_setBodyLine : function(obj){var insDisplay = new Code_Lib_TimeDisplay();for (var i = 0; i < obj.arr.length; i++) {var eleLineWrap = $(document.createElement('div'));eleLineWrap.addClassName('codeLibScheduleWeekBodyLineWrap');eleLineWrap.id = this.idSelf + 'BodyLineWrap' + i;this.eleBodyWrap.insert(eleLineWrap);eleLineWrap.setStyle({width : this._varsGraduation.numWidthWrap + 'px'});if (i > 0) {var eleSeparate = $(document.createElement('div'));eleSeparate.addClassName('codeLibScheduleWeekBodyLineSeparate');eleLineWrap.insert(eleSeparate);}var eleTopWrap = $(document.createElement('div'));eleTopWrap.addClassName('codeLibScheduleWeekBodyTopWrap');eleTopWrap.setStyle({width : this._varsGraduation.numWidthWrap + 'px'});eleLineWrap.insert(eleTopWrap);var eleTop = $(document.createElement('div'));eleTop.addClassName('codeLibScheduleWeekBodyTop');eleTopWrap.insert(eleTop);if (this.insCurrent.varsVar.week.flagDateNow == this.insCurrent.varsVar.week.dateTime[i].numDate) {eleTopWrap.addClassName('codeLibScheduleNow');}var eleFold = $(document.createElement('span'));eleFold.addClassName('codeLibScheduleWeekBodyLineFold');if (this.insCurrent.vars.varsStatus.flagFoldUse) {eleFold.addClassName('codeLibBaseCursorPointer');if (!obj.arr[i].flagFoldNow) eleFold.addClassName('codeLibScheduleFoldClose');else  eleFold.addClassName('codeLibScheduleFoldOpen');eleFold.addClassName('codeLibScheduleBlock');}eleFold.unselectable = 'on';eleFold.addClassName('unselect');eleTop.insert(eleFold);var strClass = '',strHoliday = ' ';if (this.insCurrent.varsVar.week.flagActive[i]) {if (this.insCurrent.varsVar.week.flagSunday[i]) strClass = 'codeLibBaseFontRed';if (this.insCurrent.varsVar.week.flagHoliday[i]) {strHoliday = this.insCurrent.varsVar.week.flagHoliday[i].strTitle;strClass = 'codeLibBaseFontRed';}if (this.insCurrent.varsVar.week.flagHolidayTransfer[i]) {var str = this.insRoot.vars.varsSystem.status.strHoliday;strHoliday = this.insCurrent.varsLoad.varsHoliday[str].transfer;strClass = 'codeLibBaseFontRed';}}else strClass = 'codeLibBaseFontCcc';var eleTitle = $(document.createElement('span'));eleTitle.addClassName('codeLibScheduleWeekBodyLineTopTitle');eleTitle.addClassName('codeLibBaseCursorDefault');eleTitle.addClassName('clearfix');eleTitle.addClassName(strClass);var str = insDisplay.get({flagType : 2,vars     : this.insCurrent.varsVar.week.dateTime[i]});str += ' ' + strHoliday;eleTitle.title = str;eleTitle.insert(str);eleTop.insert(eleTitle);var eleLineBodyWrap = $(document.createElement('div'));eleLineBodyWrap.addClassName('codeLibScheduleWeekBodyLineBodyWrap');eleLineWrap.insert(eleLineBodyWrap);eleLineBodyWrap.setStyle({width  : this._varsGraduation.numWidthWrap + 'px',height : this._varsBody.numHeightBodyWrap + 'px'});var eleSeparate = $(document.createElement('div'));eleSeparate.addClassName('codeLibScheduleWeekBodyLineSeparate');eleLineBodyWrap.insert(eleSeparate);var eleLineBody = $(document.createElement('div'));eleLineBody.addClassName('codeLibScheduleWeekBodyLineBody');eleLineBodyWrap.insert(eleLineBody);eleLineBodyWrap.setStyle({height : this._varsBody.numHeightBody + 'px'});var str = 'hourTime' + i;for (var j = 0; j < 24; j++) {if (j == 0) {var eleIdle = $(document.createElement('span'));eleIdle.setStyle({width  : (this._staticBody.numBlock + this._staticBody.numMargin) + 'px',height : this._varsBody.numHeightBody + 'px'});eleLineBody.insert(eleIdle);}var ele = $(document.createElement('span'));if (this.insCurrent.varsVar.week.flagDateNow == this.insCurrent.varsVar.week.dateTime[i].numDate&& this.insCurrent.varsVar.week.flagHourNow == this.insCurrent.varsVar.week[str][j].numHour) {if ((j % 3) == 0) ele.addClassName('codeLibScheduleWeekBodyLineBoxSeparateDoubleNow');else ele.addClassName('codeLibScheduleWeekBodyLineBoxSeparateNow');} else {if ((j % 3) == 0) ele.addClassName('codeLibScheduleWeekBodyLineBoxSeparateDouble');else ele.addClassName('codeLibScheduleWeekBodyLineBoxSeparate');}ele.setStyle({height : this._varsBody.numHeightBody + 'px'});eleLineBody.insert(ele);var eleHour = $(document.createElement('span'));eleHour.id = this.idSelf + 'BodyLine' + i + '-' + j;eleHour.addClassName('codeLibScheduleWeekLineBox');eleHour.setStyle({width  : this._varsGraduation.numWidth + 'px',height : this._varsBody.numHeightBody + 'px'});eleLineBody.insert(eleHour);}if (i == (obj.arr.length - 1)) {var eleSeparate = $(document.createElement('div'));eleSeparate.addClassName('codeLibScheduleWeekBodyLineSeparate');eleLineWrap.insert(eleSeparate);}}},_varsBodyLineHoliday : {flag : null},_checkBodyLineHoliday : function(obj){for (var i = obj.num; i >= 0; i--) {if (obj.arrHoliday[i] && obj.arrSunday[i]) {this._varsBodyLineHoliday.flag = 1;return;}else if (!obj.arrHoliday[i]) return;}},_setResizeListener : function(obj){for (var i = 0; i < obj.arr.length; i++) {var strLine = 'hourTime' + i;var omit = this.insCurrent.varsVar.week[strLine];for (var j = 0; j < omit.length; j++) {var id = this.idSelf + 'BodyLine' + i + '-' + j;var ele = $(id);this.insListener.set({bindAsEvent : 0, insCurrent : this, event : 'mouseover',strFunc : '_mouseoverResize', ele : ele, vars : { numLine : i, objTime : omit[j]}});this.insListener.set({bindAsEvent : 0, insCurrent : this, event : 'mouseout',strFunc : '_mouseoutResize', ele : ele, vars : { numLine : i, objTime : omit[j]}});}}this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'mousemove',strFunc : '_mousemoveResize', ele : document, vars : ''});this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'mouseup',strFunc : '_mouseupResize', ele : document, vars : ''});},_staticResize : {numAreaNone : 16, numPosShift : 10, numNaviLeft : 15, numNaviTop : 5},_varsResize : {},mousedownResize : function(evt, obj) {this._setResizeListener({arr : this.vars.varsFold});this._styleLogUpdate({arr : this.vars.varsFold});this._styleLogDateUpdate({arr  : this.vars.varsFold,vars : obj.vars});var leftMin = $(this.insCurrent.idSelf).up('.codeLibWindow', 0).offsetLeft+ this.insCurrent.insFormat.eleTemplate.body.offsetLeft + this._staticResize.numAreaNone;var leftMax = leftMin + this.insCurrent.insFormat.eleTemplate.body.offsetWidth- this._staticResize.numAreaNone * 2;this._varsResize = {};this._varsResize = {flag     : 1,flagType : obj.flagType,ele      : evt.element(),vars     : obj.vars,varsOver : null,leftMax  : leftMax,leftMin  : leftMin,fixedObj : this._checkResizeFixed({arr      : this.insCurrent.varsVar.week.dateTime,flagType : obj.flagType,vars     : obj.vars})};},_checkResizeFixed : function(obj){var insCheck = new Code_Lib_CheckTime();var cut = obj.vars.vars.varsScheduleDetail;var objTargetStart = this.insRoot.insTimeZone.adjustDate({stamp : cut.term.stampStart * 1000});var objTargetEnd = this.insRoot.insTimeZone.adjustDate({stamp : cut.term.stampEnd * 1000});var omit = this.insCurrent.varsVar.week.dateTime;var flag = insCheck.getTerm({stampStart     : objTargetStart.stamp,stampEnd       : objTargetEnd.stamp,stampWrapStart : omit[0].stamp,stampWrapEnd   : omit[omit.length - 1].stamp});var objTime;if (obj.flagType == 'right') {if (flag == 'left') objTime = omit[0];else if (flag == 'all') objTime = objTargetStart;else if (flag == 'right') objTime = objTargetStart;} else if (obj.flagType == 'left') {if (flag == 'right') objTime = omit[omit.length-1];else if (flag == 'all') objTime = objTargetEnd;else if (flag == 'left') objTime = objTargetEnd;}for (var i = 0; i < obj.arr.length; i++) {if (obj.arr[i].numDate == objTime.numDate) {return {numHour : (obj.flagType == 'left' && flag == 'right')? 23 : objTime.numHour,numLine : i};}}},_mouseoverResize : function(obj) {if (!this._varsResize.flag) return;this._varsResize.varsOver = obj.objTime;if (this._varsResize.flagType == 'right') {var a = this._varsResize.fixedObj.numLine;var aA = this._varsResize.fixedObj.numHour;var b = obj.numLine;var bB = obj.objTime.numHour;for (var i = a; i <= b; i++) {var strLine = 'hourTime' + i;var omit = this.insCurrent.varsVar.week[strLine];var numStart = 0;var numEnd = omit.length - 1;if (i == a) numStart = aA;if (i == b) numEnd = bB;for (var j = numStart; j <= numEnd; j++) {$(this.idSelf + 'BodyLine' + i + '-' + j).addClassName('codeLibScheduleWeekBodyLineBoxOverRange');}}} else if (this._varsResize.flagType == 'left') {var a = obj.numLine;var aA = obj.objTime.numHour;var b = this._varsResize.fixedObj.numLine;var bB = this._varsResize.fixedObj.numHour;for (var i = a; i <= b; i++) {var strLine = 'hourTime' + i;var omit = this.insCurrent.varsVar.week[strLine];var numStart = 0;var numEnd = omit.length-1;if (i == a) numStart = aA;if (i == b) numEnd = bB;for (var j = numStart; j <= numEnd; j++) {$(this.idSelf + 'BodyLine' + i + '-' + j).addClassName('codeLibScheduleWeekBodyLineBoxOverRange');}}}},_mouseoutResize : function(obj){if (!this._varsResize.flag) return;this._varsResize.varsOver = null;this._removeResize({arr : this.vars.varsFold});},_removeResize : function(obj){for (var i = 0; i < obj.arr.length; i++) {var strLine = 'hourTime' + i;var omit = this.insCurrent.varsVar.week[strLine];for (var j = 0; j < omit.length; j++) {$(this.idSelf + 'BodyLine' + i + '-' + j).removeClassName('codeLibScheduleWeekBodyLineBoxOverRange');}}},_mouseupResize : function(evt, obj){if (obj) evt.stop();else obj = evt;if (!this._varsResize.flag) return;this.insCurrent.allot({insCurrent : this.insCurrent.insCurrent,from       : '_mouseupResize',vars       : this._varsResize.vars,objTime    : {mousedown : this._varsResize.vars.mainTime,mouseup   : this._varsResize.varsOver}});this._varsResize = {};this._removeResize({arr : this.vars.varsFold});this.insCurrent.iniReload();},_mousemoveResize : function(evt,obj) {if (!this._varsResize.flag) return;if (obj) evt.stop();else obj = evt;if (evt.pointerX() < this._varsResize.leftMin) {this.insCurrent.insFormat.eleTemplate.body.scrollLeft -= this._staticResize.numPosShift;} else if (evt.pointerX() > this._varsResize.leftMax) {this.insCurrent.insFormat.eleTemplate.body.scrollLeft += this._staticResize.numPosShift;}},_setMoveListener : function(obj){if (this.insCurrent.vars.varsStatus.flagMoveRangeUse) {for (var i = 0; i < obj.arr.length; i++) {var strLine = 'hourTime' + i;var omit = this.insCurrent.varsVar.week[strLine];for (var j = 0; j < omit.length; j++) {var id = this.idSelf + 'BodyLine' + i + '-' + j;var ele = $(id);this.insListener.set({bindAsEvent : 0, insCurrent : this, event : 'mouseover',strFunc : '_mouseoverMove', ele : ele,vars : { numLine : i, numHour : j, objTime : omit[j]}});this.insListener.set({bindAsEvent : 0, insCurrent : this, event : 'mouseout',strFunc : '_mouseoutMove', ele : ele,vars : { numLine : i, numHour : j, objTime : omit[j]}});}}}this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'mousemove',strFunc : '_mousemoveMove', ele : document, vars : ''});this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'mouseup',strFunc : '_mouseupMove', ele : document, vars : ''});},_styleLogDateUpdate : function(obj){var cut = obj.vars.vars.varsScheduleDetail;var insCheck = new Code_Lib_CheckTime();if (cut.flagType == 'stamp') {for (var i = 0; i < obj.arr.length; i++) {var strLine = 'hourTime' + i;var omit = this.insCurrent.varsVar.week[strLine];if (omit[0].numDate == obj.vars.mainTime.numDate) {var ele = $(this.idSelf + 'BodyLine' + i + '-' + obj.vars.mainTime.numHour);ele.addClassName(obj.vars.strClassBg);}}} else if (cut.flagType == 'Term') {var objTargetStart = this.insRoot.insTimeZone.adjustDate({stamp : cut.term.stampStart*1000});var objTargetEnd = this.insRoot.insTimeZone.adjustDate({stamp : cut.term.stampEnd*1000});for (var i = 0; i < obj.arr.length; i++) {var strLine = 'hourTime' + i;var omit = this.insCurrent.varsVar.week[strLine];for (var j = 0; j < omit.length; j++) {var flag = insCheck.getTerm({stampStart     : objTargetStart.stamp,stampEnd       : objTargetEnd.stamp,stampWrapStart : omit[j].stamp,stampWrapEnd   : omit[j].stamp + 60 * 60 * 1000});if (!flag) continue;var id = this.idSelf + 'BodyLine' + i + '-' + j;var ele = $(id);ele.addClassName(obj.vars.strClassBg);}}}},_varsMove : {},mousedownMove : function(evt,obj) {this._setMoveListener({arr : this.vars.varsFold});if (this.insCurrent.vars.varsStatus.flagMoveRangeUse) {this._styleLogUpdate({arr : this.vars.varsFold});this._styleLogDateUpdate({arr  : this.vars.varsFold,vars : obj});}this._varsMove = {};var leftMin = $(this.insCurrent.idSelf).up('.codeLibWindow', 0).offsetLeft+ this.insCurrent.insFormat.eleTemplate.body.offsetLeft + this._staticMove.numAreaNone;var leftMax = leftMin + this.insCurrent.insFormat.eleTemplate.body.offsetWidth- this._staticMove.numAreaNone * 2;this._varsMove = {flag     : 1,ele      : evt.element(),vars     : obj,varsOver : null,eleNavi  : null,leftMax  : leftMax,leftMin  : leftMin};this._setMoveNavi({vars : obj,evt  : evt});this.insCurrent.allot({insCurrent : this.insCurrent.insCurrent,from       : 'mousedownMove',vars       : obj.vars});},_staticMove : {numAreaNone : 16, numPosShift : 10, numNaviLeft : 15, numNaviTop : 5},_setMoveNavi : function(obj){var zIndex = this.insRoot.setZIndex();var ele = $(obj.vars.id).cloneNode(true);$(this.insRoot.vars.varsSystem.id.root).insert(ele);this._varsMove.eleNavi = ele;ele.addClassName('codeLibScheduleNavi');ele.setStyle({left   : (obj.evt.pointerX() + this._staticMove.numNaviLeft) + 'px',top    : (obj.evt.pointerY() + this._staticMove.numNaviTop) + 'px',zIndex : zIndex});},_mousemoveMove : function(evt,obj) {if (!this._varsMove.flag) return;if (obj) evt.stop();else obj = evt;if (evt.pointerX() < this._varsMove.leftMin) {this.insCurrent.insFormat.eleTemplate.body.scrollLeft -= this._staticMove.numPosShift;} else if (evt.pointerX() > this._varsMove.leftMax) {this.insCurrent.insFormat.eleTemplate.body.scrollLeft += this._staticMove.numPosShift;}this._varsMove.eleNavi.setStyle({top  : (evt.pointerY() + this._staticMove.numNaviTop) + 'px',left : (evt.pointerX() + this._staticMove.numNaviLeft) + 'px'});},_mouseoverMove : function(obj){if (!this._varsMove.flag) return;this._varsMove.varsOver = obj.objTime;var cut = this._varsMove.vars.vars.varsScheduleDetail;if (cut.flagType == 'stamp') {var id = this.idSelf + 'BodyLine' + obj.numLine + '-' + obj.numHour;$(id).addClassName('codeLibScheduleWeekBodyLineBoxOverRange');} else if (cut.flagType == 'Term') {obj.arr = this.vars.varsFold;var stampLimit = obj.objTime.stamp + (cut.term.stampEnd - cut.term.stampStart) * 1000;for (var i=obj.numLine; i<obj.arr.length; i++) {var strLine = 'hourTime' + i;var omit = this.insCurrent.varsVar.week[strLine];var num = (i == obj.numLine)? obj.numHour : 0;var flag = 0;for (var j = num; j < omit.length; j++) {if (omit[j].stamp <= stampLimit) {$(this.idSelf + 'BodyLine' + i + '-' + j).addClassName('codeLibScheduleWeekBodyLineBoxOverRange');} else {flag = 1;break;}}if (flag) break;}}},_mouseoutMove : function(obj){if (!this._varsMove.flag) return;this._varsMove.varsOver = null;obj.arr = this.vars.varsFold;var cut = this._varsMove.vars.vars.varsScheduleDetail;if (cut.flagType == 'stamp') {var id = this.idSelf + 'BodyLine' + obj.numLine + '-' + obj.numHour;$(id).removeClassName('codeLibScheduleWeekBodyLineBoxOverRange');} else if (cut.flagType == 'Term') {this._removeMove({arr : obj.arr});}},_mouseupMove : function(evt,obj) {if (obj) evt.stop();else obj = evt;if (!this._varsMove.flag) return;if (this.insCurrent.vars.varsStatus.flagMoveRangeUse) {this.insCurrent.allot({insCurrent : this.insCurrent.insCurrent,from       : '_mouseupMove',vars       : this._varsMove.vars,objTime    : {mousedown : this._varsMove.vars.mainTime,mouseup   : this._varsMove.varsOver}});this._removeMove({arr : this.vars.varsFold});} else {this.insCurrent.allot({insCurrent : this.insCurrent.insCurrent,from       : '_mouseupMove',vars       : this._varsMove.vars});}this._varsMove.eleNavi.remove();this._varsMove = {};this.insCurrent.iniReload();},_removeMove : function(obj){for (var i = 0; i < obj.arr.length; i++) {var strLine = 'hourTime' + i;var omit = this.insCurrent.varsVar.week[strLine];for (var j=0; j<omit.length; j++) {var id = this.idSelf + 'BodyLine' + i + '-' + j;var ele = $(id);ele.removeClassName('codeLibScheduleWeekBodyLineBoxOverRange');}}},_iniLog : function(){this._varLog({arrDetail : (Object.toJSON(this.insCurrent.vars.varsDetail)).evalJSON(),arrLine   : this.vars.varsFold,arrMain   : this.insCurrent.varsVar.week.dateTime});this._checkLogLineHeight({arrDetail : this.insCurrent.vars.varsDetail,arrLine   : this.vars.varsFold,arrMain   : this.insCurrent.varsVar.week.dateTime});this._updateLogLineStyle({arr : this.vars.varsFold});this._setLogLineWrap({arr : this.vars.varsFold});this._setLog({arr : this.vars.varsFold});},_styleLogUpdate : function(obj){for (var i = 0; i < obj.arr.length; i++) {$(this.idSelf + 'BodyLineWrap' + i).down('.codeLibScheduleWeekBodyLineMiddleLogWrap', 0).hide();$(this.idSelf + 'BodyLineWrap' + i).down('.codeLibScheduleWeekBodyLineBodyWrap', 0).show();$(this.idSelf + 'BodyLineWrap' + i).down('.codeLibScheduleWeekBodyLineBodyWrap', 0).setStyle({height : this._varsBody.numHeightBodyWrap + 'px'});$(this.idSelf + 'BodyLineWrap' + i).down('.codeLibScheduleWeekBodyLineBody', 0).setStyle({height : this._varsBody.numHeightBodyWrap + 'px'});var array = $(this.idSelf + 'BodyLineWrap' + i).down('.codeLibScheduleWeekBodyLineBody', 0).childNodes;for (var j = 0; j < array.length; j++) {array[j].setStyle({height : this._varsBody.numHeightBodyWrap + 'px'});}}},_setLog : function(obj){for (var i = 0; i < obj.arr.length; i++) {var strLine = 'hourTime' + i;var omit = this.insCurrent.varsVar.week[strLine];var eleInsert = $(this.idSelf + 'BodyLineWrap' + i).down('.codeLibScheduleWeekBodyLineMiddleLogWrap', 0);var str = 'line' + i;var array = this._varsLog[str];for (var j = 0; j < array.length; j++) {var id = this.idSelf + 'BodyLineLog' + i + '-' + array[j].mainTime.numHour + '-' + array[j].vars.id;var flagLeftUse = 0 , flagRightUse = 0;if (array[j].flag == 'all') {flagLeftUse = 0 , flagRightUse = 0;} else if (array[j].flag == 'left') {flagLeftUse = 1 , flagRightUse = 0;} else if (array[j].flag == 'right') {flagLeftUse = 0 , flagRightUse = 1;} else if (array[j].flag == 'middle') {flagLeftUse = 1 , flagRightUse = 1;}this.insCurrent.iniLog({mainTime           : array[j].mainTime,vars               : array[j].vars,eleInsert          : eleInsert,id                 : id,numTop             : array[j].numTop,numLeft            : array[j].numLeft,numWidth           : array[j].numWidth,strTime            : array[j].strTime,strTitle           : array[j].vars.strTitle,strClass           : array[j].vars.strClass,strClassBg         : array[j].vars.strClassBg,strClassFont       : array[j].vars.strClassFont,strClassLoad       : array[j].vars.strClassLoad,flagBoldNow        : array[j].vars.flagBoldNow,flagBtnUse         : array[j].vars.flagBtnUse,flagLeftUse        : flagLeftUse,flagMoveUse        : (this.insCurrent.vars.varsStatus.flagMoveUse&& array[j].vars.flagMoveUse)? 1 : 0,flagResizeUse : (this.insCurrent.vars.varsStatus.flagResizeUse&& array[j].vars.varsScheduleDetail.flagResizeUse)? 1 : 0,flagResizeLeftUse  : (array[j].flagResizeLeftUse)? 1 : 0,flagResizeRightUse : (array[j].flagResizeRightUse)? 1 : 0,flagRightUse       : flagRightUse});}}},_setLogLineWrap : function(obj){for (var i = 0; i < obj.arr.length; i++) {var eleInsert = $(this.idSelf + 'BodyLineWrap' + i).down('.codeLibScheduleWeekBodyLineBodyWrap', 0);eleInsert.setStyle({position : 'relative'});var eleWrap = $(document.createElement('div'));eleWrap.addClassName('codeLibScheduleWeekBodyLineMiddleLogWrap');eleWrap.id = this.idSelf + 'BodyLineLogWrap' + i;eleInsert.insert(eleWrap);}},_updateLogLineStyle : function(obj){for (var i = 0; i < obj.arr.length; i++) {var str = 'line' + i;if (this._varsLog[str].length > 0) {var ele = $(this.idSelf + 'BodyLineWrap' + i).down('.codeLibScheduleWeekBodyLineTopTitle', 0);ele.innerHTML += ' ' + this._varsLog[str].length+ this.insCurrent.varsLoad.varsWhole.str.item+ this.insCurrent.varsLoad.varsWhole.str.hit;ele.title = ele.innerHTML;}var strLineHeight = 'lineHeight' + i;var num = this._varsLog[strLineHeight];var ele = $(this.idSelf + 'BodyLineWrap' + i).down('.codeLibScheduleWeekBodyLineBodyWrap', 0);var a = ele.offsetHeight;var b = num * this._staticLog.numHeight;if (b > a) {ele.setStyle({height : (num * this._staticLog.numHeight) + 'px'});var eleBody = $(this.idSelf + 'BodyLineWrap' + i).down('.codeLibScheduleWeekBodyLineBody', 0);eleBody.setStyle({height : (num * this._staticLog.numHeight) + 'px'});var array = eleBody.childNodes;for (var j = 0; j < array.length; j++) {array[j].setStyle({height : (num * this._staticLog.numHeight) + 'px'});}}}},_checkLogLineHeight : function(obj){for (var i = 0; i < obj.arrLine.length; i++) {var strLine = 'hourTime' + i;var omit = this.insCurrent.varsVar.week[strLine];var num = 0;for (var j = 0; j < omit.length; j++) {var strNum = 'n' + omit[j].numDate + '-' + omit[j].numHour;if (this._varsLog.numLogMain[strNum]) {if (num < this._varsLog.numLogMain[strNum]) num = this._varsLog.numLogMain[strNum];}}var strLineHeight = 'lineHeight' + i;this._varsLog[strLineHeight] = num;}},_varsLog : null,_staticLog : {numHeight : 21, numStartLeft : 21, numPadding : 5, numSeparate : 1, numSeparateDouble : 3},_varLog : function(obj){this._varsLog = {flagTop    : {},numLogMain : {},line0 : [], lineHeight0 : 0,line1 : [], lineHeight1 : 0,line2 : [], lineHeight2 : 0,line3 : [], lineHeight3 : 0,line4 : [], lineHeight4 : 0,line5 : [], lineHeight5 : 0,line6 : [], lineHeight6 : 0};var insDisplay = new Code_Lib_TimeDisplay();var insCheck = new Code_Lib_CheckTime();var numWidth = this._varsGraduation.numWidth + this._staticLog.numPadding * 2;obj.arrDetail = obj.arrDetail.sortBy(function(v,i) {return obj.arrDetail[i].stampRegister;});var arrayStamp = [], arrayHour = [], arrayTerm = [];for (var i=0; i<obj.arrDetail.length; i++) {var cut = obj.arrDetail[i].varsScheduleDetail;if (cut.flagType == 'stamp') arrayStamp.push(obj.arrDetail[i]);else if (cut.flagType == 'loop') arrayHour.push(obj.arrDetail[i]);else if (cut.flagType == 'Term') {var net = (cut.term.stampEnd - cut.term.stampStart) * 1000;if (net > 86400 * 1000) arrayTerm.push(obj.arrDetail[i]);else arrayHour.push(obj.arrDetail[i]);}}arrayHour = arrayHour.sortBy(function(v, i) {var cut = arrayHour[i].varsScheduleDetail;if (cut.flagType == 'loop') {var stampStart = cut.loop.start.numHour * 60 * 60 + cut.loop.start.min * 60;var stampEnd = (cut.loop.end.numHour == 0 && cut.loop.end.min == 0)?24 * 60 * 60 : (cut.loop.end.numHour * 60*60 + cut.loop.end.min * 60);var data = (stampStart - stampEnd) * 1000;return data;} else if (cut.flagType == 'Term') {var data = (cut.term.stampStart - cut.term.stampEnd) * 1000;return data;}});arrayTerm = arrayTerm.sortBy(function(v, i) {var cut = arrayTerm[i].varsScheduleDetail;var data = cut.term.stampStart - cut.term.stampEnd;return data;});var arrayNew1 = arrayTerm.concat(arrayHour);var arrayNew2 = arrayNew1.concat(arrayStamp);obj.arrDetail = [];obj.arrDetail = arrayNew2;for (var i=0; i<obj.arrDetail.length; i++) {var cut = obj.arrDetail[i].varsScheduleDetail;if (cut.flagType == 'stamp') {var objTarget = this.insRoot.insTimeZone.adjustDate({stamp : cut.stamp * 1000});var str = insDisplay.get({flagType : 1,vars     : objTarget});var strTime = str;var numHeight = 0;for (var j = 0; j < obj.arrLine.length; j++) {var strLine = 'hourTime' + j;var omit = this.insCurrent.varsVar.week[strLine];var stamp = objTarget.stamp;var stampWrapStart = omit[0].stamp;var stampWrapEnd = omit[omit.length-1].stamp + 60*60*1000;var flag = insCheck.getStamp({stamp          : stamp,stampWrapStart : stampWrapStart,stampWrapEnd   : stampWrapEnd});if (!flag) continue;var rowData = {flag     : flag,strTime  : strTime,numLeft  : 0,numTop   : 0,numWidth : numWidth,mainTime : null,vars     : this._getLogVars({arr  : this.insCurrent.vars.varsDetail,vars : obj.arrDetail[i]})};for (var k = 0; k < omit.length; k++) {var stamp = objTarget.stamp;var stampWrapStart = omit[k].stamp;var stampWrapEnd = omit[k].stamp + 60 * 60 * 1000;var flag = insCheck.getStamp({stamp          : objTarget.stamp,stampWrapStart : stampWrapStart,stampWrapEnd   : stampWrapEnd});if (!flag) continue;rowData.mainTime = omit[k];var numLeft = 0;for (var p = 0; p <= omit[k].numHour; p++) {var numSeparate = (p % 3 == 0)?this._staticLog.numSeparateDouble : this._staticLog.numSeparate;numLeft += numSeparate;}numLeft += omit[k].numHour * numWidth;rowData.numLeft = numLeft + this._staticLog.numStartLeft;var numTop = this._checkLogTop({arr     : obj.arrDetail,objTime : omit[k]});rowData.numTop = this._staticLog.numHeight * numTop + 1;var str = 'd' + omit[k].numDate + '-' + omit[k].numHour + '-' + numTop;this._varsLog.flagTop[str] = {id : obj.arrDetail[i].id};var strNum = 'n' + omit[k].numDate + '-' +omit[k].numHour;if (this._varsLog.numLogMain[strNum]) this._varsLog.numLogMain[strNum]++;else this._varsLog.numLogMain[strNum] = 1;var str = 'line' + j;this._varsLog[str].push(rowData);break;}}} else if (cut.flagType == 'Term') {var objTargetStart = this.insRoot.insTimeZone.adjustDate({stamp : cut.term.stampStart * 1000});var objTargetEnd = this.insRoot.insTimeZone.adjustDate({stamp : cut.term.stampEnd * 1000});var strStart = insDisplay.get({flagType : 1,vars     : objTargetStart});var strEnd = insDisplay.get({flagType : 1,vars     : objTargetEnd});var strTime = '(' + strStart +' ~ '+ strEnd + ')';var numHeight = 0;for (var j=0; j<obj.arrLine.length; j++) {var strLine = 'hourTime' + j;var omit = this.insCurrent.varsVar.week[strLine];var flagLine = insCheck.getTerm({stampStart     : objTargetStart.stamp,stampEnd       : objTargetEnd.stamp,stampWrapStart : omit[0].stamp,stampWrapEnd   : omit[omit.length - 1].stamp + 60*60*1000});if (!flagLine) continue;var rowData = {flag               : flagLine,flagResizeLeftUse  : 0,flagResizeRightUse : 0,strTime            : strTime,numLeft            : 0,numTop             : 0,numWidth           : 0,mainTime           : null,vars               : this._getLogVars({arr  : this.insCurrent.vars.varsDetail,vars : obj.arrDetail[i]})};var numStart = 0, numEnd = 0,flagStart = 0, flagEnd = 0;for (var k = 0; k < omit.length; k++) {flagStart = insCheck.getTerm({stampStart     : objTargetStart.stamp,stampEnd       : objTargetEnd.stamp,stampWrapStart : omit[k].stamp,stampWrapEnd   : omit[k].stamp + 60 * 60 * 1000});if (!flagStart) continue;numStart = k;break;}for (var k = omit.length - 1; k >= 0; k--) {flagEnd = insCheck.getTerm({stampStart     : objTargetStart.stamp,stampEnd       : objTargetEnd.stamp,stampWrapStart : omit[k].stamp,stampWrapEnd   : omit[k].stamp + 60 * 60 * 1000});if (!flagEnd) continue;numEnd = k;break;}rowData.mainTime = omit[numStart];var numLeft = 0;for (var p = 0; p <= omit[numStart].numHour; p++) {var numSeparate = (p % 3 == 0)? this._staticLog.numSeparateDouble : this._staticLog.numSeparate;numLeft += numSeparate;}numLeft += omit[numStart].numHour * numWidth;rowData.numLeft = numLeft + this._staticLog.numStartLeft;var numRight = 0;for (var p = 0; p <= omit[numEnd].numHour + 1; p++) {var numSeparate = (p % 3 == 0)? this._staticLog.numSeparateDouble : this._staticLog.numSeparate;if ((omit[numEnd].numHour + 1) != p) numRight += numSeparate;}numRight += (omit[numEnd].numHour + 1) * numWidth;rowData.numWidth = numRight - numLeft;var omitWeek = this.insCurrent.varsVar.week.dateTime;var flagWeek = insCheck.getTerm({stampStart     : objTargetStart.stamp,stampEnd       : objTargetEnd.stamp,stampWrapStart : omitWeek[0].stamp,stampWrapEnd   : omitWeek[omitWeek.length - 1].stamp});if ((flagWeek == 'right' || flagWeek == 'all') && flagStart == 'right') {rowData.flagResizeLeftUse = 1;}if ((flagWeek == 'left' || flagWeek == 'all') && flagEnd == 'left') {rowData.flagResizeRightUse = 1;}var flagTop = 0, numTop = 0;for (var k = 0; k < omit.length; k++) {numTop = this._checkLogTopId({arr     : obj.arrDetail,id      : obj.arrDetail[i].id,objTime : omit[k]});if (numTop == 'false') continue;flagTop = 1;break;}if (!flagTop) {numTop = this._checkLogTop({arr     : obj.arrDetail,objTime : omit[numStart]});for (var p = j; p < obj.arrLine.length; p++) {var num = (p == j)? numStart : 0;var strLine = 'hourTime' + p;var omitA = this.insCurrent.varsVar.week[strLine];var flag_ = 0;for (var m = num; m < omitA.length; m++) {var flag__ = insCheck.getTerm({stampStart     : objTargetStart.stamp,stampEnd       : objTargetEnd.stamp,stampWrapStart : omitA[m].stamp,stampWrapEnd   : omitA[m].stamp + 60 * 60 * 1000});if (!flag__) {flag_ = 1;break;}var str = 'd' + omitA[m].numDate + '-' +omitA[m].numHour+ '-' + numTop;this._varsLog.flagTop[str] = {id : obj.arrDetail[i].id};var strNum = 'n' + omitA[m].numDate + '-' + omitA[m].numHour;if (this._varsLog.numLogMain[strNum]) this._varsLog.numLogMain[strNum]++;else this._varsLog.numLogMain[strNum] = 1;}if (!flag_) break;}}rowData.numTop = this._staticLog.numHeight * numTop + 1;var str = 'line' + j;this._varsLog[str].push(rowData);}}else if (cut.flagType == 'loop') {for (var j=0; j<obj.arrLine.length; j++) {var strLine = 'hourTime' + j;var omit = this.insCurrent.varsVar.week[strLine];for (var k = 0; k < omit.length; k++) {objEndWrap = this.insRoot.insTimeZone.adjustDate({stamp : omit[k].stamp + 60 * 60 * 1000});cut.loop.objStartWrap = omit[k];cut.loop.objEndWrap = objEndWrap;cut.loop.insTimeZone = this.insRoot.insTimeZone;var flag = insCheck.getLoop(cut.loop);if (!flag) continue;var stampStart = omit[k].stamp;var stampEnd =  omit[k].stamp + ((cut.loop.end.numHour - cut.loop.start.numHour) * 60 * 60+ (cut.loop.end.min - cut.loop.start.min) * 60) * 1000;var strTime = '';if (stampEnd == omit[k].stamp && stampStart == omit[k].stamp) {strTime = insDisplay.get({flagType : 2,vars     : this.insRoot.insTimeZone.adjustDate({stamp : stampStart })});} else if (stampStart == stampEnd) {strTime = insDisplay.get({flagType : 1,vars     : this.insRoot.insTimeZone.adjustDate({stamp : stampStart })});} else {var strStart = insDisplay.get({flagType : 1,vars     : this.insRoot.insTimeZone.adjustDate({stamp : stampStart })});var strEnd = insDisplay.get({flagType : 1,vars     : this.insRoot.insTimeZone.adjustDate({stamp : stampEnd })});strTime = '('+strStart+' ~ '+strEnd+')';}var rowData = {flag     : 'all',strTime  : strTime,numLeft  : 0,numTop   : 0,numWidth : 0,mainTime : omit[k],vars     : this._getLogVars({arr  : this.insCurrent.vars.varsDetail,vars : obj.arrDetail[i]})};var numStart = cut.loop.start.numHour;var numEnd = (cut.loop.end.numHour == 0 && cut.loop.end.min == 0)? 23 : cut.loop.end.numHour;var numLeft = 0;for (var p = 0; p <= omit[numStart].numHour; p++) {var numSeparate =(p % 3 == 0)? this._staticLog.numSeparateDouble : this._staticLog.numSeparate;numLeft += numSeparate;}numLeft += omit[numStart].numHour * numWidth;rowData.numLeft = numLeft + this._staticLog.numStartLeft;var numRight = 0;for (var p = 0; p <= omit[numEnd].numHour + 1; p++) {var numSeparate =(p % 3 == 0)? this._staticLog.numSeparateDouble : this._staticLog.numSeparate;if ((omit[numEnd].numHour+1) != p) numRight += numSeparate;}numRight += (omit[numEnd].numHour+1) * numWidth;rowData.numWidth = numRight - numLeft;var flagTop = 0, numTop = 0;for (var k = 0; k < omit.length; k++) {numTop = this._checkLogTopId({arr     : obj.arrDetail,id      : obj.arrDetail[i].id,objTime : omit[k]});if (numTop == 'false') continue;flagTop = 1;break;}if (!flagTop) {numTop = this._checkLogTop({arr     : obj.arrDetail,objTime : omit[numStart]});for (var m = numStart; m < omit.length; m++) {var flag = insCheck.getTerm({stampStart     : stampStart,stampEnd       : stampEnd,stampWrapStart : omit[m].stamp,stampWrapEnd   : omit[m].stamp + 60 * 60 * 1000});if (!flag) break;var str = 'd' + omit[m].numDate + '-' + omit[m].numHour + '-' + numTop;this._varsLog.flagTop[str] = {id : obj.arrDetail[i].id};var strNum = 'n' + omit[m].numDate + '-' + omit[m].numHour;if (this._varsLog.numLogMain[strNum]) this._varsLog.numLogMain[strNum]++;else this._varsLog.numLogMain[strNum] = 1;}}rowData.numTop = this._staticLog.numHeight * numTop + 1;var str = 'line' + j;this._varsLog[str].push(rowData);}}}}},_getLogVars : function(obj){for (var i = 0; i < obj.arr.length; i++) {if (obj.arr[i].id == obj.vars.id) return obj.arr[i];}},_checkLogTopId : function(obj){for (var i = 0; i < obj.arr.length; i++) {var str = 'd' + obj.objTime.numDate + '-' + obj.objTime.numHour + '-' + i;if (this._varsLog.flagTop[str]) {if (obj.id == this._varsLog.flagTop[str].id) {return i;}}}return 'false';},_checkLogTop : function(obj){for (var i = 0; i < obj.arr.length; i++) {var str = 'd' + obj.objTime.numDate + '-' + obj.objTime.numHour + '-' + i;if (!this._varsLog.flagTop[str]) {return i;}}},iniBtnSelect : function(){if (!this.insCurrent.varsLogBtn) return;this._setBtnSelect({arr       : this.vars.varsFold,arrSelect : this.insCurrent.varsLogBtn});this.updateVars();},_setBtnSelect : function(obj){for (var i = 0; i < obj.arr.length; i++) {var str = 'line' + i;if (!this._varsLog[str].length) continue;var array = this._varsLog[str];for (var j = 0; j < array.length; j++) {if (!array[j].vars.flagBtnUse) continue;var id = this.idSelf + 'BodyLineLog' + i + '-' + array[j].mainTime.numHour + '-' + array[j].vars.id;$(id).down('.codeLibScheduleTemplateTop', 0).removeClassName('codeLibScheduleSelect');$(id).down('.codeLibScheduleTemplateMiddle', 0).removeClassName('codeLibScheduleSelect');$(id).down('.codeLibScheduleTemplateBottom', 0).removeClassName('codeLibScheduleSelect');for (var k = 0; k < obj.arrSelect.length; k++) {if (array[j].vars.id == obj.arrSelect[k].id) {this._removeBtnSelectLoad({vars : array[j].vars,id   : id});this._removeBtnSelectBold({vars : array[j].vars,arr  : obj.arr});$(id).down('.codeLibScheduleTemplateTop', 0).addClassName('codeLibScheduleSelect');$(id).down('.codeLibScheduleTemplateMiddle', 0).addClassName('codeLibScheduleSelect');$(id).down('.codeLibScheduleTemplateBottom', 0).addClassName('codeLibScheduleSelect');}}}}},_removeBtnSelectLoad : function(obj){if (obj.vars.strClassLoad == '') return;$(obj.id).down('.codeLibScheduleTemplateMiddleIcon', 0).removeClassName(obj.vars.strClassLoad);obj.vars.strClassLoad = '';$(obj.id).down('.codeLibScheduleTemplateMiddleIcon', 0).addClassName(obj.vars.strClass);},_removeBtnSelectBold : function(obj){if (!this.insCurrent.vars.varsStatus.flagBoldUse || !obj.vars.flagBoldNow) return;obj.vars.flagBoldNow = 0;for (var i = 0; i < obj.arr.length; i++) {var str = 'line' + i;if (!this._varsLog[str].length) continue;var array = this._varsLog[str];for (var j = 0; j < array.length; j++) {if (!array[j].vars.flagBtnUse || array[j].vars.id != obj.vars.id) continue;var id = this.idSelf + 'BodyLineLog' + i + '-' +array[j].mainTime.numHour + '-' + array[j].vars.id;if ($(id).down('.codeLibScheduleTemplateMiddleStrTitle', 0)) {var ele = $(id).down('.codeLibScheduleTemplateMiddleStrTitle', 0);ele.removeClassName('codeLibBaseFontBold');}}}},_iniPosition : function(){this.eleInsert.scrollLeft = (-1) * this._varsPosition.numLeft;this._setPosition({numLeft : (-1) * this._varsPosition.numLeft});this._setPositionListener();},_setPosition : function(obj){this.eleGraduationWrap.setStyle({left : (-1 * obj.numLeft) + 'px'});},_setPositionListener : function(){this.insListener.set({flagType15 : 1, bindAsEvent : 1, insCurrent : this, event : 'scroll',strFunc : '_scrollPosition', ele : this.eleInsert, vars : ''});},_varsPosition : {numLeft : 0},_scrollPosition : function(){var numLeft = this.eleInsert.scrollLeft;var numTop = this.eleInsert.scrollTop;this._setPosition({numLeft : numLeft});this.setCake();},_iniCake : function(obj){this._getCake();},_getCakeVarsUpdate : function(obj){obj.arr = this.vars.varsFold;var str = 'left';this._varsPosition.numLeft = obj.data[str];for (var i = 0; i < obj.arr.length; i++) {str = 'flagFoldNow' + i;obj.arr[i].flagFoldNow = obj.data[str];}},_setCakeVars : function(){var obj = {};obj.arr = this.vars.varsFold;var str;str = 'left';this._varsCake[str] = this._getCakeLeft();for (var i = 0; i < obj.arr.length; i++) {str = 'flagFoldNow' + i;this._varsCake[str] = obj.arr[i].flagFoldNow;}},_getCakeLeft : function(){var array = this.eleGraduationWrap.style.left.split('px');return parseFloat(array[0]);},removeWrap : function(){this.eleInsert.innerHTML = '';this.eleInsertGraduation.innerHTML = '';if (this.eleInsertBtnLeft) this.eleInsertBtnLeft.innerHTML = '';if (this.eleInsertBtnRight) this.eleInsertBtnRight.innerHTML = '';}});var Code_Lib_Search = Class.create(Code_Lib_ExtLib,{varsLoad : {"varsWhole":{"num":{"limit":16777215},"str":{"noneTitle":"\u7121\u984c","limit":"\u30c7\u30fc\u30bf\u91cf\u304c\u8a31\u5bb9\u7bc4\u56f2\u3092\u8d85\u3048\u305f\u305f\u3081\u4fdd\u5b58\u3067\u304d\u306a\u304b\u3063\u305f\u3088\u3046\u3067\u3059\u3002"}}},initialize : function(obj){this._extAllot(obj);this._iniVars(obj);this._iniWrap();this._iniForm();this._iniSwitch();this._iniItem();this._iniSort();this._iniMyRecord();},iniReload : function(){this.eventRemove();this.removeWrap();this._iniWrap();this._iniForm();this._iniSwitch();this._iniItem();this._iniSort();this._iniMyRecord();this.setScroll();},iniReloadVars : function(obj){this.updateVars(obj);this._iniCake();this._setVarsForm({arr : this.vars.varsStatus.switchList});this.iniReload();},_iniVars : function(obj){this._extVars(obj);this._iniCake();this._setVarsForm({arr : this.vars.varsStatus.switchList});this._varsMyRecord = null;this.allot({insCurrent : this.insCurrent,from       : '_iniVars'});},updateVars : function(obj){this.vars = (Object.toJSON(obj.vars)).evalJSON();},_updateVarsForm : function(obj){for (var i = 0; i < obj.arr.length; i++) {var strVars = 'vars' + obj.arr[i].capitalize();this.vars.varsDetail[strVars][0].value = this.vars.varsStatus.flagNow;}var strVars = 'vars' + this.vars.varsStatus.flagNow.capitalize();this.vars.varsDetail.varsDetail = this.vars.varsDetail[strVars];},_setVarsForm : function(obj){var objData = (Object.toJSON(this.vars.varsDetail.templateDetail)).evalJSON();for (var i = 0; i < obj.arr.length; i++) {var array = [];var str = obj.arr[i];var strTarget = str + 'Target';array.push(objData.switchTarget);array.push(objData[strTarget]);array.push(objData.jsonSort);array.push(objData.myRecord);var strVars = 'vars' + str.capitalize();this.vars.varsDetail[strVars] = array;}this._updateVarsForm({arr : this.vars.varsStatus.switchList});},_iniCake : function(){this._getCake();},_getCakeVarsUpdate : function(obj){var str = 'flagNow';this.vars.varsStatus.flagNow = obj.data[str];},_setCakeVars : function(obj){var str = 'flagNow';this._varsCake[str] = this.vars.varsStatus.flagNow;},_iniSwitch : function(){if (!this.vars.varsStatus.flagSwitchUse) return;this._setSwitch();},insSwitch : null,_setSwitch : function(){this.insSwitch = new Code_Lib_FormSelect({eleInsert  : $(this.insForm.idSelf + 'SwitchTarget'),insRoot    : this.insRoot,insCurrent : this,allot      : this._getSwitchAllot()});},_getSwitchAllot : function(){var allot = function(obj){var insCurrent = obj.insCurrent;if (obj.from == 'eventRemove') insCurrent.insSwitch.stopListener();else {insCurrent.eventSwitch({arr : insCurrent.vars.varsStatus.switchList, vars : obj.vars});}};return allot;},eventSwitch : function(obj){this.vars.varsStatus.flagNow = obj.vars;this._updateVarsForm({arr : this.vars.varsStatus.switchList});this.setCake();this.iniReload();},_iniWrap : function(){this._extWrap();},_iniMyRecord : function(){if (!this.vars.varsStatus.flagMyRecordUse) {this.eleWrap.down('.codeLibFormWrap', 3).hide();return;}this._setMyRecordWrap();this._setMyRecord();},eleMyRecordWrap : null,_setMyRecordWrap : function(){var eleWrap = $(document.createElement('div'));eleWrap.addClassName('codeLibSearchMyRecordWrap');this.eleWrap.down('.codeLibFormWrap', 3).insert(eleWrap);this.eleMyRecordWrap = eleWrap;this.eleMyRecordWrap.setStyle({width : this._getContentWidth() + 'px'});if (!this.vars.varsMyRecord.varsFormList.varsDetail.length) {this.eleWrap.down('.codeLibFormWrap', 3).hide();this.insMyRecord = null;return;}else this.eleWrap.down('.codeLibFormWrap', 3).show();},insMyRecord : null,_setMyRecord : function(){this.insMyRecord = new Code_Lib_FormList({eleInsert  : this.eleMyRecordWrap,insRoot    : this.insRoot,insCurrent : this.insSelf,idSelf     : this.idSelf + 'MyRecord',allot      : this._getMyRecordAllot(),vars       : this.vars.varsMyRecord.varsFormList});},_getMyRecordAllot : function(){var allot = function(obj){var insCurrent = obj.insCurrent;if (obj.from == 'eventLayout') {obj.eleWidth.setStyle({width : insCurrent._getContentWidth() + 'px'});insCurrent.insMyRecord.iniReload();}else if (obj.from == 'eventRemove') insCurrent.insMyRecord.stopListener();else if (obj.from.match( /^_mousedownRemove|_mouseupSort|_blurForm$/ )) {insCurrent._updateMyRecord({arr : insCurrent.insMyRecord.vars.varsDetail});return 1;}else if (obj.from == '_mousedownBtn') {insCurrent._mousedownMyRecord({vars : obj.vars,arr  : insCurrent.vars.varsStatus.switchList});}};return allot;},_updateMyRecord : function(obj){for (var i = 0; i < obj.arr.length; i++) {obj.arr[i].id = i;}this.vars.varsMyRecord.varsFormList.varsDetail = obj.arr;this.rebuildMyRecord();},iniAutoSearch : function(obj){this.vars.varsStatus.flagNow = obj.flagNow;if (this.vars.varsStatus.flagNow == 'item') {this.vars.varsSearchItem.varsDetail = obj.varsData;} else {var str = 'vars' + this.vars.varsStatus.flagNow.capitalize();this.vars.varsDetail[str][1].value = obj.varsData;}this._updateVarsForm({arr : this.vars.varsStatus.switchList});this.setCake();this.iniReload();this.insForm.hideBtnBottom();this._eventFormBtn();},_mousedownMyRecord : function(obj){this.vars.varsStatus.flagNow = obj.vars.vars.flagNow;if (this.vars.varsStatus.flagNow == 'item') {this.vars.varsSearchItem.varsDetail = obj.vars.vars.varsItem;} else {var str = 'vars' + this.vars.varsStatus.flagNow.capitalize();this.vars.varsDetail[str][1].value = obj.vars.vars.varsValue;}this.vars.varsSearchSort.varsDetail = obj.vars.vars.varsSort;this._updateVarsForm({arr : this.vars.varsStatus.switchList});this.setCake();this.iniReload();},_varsMyRecord : null,_getMyRecord : function(){var objData = (Object.toJSON(this.vars.varsMyRecord.varsFormList.templateDetail)).evalJSON();var strValue = this._checkMyRecordName({arr : this.vars.varsMyRecord.varsFormList.varsDetail});objData.id = new Date().getTime();if (this.vars.varsStatus.flagNow == 'item') {this.insItem.updateVarsValue();objData.value = strValue;objData.vars = {flagNow  : this.vars.varsStatus.flagNow,varsItem : this.insItem.vars.varsDetail,varsSort : this.insSort.getValue()};} else {this._getValueForm({arr : this.insForm.vars.varsDetail});objData.value = (this.insForm.vars.varsDetail[1].value == '')?strValue : this.insForm.vars.varsDetail[1].value;objData.vars = {flagNow   : this.vars.varsStatus.flagNow,varsValue : this.insForm.vars.varsDetail[1].value,varsSort  : this.insSort.getValue()};}var jsonData = Object.toJSON(objData.vars);if (this._varsMyRecord != jsonData) {this.vars.varsMyRecord.varsFormList.varsDetail.unshift(objData);this._varsMyRecord = jsonData;}var arr = this.vars.varsMyRecord.varsFormList.varsDetail;for (var i = 1; i < arr.length; i++) {arr[i].id = i;arr[i].numSort = i;}return this.vars.varsMyRecord.varsFormList.varsDetail;},_checkMyRecordName : function(obj){if (!obj.arr.length) return this.varsLoad.varsWhole.str.noneTitle;var data = {};for (var i = 0, j = 1; i < obj.arr.length; i++, j++) {if (obj.arr[i].value == this.varsLoad.varsWhole.str.noneTitle) continue;var array = obj.arr[i].value.split('-');if (array[0] != this.varsLoad.varsWhole.str.noneTitle) continue;var str = 'id'+ array[1];data[str] = 1;}for (var i = 0, j = 1; i < obj.arr.length; i++, j++) {var str = 'id'+ j;if (!data[str]) {var data = this.varsLoad.varsWhole.str.noneTitle + '-' + j;return data;}}var str = this.varsLoad.varsWhole.str.noneTitle + '-' + obj.arr.length;return str;},rebuildMyRecord : function(){if (this.insMyRecord) {this.insMyRecord.stopListener();this.eleMyRecordWrap.remove();}this._iniCake();this._iniMyRecord();},getValue : function(){var varsSort = this.insSort.getValue();var arrayItem;this._getValueForm({arr : this.insForm.vars.varsDetail});if (this.vars.varsStatus.flagNow == 'item') {var varsItem = this.insItem.getValue();arrayItem = this._setValueItem({arr : varsItem});} else if (this.vars.varsStatus.flagNow == 'tag') {arrayItem = this._setValueForm({arr : this.vars.varsStatus.idColumnTagList});} else if (this.vars.varsStatus.flagNow == 'word') {arrayItem = this._setValueForm({arr : this.vars.varsStatus.idColumnWordList});}return {arrWhere : (arrayItem.length)? arrayItem : [],arrOrder : {strColumn : varsSort.itemValue,flagDesc  : (varsSort.sortValue == 'desc')? 1 : 0}};},_getValueForm : function(obj){for (var i = 0; i < obj.arr.length; i++) {if ($(this.insForm.idSelf + obj.arr[i].id)) obj.arr[i].value = $(this.insForm.idSelf + obj.arr[i].id).value;}},_setValueForm : function(obj){var str = this.insForm.vars.varsDetail[1].value;str = str.replace(RegExp(this.insRoot.vars.varsSystem.str.space, "g"), ' ');str = str.replace(RegExp(',', "g"), this.insRoot.vars.varsSystem.str.comma);var arrayValue = str.split(' ');var array = [];for (var i = 0; i < arrayValue.length; i++) {if (arrayValue[i] == '') continue;for (var j = 0; j < obj.arr.length; j++) {var data;if (this.vars.varsStatus.flagNow == 'tag') {data = {flagType      : 'tag',strColumn     : obj.arr[j],flagCondition : 'like',value         : ' ' + arrayValue[i] + ' '};} else {data = {flagType      : 'str',strColumn     : obj.arr[j],flagCondition : 'like',value         : arrayValue[i]};}array.push(data);}}return array;},_setValueItem : function(obj){var array = [];for (var i = 0; i < obj.arr.length; i++) {if (obj.arr[i].restValue == '') continue;var data;if (obj.arr[i].flagType == 'tag') {data = {flagType      : 'tag',strColumn     : obj.arr[i].firstValue,flagCondition : obj.arr[i].secondValue,value         : ' ' + obj.arr[i].restValue + ' '};} else if (obj.arr[i].flagType.match(/^comma/)) {str = obj.arr[i].restValue;str = str.replace(RegExp(',', "g"), this.insRoot.vars.varsSystem.str.comma);obj.arr[i].restValue = str;if (obj.arr[i].flagType.match(/^comma$/)) {data = {flagType      : 'comma',strColumn     : obj.arr[i].firstValue,flagCondition : obj.arr[i].secondValue,value         : ',' + obj.arr[i].restValue + ','};} else {data = {flagType      : obj.arr[i].flagType,strColumn     : obj.arr[i].firstValue,flagCondition : obj.arr[i].secondValue,value         : ',' + obj.arr[i].restValue + ','};}} else {data = {flagType      : obj.arr[i].flagType,strColumn     : obj.arr[i].firstValue,flagCondition : obj.arr[i].secondValue,value         : obj.arr[i].restValue};}array.push(data);}return array;},_iniForm : function(){this._setForm();},varsForm : null, insForm : null,_setForm : function(){this.insForm = new Code_Lib_Form({eleInsertBtnLeft  : this.eleInsertBtnLeft,eleInsertBtnRight : this.eleInsertBtnRight,eleInsert         : this.eleWrap,insRoot           : this.insRoot,insCurrent        : this.insSelf,idSelf            : this.idSelf + 'Form',allot             : this._getFormAllot(),vars              : this.vars.varsDetail});},_getFormAllot : function(){var allot = function(obj){var insCurrent = obj.insCurrent;if (obj.from == 'eventLayout') {insCurrent.insForm.allot({insCurrent : insCurrent.insForm,from       : '_getFormAllot-' + obj.from});} else if (obj.from == 'eventRemove') {insCurrent.insForm.stopListener();} else if (obj.from == 'eventBtnBottom') {var idTarget = obj.vars.vars.vars.idTarget;if (idTarget == 'eventFormBtn') insCurrent._eventFormBtn();else if (idTarget == 'eventFormBtnSave') insCurrent._eventFormBtnSave();else if (idTarget == 'eventFormBtnDelete') insCurrent._eventFormBtnDelete();} else {obj.insCurrent = insCurrent.insCurrent;obj.from = '_getFormAllot-' + obj.from;insCurrent.allot(obj);}};return allot;},_eventFormBtn : function(){this.allot({insCurrent : this.insCurrent,from       : 'eventBtn',vars       : this.getValue()});},_eventFormBtnSave : function(){var vars = this._getMyRecord();var len = (Object.toJSON(vars)).length;if (len >= this.varsLoad.varsWhole.num.limit) {alert(this.varsLoad.varsWhole.str.limit);return;}this.allot({insCurrent : this.insCurrent,from       : 'eventBtnSave',vars       : vars});},_eventFormBtnDelete : function(){this.allot({insCurrent : this.insCurrent,from       : 'eventBtnDelete',vars       : []});},showBtnBottom : function(){this.insForm.showBtnBottom();},_iniSort : function(){this._setSort();},insSort : null,_setSort : function(){var eleInsert = (this.vars.varsStatus.flagNow == 'item')?  this.eleWrap.down('.codeLibFormContent', 1): this.eleWrap.down('.codeLibFormContent', 0);eleInsert.setStyle({width : this._getContentWidth() + 'px'});this.insSort = new Code_Lib_SearchSort({eleInsert  : eleInsert,insRoot    : this.insRoot,insCurrent : this.insSelf,idSelf     : this.idSelf + 'Sort',allot      : this._getSortAllot(),vars       : this.vars.varsSearchSort});},_getSortAllot : function(){var allot = function(obj){var insCurrent = obj.insCurrent;if (obj.from == 'eventLayout') {obj.eleWidth.setStyle({width : insCurrent._getContentWidth() + 'px'});insCurrent.insSort.iniReload();} else if (obj.from == 'eventRemove') {insCurrent.insSort.stopListener();}};return allot;},_iniItem : function(){if (this.vars.varsStatus.flagNow != 'item') return;this._setItem();},insItem : null,_setItem : function(){this.eleWrap.down('.codeLibFormContent', 0).setStyle({width : this._getContentWidth() + 'px'});this.insItem = new Code_Lib_SearchItem({eleInsert  : this.eleWrap.down('.codeLibFormContent', 0),insRoot    : this.insRoot,insCurrent : this.insSelf,idSelf     : this.idSelf + 'Item',allot      : this._getItemAllot(),vars       : this.vars.varsSearchItem});},_getItemAllot : function(){var allot = function(obj){var insCurrent = obj.insCurrent;if (obj.from == 'eventLayout') {obj.eleWidth.setStyle({width : insCurrent._getContentWidth() + 'px'});insCurrent.insItem.iniReload();} else if (obj.from == 'eventRemove') {insCurrent.insItem.stopListener();}};return allot;},_staticContentForm : { numMarginLeft : 30, numBar : 17},_getContentWidth : function(){var array = (this.eleInsert).style.width.split('px');var width = parseFloat(array[0]) - this._staticContentForm.numMarginLeft;return  width - this._staticContentForm.numBar;},eventRemove : function(){if (this.insForm) this.insForm.allot({insCurrent : this, from : 'eventRemove'});if (this.insSwitch) this.insSwitch.allot({insCurrent : this, from : 'eventRemove'});if (this.insItem && this.vars.varsStatus.flagNow == 'item') {this.insItem.allot({insCurrent : this, from : 'eventRemove'});}if (this.insSort) this.insSort.allot({insCurrent : this, from : 'eventRemove'});if (this.insMyRecord) this.insMyRecord.allot({insCurrent : this, from : 'eventRemove'});},eventLayout : function(){if (this.insItem && this.vars.varsStatus.flagNow == 'item') {this.insItem.allot({insCurrent : this, from : 'eventLayout', eleWidth : this.eleWrap.down('.codeLibFormContent', 0)});}if (this.insSort) {this.insSort.allot({insCurrent : this,from       : 'eventLayout',eleWidth   : (this.vars.varsStatus.flagNow == 'item')?  this.eleWrap.down('.codeLibFormContent', 1): this.eleWrap.down('.codeLibFormContent', 0)});}if (this.insMyRecord) {this.insMyRecord.allot({insCurrent : this,from       : 'eventLayout',eleWidth   : this.eleWrap.down('.codeLibSearchMyRecordWrap', 0)});}}});var Code_Lib_SearchItem = Class.create(Code_Lib_Search,{varsLoad : {"varsWhole":{"num":{"limit":5},"str":{"limit":"\u9805\u76ee\u6570\u304c\u8a31\u5bb9\u7bc4\u56f2\uff08\u6700\u5927\u6570\uff1a<%replace%>\uff09\u3092\u8d85\u3048\u305f\u305f\u3081\u30ea\u30af\u30a8\u30b9\u30c8\u304c\u62d2\u5426\u3055\u308c\u305f\u3088\u3046\u3067\u3059\u3002","noneTitle":"\u7121\u984c","remove":"\u524a\u9664","add":"\u8ffd\u52a0","copy":"\u30b3\u30d4\u30fc"}}},initialize : function(obj){this._extAllot(obj);this._iniVars(obj);this._iniListener();this._iniWrap();this._iniAdd();this._iniLine();this._iniRemove();this._iniCopy();},iniReload : function(obj){this.updateVarsValue(obj);this.stopListener();this.removeWrap();this._iniWrap();this._iniAdd();this._iniLine();this._iniRemove();this._iniCopy();},_iniVars : function(obj){this._extVars(obj);},_iniWrap : function(){this._extWrap();this.eleWrap.style.width = this._getWrapWidth() + 'px';},updateVarsValue : function(obj){this._updateVarsValueChild({arr         : this.vars.varsDetail,flagThrough : (obj)? obj.flagThrough : 0});},_updateVarsValueChild : function(obj){if (obj.flagThrough) return;for (var i = 0; i < obj.arr.length; i++) {if ($(this.idSelf + 'LineFirst' + obj.arr[i].id)) {obj.arr[i].firstValue = $(this.idSelf + 'LineFirst' + obj.arr[i].id).value;}if ($(this.idSelf + 'LineSecond' + obj.arr[i].id)) {obj.arr[i].secondValue = $(this.idSelf + 'LineSecond' + obj.arr[i].id).value;}if ($(this.idSelf + 'LineRest' + obj.arr[i].id)) {obj.arr[i].restValue = $(this.idSelf + 'LineRest' + obj.arr[i].id).value;}}},_iniLine : function(){this._setLineWrap();this._setLine({arr : this.vars.varsDetail});},eleWrapLine : null,_setLineWrap : function(){var ele = $(document.createElement('div'));ele.addClassName('codeLibSearchItemLineWrap');this.eleWrap.insert(ele);this.eleWrapLine = ele;},_staticLine : {numIdle : 10, numMargin : 5, numBlock : 16, numFirstOption : 20},_setLine : function(obj){for (var i = 0; i < obj.arr.length; i++) {var eleForm = $(document.createElement('form'));this.eleWrapLine.insert(eleForm);var eleLine = $(document.createElement('div'));eleLine.unselectable = 'on';eleLine.addClassName('codeLibSearchItemLine');eleLine.id = this.idSelf + 'Line' + obj.arr[i].id;eleLine.setStyle({width : this._getWrapWidth() + 'px'});eleLine.setStyle({marginTop : (this._staticLine.numMargin) + 'px'});eleForm.insert(eleLine);if (this.vars.varsStatus.flagCopyUse) {var ele = $(document.createElement('span'));ele.addClassName('codeLibSearchItemCopy');ele.addClassName('codeLibBaseCursorPointer');eleLine.insert(ele);}if (this.vars.varsStatus.flagRemoveUse) {var ele = $(document.createElement('span'));ele.addClassName('codeLibSearchItemRemove');ele.addClassName('codeLibBaseCursorPointer');eleLine.insert(ele);}var width = this._getLineWidth();var widthFirst = Math.floor(width * 0.3);var widthSecond = Math.floor(width * 0.3);var numBlock = 0;var widthRest = width - widthFirst - widthSecond - numBlock;var eleFirst;eleFirst = $(document.createElement('select'));eleFirst.addClassName('codeLibSearchItemFirst');eleFirst.addClassName('codeLibBaseMarginLeftFive');eleFirst.value = obj.arr[i].firstValue;eleFirst.id = this.idSelf + 'LineFirst' + obj.arr[i].id;eleFirst.style.width = widthFirst + 'px';var optionFirst = (Object.toJSON(this.vars.templateDetail.firstOption)).evalJSON();this._setLineSelect({flag      : 'first',arr       : optionFirst,now       : obj.arr[i].firstValue,eleInsert : eleFirst,vars      : obj.arr[i]});eleLine.insert(eleFirst);var eleRest;if (obj.arr[i].flagOption) {eleRest = $(document.createElement('select'));var str = obj.arr[i].flagOption;if (str == 'window') {} else {var optionRest = (Object.toJSON(this.vars.templateDetail.restOption[str])).evalJSON();this._setLineSelect({flag      : 'rest',arr       : optionRest,now       : obj.arr[i].restValue,eleInsert : eleRest,vars      : obj.arr[i]});if (obj.arr[i].restValue) {eleRest.value = obj.arr[i].restValue;} else {if (optionRest.length) {eleRest.value = this._setLineSelectValue({arr : optionRest,});} else {eleRest.value = obj.arr[i].restValue;}}}} else {eleRest = $(document.createElement('input'));eleRest.type = 'text';eleRest.value = obj.arr[i].restValue;}eleRest.addClassName('codeLibSearchItemRest');eleRest.addClassName('codeLibBaseMarginLeftFive');eleRest.id = this.idSelf + 'LineRest' + obj.arr[i].id;eleRest.style.width = widthRest + 'px';eleLine.insert(eleRest);if (this.vars.varsStatus.flagUse && obj.arr[i].flagType == 'stamp') {this._iniCalender({id        : this.idSelf + 'Line' + obj.arr[i].id,eleInsert : eleRest});} else if (obj.arr[i].flagType == 'num') {this._iniCheck({id        : this.idSelf + 'Line' + obj.arr[i].id,eleInsert : eleRest});}var eleSecond;eleSecond = $(document.createElement('select'));eleSecond.addClassName('codeLibSearchItemSecond');eleSecond.addClassName('codeLibBaseMarginLeftFive');eleSecond.value = obj.arr[i].secondValue;eleSecond.id = this.idSelf + 'LineSecond' + obj.arr[i].id;eleSecond.style.width = widthSecond + 'px';var optionSecond;var str = obj.arr[i].flagType + 'Option';optionSecond = (Object.toJSON(this.vars.templateDetail[str])).evalJSON();this._setLineSelect({flag      : 'second',arr       : optionSecond,now       : obj.arr[i].secondValue,eleInsert : eleSecond,vars      : obj.arr[i]});eleLine.insert(eleSecond);}},_setLineCalender : function(obj){for (var i = 0; i < obj.arr.length; i++) {var ele = $(document.createElement('option'));ele.value = obj.arr[i].value;if (obj.now == obj.arr[i].value) ele.selected = 'true';ele.insert(obj.arr[i].title);obj.eleInsert.insert(ele);}if (obj.flag == 'first') {this.insListener.set({bindAsEvent : 0, insCurrent : this, event : 'change',strFunc : '_updateLineSelectFirstVar',ele : obj.eleInsert, vars : {vars : obj.vars}});}},_setLineSelect : function(obj){for (var i = 0; i < obj.arr.length; i++) {var ele = $(document.createElement('option'));ele.value = obj.arr[i].value;if (obj.now == obj.arr[i].value) ele.selected = 'true';if (obj.arr[i].flagDisabled)  ele.disabled = true;ele.insert(obj.arr[i].strTitle);obj.eleInsert.insert(ele);}if (obj.flag == 'first') {this.insListener.set({bindAsEvent : 0, insCurrent : this, event : 'change', strFunc : '_updateLineSelectFirstVar',ele : obj.eleInsert, vars : {vars : obj.vars}});}},_setLineSelectValue : function(obj){for (var i = 0; i < obj.arr.length; i++) {if (obj.arr[i].flagDisabled) continue;return obj.arr[i].value;}},_updateLineSelectFirstVar : function(obj){this._updateLineSelectFirstVarChild({arr  : this.vars.varsDetail,vars : obj.vars});this.iniReload({flagThrough : 1});},_updateLineSelectFirstVarChild : function(obj){for (var i = 0; i < obj.arr.length; i++) {if (obj.vars.id == obj.arr[i].id) {obj.arr[i].firstValue = $(this.idSelf + 'LineFirst' + obj.arr[i].id).value;var array = obj.arr[i].firstValue.split('-');obj.arr[i].flagType = array[0];obj.arr[i].flagOption = (array[2])? array[2] : '';if (obj.arr[i].flagType == 'str') {obj.arr[i].secondValue = this.vars.templateDetail.strOption[0];} else if (obj.arr[i].flagType == 'stamp') {obj.arr[i].secondValue = this.vars.templateDetail.stampOption[0];} else if (obj.arr[i].flagType == 'num') {obj.arr[i].secondValue = this.vars.templateDetail.numOption[0];}$(this.idSelf + 'LineRest' + obj.arr[i].id).value = '';obj.arr[i].restValue = '';return;}}},_getLineWidth : function(){var width = this._getWrapWidth();if (this.vars.varsStatus.flagAddUse) {width = width - this._staticLine.numMargin - this._staticLine.numBlock;}if (this.vars.varsStatus.flagRemoveUse) {width = width - this._staticLine.numMargin - this._staticLine.numBlock;}width -= this._staticLine.numMargin * 2;width -= this._staticLine.numIdle;return width;},insCalender : null,_iniCalender : function(obj){var insCalender = new Code_Lib_CalenderFormNavi({eleInsert  : obj.eleInsert,insRoot    : this.insRoot,insCurrent : this.insSelf,idSelf     : obj.id + 'Calender',allot      : function(){},vars       : this.vars.varsCalender});this._setListener({ins : insCalender});},insCheck : null,_iniCheck : function(obj){var insCheck = new Code_Lib_FormFocus({eleInsert  : obj.eleInsert,insRoot    : this.insRoot,insCurrent : this,idSelf     : obj.id + 'Check',allot      : this._getCheckAllot()});this._setListener({ins : insCheck});},_getCheckAllot : function(){var allot = function(obj){var insCurrent = obj.insCurrent;if (obj.from == '_blurCheck') return insCurrent._setCheck({value : obj.vars});};return allot;},_setCheck : function(obj){var insEscape = new Code_Lib_Escape();var insCheck = new Code_Lib_CheckValue();obj.value = insEscape.get({flagType : 'strToNum',data     : obj.value});var flag = insCheck.checkValueWord({flagType : 'num',value    : obj.value});if (flag) return '';else return obj.value;},_iniListener : function(){this._extListener();},_removeBlock : function(obj){var num = 0;for (var i = 0; i < obj.arr.length; i++) {if (obj.arr[i].id == obj.idAttest) num = i;}obj.arr = obj.arr.slice(0, num).concat(obj.arr.slice((num + 1), obj.arr.length));return obj.arr;},_iniRemove : function(){if (!this.vars.varsStatus.flagRemoveUse) return;this._setRemoveListener({arr : this.vars.varsDetail});},_setRemoveListener : function(obj){for (var i = 0; i < obj.arr.length; i++) {this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'mousedown',strFunc : '_mousedownRemove',ele : $(this.idSelf + 'Line' + obj.arr[i].id).down('.codeLibSearchItemRemove',0),vars : {vars : obj.arr[i]}});}},_mousedownRemove : function(evt, obj) {if (obj) evt.stop();else obj = evt;this._updateRemove({vars : obj.vars});this.iniReload();},_updateRemove : function(obj){this.vars.varsDetail = this._removeBlock({arr      : this.vars.varsDetail,idAttest : obj.vars.id});},_iniCopy : function(){if (!this.vars.varsStatus.flagCopyUse) return;this._setCopyListener({arr : this.vars.varsDetail});},_setCopyListener : function(obj){for (var i = 0; i < obj.arr.length; i++) {this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'mousedown', strFunc : '_mousedownCopy',ele : $(this.idSelf + 'Line' + obj.arr[i].id).down('.codeLibSearchItemCopy', 0),vars : {vars : obj.arr[i]}});}},_mousedownCopy : function(evt, obj) {if (obj) evt.stop();else obj = evt;if (this.vars.varsDetail.length >= this.varsLoad.varsWhole.num.limit) {var varsData = (Object.toJSON(this.varsLoad.varsWhole.str.limit)).evalJSON();varsData = varsData.replace(/<%replace%>/, this.varsLoad.varsWhole.num.limit);alert(varsData);return;}this._updateCopy({vars : obj.vars});this.iniReload();},_updateCopy : function(obj){this.updateVarsValue();this._updateCopyChild({arr  : this.vars.varsDetail,vars : obj.vars});},_updateCopyChild : function(obj){var data;for (var i = 0; i < obj.arr.length; i++) {if (obj.vars.id == obj.arr[i].id) {data = (Object.toJSON(obj.arr[i])).evalJSON();data.id = new Date().getTime();break;}}this.vars.varsDetail.unshift(data);},_iniAdd : function(){this._setAddWrap();this._setAdd();},eleWrapAdd : null,_setAddWrap : function(){var ele = $(document.createElement('div'));ele.addClassName('codeLibSearchItemAddWrap');this.eleWrap.insert(ele);this.eleWrapAdd = ele;this.eleWrapAdd.style.width = this._getLineWidth() + 'px';this.eleWrapAdd.style.height = '20px';},_setAdd : function(){var insBtn = new Code_Lib_Btn();insBtn.iniBtn({eleInsert  : this.eleWrapAdd,id         : this.idSelf + 'BtnAdd',strFunc    : '_mousedownAdd',strTitle   : this.varsLoad.varsWhole.str.add,insCurrent : this.insSelf});this._setListener({ins : insBtn});},_mousedownAdd : function(){if (this.vars.varsDetail.length >= this.varsLoad.varsWhole.num.limit) {var varsData = (Object.toJSON(this.varsLoad.varsWhole.str.limit)).evalJSON();varsData = varsData.replace(/<%replace%>/, this.varsLoad.varsWhole.num.limit);alert(varsData);return;}this._updateAdd();this.iniReload();},_updateAdd : function(obj){var data = (Object.toJSON(this.vars.templateDetail.varsDetail)).evalJSON();data.id = new Date().getTime();this.vars.varsDetail.unshift(data);},getValue : function(){this.updateVarsValue();this._checkValue({arr : this.vars.varsDetail});this._blurValue({arr : this.vars.varsDetail});return this._varsValue;},_varsValue : null,_blurValue : function(obj){for (var i = 0; i < obj.arr.length; i++) {if ($(this.idSelf + 'LineFirst' + obj.arr[i].id)) $(this.idSelf + 'LineFirst' + obj.arr[i].id).blur();if ($(this.idSelf + 'LineSecond' + obj.arr[i].id)) $(this.idSelf + 'LineSecond' + obj.arr[i].id).blur();if ($(this.idSelf + 'LineRest' + obj.arr[i].id)) $(this.idSelf + 'LineRest' + obj.arr[i].id).blur();}},_checkValue : function(obj){this._varsValue = [];var insEscape = new Code_Lib_Escape();var insCheck = new Code_Lib_CheckValue();for (var i = 0; i < obj.arr.length; i++) {var flag;var rowData = (Object.toJSON(obj.arr[i])).evalJSON();var array = obj.arr[i].firstValue.split('-');rowData.firstValue = array[1];if (obj.arr[i].flagType == 'stamp') {flag = insCheck.checkValueFormat({flagType  : 'date',flagArray : 0,value     : obj.arr[i].restValue});if (flag) obj.arr[i].restValue = '';else {var array = obj.arr[i].restValue.split('/');var objTime = this.insRoot.insTimeZone.adjustTime({stamp : new Date(array[0], parseFloat(array[1]) - 1 , array[2]).getTime()});if (array[0] < 1970 ) {flag = 1;obj.arr[i].restValue = '';}else rowData.restValue = objTime.stampServer;}} else if (obj.arr[i].flagType == 'num') {obj.arr[i].restValue = insEscape.get({flagType : 'strToNum',data     : obj.arr[i].restValue});flag = insCheck.checkValueWord({flagType : 'num',value    : obj.arr[i].restValue});if (flag) obj.arr[i].restValue = '';else obj.arr[i].restValue = parseFloat(obj.arr[i].restValue);}if (!flag) this._varsValue.push(rowData);}}});var Code_Lib_SearchSort = Class.create(Code_Lib_Search,{initialize : function(obj){this._extAllot(obj);this._iniVars(obj);this._iniListener();this._iniWrap();this._iniLine();},iniReload : function(){this.updateVarsValue();this.stopListener();this.removeWrap();this._iniWrap();this._iniLine();},_iniVars : function(obj){this._extVars(obj);},_iniLine : function(){this._setLineWrap();this._setLine();},eleWrapLine : null,_setLineWrap : function(){var ele = $(document.createElement('div'));ele.addClassName('codeLibSearchSortLineWrap');this.eleWrap.insert(ele);this.eleWrapLine = ele;},_staticLine : {numIdle : 10, numMargin : 5},_setLine : function(){var eleForm = $(document.createElement('form'));this.eleWrapLine.insert(eleForm);var eleLine = $(document.createElement('div'));eleLine.unselectable = 'on';eleLine.addClassName('codeLibSearchSortLine');eleLine.id = this.idSelf + 'Line' + this.vars.varsDetail.id;eleLine.setStyle({width     : this._getWrapWidth() + 'px',marginTop : (this._staticLine.numMargin) + 'px'});eleForm.insert(eleLine);var width = this._getLineWidth();var widthItem = Math.floor(width * 0.5);var widthSort = Math.floor(width * 0.5);var eleItem;eleItem = $(document.createElement('select'));eleItem.addClassName('codeLibSearchSortItem');eleItem.value = this.vars.varsDetail.itemValue;eleItem.id = this.idSelf + 'LineItem' + this.vars.varsDetail.id;eleItem.style.width = widthItem + 'px';this._setLineSelect({arr       : this.vars.itemOption,now       : this.vars.varsDetail.itemValue,eleInsert : eleItem});eleLine.insert(eleItem);eleSort = $(document.createElement('select'));eleSort.addClassName('codeLibSearchSortSort');eleSort.addClassName('codeLibBaseMarginLeftFive');eleSort.value = this.vars.varsDetail.sortValue;eleSort.id = this.idSelf + 'LineSort' + this.vars.varsDetail.id;eleSort.style.width = widthSort + 'px';this._setLineSelect({arr       : this.vars.sortOption,now       : this.vars.varsDetail.sortValue,eleInsert : eleSort});eleLine.insert(eleSort);},_setLineSelect : function(obj){for (var i = 0; i < obj.arr.length; i++) {var ele = $(document.createElement('option'));ele.value = obj.arr[i].value;if (obj.now == obj.arr[i].value) ele.selected = 'true';ele.insert(obj.arr[i].strTitle);obj.eleInsert.insert(ele);}},_getLineWidth : function(){var width = this._getWrapWidth();width -= this._staticLine.numMargin * 2;width -= this._staticLine.numIdle;return width;},_iniListener : function(){this._extListener();},_iniWrap : function(){this._extWrap();this.eleWrap.style.width = this._getWrapWidth() + 'px';},updateVarsValue : function(){if ($(this.idSelf + 'LineItem' + this.vars.varsDetail.id)) {var id = this.idSelf + 'LineItem' + this.vars.varsDetail.id;this.vars.varsDetail.itemValue = $(id).value;}if ($(this.idSelf + 'LineSort' + this.vars.varsDetail.id)) {var id = this.idSelf + 'LineSort' + this.vars.varsDetail.id;this.vars.varsDetail.sortValue = $(id).value;}},getValue : function(){this.updateVarsValue();return this.vars.varsDetail;}});var Code_Lib_Space = Class.create(Code_Lib_ExtLib,{initialize : function(obj){this._extAllot(obj);this._iniVars(obj);this._iniWrap();},iniReload : function(obj){this._updateWrapStyle();this._updateWrapContent(obj);},getGraphData : function(){if (!this.insChart) {return [];}return this.insChart.getGraphData();},_iniVars : function(obj){this._extVars(obj);this.eleScroll = obj.eleScroll;},_iniWrap : function(){this._extWrap();this.eleWrap.addClassName('codeLibSpaceWrap');if (this.vars.varsStatus.numPadding) {this.eleWrap.style.padding = this.vars.varsStatus.numPadding + 'px';}if (this.vars.varsStatus.numMargin) {this.eleWrap.style.margin = this.vars.varsStatus.numMargin + 'px';}if (this.vars.varsStatus.strBorderColor) {this.eleWrap.setStyle({borderColor : this.vars.varsStatus.strBorderColor,borderStyle : 'solid',borderWidth : '2px',});}if (this.vars.varsStatus.flagOverflowXUse) {this.eleWrap.setStyle({overflowX : 'auto'});}if (this.vars.varsStatus.flagOverflowYUse) {this.eleWrap.setStyle({overflowY : 'auto'});}var numWidth = this._getWrapWidth();if (this.vars.varsStatus.unitWidth == '%') {numWidth *= this.vars.varsStatus.numWidth/100;}this.eleWrap.style.width = numWidth + 'px';if (this.vars.varsStatus.numHeight) {this.eleWrap.style.height = this.vars.varsStatus.numHeight + 'px';}if (this.vars.varsStatus.flagChartUse) {this.insChart = new Proto.Chart(this.eleWrap, this.vars.varsDetail.varsData, this.vars.varsDetail.varsOptions, this.eleScroll, this.insRoot);} else {this.eleWrap.insert(this.vars.varsDetail.strHtml);}},updateChartStyle : function(obj){varsOptions = obj.varsOptions;if (!varsOptions) {varsOptions = this.vars.varsDetail.varsOptions;} else {this.vars.varsDetail.varsOptions = obj.varsOptions;}varsData = obj.varsData;if (!varsData) {varsData = this.vars.varsDetail.varsData;} else {this.vars.varsDetail.varsData = obj.varsData;}this.insChart = new Proto.Chart(this.eleWrap, varsData, varsOptions, this.insRoot);},_updateWrapContent : function(obj){this.vars = (Object.toJSON(obj.vars)).evalJSON();this.eleWrap.innerHTML = '';if (this.vars.varsStatus.flagChartUse) {this.eleWrap.innerHTML = '';this.insChart = new Proto.Chart(this.eleWrap, this.vars.varsDetail.varsData, this.vars.varsDetail.varsOptions, this.eleScroll, this.insRoot);} else {this.eleWrap.insert(this.vars.varsDetail.strHtml);}},_updateWrapStyle : function(){var numWidth = this._getWrapWidth();if (this.vars.varsStatus.unitWidth == '%') {numWidth *= this.vars.varsStatus.numWidth/100;}this.eleWrap.style.width = numWidth + 'px';this.eleWrap.style.height = this.vars.varsStatus.numHeight + 'px';}});var Code_Lib_Table = Class.create(Code_Lib_ExtLib,{varsLoad : {"strSelect":"\u9078\u629e"},iniLoad : function(obj){this._extAllot(obj);this._iniVars(obj);this._iniListener();this._iniWrap();this._iniFormat();this._iniColumn();this._iniLine();this._iniBtn();this._iniMove();this._iniPage();this._iniBtnBottom();this._iniBtnSelect();this._iniKey();this._iniPosition();},iniReload : function(){this.stopListener();this.removeWrap();this.removeBtnBottom();this._iniWrap();this._iniFormat();this._iniCake();this._iniColumn();this._iniLine();this._iniBtn();this._iniMove();this._iniPage();this._iniBtnBottom();this._iniBtnSelect();this._iniKey();this._iniPosition();},iniReloadPage : function(){this.stopListenerPage();this.removeWrap();this._iniWrap();this._iniFormat();this._iniCake();this._iniColumn();this._iniLine();this._iniBtn();this._iniMove();this._iniBtnSelect();this._iniKey();this._iniPosition();},_getLineWrapWidth : function(){var array = this.eleInsert.style.width.split('px');var data = parseFloat(array[0]);return data;},_getLineWrapHeight : function(){var array = this.eleInsert.style.height.split('px');var num = this._staticPosition.numHeight_ + this._staticPosition.numBottom;if (this.vars.varsStatus.flagInnerPageUse) { num += this._staticPosition.numHeight_; }var data = parseFloat(array[0]) - num;return data;},_iniPosition : function(){this.eleInsert.setStyle({overflow : 'hidden',position : 'relative'});this._iniPositionColumn();this._iniPositionLine();},elePositionLine : null,_iniPositionLine : function(){var ele = $(document.createElement('div'));ele.setStyle({position : 'absolute',overflow : 'auto',top      : this._staticPosition.numHeight_ + 'px',width    : (this._getLineWrapWidth()) + 'px',height   : this._getLineWrapHeight() + 'px'});ele.insert(this.eleWrapLine);this.eleWrap.insert(ele);this.elePositionLine = ele;this.insListener.set({flagType15 : 1, bindAsEvent : 1, insCurrent : this, event : 'scroll',strFunc : '_scrollPosition', ele : ele, vars : ''});},_getPositionElePositionColumn : function(){var array = this.elePositionColumn.style.width.split('px');var data = parseFloat(array[0]);return data;},_scrollPosition : function(){var numLeft = this.elePositionLine.scrollLeft;var numTop = this.elePositionLine.scrollTop;this.elePositionColumn.setStyle({width : (this._getPositionElePositionColumn() + numLeft) + 'px',left  : (-1 * numLeft) + 'px'});},_staticPosition : {numHeight : 16, numHeight_ : 25, numBottom : 4, numTop : 4, numMargin : 5},elePositionColumn : null,_iniPositionColumn : function(){var array = this.eleWrap.style.width.split('px');this.eleWrapColumn.setStyle({width : (array[0]) + 'px'});var ele = $(document.createElement('div'));ele.setStyle({position   : 'absolute',overflow   : 'hidden',marginLeft : this._staticPosition.numMargin + 'px',left       : '0px',top        : this._staticPosition.numTop + 'px',width      : this._getLineWrapWidth() + 'px',height     : this._staticPosition.numHeight + 'px'});ele.insert(this.eleWrapColumn);this.eleWrap.insert(ele);this.elePositionColumn = ele;},_iniListener : function(){this._extListener();},_iniVars : function(obj){this._extVars(obj);this._iniCake();this._iniVarsBtn();this.allot({insCurrent : this.insCurrent,from       : '_iniVars'});},updateVars : function(){this.allot({insCurrent : this.insCurrent,from       : 'updateVars',vars   : {vars       : this.vars,varsSelect : this._varsBtn}});},_varsResize : {},_setResizeListener : function(obj){this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'mousemove',strFunc : '_mousemoveResize', ele : document, vars : ''});this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'mouseup',strFunc : '_mouseupResize', ele : document, vars : ''});},_mousedownResize : function(evt,obj) {if (obj) evt.stop();else obj = evt;this._setResizeListener();this._removeCursorColumn({arr : this.vars.varsColumn});var max = 0;var after = {};var flagLast = this._checkResizeSortLast({arr : this.vars.varsColumn,id  : obj.vars.id});if (!flagLast) {after = this._checkResizeSortAfter({arr : this.vars.varsColumn,id  : obj.vars.id});max = evt.pointerX() + after.numWidth - after.numWidthMin;}this._varsResize = {};this._varsResize = {flag         : 1,ele          : evt.element(),varsAfter    : after,vars         : obj.vars,numLeft      : evt.pointerX(),numLeftMin   : evt.pointerX() - obj.vars.numWidth + obj.vars.numWidthMin,numLeftMax   : max,mouseLeft    : evt.pointerX(),naviBarXLeft : evt.pointerX(),eleBarX      : null,eleLock      : null};this._setResizeNavi({evt : evt});},_checkResizeSortLast : function(obj){var num = obj.arr.length - 1;for (var i = num; i >= 0; i--) {if (!obj.arr[i].flagCheckNow) continue;if (obj.arr[i].id == obj.id) return 1;else  return 0;}},_checkResizeSortAfter : function(obj){var flag = 0;for (var i = 0; i < obj.arr.length; i++) {if (!obj.arr[i].flagCheckNow) continue;if (flag) {return obj.arr[i];} else {if (obj.arr[i].id == obj.id) flag = 1;}}},_setResizeNavi : function(obj){var ele = $(document.createElement('span'));var viewSize = document.viewport.getDimensions();var scroll = document.viewport.getScrollOffsets();var zIndex = this.insRoot.setZIndex();var eleLock = $(document.createElement('div'));eleLock.addClassName('lockView');eleLock.setStyle({zIndex : zIndex});$(this.insRoot.vars.varsSystem.id.root).insert(eleLock);this._varsResize.eleLock = eleLock;ele.setStyle({height : viewSize.height + scroll.top + 'px',top    : '0px',left   : obj.evt.pointerX() + 'px',zIndex : zIndex});ele.addClassName('codeLibTableNaviX');this._varsResize.eleBarX = ele;$(this.insRoot.vars.varsSystem.id.root).insert(ele);},_getResizeLeftMin : function(evt){var data = (this._varsResize.numLeftMin > evt.pointerX()) ? 1  : 0;return  data;},_getResizeLeftMax : function(evt){var data = (this._varsResize.numLeftMax < evt.pointerX()) ? 1  : 0 ;return data;},_mousemoveResize : function(evt, obj){if (!this._varsResize.flag) return;if (obj) evt.stop();else obj = evt;if (this._getResizeLeftMin(evt)) {this._varsResize.eleBarX.setStyle({left : this._varsResize.numLeftMin + 'px',top  : '0px'});this._varsResize.naviBarXLeft = this._varsResize.numLeftMin;} else {this._varsResize.eleBarX.setStyle({left : evt.pointerX() + 'px',top  : '0px'});this._varsResize.naviBarXLeft = evt.pointerX();}},_getResizeCalc : function(){var cut = this._varsResize;var difX = cut.naviBarXLeft - cut.numLeft;cut.vars.numWidth += difX;cut.vars.numWidth = (cut.vars.numWidthMin > cut.vars.numWidth)?  cut.vars.numWidthMin: cut.vars.numWidth;},_updateResize : function(obj){for (var i = 0; i < obj.arr.length; i++) {if (obj.arr[i].id == this._varsResize.vars.id) {obj.arr[i].numWidth = this._varsResize.vars.numWidth;}}},_mouseupResize : function(evt, obj){if (obj) evt.stop();else obj = evt;if (!this._varsResize.flag) return;this._getResizeCalc();this._updateResize({arr : this.vars.varsColumn});this.setCake();this._varsResize.eleBarX.remove();this._varsResize.eleLock.remove();this._varsResize = {};this.iniReload({from : '_mouseupResize'});},_iniCake : function(){this._getCake();},_getCakeVarsUpdate : function(obj){var str = 'statusFlagSortColumnLineNow';obj.arr = this.vars.varsColumn;this.vars.varsStatus.flagSortColumnLineNow = obj.data[str];for (var i = 0; i < obj.arr.length; i++) {str = 'columnWidth' + obj.arr[i].id ;if (obj.data[str]) {obj.arr[i].numWidth  = obj.data[str];str = 'columnSort' + obj.arr[i].id ;obj.arr[i].numSort  = obj.data[str];str = 'columnFlagCheckNow' + obj.arr[i].id ;obj.arr[i].flagCheckNow  = obj.data[str];str = 'columnFlagSortColumnLineNow' + obj.arr[i].id ;obj.arr[i].flagSortColumnLineNow  = obj.data[str];}}},_setCakeVars : function(obj){var str = 'statusFlagSortColumnLineNow';this._varsCake[str] = this.vars.varsStatus.flagSortColumnLineNow;obj = {};obj.arr = this.vars.varsColumn;for (var i = 0; i < obj.arr.length; i++) {str = 'columnWidth' + obj.arr[i].id ;this._varsCake[str] = obj.arr[i].numWidth;str = 'columnSort' + obj.arr[i].id ;this._varsCake[str] = obj.arr[i].numSort;str = 'columnFlagCheckNow' + obj.arr[i].id ;this._varsCake[str] = obj.arr[i].flagCheckNow;str = 'columnFlagSortColumnLineNow' + obj.arr[i].id ;this._varsCake[str] = obj.arr[i].flagSortColumnLineNow;}},_iniBtnBottom : function(){this._extBtnBottom();},_iniPage : function(){this._extPage();},_setBlockColumn : function(obj){var num = 0;for (var i = 0; i < obj.arr.length; i++) {if (obj.arr[i].id == obj.idTarget) num = i;}var array = [obj.block];obj.arr = obj.arr.slice(0, num).concat(array.concat(obj.arr.slice((num), obj.arr.length)));return obj.arr;},_iniMove : function(){this._varMove();},_varsMoveScroll : null,_varMove : function(){var numTopMin = $(this.idSelf).up('.codeLibWindow',0).offsetTop+ this.insFormat.eleTemplate.body.offsetTop+ this._staticMove.numAreaNone;var numTopMax = numTopMin+ this.insFormat.eleTemplate.body.offsetHeight- this._staticMove.numArea * 2;var numLeftMin = $(this.idSelf).up('.codeLibWindow',0).offsetLeft+ this.insFormat.eleTemplate.body.offsetLeft+ this._staticMove.numAreaNone;var numLeftMax = numLeftMin+ this.eleInsert.offsetWidth- this._staticMove.numArea * 2;this._varsMoveScroll = {numTopMin  : numTopMin,numTopMax  : numTopMax,numLeftMin : numLeftMin,numLeftMax : numLeftMax};},_setMoveListener : function(){this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'mousemove',strFunc : '_mousemoveMove', ele : document, vars : ''});this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'mouseup',strFunc : '_mouseupMove', ele : document, vars : ''});},_varsMove : {},_mousedownMove : function(evt,obj) {if (obj) evt.stop();else obj = evt;this._setMoveListener({arr : this.vars.varsDetail});this._removeCursorLine({arr : this.vars.varsDetail});this._varsMove = {};this._varsMove = {flag     : 1,ele      : evt.element(),vars     : obj.vars,varsOver : null,eleNavi  : null};this._setMoveNavi({vars : obj.vars,evt  : evt});this.allot({insCurrent : this.insCurrent,from       : '_mousedownMove',vars       : obj.vars});},_mouseoverMove : function(obj){if (!this._varsMove.flag || !this.vars.varsStatus.flagMoveSortUse) return;this._varsMove.varsOver = obj.vars;var id = this.idSelf + 'Line' + obj.vars.id;$(id).next('.codeLibTableLineSort', 0).addClassName('codeLibTableMoveSortOver');},_mouseoutMove : function(obj){if (!this._varsMove.flag || !this.vars.varsStatus.flagMoveSortUse) return;this._varsMove.varsOver = '';var id = this.idSelf + 'Line' + obj.vars.id;$(id).next('.codeLibTableLineSort',0).removeClassName('codeLibTableMoveSortOver');},_staticMove : {numArea : 25, numAreaNone : 16, numNaviLeft : 15, numNaviTop : 5, numPosShift : 5},_setMoveNavi : function(obj){var zIndex = this.insRoot.setZIndex();var ele = $(this.idSelf + 'Line' + obj.vars.id).cloneNode(true);$(this.insRoot.vars.varsSystem.id.root).insert(ele);this._varsMove.eleNavi = ele;ele.addClassName('codeLibTableNavi');ele.removeClassName('codeLibTableLineBtnOver');ele.removeClassName('codeLibTableBtnSelect');ele.setStyle({top    : (obj.evt.pointerY() + this._staticMove.numNaviTop) + 'px',left   : (obj.evt.pointerX() + this._staticMove.numNaviLeft) + 'px',zIndex : zIndex});},_mousemoveMove : function(evt, obj) {if (!this._varsMove.flag) return;if (obj) evt.stop();else obj = evt;if (evt.pointerY() < this._varsMoveScroll.numTopMin) {this.elePositionLine.scrollTop -= this._staticMove.numPosShift;} else if (evt.pointerY() > this._varsMoveScroll.numTopMax) {this.elePositionLine.scrollTop += this._staticMove.numPosShift;}if (evt.pointerX() < this._varsMoveScroll.numLeftMin) {this.elePositionLine.scrollLeft -= this._staticMove.numPosShift;} else if (evt.pointerX() > this._varsMoveScroll.numLeftMax) {this.elePositionLine.scrollLeft += this._staticMove.numPosShift;}this._varsMove.eleNavi.setStyle({top  : (evt.pointerY() + this._staticMove.numNaviTop) + 'px',left : (evt.pointerX() + this._staticMove.numNaviLeft) + 'px'});},_updateMove : function(){this._varsBlock = {};this._getBlock({arr      : this.vars.varsDetail,idTarget : this._varsMove.vars.id});this.vars.varsDetail = this._removeBlock({arr      : this.vars.varsDetail,idTarget : this._varsMove.vars.id});this.vars.varsDetail = this._setBlockMove({arr      : this.vars.varsDetail,idTarget : this._varsMove.varsOver.id,block    : this._varsBlock});this._updateMoveSort({arr : this.vars.varsDetail});},_updateMoveSort : function(obj){for (var i = 0; i < obj.arr.length; i++) {obj.arr[i].numSort = i;}},_mouseupMove : function(evt,obj) {if (obj) evt.stop();else obj = evt;if (!this._varsMove.flag) return;if (this._varsMove.varsOver) {if (this._varsMove.vars.id != this._varsMove.varsOver.id) this._updateMove();}this.setCake();this._varsMove.eleNavi.remove();this._varsMove = {};this._setCursorLine({arr : this.vars.varsDetail});},_mousedownMenu : function(evt) {evt.stop();this._setMenu();},insMenu : null,_setMenu : function(){this.vars.varsContext = this._setMenuVars({arr  : (Object.toJSON(this.vars.varsColumn)).evalJSON(),vars : this.vars.varsContext});this.insMenu = new Code_Lib_Context({insRoot    : this.insRoot,eleInsert  : $(this.insRoot.vars.varsSystem.id.root),insCurrent : this.insSelf,idSelf     : this.idSelf + 'Menu',allot      : this._getMenuAllot(),vars       : this.vars.varsContext});},_setMenuVars : function(obj){obj.vars.varsStatus.numTop = $(this.idSelf).up('.codeLibWindow', 0).offsetTop + this.eleInsert.offsetTop;obj.vars.varsStatus.numLeft = $(this.idSelf).up('.codeLibWindow', 0).offsetLeft + this.eleInsert.offsetLeft;for (var i = 0; i < obj.arr.length; i++) {if (obj.arr[i].flagType == 'checkbox') {obj.arr[i].strTitle = this.varsLoad.strSelect;}}obj.vars.varsDetail = obj.arr;return obj.vars;},_getMenuAllot : function(){var allot = function(obj) {var insCurrent = obj.insCurrent;if (obj.from == '_mousedownLine') {insCurrent.setCake();} else if (obj.from == 'getVars') {insCurrent._updateMenuColumn({vars : obj.vars});}};return allot;},_updateMenuColumn : function(obj){this.vars.varsColumn = obj.vars;this.setCake();this.iniReload();},_mousedownSortColumnLine : function(evt, obj){if (obj) evt.stop();else obj = evt;this.vars.varsStatus.flagSortColumnLineNow = obj.vars.id;this.vars.varsColumn = this._updateSortColumnLineColumn({arr  : this.vars.varsColumn,vars : obj.vars});if (this.vars.varsStatus.flagPageUse) {this.allot({insCurrent : this.insCurrent,from       : '_mousedownSortColumnLine',vars       : obj.vars});this.setCake();return;}this.vars.varsDetail = this._updateSortColumnLineDetail({arr : this.vars.varsDetail});this.setCake();this.iniReload({from : '_mousedownSortColumnLine'});},_updateSortColumnLineColumn : function(obj){var arrection = null;for (var i = 0; i < obj.arr.length; i++) {if (obj.arr[i].id == obj.vars.id) {if (!obj.arr[i].flagSortColumnLineNow) obj.arr[i].flagSortColumnLineNow = 1;else  obj.arr[i].flagSortColumnLineNow = 0;arrection = obj.arr[i].flagSortColumnLineNow;}else obj.arr[i].flagSortColumnLineNow = 0;}return obj.arr;},_updateSortColumnLineDetail : function(obj){var arrection = this._checkSortColumnLineDirection({arr : this.vars.varsColumn});var str = this.vars.varsStatus.flagSortColumnLineNow;if (!arrection) {obj.arr = obj.arr.sortBy(function(v, i) {return v.varsColumnDetail[str];});} else {obj.arr = obj.arr.sortBy(function(v, i) {return v.varsColumnDetail[str] * (-1);});}return obj.arr;},_checkSortColumnLineDirection : function(obj){for (var i = 0; i < obj.arr.length; i++) {if (obj.arr[i].id == this.vars.varsStatus.flagSortColumnLineNow) {return obj.arr[i].flagSortColumnLineNow;}}},_setSortColumnListener : function(){this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'mousemove',strFunc : '_mousemoveSortColumn', ele : document, vars : ''});this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'mouseup',strFunc : '_mouseupSortColumn', ele : document, vars : ''});},_varsSortColumn : {},_mousedownSortColumn : function(evt, obj) {if (obj) evt.stop();else obj = evt;this._setSortColumnListener();this._removeCursorColumn({arr : this.vars.varsColumn});this._varsSortColumn = {};this._varsSortColumn = {flag     : 1,ele      : evt.element(),eleNavi  : null,vars     : obj.vars,varsOver : null,varsNext : this._checkSortColumnNext({arr  : this.vars.varsColumn,vars : obj.vars})};this._setSortColumnNavi({vars : obj.vars,evt      : evt});},_checkSortColumnNext : function(obj){for (var i = 0; i < obj.arr.length; i++) {if (obj.arr[i].id == obj.vars.id) {var flag = i + 1;if ( flag < obj.arr.length) {return obj.arr[flag];}return null;}}},_mouseoverSortColumn : function(obj){if (!this._varsSortColumn.flag) return;this._varsSortColumn.varsOver = obj.vars;if (this._varsSortColumn.vars.id == this._varsSortColumn.varsOver.id) return;if (this._varsSortColumn.varsNext&& this._varsSortColumn.varsNext.id == this._varsSortColumn.varsOver.id) return;var ele = $(this.idSelf + 'ColumnBox' + obj.vars.id).down('.codeLibTableColumnBoxSortColumn', 0);ele.addClassName('codeLibTableSortColumnOver');},_mouseoutSortColumn : function(obj){if (!this._varsSortColumn.flag) return;this._varsSortColumn.varsOver = '';var ele = $(this.idSelf + 'ColumnBox' + obj.vars.id).down('.codeLibTableColumnBoxSortColumn', 0);ele.removeClassName('codeLibTableSortColumnOver');},_staticSortColumn : {numNaviLeft : 15, numNaviTop : 5},_setSortColumnNavi : function(obj){var zIndex = this.insRoot.setZIndex();var ele = $(this.idSelf + 'ColumnBox' + obj.vars.id).cloneNode(true);$(this.insRoot.vars.varsSystem.id.root).insert(ele);this._varsSortColumn.eleNavi = ele;ele.addClassName('codeLibTableNavi');ele.setStyle({left   : (obj.evt.pointerX() + this._staticSortColumn.numNaviLeft) + 'px',top    : (obj.evt.pointerY() + this._staticSortColumn.numNaviTop) + 'px',zIndex : zIndex});},_mousemoveSortColumn : function(evt, obj) {if (!this._varsSortColumn.flag) return;if (obj) evt.stop();else obj = evt;if (evt.pointerY() < this._varsMoveScroll.numTopMin) {this.elePositionLine.scrollTop -= this._staticMove.numPosShift;} else if (evt.pointerY() > this._varsMoveScroll.numTopMax) {this.elePositionLine.scrollTop += this._staticMove.numPosShift;}if (evt.pointerX() < this._varsMoveScroll.numLeftMin) {this.elePositionLine.scrollLeft -= this._staticMove.numPosShift;} else if (evt.pointerX() > this._varsMoveScroll.numLeftMax) {this.elePositionLine.scrollLeft += this._staticMove.numPosShift;}this._varsSortColumn.eleNavi.setStyle({top  : (evt.pointerY() + this._staticSortColumn.numNaviTop) + 'px',left : (evt.pointerX() + this._staticSortColumn.numNaviLeft) + 'px'});},_updateSortColumn : function(){this._varsBlock = {};this._getBlock({arr      : this.vars.varsColumn,idTarget : this._varsSortColumn.vars.id});this.vars.varsColumn = this._removeBlock({arr      : this.vars.varsColumn,idTarget : this._varsSortColumn.vars.id});this.vars.varsColumn = this._setBlockColumn({arr    : this.vars.varsColumn,idTarget : this._varsSortColumn.varsOver.id,block  : this._varsBlock});this._updateSortColumnSort({arr : this.vars.varsColumn});},_updateSortColumnSort : function(obj){for (var i = 0; i < obj.arr.length; i++) {obj.arr[i].numSort = i;}},_mouseupSortColumn : function(evt,obj) {if (obj) evt.stop();else obj = evt;if (!this._varsSortColumn.flag) return;if (this._varsSortColumn.varsOver) {if (this._varsSortColumn.vars.id != this._varsSortColumn.varsOver.id) {if (this._varsSortColumn.varsNext&& this._varsSortColumn.varsNext.id == this._varsSortColumn.varsOver.id) {} else this._updateSortColumn();}}this.setCake();this._varsSortColumn.eleNavi.remove();this._varsSortColumn = {};this.iniReload({from : '_mouseupSortColumn'});},_removeCursorColumn : function(obj){for (var i = 0; i < obj.arr.length; i++) {if (!obj.arr[i].flagCheckNow) continue;if (obj.arr[i].flagSortColumnLineUse && this.vars.varsStatus.flagSortColumnLineUse) {var ele = $(this.idSelf + 'ColumnBox' + obj.arr[i].id).down('.codeLibTableColumnBoxSortLine', 0);ele.removeClassName('codeLibBaseCursorPointer');}if (obj.arr[i].flagType == 'checkbox' && obj.arr[i].flagAllCheckbox) {var ele  = $(this.idSelf + 'ColumnBox' + obj.arr[i].id).down('.codeLibTableColumnBoxCheckbox', 0);ele.removeClassName('codeLibBaseCursorPointer');ele = $(this.idSelf + 'ColumnBox' + obj.arr[i].id).down('.codeLibTableColumnBoxCheckbox', 0);ele.addClassName('codeLibBaseCursorDefault');}if (this.vars.varsStatus.flagSortColumnUse) {var ele = $(this.idSelf + 'ColumnBox' + obj.arr[i].id).down('.codeLibTableColumnBoxTitle', 0);ele.removeClassName('codeLibBaseCursorMove');ele = $(this.idSelf + 'ColumnBox' + obj.arr[i].id).down('.codeLibTableColumnBoxTitle', 0);ele.addClassName('codeLibBaseCursorDefault');}if (this.vars.varsStatus.flagResizeUse) {var ele = $(this.idSelf + 'ColumnBox' + obj.arr[i].id).down('.codeLibTableColumnBoxResize', 0);ele.removeClassName('codeLibBaseCursorColResize');}}},_removeCursorLine : function(obj){if (!this.vars.varsStatus.flagMoveUse) return;for (var i = 0; i < obj.arr.length; i++) {if (!obj.arr[i].flagMoveUse) continue;var ele = $(this.idSelf + 'Line' + obj.arr[i].id).down('.codeLibTableMove', 0);ele.removeClassName('codeLibBaseCursorMove');}},_setCursorLine : function(obj){if (!this.vars.varsStatus.flagMoveUse) return;for (var i = 0; i < obj.arr.length; i++) {if (!obj.arr[i].flagMoveUse) continue;var ele = $(this.idSelf + 'Line' + obj.arr[i].id).down('.codeLibTableMove', 0);ele.addClassName('codeLibBaseCursorMove');}},_dblclickTitle : function(evt, obj){evt.stop();this.allot({insCurrent : this.insCurrent,from       : '_dblclickTitle',vars       : {idColumn : obj.idColumn,vars     : obj.vars}});},_mouseoverTitle : function(obj){obj.ele.addClassName('codeLibTableLineTitleOver');},_mouseoutTitle : function(obj){obj.ele.removeClassName('codeLibTableLineTitleOver');},_varsKey : {shiftkey : null, ctrlkey : null},_iniKey : function(){this._setKeyLisener();},_setKeyLisener : function(){this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'keydown',strFunc : '_keydownKey', ele : document, vars : ''});this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'keyup',strFunc : '_keyupKey', ele : document, vars : ''});},_keydownKey : function(evt) {this._varsKey = {shiftkey : evt.shiftKey,ctrlkey  : evt.ctrlKey};},_keyupKey : function(evt) {this._resetKey();},_resetKey : function(){this._varsKey = {shiftkey : null,ctrlkey  : null};},_varsBtn : null,_iniVarsBtn : function(){this._varsBtn = [];},setVarsBtn : function(obj){this._varsBtn = obj.vars;},_iniBtn : function(){this._setBtnListener();},_setBtnListener : function(){this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'mousedown',strFunc : '_mousedownBtnRemove', ele : this.eleInsert, vars : ''});},_mousedownBtnRemove : function(evt){evt.stop();if (!this._varsBtn.length) return;this._varsBtn = [];this.updateVars();this._removeBtnSelect({arr : this.vars.varsDetail});},_dblclickBtn : function(evt, obj){evt.stop();this.allot({insCurrent : this.insCurrent,from       : '_dblclickBtn',vars       : obj.vars});},_mousedownBtn : function(evt, obj){if (obj) evt.stop();else obj = evt;this._removeBtnSelect({arr:this.vars.varsDetail});if (!this._varsBtn.length) {if (this._varsKey.shiftkey && this.vars.varsStatus.flagKeyBtnUse) {this._varBtnShiftkey({idStart  : this.vars.varsDetail[0].id,vars     : obj.vars});}else this._varsBtn.push(obj.vars);} else {if (this._varsKey.shiftkey && this.vars.varsStatus.flagKeyBtnUse) {this._varBtnShiftkey({idStart  : this._varsBtn[0].id,vars     : obj.vars});} else if (this._varsKey.ctrlkey && this.vars.varsStatus.flagKeyBtnUse) {this._resetKey();var flag = this._checkBtnSelectCtrlkey({arr : this._varsBtn,id  : obj.vars.id});if (flag) {this._varsBtn = this._varBtnSelectRemove({arr : this._varsBtn,id  : obj.vars.id});} else {this._varsBtn.push(obj.vars);}} else {this._resetKey();this._varsBtn = [];this._varsBtn.push(obj.vars);}}if (obj.vars.flagCheckboxUse) {this._updateLineCheckboxSelect({idTarget  : obj.vars.id,arrColumn : this.vars.varsColumn,arr       : this.vars.varsDetail});}this._setBtnSelect({arr       : this.vars.varsDetail,arrSelect : this._varsBtn,});this._setBtnSelect({arr       : this.vars.varsDetail,arrSelect : this._varsBtn,});this.updateVars();this.setCake();this.allot({insCurrent : this.insCurrent,from       : '_mousedownBtn',flag       : evt.isLeftClick(),vars       : this._varsBtn});},_updateLineCheckboxSelect : function(obj){for (var i = 0; i < obj.arr.length; i++) {if (!obj.arr[i].flagCheckboxUse) continue;if (obj.arr[i].id != obj.idTarget) continue;for (var j = 0; j < obj.arrColumn.length; j++) {if (!obj.arrColumn[j].flagCheckNow) continue;if ($(this.idSelf + 'Line' + obj.arr[i].id + 'Checkbox' + obj.arrColumn[j].id)) {if (obj.arr[i].flagCheckboxNow) {obj.arr[i].flagCheckboxNow = 0;$(this.idSelf + 'Line' + obj.arr[i].id + 'Checkbox' + obj.arrColumn[j].id).checked = false;} else {obj.arr[i].flagCheckboxNow = 1;$(this.idSelf + 'Line' + obj.arr[i].id + 'Checkbox' + obj.arrColumn[j].id).checked = true;}}}}},_varBtnShiftkey : function(obj){this._resetKey();var flag = this._checkBtnSelectShiftkey({arr      : this.vars.varsDetail,idFirst  : obj.idStart,idSecond : obj.vars.id});if (flag == 0) {this._varsBtn = [];this._varsBtn.push(obj.vars);} else if (flag < 0) {var idStart = obj.idStart;this._varsBtn = [];this._varsBtn = this._varBtnSelectShiftkey({arr     : this.vars.varsDetail,idStart : idStart,idEnd   : obj.vars.id});} else if (flag > 0) {var idStart = this._varsBtn[0].id;this._varsBtn = [];this._varsBtn = this._varBtnSelectShiftkeyReverse({arr     : this.vars.varsDetail,idStart : idStart,idEnd   : obj.vars.id});}},_mouseoverBtn : function(obj){$(this.idSelf + 'Line' + obj.vars.id).addClassName('codeLibTableLineBtnOver');},_mouseoutBtn : function(obj){$(this.idSelf + 'Line' + obj.vars.id).removeClassName('codeLibTableLineBtnOver');},_iniBtnSelect : function(){if (!this._varsBtn.length) return;this._removeBtnSelect({arr : this.vars.varsDetail});this._setBtnSelect({arr       : this.vars.varsDetail,arrSelect : this._varsBtn,});},_varBtnSelect : function(obj){for (var i = 0; i < obj.arr.length; i++) {if (!obj.arr[i].flagBtnUse) continue;for (var j = 0; j < obj.arrSelect.length; j++) {if (obj.arr[i].id == obj.arrSelect[j].id) {$(this.idSelf + 'Line' + obj.arr[i].id).addClassName('codeLibTableBtnSelect');break;}}}},_checkBtnSelectCtrlkey : function(obj){for (var i = 0; i < obj.arr.length; i++) {if (obj.arr[i].id == obj.id) return 1;}},_checkBtnSelectShiftkey : function(obj){var numFirst;var numSecond;for (var i = 0; i < obj.arr.length; i++) {if (!obj.arr[i].flagBtnUse) continue;if (obj.arr[i].id == obj.idFirst) numFirst = i;if (obj.arr[i].id == obj.idSecond) numSecond = i;}return numFirst - numSecond;},_varBtnSelectShiftkey : function(obj){var array = [];var flag;for (var i = 0; i < obj.arr.length; i++) {if (!obj.arr[i].flagBtnUse) continue;if (obj.arr[i].id == obj.idStart) flag = 1;if (flag) array.push(obj.arr[i]);if (obj.arr[i].id == obj.idEnd) return array;}},_varBtnSelectShiftkeyReverse : function(obj){var array = [];var flag;for (var i = obj.arr.length - 1; i >= 0; i--) {if (!obj.arr[i].flagBtnUse) continue;if (obj.arr[i].id == obj.idStart) flag = 1;if (flag) array.push(obj.arr[i]);if (obj.arr[i].id == obj.idEnd) return array;}},_varBtnSelectRemove : function(obj){var num = 0;for (var i = 0; i < obj.arr.length; i++) {if (obj.arr[i].id == obj.id) {num = i;}}obj.arr.splice(num, 1);return obj.arr;},_setBtnSelect : function(obj){for (var i = 0; i < obj.arr.length; i++) {if (!obj.arr[i].flagBtnUse) continue;for (var j = 0; j < obj.arrSelect.length; j++) {if (obj.arr[i].id == obj.arrSelect[j].id) {this._removeBtnSelectLoad({vars : obj.arr[i]});this._removeBtnSelectBold({arr  : this.vars.varsColumn,vars : obj.arr[i]});$(this.idSelf + 'Line' + obj.arr[i].id).addClassName('codeLibTableBtnSelect');}}}},removeBtnSelect : function(){this._varsBtn = [];this._removeBtnSelect({arr : this.vars.varsDetail});},_removeBtnSelect : function(obj){for (var i = 0; i < obj.arr.length; i++) {if (!obj.arr[i].flagBtnUse) continue;$(this.idSelf + 'Line' + obj.arr[i].id).removeClassName('codeLibTableBtnSelect');}},_removeBtnSelectLoad : function(obj){if (obj.vars.strClassLoad == '') return;$(this.idSelf + 'Line' + obj.vars.id).down('.codeLibTableLineImg', 0).removeClassName(obj.vars.strClassLoad);obj.vars.strClassLoad = '';$(this.idSelf + 'Line' + obj.vars.id).down('.codeLibTableLineImg', 0).addClassName(obj.vars.strClass);this.updateVars();},_removeBtnSelectBold : function(obj){if (!this.vars.varsStatus.flagBoldUse || !obj.vars.flagBoldNow) return;obj.vars.flagBoldNow = 0;this.updateVars();for (var i = 0; i < obj.arr.length; i++) {if (!obj.arr[i].flagCheckNow) continue;if ($(this.idSelf + 'Line' + obj.vars.id).down('.codeLibTableLineTitle', i)) {var ele = $(this.idSelf + 'Line' + obj.vars.id).down('.codeLibTableLineTitle',i);ele.removeClassName('codeLibBaseFontBold');}}},_staticLine : {numIdle : 10, numLength : 25, numPadding : 5},_iniLine : function(){this._setLineWrap();if (this.vars.varsStatus.flagSortColumnLineUse) {if (this.vars.varsStatus.flagSortColumnLineNow) {this.vars.varsDetail = this._updateSortColumnLineDetail({arr : this.vars.varsDetail});}}if (!this.vars.varsDetail.length) {this.eleWrapLine.setStyle({width  : this._getColumnWidth() + 'px',height : '1px'});} else {var temp = this.vars.varsHtml.interpolate({idSelf : this.idSelf});this.eleWrapLine.insert(temp);this._setLine({arrColumn : this.vars.varsColumn,arr       : this.vars.varsDetail});}},eleWrapLine : null,_setLineWrap : function(){var ele = $(document.createElement('div'));ele.addClassName('codeLibTableLineWrap');this.insFormat.eleTemplate.body.insert(ele);this.eleWrapLine = ele;},_setLine : function(obj){var insEscape = new Code_Lib_Escape();for (var i = 0; i < obj.arr.length; i++) {var eleLine = $(this.idSelf + 'Line' + obj.arr[i].id);eleLine.setStyle({width : (this._getColumnWidth()) + 'px'});if (obj.arr[i].flagBtnUse) {this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'dblclick',strFunc : '_dblclickBtn', ele : eleLine, vars : { vars : obj.arr[i] }});this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'mousedown',strFunc : '_mousedownBtn', ele : eleLine, vars : { vars : obj.arr[i] }});this.insListener.set({bindAsEvent : 0, insCurrent : this, event : 'mouseover',strFunc : '_mouseoverBtn', ele : eleLine, vars : { vars : obj.arr[i] }});this.insListener.set({bindAsEvent : 0, insCurrent : this, event : 'mouseout',strFunc : '_mouseoutBtn', ele : eleLine, vars : { vars : obj.arr[i] }});}var eleImg = $(this.idSelf + 'Line' + obj.arr[i].id + '_eleImg');if (!obj.arr[i].strClassLoad) {if (eleImg.hasClassName('codeLibTableLineLoad')) {eleImg.removeClassName('codeLibTableLineLoad');eleImg.addClassName(obj.arr[i].strClass);}}if (this.vars.varsStatus.flagMoveUse && obj.arr[i].flagMoveUse) {this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'mousedown',strFunc : '_mousedownMove', ele : eleImg, vars : { vars : obj.arr[i] }});this.insListener.set({bindAsEvent : 0, insCurrent : this, event : 'mouseover',strFunc : '_mouseoverMove', ele : eleImg, vars : { vars : obj.arr[i] }});this.insListener.set({bindAsEvent : 0, insCurrent : this, event : 'mouseout',strFunc : '_mouseoutMove', ele : eleImg, vars : { vars : obj.arr[i] }});}for (var j = 0; j < obj.arrColumn.length; j++) {var eleWrapItem = $(this.idSelf + 'Line' + obj.arr[i].id + '_eleWrapItem_' + obj.arrColumn[j].id);if (!obj.arrColumn[j].flagCheckNow) {eleWrapItem.hide();}eleLine.insert(eleWrapItem);var eleItem = $(this.idSelf + 'Line' + obj.arr[i].id + '_eleItem_' + obj.arrColumn[j].id);var eleTitle = $(this.idSelf + 'Line' + obj.arr[i].id + '_eleTitle_' + obj.arrColumn[j].id);eleItem.setStyle({width : (obj.arrColumn[j].numWidth - this._staticLine.numIdle) + 'px'});var str = insEscape.strLowCapitalize({data : obj.arrColumn[j].id});if (obj.arrColumn[j].flagType == 'str') {if (obj.arrColumn[j].flagAlign) {var numWidthEleTitle = obj.arrColumn[j].numWidth - this._staticLine.numIdle - this._staticLine.numPadding;eleTitle.setStyle({width        : numWidthEleTitle + 'px',paddingRight : this._staticLine.numPadding + 'px',textAlign    : obj.arrColumn[j].flagAlign});}} else if (obj.arrColumn[j].flagType == 'checkbox') {if (obj.arr[i].flagCheckboxUse) {this._iniCheckboxLine({id              : this.idSelf + 'Line' + obj.arr[i].id + 'Checkbox' + obj.arrColumn[j].id,flagCheckboxNow : obj.arr[i].flagCheckboxNow,eleInsert       : eleTitle});}}if (obj.arrColumn[j].flagType == 'str' || obj.arrColumn[j].flagType == 'stamp') {if (this.vars.varsStatus.flagTextBtnUse) {this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'dblclick',strFunc : '_dblclickTitle', ele : eleTitle, vars : { vars : obj.arr[i], idColumn : obj.arrColumn[j].id}});}this.insListener.set({bindAsEvent : 0, insCurrent : this, event : 'mouseover',strFunc : '_mouseoverTitle', ele : eleTitle, vars : { ele : eleTitle }});this.insListener.set({bindAsEvent : 0, insCurrent : this, event : 'mouseout',strFunc : '_mouseoutTitle', ele : eleTitle, vars : { ele : eleTitle }});}}var eleLineSort = $(this.idSelf + 'Line' + obj.arr[i].id + '_eleLineSort');eleLineSort.setStyle({width : this._getColumnWidth() + 'px'});}},insColumn : null,_iniColumn : function(){this._wrapColumn();this.vars.varsColumn = this.vars.varsColumn.sortBy(function(v, i) {return v.numSort;});this._setColumn({arr : this.vars.varsColumn});},_staticColumn : {numWidth : 5, numHeight : 16, numOther : 10, numBlock : 16, numBar : 17, numMin : 26},eleWrapColumn : null,_wrapColumn : function(){var ele = $(document.createElement('div'));ele.addClassName('codeLibTableColumnWrap');ele.unselectable = 'on';ele.addClassName('unselect');this.insFormat.eleTemplate.header.down('.codeLibBaseMarginLeftFive', 0).insert(ele);this.eleWrapColumn = ele;},_getColumnWidth : function(){var array = this.eleWrap.style.width.split('px');var data = parseFloat(array[0]) - this._staticColumn.numBar;return data;},_setColumn : function(obj){var eleMenu = $(document.createElement('span'));eleMenu.addClassName('codeLibTableColumn');if (this.vars.varsStatus.flagMenuUse) {eleMenu.addClassName('codeLibTableColumnBoxImgMenu');eleMenu.addClassName('codeLibBaseCursorPointer');} else {eleMenu.addClassName('codeLibBaseMarginRightFive');eleMenu.addClassName('codeLibTableBlock');}eleMenu.unselectable = 'on';eleMenu.addClassName('unselect');this.eleWrapColumn.insert(eleMenu);if (this.vars.varsStatus.flagMenuUse) {this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'mousedown',strFunc : '_mousedownMenu', ele : eleMenu, vars : {}});}for (var i = 0; i < obj.arr.length; i++) {if (!obj.arr[i].flagCheckNow) continue;var eleColumn = $(document.createElement('span'));eleColumn.addClassName('codeLibTableColumnBoxWrap');eleColumn.addClassName('codeLibTableColumnBox');eleColumn.id = this.idSelf + 'ColumnBox' + obj.arr[i].id;eleColumn.addClassName('clearfix');eleColumn.unselectable = 'on';eleColumn.addClassName('unselect');eleColumn.title = obj.arr[i].strTitle;this.eleWrapColumn.insert(eleColumn);var eleSortColumn = $(document.createElement('span'));eleSortColumn.addClassName('codeLibTableColumnBoxSortColumn');eleSortColumn.setStyle({height : this._staticColumn.numHeight + 'px',width  : this._staticColumn.numWidth + 'px'});eleColumn.insert(eleSortColumn);var eleSort = $(document.createElement('span'));eleSort.addClassName('codeLibTableColumnBoxSortLine');eleColumn.insert(eleSort);if (obj.arr[i].flagCheckNow) {if (obj.arr[i].flagSortColumnLineUse&& this.vars.varsStatus.flagSortColumnLineUse) {eleSort.addClassName('codeLibBaseCursorPointer');}}if (obj.arr[i].flagCheckNow && this.vars.varsStatus.flagSortColumnLineUse) {if (obj.arr[i].flagSortColumnLineUse) {if (this.vars.varsStatus.flagSortColumnLineNow == obj.arr[i].id) {if (obj.arr[i].flagSortColumnLineNow) {eleSort.addClassName('codeLibTableColumnBoxImgDown');}else eleSort.addClassName('codeLibTableColumnBoxImgUp');}else eleSort.addClassName('codeLibTableColumnBoxImgPoint');}else eleSort.addClassName('codeLibTableColumnBoxImgNone');}if (obj.arr[i].flagSortColumnLineUse&& this.vars.varsStatus.flagSortColumnLineUse&& obj.arr[i].flagCheckNow) {this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'mousedown',strFunc : '_mousedownSortColumnLine', ele : eleSort, vars : { vars : obj.arr[i] }});}var eleCheckbox = $(document.createElement('span'));eleColumn.insert(eleCheckbox);if (obj.arr[i].flagType == 'checkbox' && obj.arr[i].flagAllCheckbox) {this._iniCheckboxColumn({id        : this.idSelf + 'ColumnBox' + obj.arr[i].id + 'Checkbox',vars      : obj.arr[i],eleInsert : eleCheckbox});}var eleTitle = $(document.createElement('span'));eleColumn.insert(eleTitle);eleTitle.addClassName('codeLibTableColumnBoxTitle');eleTitle.insert(obj.arr[i].strTitle);if (obj.arr[i].flagCheckNow) {if (this.vars.varsStatus.flagSortColumnUse) {eleTitle.removeClassName('codeLibBaseCursorDefault');eleTitle.addClassName('codeLibBaseCursorMove');}else eleTitle.addClassName('codeLibBaseCursorDefault');}var eleResize = $(document.createElement('span'));eleResize.addClassName('codeLibTableColumnBoxResize');eleResize.setStyle({height : this._staticColumn.numHeight + 'px',width  : this._staticColumn.numWidth + 'px'});if (obj.arr[i].flagCheckNow) {if (this.vars.varsStatus.flagResizeUse) {eleResize.addClassName('codeLibBaseCursorColResize');}}eleColumn.insert(eleResize);if (this.vars.varsStatus.flagResizeUse && obj.arr[i].flagCheckNow) {this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'mousedown',strFunc : '_mousedownResize', ele : eleResize, vars : { vars : obj.arr[i] }});}var numWidth = 0;if ((obj.arr[i].flagSortColumnLineUse && this.vars.varsStatus.flagSortColumnLineUse)|| (obj.arr[i].flagType == 'checkbox' && obj.arr[i].flagAllCheckbox)) {numWidth = obj.arr[i].numWidth - this._staticColumn.numOther;eleCheckbox.setStyle({width : numWidth + 'px'});if (numWidth > 16) {eleTitle.setStyle({width : numWidth - 16 + 'px'});}eleTitle.innerHTML = '';eleResize.hide();eleColumn.setStyle({height : this._staticColumn.numHeight + 'px',width  : (obj.arr[i].numWidth) + 'px'});} else {eleColumn.setStyle({height : this._staticColumn.numHeight + 'px',width  : obj.arr[i].numWidth + 'px'});numWidth = obj.arr[i].numWidth - this._staticColumn.numOther;eleTitle.setStyle({width : numWidth + 'px'});}if (obj.arr[i].flagCheckNow && this.vars.varsStatus.flagSortColumnUse) {this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'mousedown',strFunc : '_mousedownSortColumn', ele : eleTitle, vars : { vars : obj.arr[i] }});this.insListener.set({bindAsEvent : 0, insCurrent : this, event : 'mouseover',strFunc : '_mouseoverSortColumn', ele : eleColumn, vars : { vars : obj.arr[i] }});this.insListener.set({bindAsEvent : 0, insCurrent : this, event : 'mouseout',strFunc : '_mouseoutSortColumn', ele : eleColumn, vars : { vars : obj.arr[i] }});}}},_iniCheckboxLine : function(obj){this._setCheckboxLine({id              : obj.id,flagCheckboxNow : obj.flagCheckboxNow,eleInsert       : obj.eleInsert});this._setCheckboxLineListener({id : obj.id});},_setCheckboxLine : function(obj){if (obj.flagCheckboxNow) {$(obj.id).checked = true;} else {$(obj.id).checked = false;}var ele = obj.eleInsert;if (Prototype.Browser.IE) ele.addClassName('ie');else if (Prototype.Browser.Gecko) ele.addClassName('firefox');else if (navigator.userAgent.match("Chrome")) ele.addClassName('chrome');},_setCheckboxLineListener : function(obj){this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'mousedown',strFunc : '_mousedownCheckboxLine', ele : $(obj.id), vars : { id : obj.id }});},_mousedownCheckboxLine : function(evt, obj) {evt.stop();this._updateCheckboxLine({idTarget  : obj.id,arrColumn : this.vars.varsColumn,arr       : this.vars.varsDetail});},_updateCheckboxLine : function(obj){for (var i = 0; i < obj.arr.length; i++) {if (!obj.arr[i].flagCheckboxUse) continue;for (var j = 0; j < obj.arrColumn.length; j++) {if (!obj.arrColumn[j].flagCheckNow) continue;if (this.idSelf + 'Line' + obj.arr[i].id + 'Checkbox' + obj.arrColumn[j].id == obj.idTarget) {obj.arr[i].flagCheckboxNow = (obj.arr[i].flagCheckboxNow)? 0 : 1;return;}}}},getCheckboxLineId : function(){return this._getCheckboxLineId({arrColumn : this.vars.varsColumn,arr       : this.vars.varsDetail});},_getCheckboxLineId : function(obj){var arrayNew = [];for (var i = 0; i < obj.arr.length; i++) {if (!obj.arr[i].flagCheckboxUse) continue;for (var j = 0; j < obj.arrColumn.length; j++) {if (!obj.arrColumn[j].flagCheckNow) continue;if (obj.arr[i].flagCheckboxNow) {arrayNew.push(obj.arr[i].vars.idTarget);break;}}}return arrayNew;},getCheckboxLineIdTitle : function(){return this._getCheckboxLineIdTitle({arrColumn : this.vars.varsColumn,arr       : this.vars.varsDetail});},_getCheckboxLineIdTitle : function(obj){var objNew = {};for (var i = 0; i < obj.arr.length; i++) {if (!obj.arr[i].flagCheckboxUse) continue;for (var j = 0; j < obj.arrColumn.length; j++) {if (!obj.arrColumn[j].flagCheckNow) continue;if (obj.arr[i].flagCheckboxNow) {objNew[obj.arr[i].id] = obj.arr[i].strTitle;break;}}}return objNew;},_iniCheckboxColumn : function(obj){this._setCheckboxColumn({id        : obj.id,vars      : obj.vars,eleInsert : obj.eleInsert});this._setCheckboxColumnListener({vars : obj.vars,id   : obj.id});},_setCheckboxColumn : function(obj){var ele = obj.eleInsert;var eleCheckbox = $(document.createElement('span'));ele.insert(eleCheckbox);eleCheckbox.addClassName('codeLibTableColumnBoxCheckbox');eleCheckbox.id = obj.id;if (obj.vars.flagAllCheckboxNow) eleCheckbox.addClassName('codeLibTableColumnBoxCheckboxChecked');else eleCheckbox.addClassName('codeLibTableColumnBoxCheckboxUnchecked');if (obj.vars.flagType == 'checkbox' && obj.vars.flagAllCheckbox) {eleCheckbox.removeClassName('codeLibBaseCursorDefault');eleCheckbox.addClassName('codeLibBaseCursorPointer');}},_setCheckboxColumnListener : function(obj){this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'mousedown',strFunc : '_mousedownCheckboxColumn', ele : $(obj.id), vars : { vars : obj.vars }});},_mousedownCheckboxColumn : function(evt, obj){if (obj) evt.stop();else obj = evt;var ele = $(this.idSelf + 'ColumnBox' + obj.vars.id + 'Checkbox');ele.removeClassName('codeLibTableColumnBoxCheckboxChecked');ele.removeClassName('codeLibTableColumnBoxCheckboxUnchecked');if (obj.vars.flagAllCheckboxNow) {obj.vars.flagAllCheckboxNow = 0;ele.addClassName('codeLibTableColumnBoxCheckboxUnchecked');} else {obj.vars.flagAllCheckboxNow = 1;ele.addClassName('codeLibTableColumnBoxCheckboxChecked');}this._updateCheckboxColumn({flag      : obj.vars.flagAllCheckboxNow,id        : obj.vars.id,arrColumn : this.vars.varsColumn,arr       : this.vars.varsDetail});},_updateCheckboxColumn : function(obj){for (var i = 0; i < obj.arr.length; i++) {if (!obj.arr[i].flagCheckboxUse) continue;for (var j = 0; j < obj.arrColumn.length; j++) {if (!obj.arrColumn[j].flagCheckNow) continue;if (obj.arrColumn[j].id == obj.id) {if (!obj.flag) {obj.arr[i].flagCheckboxNow = 0;$(this.idSelf + 'Line' + obj.arr[i].id + 'Checkbox' + obj.id).checked = false;} else {obj.arr[i].flagCheckboxNow = 1;$(this.idSelf + 'Line' + obj.arr[i].id + 'Checkbox' + obj.id).checked = true;}}}}},_iniFormat : function(){this._extFormat();},_staticWrap : {numWidthCheck : 26},_iniWrap : function(){this._extWrap();this.eleWrap.style.width = this._getWrapWidth({arr : this.vars.varsColumn}) + 'px';this.eleWrap.style.height = (this._getWrapHeight() - 1) + 'px';},_getWrapWidth : function(obj){var numWidthA = 0;for (var i = 0; i < obj.arr.length; i++) {if (!obj.arr[i].flagCheckNow) continue;numWidthA += obj.arr[i].numWidth;}numWidthA += this._staticWrap.numWidthCheck;var array = this.eleInsert.style.width.split('px');var numWidthB = parseFloat(array[0]);var data = (numWidthA > numWidthB)? numWidthA + this._staticColumn.numBar : numWidthB;return  data;},removeWrap : function(){this.eleInsert.setStyle({position : ''});$(this.idSelf).remove();if (this.eleInsertBtnLeft) this.eleInsertBtnLeft.innerHTML = '';if (this.eleInsertBtnRight) this.eleInsertBtnRight.innerHTML = '';}});var Code_Lib_TableTree = Class.create(Code_Lib_ExtLib,{iniLoad : function(obj){this._extAllot(obj);this._iniVars(obj);this._iniListener();this._iniWrap();this._iniFormat();this._iniColumn();this._iniLine();this._iniMove();this._iniBtn();this._iniPage();this._iniBtnBottom();this._iniBtnSelect();this._iniPosition();},iniReload : function(){this.stopListener();this.removeWrap();this.removeBtnBottom();this._iniCake();this._iniWrap();this._iniFormat();this._iniColumn();this._iniLine();this._iniMove();this._iniBtn();this._iniPage();this._iniBtnBottom();this._iniBtnSelect();this._iniPosition();this.setScroll();},_iniVars : function(obj){this._extVars(obj);this._iniCake();this._iniVarsBtn();this.allot({insCurrent : this.insCurrent,from       : '_iniVars'});},_iniPage : function(){this._extPage();},_iniListener : function(){this._extListener();},_iniCake : function(){this._getCake();},_getCakeVarsUpdate : function(obj){if (!obj.data) return;if (this.vars.varsStatus.flagCakeColumnUse) {this._getCakeVarsUpdateColumn({data : obj.data});}},_getCakeVarsUpdateColumn : function(obj){obj.arr = this.vars.varsColumn;for (var i = 0; i < obj.arr.length; i++) {str = 'columnWidth' + obj.arr[i].id ;if (obj.data[str]) {obj.arr[i].numWidth  = parseFloat(obj.data[str]);str = 'columnSort' + obj.arr[i].id ;obj.arr[i].numSort  = parseFloat(obj.data[str]);str = 'columnFlagCheckNow' + obj.arr[i].id ;obj.arr[i].flagCheckNow  = parseFloat(obj.data[str]);}}},setCake : function(){if (!this.insRoot.insCake) return;if (!this.vars.varsStatus.flagCakeUse) return;this._varsCake = {};if (this.vars.varsStatus.flagCakeColumnUse) {this._setCakeVarsColumn({arr : this.vars.varsColumn});}this.insRoot.insCake.setStorageCake({parentKey  : this.idSelf,value      : this._varsCake,numExpires : 0});},_setCakeVarsColumn : function(obj){for (var i = 0; i < obj.arr.length; i++) {str = 'columnWidth' + obj.arr[i].id ;this._varsCake[str] = obj.arr[i].numWidth;str = 'columnSort' + obj.arr[i].id ;this._varsCake[str] = obj.arr[i].numSort;str = 'columnFlagCheckNow' + obj.arr[i].id ;this._varsCake[str] = obj.arr[i].flagCheckNow;}},_varsBtn : null,_iniVarsBtn : function(){this._varsBtn = [];},resetBtnVars : function(){this._varsBtn = [];},_staticWrap : {numWidthCheck : 26},_iniWrap : function(){this._extWrap();this.eleWrap.style.width = this._getWrapWidth({arr : this.vars.varsColumn}) + 'px';this.eleWrap.style.height = (this._getWrapHeight() - 1) + 'px';},_getWrapWidth : function(obj){var numWidthA = 0;for (var i = 0; i < obj.arr.length; i++) {if (!obj.arr[i].flagCheckNow) continue;numWidthA += obj.arr[i].numWidth;}numWidthA += this._staticWrap.numWidthCheck;var array = this.eleInsert.style.width.split('px');var numWidthB = parseFloat(array[0]);var data = (numWidthA > numWidthB)? numWidthA + this._staticColumn.numBar : numWidthB;return  data;},_iniFormat : function(){this._extFormat();},insColumn : null,_iniColumn : function(){this._wrapColumn();this.vars.varsColumn = this.vars.varsColumn.sortBy(function(v, i) {return v.numSort;});this._setColumn({arr : this.vars.varsColumn});},_staticColumn : {numBar : 17, numHeight : 16, numWidth : 5, numOther : 10, numBlock : 16, numMin : 26},eleWrapColumn : null,_wrapColumn : function(){var ele = $(document.createElement('div'));ele.addClassName('codeLibTableTreeColumnWrap');ele.unselectable = 'on';ele.addClassName('unselect');this.insFormat.eleTemplate.header.down('.codeLibBaseMarginLeftFive', 0).insert(ele);this.eleWrapColumn = ele;},_getColumnWidth : function(){var array = this.eleWrap.style.width.split('px');var data = parseFloat(array[0]) - this._staticColumn.numBar;return data;},_setColumn : function(obj){for (var i = 0; i < obj.arr.length; i++) {if (!obj.arr[i].flagCheckNow) continue;var eleColumn = $(document.createElement('div'));this.eleWrapColumn.insert(eleColumn);eleColumn.addClassName('codeLibTableTreeColumnBoxWrap');eleColumn.addClassName('codeLibTableTreeColumnBox');eleColumn.id = this.idSelf + 'ColumnBox' + obj.arr[i].id;eleColumn.addClassName('clearfix');eleColumn.unselectable = 'on';eleColumn.addClassName('unselect');if (obj.arr[i].id != 'Tree') eleColumn.title = obj.arr[i].strTitle;if (obj.arr[i].id == 'Tree') {if (this.vars.varsStatus.flagFoldUse) {var ele = $(document.createElement('span'));ele.addClassName('codeLibTableTreeFold');if (this.vars.varsStatus.flagFoldUse) {if (this.vars.varsStatus.flagLockNow) {ele.addClassName('codeLibBaseCursorDefault');} else {ele.addClassName('codeLibBaseCursorPointer');}if (!this.vars.varsStatus.flagFoldNow) ele.addClassName('codeLibTableTreeFoldClose');else  ele.addClassName('codeLibTableTreeFoldOpen');}ele.unselectable = 'on';ele.addClassName('unselect');eleColumn.insert(ele);this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'mousedown',strFunc : '_mousedownBarFold', ele : ele, vars : ''});}if (this.vars.varsStatus.flagMenuUse) {var eleMenu = $(document.createElement('span'));eleMenu.addClassName('codeLibTableTreeColumn');eleMenu.addClassName('codeLibTableTreeColumnBoxImgMenu');eleMenu.addClassName('codeLibBaseCursorPointer');eleMenu.unselectable = 'on';eleMenu.addClassName('unselect');eleColumn.insert(eleMenu);this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'mousedown',strFunc : '_mousedownMenu', ele : eleMenu, vars : {}});}}var eleSortColumn = $(document.createElement('span'));eleSortColumn.addClassName('codeLibTableTreeColumnBoxSortColumn');eleSortColumn.setStyle({height : this._staticColumn.numHeight + 'px',width  : this._staticColumn.numWidth + 'px'});eleColumn.insert(eleSortColumn);var eleSort = $(document.createElement('span'));eleSort.addClassName('codeLibTableTreeColumnBoxSortLine');eleColumn.insert(eleSort);var eleCheckbox = $(document.createElement('span'));eleColumn.insert(eleCheckbox);if (obj.arr[i].flagType == 'checkbox' && obj.arr[i].flagAllCheckbox) {this._iniCheckboxColumn({id        : this.idSelf + 'ColumnBox' + obj.arr[i].id + 'Checkbox',vars      : obj.arr[i],eleInsert : eleCheckbox});}var eleTitle = $(document.createElement('span'));eleColumn.insert(eleTitle);eleTitle.addClassName('codeLibTableTreeColumnBoxTitle');eleTitle.insert(obj.arr[i].strTitle);if (obj.arr[i].flagCheckNow) {if (this.vars.varsStatus.flagSortColumnUse && obj.arr[i].flagSortColumn) {eleTitle.removeClassName('codeLibBaseCursorDefault');eleTitle.addClassName('codeLibBaseCursorMove');}else eleTitle.addClassName('codeLibBaseCursorDefault');}var eleResize = $(document.createElement('span'));eleResize.addClassName('codeLibTableTreeColumnBoxResize');eleResize.setStyle({height : this._staticColumn.numHeight + 'px',width  : this._staticColumn.numWidth + 'px'});if (obj.arr[i].flagCheckNow) {if (this.vars.varsStatus.flagResizeUse) {eleResize.addClassName('codeLibBaseCursorColResize');}}eleColumn.insert(eleResize);if (this.vars.varsStatus.flagResizeUse && obj.arr[i].flagCheckNow) {this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'mousedown',strFunc : '_mousedownResize', ele : eleResize, vars : { vars : obj.arr[i] }});}if (obj.arr[i].flagType == 'checkbox' && obj.arr[i].flagAllCheckbox) {eleTitle.setStyle({width : (obj.arr[i].numWidth - this._staticColumn.numBlock - this._staticColumn.numOther) + 'px'});} else {eleTitle.setStyle({width : (obj.arr[i].numWidth - this._staticColumn.numOther) + 'px'});}if (obj.arr[i].flagCheckNow && this.vars.varsStatus.flagSortColumnUse && obj.arr[i].flagSortColumn) {this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'mousedown',strFunc : '_mousedownSortColumn', ele : eleTitle, vars : { vars : obj.arr[i] }});this.insListener.set({bindAsEvent : 0, insCurrent : this, event : 'mouseover',strFunc : '_mouseoverSortColumn', ele : eleColumn, vars : { vars : obj.arr[i] }});this.insListener.set({bindAsEvent : 0, insCurrent : this, event : 'mouseout',strFunc : '_mouseoutSortColumn', ele : eleColumn, vars : { vars : obj.arr[i] }});}}},_mousedownBarFold : function(evt, obj){if (obj) evt.stop();else obj = evt;this._updateBarFoldVar();this._updateBarFoldStyle();this.setCake();},_updateBarFoldVar : function(){if (this.vars.varsStatus.flagFoldNow) {this.vars.varsStatus.flagFoldNow = 0;this._updateFoldVarAll({arr         : this.vars.varsDetail,flagFoldNow : 0});} else {this.vars.varsStatus.flagFoldNow = 1;this._updateFoldVarAll({arr         : this.vars.varsDetail,flagFoldNow : 1});}},_updateFoldVarAll : function(obj){for (var i = 0; i < obj.arr.length; i++) {if (obj.arr[i].flagFoldUse) {obj.arr[i].flagFoldNow = obj.flagFoldNow;}if (obj.arr[i].child.length) {this._updateFoldVarAll({arr : obj.arr[i].child, flagFoldNow : obj.flagFoldNow});}}},_updateBarFoldStyle : function(){var ele = this.eleWrapColumn.down('.codeLibTableTreeFold', 0);ele.removeClassName('codeLibTableTreeFoldOpen');ele.removeClassName('codeLibTableTreeFoldClose');if (this.vars.varsStatus.flagFoldNow) ele.addClassName('codeLibTableTreeFoldOpen');else ele.addClassName('codeLibTableTreeFoldClose');$(this.insRoot.vars.varsSystem.id.temp).insert(this.eleTree);this._setFoldUpdateStyleAll({arr        : this.vars.varsDetail,flagEffect : 0});this._setFoldRestoreStyleAll({arr : this.vars.varsDetail});this.insFormat.eleTemplate.body.insert(this.eleTree);this._setFoldUpdateStyleAll({arr        : this.vars.varsDetail,flagEffect : 1});},_setFoldUpdateStyleAll : function(obj){for (var i = 0; i < obj.arr.length; i++) {if (obj.arr[i].flagFoldUse) {if (obj.flagEffect && $(obj.arr[i].id).down('.codeLibTableTreeFold', 0)) {$(obj.arr[i].id).down('.codeLibTableTreeFold', 0).removeClassName('codeLibTableTreeFoldOpen');$(obj.arr[i].id).down('.codeLibTableTreeFold', 0).removeClassName('codeLibTableTreeFoldClose');if (obj.arr[i].flagFoldNow) {$(obj.arr[i].id).down('.codeLibTableTreeFold', 0).addClassName('codeLibTableTreeFoldOpen');$(obj.arr[i].id).next('ul', 0).show();} else {$(obj.arr[i].id).down('.codeLibTableTreeFold', 0).addClassName('codeLibTableTreeFoldClose');$(obj.arr[i].id).next('ul', 0).hide();}} else {if (obj.arr[i].flagFoldNow) $(obj.arr[i].id).next('ul', 0).show();else $(obj.arr[i].id).next('ul', 0).hide();}}if (obj.arr[i].child.length) {this._setFoldUpdateStyleAll({arr        : obj.arr[i].child,flagEffect : obj.flagEffect});}}return obj.arr;},_setFoldRestoreStyleAll : function(obj){for (var i = 0; i < obj.arr.length; i++) {if (!obj.arr[i].flagFoldNow) $(obj.arr[i].id).next('ul', 0).show();else $(obj.arr[i].id).next('ul', 0).hide();if (obj.arr[i].child.length) this._setFoldRestoreStyleAll({arr:obj.arr[i].child});}return obj.arr;},_mousedownMenu : function(evt) {evt.stop();this._setMenu();},insMenu : null,_setMenu : function(){var cut = this.vars.varsContext;cut.varsDetail = this.vars.varsColumn;cut.varsStatus.numTop = $(this.idSelf).up('.codeLibWindow',0).offsetTop + this.eleInsert.offsetTop;cut.varsStatus.numLeft = $(this.idSelf).up('.codeLibWindow',0).offsetLeft + this.eleInsert.offsetLeft;this.insMenu = new Code_Lib_Context({insRoot    : this.insRoot,eleInsert  : $(this.insRoot.vars.varsSystem.id.root),insCurrent : this,idSelf     : this.idSelf + 'Menu',allot      : this._getMenuAllot(),vars       : cut});},_getMenuAllot : function(){var allot = function(obj) {var insCurrent = obj.insCurrent;if (obj.from == '_mousedownLine') {insCurrent.setCake();} else if (obj.from == 'getVars') {insCurrent._updateMenuColumn({vars : obj.vars});}};return allot;},_updateMenuColumn : function(obj){this.vars.varsColumn = obj.vars;this.setCake();this.iniReload();},_iniPosition : function(){this.eleInsert.setStyle({overflow : 'hidden',position : 'relative'});this._iniPositionColumn();this._iniPositionLine();},elePositionLine : null,_iniPositionLine : function(){var ele = $(document.createElement('div'));ele.setStyle({position : 'absolute',overflow : 'auto',top      : this._staticPosition.numHeight_ + 'px',width    : (this._getLineWrapWidth()) + 'px',height   : this._getLineWrapHeight() + 'px'});ele.insert(this.eleWrapLine);this.eleWrap.insert(ele);this.elePositionLine = ele;this.insListener.set({flagType15 : 1, bindAsEvent : 1, insCurrent : this, event : 'scroll',strFunc : '_scrollPosition', ele : ele, vars : ''});},_getPositionElePositionColumn : function(){var array = this.elePositionColumn.style.width.split('px');var data = parseFloat(array[0]);return data;},_scrollPosition : function(){var numLeft = this.elePositionLine.scrollLeft;var numTop = this.elePositionLine.scrollTop;this.elePositionColumn.setStyle({width : (this._getPositionElePositionColumn() + numLeft) + 'px',left  : (-1 * numLeft) + 'px'});},_staticPosition : {numHeight : 16, numHeight_ : 25, numBottom : 4, numTop : 4, numMargin : 5},elePositionColumn : null,_iniPositionColumn : function(){var array = this.eleWrap.style.width.split('px');this.eleWrapColumn.setStyle({width : (array[0]) + 'px'});var ele = $(document.createElement('div'));ele.setStyle({position   : 'absolute',overflow   : 'hidden',marginLeft : this._staticPosition.numMargin + 'px',left       : '0px',top        : this._staticPosition.numTop + 'px',width      : this._getLineWrapWidth() + 'px',height     : this._staticPosition.numHeight + 'px'});ele.insert(this.eleWrapColumn);this.eleWrap.insert(ele);this.elePositionColumn = ele;},_getLineWrapWidth : function(){var array = this.eleInsert.style.width.split('px');var data = parseFloat(array[0]);return data;},_getLineWrapHeight : function(){var array = this.eleInsert.style.height.split('px');var num = this._staticPosition.numHeight_ + this._staticPosition.numBottom;var data = parseFloat(array[0]) - num;return data;},updateVars : function(){this.allot({insCurrent : this.insCurrent,from       : 'updateVars',vars   : {vars       : this.vars,varsSelect : this._varsBtn}});},_varsResize : {},_setResizeListener : function(obj){this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'mousemove',strFunc : '_mousemoveResize', ele : document, vars : ''});this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'mouseup',strFunc : '_mouseupResize', ele : document, vars : ''});},_mousedownResize : function(evt,obj) {if (obj) evt.stop();else obj = evt;this._setResizeListener();this._removeCursorColumn({arr : this.vars.varsColumn});var max = 0;var after = {};var flagLast = this._checkResizeSortLast({arr : this.vars.varsColumn,id  : obj.vars.id});if (!flagLast) {after = this._checkResizeSortAfter({arr : this.vars.varsColumn,id  : obj.vars.id});max = evt.pointerX() + after.numWidth - after.numWidthMin;}this._varsResize = {};this._varsResize = {flag         : 1,ele          : evt.element(),varsAfter    : after,vars         : obj.vars,numLeft      : evt.pointerX(),numLeftMin   : evt.pointerX() - obj.vars.numWidth + obj.vars.numWidthMin,numLeftMax   : max,mouseLeft    : evt.pointerX(),naviBarXLeft : evt.pointerX(),eleBarX      : null,eleLock      : null};this._setResizeNavi({evt : evt});},_removeCursorColumn : function(obj){for (var i = 0; i < obj.arr.length; i++) {if (!obj.arr[i].flagCheckNow) continue;if (this.vars.varsStatus.flagSortColumnUse) {var ele = $(this.idSelf + 'ColumnBox' + obj.arr[i].id).down('.codeLibTableTreeColumnBoxTitle', 0);ele.removeClassName('codeLibBaseCursorMove');ele = $(this.idSelf + 'ColumnBox' + obj.arr[i].id).down('.codeLibTableTreeColumnBoxTitle', 0);ele.addClassName('codeLibBaseCursorDefault');}if (this.vars.varsStatus.flagResizeUse) {var ele = $(this.idSelf + 'ColumnBox' + obj.arr[i].id).down('.codeLibTableTreeColumnBoxResize', 0);ele.removeClassName('codeLibBaseCursorColResize');}}},_checkResizeSortLast : function(obj){var num = obj.arr.length - 1;for (var i = num; i >= 0; i--) {if (!obj.arr[i].flagCheckNow) continue;if (obj.arr[i].id == obj.id) return 1;else  return 0;}},_checkResizeSortAfter : function(obj){var flag = 0;for (var i = 0; i < obj.arr.length; i++) {if (!obj.arr[i].flagCheckNow) continue;if (flag) {return obj.arr[i];} else {if (obj.arr[i].id == obj.id) flag = 1;}}},_setResizeNavi : function(obj){var ele = $(document.createElement('span'));var viewSize = document.viewport.getDimensions();var scroll = document.viewport.getScrollOffsets();var zIndex = this.insRoot.setZIndex();var eleLock = $(document.createElement('div'));eleLock.addClassName('lockView');eleLock.setStyle({zIndex : zIndex});$(this.insRoot.vars.varsSystem.id.root).insert(eleLock);this._varsResize.eleLock = eleLock;ele.setStyle({height : viewSize.height + scroll.top + 'px',top    : '0px',left   : obj.evt.pointerX() + 'px',zIndex : zIndex});ele.addClassName('codeLibTableTreeNaviX');this._varsResize.eleBarX = ele;$(this.insRoot.vars.varsSystem.id.root).insert(ele);},_getResizeLeftMin : function(evt){var data = (this._varsResize.numLeftMin > evt.pointerX()) ? 1  : 0;return  data;},_getResizeLeftMax : function(evt){var data = (this._varsResize.numLeftMax < evt.pointerX()) ? 1  : 0 ;return data;},_mousemoveResize : function(evt, obj){if (!this._varsResize.flag) return;if (obj) evt.stop();else obj = evt;if (this._getResizeLeftMin(evt)) {this._varsResize.eleBarX.setStyle({left : this._varsResize.numLeftMin + 'px',top  : '0px'});this._varsResize.naviBarXLeft = this._varsResize.numLeftMin;} else {this._varsResize.eleBarX.setStyle({left : evt.pointerX() + 'px',top  : '0px'});this._varsResize.naviBarXLeft = evt.pointerX();}},_getResizeCalc : function(){var cut = this._varsResize;var difX = cut.naviBarXLeft - cut.numLeft;cut.vars.numWidth += difX;cut.vars.numWidth = (cut.vars.numWidthMin > cut.vars.numWidth)? cut.vars.numWidthMin : cut.vars.numWidth;},_updateResize : function(obj){for (var i = 0; i < obj.arr.length; i++) {if (obj.arr[i].id == this._varsResize.vars.id) {obj.arr[i].numWidth = this._varsResize.vars.numWidth;}}},_mouseupResize : function(evt, obj){if (obj) evt.stop();else obj = evt;if (!this._varsResize.flag) return;this._getResizeCalc();this._updateResize({arr : this.vars.varsColumn});this.setCake();this._varsResize.eleBarX.remove();this._varsResize.eleLock.remove();this._varsResize = {};this.iniReload({from : '_mouseupResize'});},_staticLine : {numIdle : 10, numLength : 25, numIdleFive : 5, numHeight : 16, numBlock : 16, numPadding : 5},_iniLine : function(){this._setLineWrap();this.setLineId({idParent : this.idSelf,arr      : this.vars.varsDetail});this._iniCake();if (!this.vars.varsDetail.length) {this.eleWrapLine.setStyle({width  : this._getColumnWidth() + 'px',height : '1px'});} else {var temp = this.vars.varsHtml.interpolate({idSelf : this.idSelf});this.eleWrapLine.insert(temp);this._setLine({idParent  : this.idSelf,arrColumn : this.vars.varsColumn,arr       : this.vars.varsDetail});}this.insFormat.eleTemplate.body.insert(this.eleWrapLine);},eleWrapLine : null,_setLineWrap : function(){var ele = $(document.createElement('div'));ele.addClassName('codeLibTableTreeLineWrap');$(this.insRoot.vars.varsSystem.id.temp).insert(ele);this.eleWrapLine = ele;},setLineId : function(obj){for (var i = 0; i < obj.arr.length; i++) {obj.arr[i].id = obj.idParent + '-' + i;if (obj.arr[i].child.length) {this.setLineId({arr      : obj.arr[i].child,idParent : obj.arr[i].id});}}},_getLineWidth : function(){var array = this.eleWrap.style.width.split('px');var data = parseFloat(array[0]);return data;},_setLine : function(obj){if (!obj.parent) {obj.parent = this.eleWrapLine.down('.codeLibTableTreeLineTop', 0);}var insEscape = new Code_Lib_Escape();for (var i = 0; i < obj.arr.length; i++) {obj.arr[i].id = obj.idParent + '-' + i;var eleLine = $(obj.arr[i].id);eleLine.setStyle({width : (this._getLineWidth()) + 'px'});var eleLineSort = $(obj.arr[i].id + '_eleLineSort');eleLineSort.setStyle({width : this._getLineWidth() + 'px'});var eleUl = $(obj.arr[i].id + '_eleUl');if (this.vars.varsStatus.flagBtnUse && obj.arr[i].flagBtnUse) {this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'dblclick',strFunc : '_dblclickBtn', ele : eleLine, vars : { vars : obj.arr[i] }});this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'mousedown',strFunc : '_mousedownBtn', ele : eleLine, vars : { vars : obj.arr[i] }});this.insListener.set({bindAsEvent : 0, insCurrent : this, event : 'mouseover',strFunc : '_mouseoverBtn', ele : eleLine, vars : { vars : obj.arr[i] }});this.insListener.set({bindAsEvent : 0, insCurrent : this, event : 'mouseout',strFunc : '_mouseoutBtn', ele : eleLine, vars : { vars : obj.arr[i] }});eleLine.observe('contextmenu', Event.stop);}for (var j = 0; j < obj.arrColumn.length; j++) {var eleWrapItem = $(obj.arr[i].id + '_eleWrapItem_' + obj.arrColumn[j].id);if (!obj.arrColumn[j].flagCheckNow) {eleWrapItem.hide();}var eleItemIdle = $(obj.arr[i].id + '_eleItemIdle_' + obj.arrColumn[j].id);var eleItem = $(obj.arr[i].id + '_eleItem_' + obj.arrColumn[j].id);var numWidthEleItem = 0;if (obj.arrColumn[j].id == 'Tree') {var eleSortSepatate = $(obj.arr[i].id + '_eleSortSepatate_' + obj.arrColumn[j].id);eleSortSepatate.setStyle({width : (obj.arrColumn[j].numWidth + this._staticLine.numBlock*2) + 'px'});numWidthEleItem = obj.arrColumn[j].numWidth - this._staticLine.numIdleFive + this._staticLine.numBlock * 2;eleItem.setStyle({width : numWidthEleItem + 'px'});eleItemIdle.setStyle({width  : this._staticLine.numIdleFive + 'px',height : this._staticLine.numHeight + 'px',});if (obj.arr[i].flagFoldUse && this.vars.varsStatus.flagFoldUse && obj.arr[i].child.length) {var eleFold = $(obj.arr[i].id + '_eleFold_' + obj.arrColumn[j].id);eleFold.removeClassName('codeLibTableTreeFoldOpen');eleFold.removeClassName('codeLibTableTreeFoldClose');if (obj.arr[i].flagFoldNow) {eleFold.addClassName('codeLibTableTreeFoldOpen');} else {eleUl.style.display = 'none';eleFold.addClassName('codeLibTableTreeFoldClose');}this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'mousedown',strFunc : '_mousedownFold', ele : eleFold, vars : { vars : obj.arr[i]}});}var eleTitle = $(obj.arr[i].id + '_eleTitle_' + obj.arrColumn[j].id);if (this.vars.varsStatus.flagBtnUse && obj.arr[i].flagBtnUse) {this.insListener.set({bindAsEvent : 0, insCurrent : this, event : 'mouseover',strFunc : '_mouseoverTitle', ele : eleTitle, vars : { ele : eleTitle }});this.insListener.set({bindAsEvent : 0, insCurrent : this, event : 'mouseout',strFunc : '_mouseoutTitle', ele : eleTitle, vars : { ele : eleTitle }});}continue;}var eleSortSepatate = $(obj.arr[i].id + '_eleSortSepatate_' + obj.arrColumn[j].id);eleSortSepatate.setStyle({width : (obj.arrColumn[j].numWidth - this._staticLine.numIdle) + 'px'});var eleSeparateSort = $(obj.arr[i].id + '_eleSeparateSort_' + obj.arrColumn[j].id);eleLine.insert(eleWrapItem);eleLineSort.insert(eleSortSepatate);eleLineSort.insert( eleSeparateSort);if (!obj.arrColumn[j].flagCheckNow) {eleSortSepatate.hide();eleSeparateSort.hide();}var str = insEscape.strLowCapitalize({data : obj.arrColumn[j].id});numWidthEleItem = obj.arrColumn[j].numWidth - this._staticLine.numIdle;eleItem.setStyle({width : numWidthEleItem + 'px'});var eleTitle = $(obj.arr[i].id + '_eleTitle_' + obj.arrColumn[j].id);if (obj.arrColumn[j].flagType == 'str' || obj.arrColumn[j].flagType == 'stamp') {if (this.vars.varsStatus.flagBtnUse && obj.arr[i].flagBtnUse) {this.insListener.set({bindAsEvent : 0, insCurrent : this, event : 'mouseover',strFunc : '_mouseoverTitle', ele : eleTitle, vars : { ele : eleTitle }});this.insListener.set({bindAsEvent : 0, insCurrent : this, event : 'mouseout',strFunc : '_mouseoutTitle', ele : eleTitle, vars : { ele : eleTitle }});}}}if (obj.arr[i].child.length) {this._setLine({arr       : obj.arr[i].child,arrColumn : obj.arrColumn,idParent  : obj.arr[i].id,parent    : eleUl});}}},_dblclickBtn : function(evt, obj){evt.stop();this.allot({insCurrent : this.insCurrent,from       : '_dblclickBtn',vars       : obj.vars});},_mousedownBtn : function(evt, obj){if (obj) evt.stop();else obj = evt;this._removeBtnSelect({arr : this.vars.varsDetail});if (!this._varsBtn.length) {this._varsBtn.push(obj.vars);} else {this._varsBtn = [];this._varsBtn.push(obj.vars);}this._setBtnSelect({arr       : this.vars.varsDetail,arrSelect : this._varsBtn,});this.setCake();this.allot({insCurrent : this.insCurrent,from       : '_mousedownBtn',flag       : evt.isLeftClick(),vars       : this._varsBtn});},_removeBtnSelect : function(obj){for (var i = 0; i < obj.arr.length; i++) {$(obj.arr[i].id).removeClassName('codeLibTableTreeBtnSelect');if (obj.arr[i].child.length) {this._removeBtnSelect({arr : obj.arr[i].child});}}},_setBtnSelect : function(obj){for (var i = 0; i < obj.arr.length; i++) {for (var j = 0; j < obj.arrSelect.length; j++) {if (obj.arr[i].id == obj.arrSelect[j].id) {this._removeBtnSelectLoad({vars : obj.arr[i]});this._removeBtnSelectBold({arr  : this.vars.varsColumn,vars : obj.arr[i]});$(obj.arr[i].id).addClassName('codeLibTableTreeBtnSelect');}}if (obj.arr[i].child.length) {this._setBtnSelect({arr       : obj.arr[i].child,arrSelect : obj.arrSelect});}}},_removeBtnSelectLoad : function(obj){if (obj.vars.strClassLoad == '') return;$(obj.vars.id).down('.codeLibTableTreeLineImg', 0).removeClassName(obj.vars.strClassLoad);obj.vars.strClassLoad = '';this.updateVars();$(obj.vars.id).down('.codeLibTableTreeLineImg', 0).addClassName(obj.vars.strClass);},_removeBtnSelectBold : function(obj){if (!this.vars.varsStatus.flagBoldUse || !obj.vars.flagBoldNow) return;obj.vars.flagBoldNow = 0;this.updateVars();for (var i = 0; i < obj.arr.length; i++) {if (!obj.arr[i].flagCheckNow) continue;if ($(obj.vars.id).down('.codeLibTableTreeLineTitle', i)) {var ele = $(obj.vars.id).down('.codeLibTableTreeLineTitle', i);ele.removeClassName('codeLibBaseFontBold');}}},removeBtnSelect : function(){this._varsBtn = [];this._removeBtnSelect({arr : this.vars.varsDetail});},_mouseoverBtn : function(obj){$(obj.vars.id).addClassName('codeLibTableTreeLineBtnOver');},_mouseoutBtn : function(obj){$(obj.vars.id).removeClassName('codeLibTableTreeLineBtnOver');},_setSortColumnListener : function(){this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'mousemove',strFunc : '_mousemoveSortColumn', ele : document, vars : ''});this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'mouseup',strFunc : '_mouseupSortColumn', ele : document, vars : ''});},_varsSortColumn : {},_mousedownSortColumn : function(evt, obj) {if (obj) evt.stop();else obj = evt;this._setSortColumnListener();this._removeCursorColumn({arr : this.vars.varsColumn});this._varsSortColumn = {};this._varsSortColumn = {flag     : 1,ele      : evt.element(),eleNavi  : null,vars     : obj.vars,varsOver : null,varsNext : this._checkSortColumnNext({arr  : this.vars.varsColumn,vars : obj.vars})};this._setSortColumnNavi({vars : obj.vars,evt      : evt});},_checkSortColumnNext : function(obj){for (var i = 0; i < obj.arr.length; i++) {if (obj.arr[i].id == obj.vars.id) {var flag = i + 1;if ( flag < obj.arr.length) {return obj.arr[flag];}return null;}}},_mouseoverSortColumn : function(obj){if (!this._varsSortColumn.flag) return;this._varsSortColumn.varsOver = obj.vars;if (this._varsSortColumn.vars.id == this._varsSortColumn.varsOver.id) return;if (this._varsSortColumn.varsNext&& this._varsSortColumn.varsNext.id == this._varsSortColumn.varsOver.id) return;var ele = $(this.idSelf + 'ColumnBox' + obj.vars.id).down('.codeLibTableTreeColumnBoxSortColumn', 0);ele.addClassName('codeLibTableTreeSortColumnOver');},_mouseoutSortColumn : function(obj){if (!this._varsSortColumn.flag) return;this._varsSortColumn.varsOver = '';var ele = $(this.idSelf + 'ColumnBox' + obj.vars.id).down('.codeLibTableTreeColumnBoxSortColumn', 0);ele.removeClassName('codeLibTableTreeSortColumnOver');},_staticSortColumn : {numNaviLeft : 15, numNaviTop : 5},_setSortColumnNavi : function(obj){var zIndex = this.insRoot.setZIndex();var ele = $(this.idSelf + 'ColumnBox' + obj.vars.id).cloneNode(true);$(this.insRoot.vars.varsSystem.id.root).insert(ele);this._varsSortColumn.eleNavi = ele;ele.addClassName('codeLibTableTreeNavi');ele.setStyle({left   : (obj.evt.pointerX() + this._staticSortColumn.numNaviLeft) + 'px',top    : (obj.evt.pointerY() + this._staticSortColumn.numNaviTop) + 'px',zIndex : zIndex});},_mousemoveSortColumn : function(evt, obj) {if (!this._varsSortColumn.flag) return;if (obj) evt.stop();else obj = evt;if (evt.pointerY() < this._varsMoveScroll.numTopMin) {this.elePositionLine.scrollTop -= this._staticMove.numPosShift;} else if (evt.pointerY() > this._varsMoveScroll.numTopMax) {this.elePositionLine.scrollTop += this._staticMove.numPosShift;}if (evt.pointerX() < this._varsMoveScroll.numLeftMin) {this.elePositionLine.scrollLeft -= this._staticMove.numPosShift;} else if (evt.pointerX() > this._varsMoveScroll.numLeftMax) {this.elePositionLine.scrollLeft += this._staticMove.numPosShift;}this._varsSortColumn.eleNavi.setStyle({top  : (evt.pointerY() + this._staticSortColumn.numNaviTop) + 'px',left : (evt.pointerX() + this._staticSortColumn.numNaviLeft) + 'px'});},_iniMove : function(){this._varMove();},_varsMoveScroll : null,_varMove : function(){var numTopMin = $(this.idSelf).up('.codeLibWindow',0).offsetTop+ this.insFormat.eleTemplate.body.offsetTop+ this._staticMove.numAreaNone;var numTopMax = numTopMin+ this.insFormat.eleTemplate.body.offsetHeight- this._staticMove.numArea * 2;var numLeftMin = $(this.idSelf).up('.codeLibWindow',0).offsetLeft+ this.insFormat.eleTemplate.body.offsetLeft+ this._staticMove.numAreaNone;var numLeftMax = numLeftMin+ this.eleInsert.offsetWidth- this._staticMove.numArea * 2;this._varsMoveScroll = {numTopMin  : numTopMin,numTopMax  : numTopMax,numLeftMin : numLeftMin,numLeftMax : numLeftMax};},_updateSortColumn : function(){this._varsBlock = {};this._getBlock({arr      : this.vars.varsColumn,idTarget : this._varsSortColumn.vars.id});this.vars.varsColumn = this._removeBlock({arr      : this.vars.varsColumn,idTarget : this._varsSortColumn.vars.id});this.vars.varsColumn = this._setBlockColumn({arr    : this.vars.varsColumn,idTarget : this._varsSortColumn.varsOver.id,block  : this._varsBlock});this._updateSortColumnSort({arr : this.vars.varsColumn});},_setBlockColumn : function(obj){var num = 0;for (var i = 0; i < obj.arr.length; i++) {if (obj.arr[i].id == obj.idTarget) num = i;}var array = [obj.block];obj.arr = obj.arr.slice(0, num).concat(array.concat(obj.arr.slice((num), obj.arr.length)));return obj.arr;},_updateSortColumnSort : function(obj){for (var i = 0; i < obj.arr.length; i++) {obj.arr[i].numSort = i;}},_mouseupSortColumn : function(evt,obj) {if (obj) evt.stop();else obj = evt;if (!this._varsSortColumn.flag) return;if (this._varsSortColumn.varsOver) {if (this._varsSortColumn.vars.id != this._varsSortColumn.varsOver.id) {if (this._varsSortColumn.varsNext&& this._varsSortColumn.varsNext.id == this._varsSortColumn.varsOver.id) {} else this._updateSortColumn();}}this.setCake();this._varsSortColumn.eleNavi.remove();this._varsSortColumn = {};this.iniReload({from : '_mouseupSortColumn'});},_iniBtn : function(){this._setBtnListener();},_setBtnListener : function(){this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'mousedown',strFunc : '_mousedownBtnRemove', ele : this.eleInsert, vars : ''});},_mousedownBtnRemove : function(evt){evt.stop();if (!this._varsBtn.length) return;this._varsBtn = [];this.updateVars();this._removeBtnSelect({arr : this.vars.varsDetail});},_iniBtnBottom : function(){this._extBtnBottom();},_iniBtnSelect : function(){if (!this._varsBtn.length) return;this._removeBtnSelect({arr : this.vars.varsDetail});this._setBtnSelect({arr       : this.vars.varsDetail,arrSelect : this._varsBtn,});},_mousedownFold : function(evt, obj){if (obj) evt.stop();else obj = evt;this._setFoldUpdate({arr : this.vars.varsDetail, vars : obj.vars});this._varsFold.now = 0;this._checkFoldNow({arr  : this.vars.varsDetail,vars : obj.vars});if (this._varsFold.now) {this.getScroll();$(this.insRoot.vars.varsSystem.id.root).insert(this.eleTree);this._setFoldUpdateStyle({arr        : this.vars.varsDetail,vars       : obj.vars,flagEffect : 0});this._setFoldRestoreStyle({arr  : this.vars.varsDetail,vars : obj.vars});this.insFormat.eleTemplate.body.insert(this.eleTree);this.setScroll();}this._setFoldUpdateStyle({arr        : this.vars.varsDetail,vars       : obj.vars,flagEffect : 1});this._mouseoutBtn({vars : obj.vars});this.setCake();},_varsFold : {now : 0, num : 0},_checkFoldNow : function(obj){for (var i = 0; i < obj.arr.length; i++) {if (obj.arr[i].id == obj.vars.id) {this._varsFold.now = obj.arr[i].flagFoldNow;return;}if (obj.arr[i].child.length) this._checkFoldNow({arr : obj.arr[i].child, vars : obj.vars});}},_setFoldUpdateStyle : function(obj){for (var i = 0; i < obj.arr.length; i++) {if (obj.arr[i].id == obj.vars.id) {var zIndex = this.insRoot.setZIndex();var idInsert = this.insRoot.vars.varsSystem.id.root;var insTree = this.insSelf;if (obj.flagEffect) {$(obj.arr[i].id).down('.codeLibTableTreeFold', 0).removeClassName('codeLibTableTreeFoldOpen');$(obj.arr[i].id).down('.codeLibTableTreeFold', 0).removeClassName('codeLibTableTreeFoldClose');if (obj.arr[i].flagFoldNow) {$(obj.arr[i].id).down('.codeLibTableTreeFold', 0).addClassName('codeLibTableTreeFoldOpen');new Effect.BlindDown($(obj.arr[i].id).next('ul', 0),{duration : 0.5});} else {$(obj.arr[i].id).down('.codeLibTableTreeFold', 0).addClassName('codeLibTableTreeFoldClose');new Effect.BlindUp($(obj.arr[i].id).next('ul', 0),{duration : 0.5});}} else {if (obj.arr[i].flagFoldNow) $(obj.arr[i].id).next('ul', 0).show();else $(obj.arr[i].id).next('ul', 0).hide();}}if (obj.arr[i].child.length) {this._setFoldUpdateStyle({arr        : obj.arr[i].child,vars       : obj.vars,flagEffect : obj.flagEffect});}}return obj.arr;},_setFoldUpdate : function(obj){for (var i = 0; i < obj.arr.length; i++) {if (obj.arr[i].id == obj.vars.id) {if (obj.arr[i].flagFoldNow) obj.arr[i].flagFoldNow = 0;else obj.arr[i].flagFoldNow = 1;}if (obj.arr[i].child.length) this._setFoldUpdate({arr : obj.arr[i].child, vars : obj.vars});}return obj.arr;},_setFoldRestoreStyle : function(obj){for (var i = 0; i < obj.arr.length; i++) {if (obj.arr[i].id == obj.vars.id) {if (!obj.arr[i].flagFoldNow) $(obj.vars.id).next('ul', 0).show();else $(obj.vars.id).next('ul', 0).hide();}if (obj.arr[i].child.length) {this._setFoldRestoreStyle({arr : obj.arr[i].child, vars : obj.vars});}}return obj.arr;},_staticMove : {numArea : 25, numAreaNone : 16, numNaviLeft : 15, numNaviTop : 5, numPosShift : 5, numTimer : 2000},_varsMoveScroll : null,_mouseoverTitle : function(obj){obj.ele.addClassName('codeLibTableTreeLineTitleOver');},_mouseoutTitle : function(obj){obj.ele.removeClassName('codeLibTableTreeLineTitleOver');},removeWrap : function(){this.eleInsert.setStyle({position : ''});$(this.idSelf).remove();if (this.eleInsertBtnLeft) this.eleInsertBtnLeft.innerHTML = '';if (this.eleInsertBtnRight) this.eleInsertBtnRight.innerHTML = '';}});var Code_Lib_Template = Class.create({get : function(obj){var tmplstr;if (obj.flagType == 'normalBox') {obj.numWrapWidth = obj.numWidth + 6;tmplstr='<div class="codeLibTemplateNormalBox" id="#{id}" style="width : #{numWrapWidth}px;">';tmplstr += '<div class="codeLibTemplateNormalBoxTop clearfix">';tmplstr += '<span class="codeLibTemplateNormalBoxTopLeft unselect"></span>';tmplstr += '<span class="codeLibTemplateNormalBoxTopMiddle unselect" style="width : #{numWidth}px;"></span>';tmplstr += '<span class="codeLibTemplateNormalBoxTopRight unselect"></span>';tmplstr += '</div>';tmplstr += '<div class="codeLibTemplateNormalBoxMiddle clearfix">';tmplstr += '<span class="codeLibTemplateNormalBoxMiddleLeft unselect" style="height : #{numHeight}px;" ></span>';tmplstr += '<span class="codeLibTemplateNormalBoxMiddleMiddle" style="width : #{numWidth}px; height : #{numHeight}px;" ></span>';tmplstr += '<span class="codeLibTemplateNormalBoxMiddleRight unselect" style="height : #{numHeight}px;" ></span>';tmplstr += '</div>';tmplstr += '<div class="codeLibTemplateNormalBoxBottom clearfix">';tmplstr += '<span class="codeLibTemplateNormalBoxBottomLeft unselect"></span>';tmplstr += '<span class="codeLibTemplateNormalBoxBottomMiddle unselect" style="width : #{numWidth}px;"></span>';tmplstr += '<span class="codeLibTemplateNormalBoxBottomRight unselect"></span>';tmplstr += '</div>';tmplstr += '</div>';}else if (obj.flagType == 'shadowBox') {obj.numWrapWidth = obj.numWidth + 12;tmplstr='<div class="codeLibTemplateShadowBox" id="#{id}" style="width : #{numWrapWidth}px;">';tmplstr += '<div class="codeLibTemplateShadowBoxTop clearfix">';tmplstr += '<span class="codeLibTemplateShadowBoxTopLeft unselect"></span>';tmplstr += '<span class="codeLibTemplateShadowBoxTopMiddle unselect" style="width : #{numWidth}px;"></span>';tmplstr += '<span class="codeLibTemplateShadowBoxTopRight unselect"></span>';tmplstr += '</div>';tmplstr += '<div class="codeLibTemplateShadowBoxMiddle clearfix">';tmplstr += '<span class="codeLibTemplateShadowBoxMiddleLeft unselect" style="height : #{numHeight}px;" ></span>';tmplstr += '<span class="codeLibTemplateShadowBoxMiddleMiddle" style="width : #{numWidth}px; height : #{numHeight}px;" ></span>';tmplstr += '<span class="codeLibTemplateShadowBoxMiddleRight unselect" style="height : #{numHeight}px;" ></span>';tmplstr += '</div>';tmplstr += '<div class="codeLibTemplateShadowBoxBottom clearfix">';tmplstr += '<span class="codeLibTemplateShadowBoxBottomLeft unselect"></span>';tmplstr += '<span class="codeLibTemplateShadowBoxBottomMiddle unselect" style="width : #{numWidth}px;"></span>';tmplstr += '<span class="codeLibTemplateShadowBoxBottomRight unselect"></span>';tmplstr += '</div>';tmplstr += '</div>';}else if (obj.flagType == 'menuBox') {obj.numWrapWidth = obj.numWidth + 12;tmplstr='<div class="codeLibTemplateMenuBox" id="#{id}" style="width : #{numWrapWidth}px;">';tmplstr += '<div class="codeLibTemplateMenuBoxTop clearfix">';tmplstr += '<span class="codeLibTemplateMenuBoxTopLeft unselect"></span>';tmplstr += '<span class="codeLibTemplateMenuBoxTopMiddle unselect" style="width : #{numWidth}px;"></span>';tmplstr += '<span class="codeLibTemplateMenuBoxTopRight unselect"></span>';tmplstr += '</div>';tmplstr += '<div class="codeLibTemplateMenuBoxMiddle clearfix">';tmplstr += '<span class="codeLibTemplateMenuBoxMiddleLeft unselect" style="height : #{numHeight}px;" ></span>';tmplstr += '<span class="codeLibTemplateMenuBoxMiddleMiddle" style="width : #{numWidth}px; height : #{numHeight}px;" ></span>';tmplstr += '<span class="codeLibTemplateMenuBoxMiddleRight unselect" style="height : #{numHeight}px;" ></span>';tmplstr += '</div>';tmplstr += '<div class="codeLibTemplateMenuBoxBottom clearfix">';tmplstr += '<span class="codeLibTemplateMenuBoxBottomLeft unselect"></span>';tmplstr += '<span class="codeLibTemplateMenuBoxBottomMiddle unselect" style="width : #{numWidth}px;"></span>';tmplstr += '<span class="codeLibTemplateMenuBoxBottomRight unselect"></span>';tmplstr += '</div>';tmplstr += '</div>';}else if (obj.flagType == 'scheduleFormat') {var fooder = 30;var separate = 5;var numIdle = 2;obj.headerWidth = obj.numWidth;obj.headerNaviHeight = 25;obj.headerGraduationHeight = 16;obj.numHeight = obj.numHeight - obj.headerNaviHeight- obj.headerGraduationHeight - separate*2 - fooder + numIdle;if (!obj.flagFooderUse) obj.numHeight = obj.numHeight + fooder;tmplstr='<div id="#{id}" class="codeLibTemplateListFormat">';tmplstr += '<div class="codeLibTemplateListFormatHeader">';tmplstr += '<div class="codeLibTemplateListFormatHeaderNavi">';tmplstr += '<div class="codeLibTemplateListFormatHeaderNaviWrap clearfix" style="width : #{headerWidth}px; height : #{headerNaviHeight}px;" ></div>';tmplstr += '<div class="codeLibTextLine"></div>';tmplstr += '<div class="codeLibTextDoubleLineIdle"></div>';tmplstr += '</div>';tmplstr += '<div class="codeLibTemplateListFormatHeaderGraduation">';tmplstr += '<div class="codeLibTemplateListFormatHeaderGraduationWrap clearfix" style="width : #{headerWidth}px; height : #{headerGraduationHeight}px;" ></div>';tmplstr += '<div class="codeLibTextLine"></div>';tmplstr += '<div class="codeLibTextDoubleLineIdle"></div>';tmplstr += '</div>';tmplstr += '</div>';tmplstr += '<div class="codeLibTemplateListFormatBody" style="width : #{numWidth}px; height : #{numHeight}px; overflow : auto;"></div>';if (obj.flagFooderUse) {tmplstr += '<div class="codeLibTemplateListFormatFooder">';tmplstr += '<div class="codeLibTextDoubleLineIdle"></div>';tmplstr += '<div class="codeLibTextLine"></div>';tmplstr += '<div class="codeLibTemplateListFormatFooderWrap clearfix">';tmplstr += '<div class="codeLibBaseFloatLeft">';tmplstr += '<ul>';tmplstr += '<li class="codeLibTemplateListFormatFooderStr codeLibBaseMarginLeftFive"></li>';tmplstr += '</ul>';tmplstr += '</div>';tmplstr += '<div class="codeLibBaseFloatRight">';tmplstr += '<ul>';tmplstr += '<li class="codeLibTemplateListFormatFooderStr codeLibBaseMarginRightFive"></li>';tmplstr += '</ul>';tmplstr += '</div>';tmplstr += '</div>';tmplstr += '</div>';}tmplstr += '</div>';}else if (obj.flagType == 'normalFormat') {var numMargin = 10;var header = 27;var fooder = 32;obj.numWidth = obj.numWidth - numMargin * 2;obj.numHeight = obj.numHeight - numMargin * 2  - header - fooder;if (!obj.flagFooderUse) obj.numHeight = obj.numHeight + fooder;this.varStyleNormalFormatWidthTitle(obj);tmplstr='<div id="#{id}" class="codeLibTemplateNormalFormat codeLibBaseMarginTen">';tmplstr += '<div class="codeLibTemplateNormalFormatHeader" >';tmplstr += '<div class="codeLibTemplateNormalFormatHeaderWrap clearfix">';if (obj.flagHeaderLeftUse) {tmplstr += '<div class="codeLibBaseFloatLeft">';tmplstr += '<ul>';if (!obj.strClassHeaderLeft) {if (!obj.flagHeaderRightWidth && !obj.flagHeaderLeftWidth) {tmplstr += '<li class="codeLibTemplateNormalFormatHeaderLeftWidthTitle codeLibTemplateNormalFormatHeaderStr codeLibBaseMarginLeftFive" title="#{strTitleHeaderLeft}" >#{strTitleHeaderLeft}</li>';}else {tmplstr += '<li class="codeLibTemplateNormalFormatHeaderLeftWidthTitle codeLibTemplateNormalFormatHeaderStr codeLibBaseMarginLeftFive" title="#{strTitleHeaderLeft}" style="width : #{numWidthHeaderLeft}px;">#{strTitleHeaderLeft}</li>';}}else {if (!obj.flagHeaderRightWidth && !obj.flagHeaderLeftWidth) {tmplstr += '<li class="codeLibTemplateNormalFormatHeaderLeftWidthTitle codeLibTemplateNormalFormatHeaderImg codeLibBaseMarginLeftFive #{strClassHeaderLeft}" title="#{strTitleHeaderLeft}"  >#{strTitleHeaderLeft}</li>';}else {tmplstr += '<li class="codeLibTemplateNormalFormatHeaderLeftWidthTitle codeLibTemplateNormalFormatHeaderImg codeLibBaseMarginLeftFive #{strClassHeaderLeft}" title="#{strTitleHeaderLeft}" style="width : #{numWidthHeaderLeft}px; ">#{strTitleHeaderLeft}</li>';}}tmplstr += '</ul>';tmplstr += '</div>';}if (obj.flagHeaderRightUse) {tmplstr += '<div class="codeLibBaseFloatRight">';tmplstr += '<ul>';if (!obj.strClassHeaderRight) {if (!obj.flagHeaderRightWidth && !obj.flagHeaderLeftWidth) {tmplstr += '<li class="codeLibTemplateNormalFormatHeaderRightWidthTitle codeLibTemplateNormalFormatHeaderStr codeLibBaseMarginRightFive" title="#{strTitleHeaderRight}">#{strTitleHeaderRight}</li>';}else {tmplstr += '<li class="codeLibTemplateNormalFormatHeaderRightWidthTitle codeLibTemplateNormalFormatHeaderStr codeLibBaseMarginRightFive" title="#{strTitleHeaderRight}" style="width : #{numWidthHeaderRight}px;">#{strTitleHeaderRight}</li>';}}else {if (!obj.flagHeaderRightWidth && !obj.flagHeaderLeftWidth) {tmplstr += '<li class="codeLibTemplateNormalFormatHeaderRightWidthTitle codeLibBaseMarginRightFive #{strClassHeaderRight}" title="#{strTitleHeaderRight}">#{strTitleHeaderRight}</li>';}else {tmplstr += '<li class="codeLibTemplateNormalFormatHeaderRightWidthTitle codeLibBaseMarginRightFive #{strClassHeaderRight}" title="#{strTitleHeaderRight}" style="width : #{numWidthHeaderRight}px;">#{strTitleHeaderRight}</li>';}}tmplstr += '</ul>';tmplstr += '</div>';}tmplstr += '</div>';tmplstr += '<div class="codeLibTextDoubleLine"></div>';tmplstr += '<div class="codeLibTextDoubleLineIdle"></div>';tmplstr += '</div>';if (obj.flagBodyAutoUse) {tmplstr += '<div class="codeLibTemplateNormalFormatBody #{strClassBody}" style="width : #{numWidth}px; height : #{numHeight}px; overflow : auto;">#{strBody}</div>';}else {tmplstr += '<div class="codeLibTemplateNormalFormatBody #{strClassBody}" style="width : #{numWidth}px; height : #{numHeight}px; overflow : hidden;">#{strBody}</div>';}if (obj.flagFooderUse) {tmplstr += '<div class="codeLibTemplateNormalFormatFooder">';tmplstr += '<div class="codeLibTextDoubleLineIdle"></div>';tmplstr += '<div class="codeLibTextDoubleLine"></div>';tmplstr += '<div class="codeLibTemplateNormalFormatFooderWrap clearfix " style="width : #{numWidth}px; height : ' + fooder + 'px; overflow : hidden;">';if (obj.flagFooderLeftUse) {tmplstr += '<div class="codeLibBaseFloatLeft">';tmplstr += '<ul>';if (!obj.strClassFooderLeft) {if (!obj.flagFooderRightWidth && !obj.flagFooderLeftWidth) {tmplstr += '<li class="codeLibTemplateNormalFormatFooderLeftWidthTitle codeLibTemplateNormalFormatFooderStr codeLibBaseMarginLeftFive">#{strTitleFooderLeft}</li>';}else {tmplstr += '<li class="codeLibTemplateNormalFormatFooderLeftWidthTitle codeLibTemplateNormalFormatFooderStr codeLibBaseMarginLeftFive" style="width : #{numWidthFooderLeft}px;">#{strTitleFooderLeft}</li>';}}else {if (!obj.flagFooderRightWidth && !obj.flagFooderLeftWidth) {tmplstr += '<li class="codeLibTemplateNormalFormatFooderLeftWidthTitle codeLibTemplateNormalFormatFooderImg codeLibBaseMarginLeftFive #{strClassFooderLeft}"">#{strTitleFooderLeft}</li>';}else {tmplstr += '<li class="codeLibTemplateNormalFormatFooderLeftWidthTitle codeLibTemplateNormalFormatFooderImg codeLibBaseMarginLeftFive #{strClassFooderLeft}" style="width : #{numWidthFooderLeft}px;">#{strTitleFooderLeft}</li>';}}tmplstr += '</ul>';tmplstr += '</div>';}if (obj.flagFooderRightUse) {tmplstr += '<div class="codeLibBaseFloatRight">';tmplstr += '<ul>';if (!obj.strClassFooderRight) {if (!obj.flagFooderRightWidth && !obj.flagFooderLeftWidth) {tmplstr += '<li class="codeLibTemplateNormalFormatFooderRightWidthTitle codeLibTemplateNormalFormatFooderStr codeLibBaseMarginRightFive">#{strTitleFooderRight}</li>';}else {tmplstr += '<li class="codeLibTemplateNormalFormatFooderRightWidthTitle codeLibTemplateNormalFormatFooderStr codeLibBaseMarginRightFive" style="width : #{numWidthFooderRight}px;">#{strTitleFooderRight}</li>';}}else {if (!obj.flagFooderRightWidth && !obj.flagFooderLeftWidth) {tmplstr += '<li class="codeLibTemplateNormalFormatFooderRightWidthTitle codeLibTemplateNormalFormatFooderImg codeLibBaseMarginRightFive #{strClassFooderRight}">#{strTitleFooderRight}</li>';}else {tmplstr += '<li class="codeLibTemplateNormalFormatFooderRightWidthTitle codeLibTemplateNormalFormatFooderImg codeLibBaseMarginRightFive #{strClassFooderRight}" style="width : #{numWidthFooderRight}px;">#{strTitleFooderRight}</li>';}}tmplstr += '</ul>';tmplstr += '</div>';}tmplstr += '</div>';tmplstr += '</div>';}tmplstr += '</div>';} else if (obj.flagType == 'circleBox') {var idle = 10;var point = 1;var eleBtnWrap = $(document.createElement('span'));eleBtnWrap.addClassName('codeLibTemplateCircleBoxWrap');eleBtnWrap.id = obj.id;eleBtnWrap.addClassName('codeLibBaseCursorDefault');eleBtnWrap.addClassName('unselect');eleBtnWrap.unselectable = 'on';var eleBtnMiddle = $(document.createElement('span'));eleBtnMiddle.addClassName('codeLibTemplateCircleBoxMiddle');if (obj.strClass) {var eleClass = $(document.createElement('span'));eleClass.addClassName(obj.strClass);eleBtnWrap.title = obj.strTitle;eleBtnMiddle.insert(eleClass);} else {eleBtnMiddle.insert(obj.strTitle);$(this.insRoot.vars.varsSystem.id.root).insert(eleBtnMiddle);}var numWidth = (obj.numWidth)? obj.numWidth : eleBtnMiddle.offsetWidth + idle * 2;var eleBtnTop = $(document.createElement('span'));eleBtnTop.addClassName('codeLibTemplateCircleBoxTop');eleBtnWrap.insert(eleBtnTop);eleBtnTop.setStyle({width           : (numWidth - point * 2) + 'px',backgroundColor : obj.bgColor});eleBtnWrap.insert(eleBtnMiddle);eleBtnMiddle.setStyle({width           : numWidth + 'px',backgroundColor : obj.bgColor});var eleBtnBottom = $(document.createElement('span'));eleBtnBottom.addClassName('codeLibTemplateCircleBoxBottom');eleBtnWrap.insert(eleBtnBottom);eleBtnBottom.setStyle({width           : (numWidth - point * 2) + 'px',backgroundColor : obj.bgColor});eleBtnWrap.setStyle({width : numWidth + 'px'});return eleBtnWrap;} else if (obj.flagType == 'singleFormat') {var numMargin = 0;var header = 25;var fooder = 30;obj.numWidth = obj.numWidth - numMargin * 2;obj.numHeight = obj.numHeight - numMargin * 2  - header - fooder;if (!obj.flagHeaderUse) obj.numHeight = obj.numHeight + header;if (!obj.flagFooderUse) obj.numHeight = obj.numHeight + fooder;tmplstr='<div id="#{id}" class="codeLibTemplateListFormat">';if (obj.flagHeaderUse) {tmplstr += '<div class="codeLibTemplateListFormatHeader">';tmplstr += '<div class="codeLibTemplateListFormatHeaderWrap clearfix">';if (obj.flagHeaderLeftUse) {tmplstr += '<div class="codeLibBaseFloatLeft">';tmplstr += '<ul>';if (!obj.strClassHeaderLeft) {tmplstr += '<li class="codeLibTemplateListFormatHeaderStr codeLibBaseMarginLeftFive">#{strTitleHeaderLeft}</li>';}else {tmplstr += '<li class="codeLibTemplateListFormatHeaderImg codeLibBaseMarginLeftFive #{strClassHeaderLeft}">#{strTitleHeaderLeft}</li>';}tmplstr += '</ul>';tmplstr += '</div>';}if (obj.flagHeaderRightUse) {tmplstr += '<div class="codeLibBaseFloatRight">';tmplstr += '<ul>';if (!obj.strClassHeaderRight) {tmplstr += '<li class="codeLibTemplateListFormatHeaderStr codeLibBaseMarginRightFive">#{strTitleHeaderRight}</li>';}else {tmplstr += '<li class="codeLibTemplateListFormatHeaderImg codeLibBaseMarginRightFive #{strClassHeaderRight}" style="margin-top: 4px; height: 14px;" >#{strTitleHeaderRight}</li>';}tmplstr += '</ul>';tmplstr += '</div>';}tmplstr += '</div>';tmplstr += '<div class="codeLibTextLine"></div>';tmplstr += '<div class="codeLibTextDoubleLineIdle"></div>';tmplstr += '</div>';}if (obj.flagBodyAutoUse) {tmplstr += '<div class="codeLibTemplateListFormatBody #{strClassBody}" style="width : #{numWidth}px; height : #{numHeight}px; overflow : auto;">#{strBody}</div>';}else {tmplstr += '<div class="codeLibTemplateListFormatBody #{strClassBody}" style="width : #{numWidth}px; height : #{numHeight}px;">#{strBody}</div>';}if (obj.flagFooderUse) {tmplstr += '<div class="codeLibTemplateListFormatFooder" style="width : #{numWidth}px; height : ' + fooder + 'px; overflow : hidden;">';tmplstr += '<div class="codeLibTextDoubleLineIdle"></div>';tmplstr += '<div class="codeLibTextLine"></div>';tmplstr += '<div class="codeLibTemplateListFormatFooderWrap clearfix">';if (obj.flagFooderLeftUse) {tmplstr += '<div class="codeLibBaseFloatLeft">';tmplstr += '<ul>';if (!obj.strClassFooderLeft) {tmplstr += '<li class="codeLibTemplateListFormatFooderStr codeLibBaseMarginLeftFive">#{strTitleFooderLeft}</li>';}else {tmplstr += '<li class="codeLibTemplateListFormatFooderImg codeLibBaseMarginLeftFive #{strClassFooderLeft}">#{strTitleFooderLeft}</li>';}tmplstr += '</ul>';tmplstr += '</div>';}if (obj.flagFooderRightUse) {tmplstr += '<div class="codeLibBaseFloatRight">';tmplstr += '<ul>';if (!obj.strClassFooderRight) {tmplstr += '<li class="codeLibTemplateListFormatFooderStr codeLibBaseMarginRightFive">#{strTitleFooderRight}</li>';}else {tmplstr += '<li class="codeLibTemplateListFormatFooderImg codeLibBaseMarginRightFive #{strClassFooderRight}" >#{strTitleFooderRight}</li>';}tmplstr += '</ul>';tmplstr += '</div>';}tmplstr += '</div>';tmplstr += '</div>';}tmplstr += '</div>';}var data = tmplstr.interpolate(obj);return data;},updateStyle : function(obj){if (obj.flagType == 'normalBox') {obj.numWrapWidth = obj.numWidth + 6;$(obj.id).style.width = obj.numWrapWidth + 'px';$(obj.id).down('.codeLibTemplateNormalBoxTopMiddle',0).style.width = obj.numWidth + 'px';$(obj.id).down('.codeLibTemplateNormalBoxMiddleMiddle',0).style.width = obj.numWidth + 'px';$(obj.id).down('.codeLibTemplateNormalBoxBottomMiddle',0).style.width = obj.numWidth + 'px';$(obj.id).down('.codeLibTemplateNormalBoxMiddleLeft',0).style.height = obj.numHeight + 'px';$(obj.id).down('.codeLibTemplateNormalBoxMiddleMiddle',0).style.height = obj.numHeight + 'px';$(obj.id).down('.codeLibTemplateNormalBoxMiddleRight',0).style.height = obj.numHeight + 'px';} else if (obj.flagType == 'shadowBox') {obj.numWrapWidth = obj.numWidth + 12;$(obj.id).style.width = obj.numWrapWidth + 'px';$(obj.id).down('.codeLibTemplateShadowBoxTopMiddle',0).style.width = obj.numWidth + 'px';$(obj.id).down('.codeLibTemplateShadowBoxMiddleMiddle',0).style.width = obj.numWidth + 'px';$(obj.id).down('.codeLibTemplateShadowBoxBottomMiddle',0).style.width = obj.numWidth + 'px';$(obj.id).down('.codeLibTemplateShadowBoxMiddleLeft',0).style.height = obj.numHeight + 'px';$(obj.id).down('.codeLibTemplateShadowBoxMiddleMiddle',0).style.height = obj.numHeight + 'px';$(obj.id).down('.codeLibTemplateShadowBoxMiddleRight',0).style.height = obj.numHeight + 'px';} else if (obj.flagType == 'menuBox') {obj.numWrapWidth = obj.numWidth + 12;$(obj.id).style.width = obj.numWrapWidth + 'px';$(obj.id).down('.codeLibTemplateMenuBoxTopMiddle',0).style.width = obj.numWidth + 'px';$(obj.id).down('.codeLibTemplateMenuBoxMiddleMiddle',0).style.width = obj.numWidth + 'px';$(obj.id).down('.codeLibTemplateMenuBoxBottomMiddle',0).style.width = obj.numWidth + 'px';$(obj.id).down('.codeLibTemplateMenuBoxMiddleLeft',0).style.height = obj.numHeight + 'px';$(obj.id).down('.codeLibTemplateMenuBoxMiddleMiddle',0).style.height = obj.numHeight + 'px';$(obj.id).down('.codeLibTemplateMenuBoxMiddleRight',0).style.height = obj.numHeight + 'px';} else if (obj.flagType == 'singleFormat') {var numMargin = 0;var header = 25;var fooder = 30;obj.numWidth = obj.numWidth - numMargin * 2;obj.numHeight = obj.numHeight - numMargin * 2  - header - fooder;if (!obj.flagHeaderUse) obj.numHeight = obj.numHeight + header;if (!obj.flagFooderUse) obj.numHeight = obj.numHeight + fooder;$(obj.id).down('.codeLibTemplateListFormatBody', 0).style.width = obj.numWidth + 'px';$(obj.id).down('.codeLibTemplateListFormatBody', 0).style.height = obj.numHeight + 'px';} else if (obj.flagType == 'normalFormat') {var numMargin = 10;var header = 27;var fooder = 32;obj.numWidth = obj.numWidth - numMargin * 2;obj.numHeight = obj.numHeight - numMargin * 2  - header - fooder;$(obj.id).down('.codeLibTemplateNormalFormatBody',0).style.width = obj.numWidth + 'px';$(obj.id).down('.codeLibTemplateNormalFormatBody',0).style.height = obj.numHeight + 'px';this.varStyleNormalFormatWidthTitle(obj);if (obj.flagHeaderLeftUse) {if (obj.flagHeaderRightWidth || obj.flagHeaderLeftWidth) {var ele = $(obj.id).down('.codeLibTemplateNormalFormatHeaderLeftWidthTitle',0);ele.style.width = obj.numWidthHeaderLeft + 'px';}}if (obj.flagHeaderRightUse) {if (obj.flagHeaderRightWidth || obj.flagHeaderLeftWidth) {var ele = $(obj.id).down('.codeLibTemplateNormalFormatHeaderRightWidthTitle',0);ele.style.width = obj.numWidthHeaderRight + 'px';}}if (obj.flagFooderUse) {$(obj.id).down('.codeLibTemplateNormalFormatFooderWrap',0).style.width = obj.numWidth + 'px';}if (obj.flagFooderLeftUse) {if (obj.flagFooderRightWidth || obj.flagFooderLeftWidth) {var ele = $(obj.id).down('.codeLibTemplateNormalFormatFooderLeftWidthTitle',0);ele.style.width = obj.numWidthFooderLeft + 'px';}}if (obj.flagFooderRightUse) {if (obj.flagFooderRightWidth || obj.flagFooderLeftWidth) {var ele = $(obj.id).down('.codeLibTemplateNormalFormatFooderRightWidthTitle',0);ele.style.width = obj.numWidthFooderRight + 'px';}}}},varStyleNormalFormatWidthTitle : function(obj){var numMargin = 5;var numPadding = 20;var numWidthMin = 16;var numWidth = obj.numWidth;if (!obj.flagHeaderLeftUse) {obj.numWidthHeaderLeft = numMargin * 3;} else if (!obj.flagHeaderRightUse) {obj.numWidthHeaderRight = numMargin * 3;} else {if (!obj.flagHeaderRightWidth && obj.flagHeaderLeftWidth) {obj.numWidthHeaderLeft = numWidth - numPadding * 2 - numMargin * 3;obj.numWidthHeaderRight = numWidthMin;} else if (obj.flagHeaderRightWidth && !obj.flagHeaderLeftWidth) {obj.numWidthHeaderLeft = numWidthMin;obj.numWidthHeaderRight = numWidth - numPadding * 2 - numMargin * 3;}}if (!obj.flagFooderLeftUse) {obj.numWidthFooderLeft = numMargin * 3;} else if (!obj.flagFooderRightUse) {obj.numWidthFooderRight = numMargin * 3;} else {if (!obj.flagFooderRightWidth && obj.flagFooderLeftWidth) {obj.numWidthFooderLeft = numWidth - numPadding * 2 - numMargin * 3;obj.numWidthFooderRight = 0;} else if (obj.flagFooderRightWidth && !obj.flagFooderLeftWidth) {obj.numWidthFooderLeft = 0;obj.numWidthFooderRight = numWidth - numPadding * 2 - numMargin * 3;}}}});var Code_Lib_TemplateFormat = Class.create({initialize : function(obj){this.iniVars(obj);this.iniWrap();this.iniTemplate();},insRoot : null, insCurrent : null, insSelf : null, idSelf : null, vars : null,iniVars : function(obj){this.eleInsert = obj.eleInsert;this.insRoot = obj.insRoot;this.insCurrent = obj.insCurrent;this.insSelf = this;this.idSelf = obj.idSelf;this.vars = obj.vars;},eleWrap : null,iniWrap : function(){var ele = $(document.createElement('div'));ele.id = this.idSelf;this.eleInsert.insert(ele);this.eleWrap = ele;},removeWrap : function(){this.eleWrap.remove();},eleTemplate : null,iniTemplate : function(){this.setTemplate();},setTemplate : function(){var cut = this.vars;cut.id = this.idSelf + 'Template';cut.numWidth = this.getTemplateWidth();cut.numHeight = this.getTemplateHeight();var insTemplate = new Code_Lib_Template();var data = insTemplate.get(cut);this.eleWrap.insert(data);this.eleTemplate = {};this.eleTemplate.header = this.eleWrap.down('.codeLibTemplateListFormatHeader', 0);this.eleTemplate.body = this.eleWrap.down('.codeLibTemplateListFormatBody', 0);this.eleTemplate.fooder = (this.eleWrap.down('.codeLibTemplateListFormatFooder', 0))?  this.eleWrap.down('.codeLibTemplateListFormatFooder',0): null;},getTemplateWidth : function(){var array = this.eleInsert.style.width.split('px');var data = parseFloat(array[0]);return data;},getTemplateHeight : function(){array = this.eleInsert.style.height.split('px');var data = parseFloat(array[0]);return data;},updateTemplateStyle : function(){var cut = this.vars;cut.id = this.idSelf + 'Template';cut.numWidth = this.getTemplateWidth();cut.numHeight = this.getTemplateHeight();var insTemplate = new Code_Lib_Template();insTemplate.updateStyle(cut);}});var Code_Lib_TemplateLayout = Class.create(Code_Lib_ExtLib,{initialize : function(obj){this._extAllot(obj);this._iniVars(obj);this._iniLayout();if (this.vars.varsStatus.flagNaviUse) this._iniNavi();if (this.vars.varsStatus.flagListUse) this._iniList();if (this.vars.varsStatus.flagDetailUse) this._iniDetail();},insLayout : null,_iniLayout : function(){this.insLayout = new Code_Lib_Layout({eleInsert  : this.eleInsert,idWindow   : this.idWindow,insRoot    : this.insRoot,insCurrent : this,idSelf     : this.idSelf + 'Layout',allot      : this._getLayoutAllot(),vars       : this.vars.varsLayout});},_getLayoutAllot : function(){var allot = function(obj){var insCurrent = obj.insCurrent;if (obj.from.match(/^_mouseupResize|_mouseupMove|_mousedownSwitch$/)) {insCurrent.eventLayout();} else if (obj.from.match(/^_preMouseupResize|_preMouseupMove|_preMousedownSwitch$/)) {insCurrent.preEventLayout();}};return allot;},_iniVars : function(obj){this._extVars(obj);},_iniNavi : function(){if (this.vars.varsStatus.flagNaviToolUse) this._iniNaviTool();this._iniNaviUnder();},insNaviTool : null,_iniNaviTool : function(){this.insNaviTool = new Code_Lib_BtnTool({eleInsert  : $(this.idSelf + 'LayoutNaviBox').down('.codeLibTemplateNormalBoxMiddleMiddle', 0),insRoot    : this.insRoot,insCurrent : this,idSelf     : this.idSelf + 'ToolNavi',allot      : this._getNaviToolAllot(),vars       : this.vars.navi.varsTool});},_getNaviToolAllot : function(){var allot = function(obj){var insCurrent = obj.insCurrent;return insCurrent.allot({insCurrent : insCurrent.insCurrent,from       : 'navi-' + obj.from,vars       : obj.vars});};return allot;},insNaviUnder : null,_iniNaviUnder : function(){this._setNaviUnder({vars : this.vars.navi.varsFormat});},_setNaviUnder : function(obj){this.insNaviUnder = new Code_Lib_TemplateUnder({eleInsert  : $(this.idSelf + 'LayoutNavi').down('.codeLibTemplateShadowBoxMiddleMiddle', 0),insRoot    : this.insRoot,insCurrent : this,idSelf     : this.idSelf + 'LayoutNavi',allot      : this._getNaviUnderAllot(),vars       : {flagBeforeBox : (this.vars.varsStatus.flagNaviToolUse)? 1 : 0,varsFormat    : obj.vars}});},_getNaviUnderAllot : function(){var allot = function(obj){var insCurrent = obj.insCurrent;if (obj.from == 'eventLayout') {insCurrent.insNaviUnder.updateStyle();}};return allot;},_iniList : function(){if (this.vars.varsStatus.flagListToolUse) this._iniListTool();this._iniListUnder();},insListTool : null,_iniListTool : function(){this.insListTool = new Code_Lib_BtnTool({eleInsert  : $(this.idSelf + 'LayoutListBox').down('.codeLibTemplateNormalBoxMiddleMiddle', 0),insRoot    : this.insRoot,insCurrent : this,idSelf     : this.idSelf + 'ToolList',allot      : this._getListToolAllot(),vars       : this.vars.list.varsTool});},_getListToolAllot : function(){var allot = function(obj){var insCurrent = obj.insCurrent;return insCurrent.allot({insCurrent : insCurrent.insCurrent,from       : 'list-' + obj.from,vars       : obj.vars,varsTarget : obj.varsTarget});};return allot;},insListUnder : null,_iniListUnder : function(){this._setListUnder({vars : this.vars.list.varsFormat});},_setListUnder : function(obj){this.insListUnder = new Code_Lib_TemplateUnder({eleInsert  : $(this.idSelf + 'LayoutList').down('.codeLibTemplateShadowBoxMiddleMiddle', 0),insRoot    : this.insRoot,insCurrent : this,idSelf     : this.idSelf + 'LayoutList',allot      : this._getListUnderAllot(),vars       : {flagBeforeBox  : (this.vars.varsStatus.flagListToolUse)? 1 : 0,varsFormat     : obj.vars}});},_getListUnderAllot : function(){var allot = function(obj){var insCurrent = obj.insCurrent;if (obj.from == 'eventLayout') {insCurrent.insListUnder.updateStyle();}};return allot;},_iniDetail : function(){if (this.vars.varsStatus.flagDetailToolUse) this._iniDetailTool();this._iniDetailUnder();},insDetailTool : null,_iniDetailTool : function(){this.insDetailTool = new Code_Lib_BtnTool({eleInsert  : $(this.idSelf + 'LayoutDetailBox').down('.codeLibTemplateNormalBoxMiddleMiddle', 0),insRoot    : this.insRoot,insCurrent : this,idSelf     : this.idSelf + 'ToolDetail',allot      : this._getDetailToolAllot(),vars       : this.vars.detail.varsTool});},_getDetailToolAllot : function(){var allot = function(obj){var insCurrent = obj.insCurrent;return insCurrent.allot({insCurrent : insCurrent.insCurrent,from       : 'detail-' + obj.from,vars       : obj.vars,varsTarget : obj.varsTarget});};return allot;},insDetailUnder : null,_iniDetailUnder : function(){this._setDetailUnder({vars : this.vars.detail.varsFormat});},_setDetailUnder : function(obj){this.insDetailUnder = new Code_Lib_TemplateUnder({eleInsert  : $(this.idSelf + 'LayoutDetail').down('.codeLibTemplateShadowBoxMiddleMiddle', 0),insRoot    : this.insRoot,insCurrent : this,idSelf     : this.idSelf + 'LayoutDetail',allot      : this._getDetailUnderAllot(),vars       : {flagBeforeBox  : (this.vars.varsStatus.flagDetailToolUse)? 1 : 0,varsFormat     : obj.vars}});},_getDetailUnderAllot : function(){var allot = function(obj){var insCurrent = obj.insCurrent;if (obj.from == 'eventLayout') {insCurrent.insDetailUnder.updateStyle();}};return allot;},updateTool : function(obj){var str = obj.from.capitalize();if (this.vars.varsStatus['flag' + str + 'ToolUse']) {this._updateToolChild({arr      : this['ins' + str + 'Tool'].vars.varsDetail,flagLock : obj.flagLock,idTarget : obj.idTarget});this['ins' + str + 'Tool'].iniReload();}},_updateToolChild : function(obj){for (var i = 0; i < obj.arr.length; i++) {if (obj.arr[i].id == obj.idTarget) {if (obj.flagLock) obj.arr[i].flagNow = 0;else obj.arr[i].flagNow = 1;return;}}},checkToolLock : function(obj){var str = obj.from.capitalize();if (this.vars.varsStatus['flag' + str + 'ToolUse']) {return this._checkToolLockChild({arr      : this['ins' + str + 'Tool'].vars.varsDetail,idTarget : obj.idTarget});}},_checkToolLockChild : function(obj){var flag = 0;for (var i = 0; i < obj.arr.length; i++) {if (obj.arr[i].id == obj.idTarget) {if (obj.arr[i].flagNow == 0) {flag = 1;}break;}}return flag;},eventWindow : function(){this.insLayout.iniReload();this.eventLayout();},eventLayout : function(){if (this.vars.varsStatus.flagNaviUse) {this.insNaviUnder.allot({from       : 'eventLayout',insCurrent : this});}if (this.vars.varsStatus.flagListUse) {this.insListUnder.allot({from       : 'eventLayout',insCurrent : this});}if (this.vars.varsStatus.flagDetailUse) {this.insDetailUnder.allot({from       : 'eventLayout',insCurrent : this});}this.allot({insCurrent : this.insCurrent,from       : 'eventLayout'});},preEventLayout : function(){this.allot({insCurrent : this.insCurrent,from       : 'preEventLayout'});},eventRemove : function(obj){this.allot({insCurrent : this.insCurrent,from       : 'eventRemove'});if (this.vars.varsStatus.flagDetailToolUse) this.insDetailTool.stopListener();if (this.vars.varsStatus.flagListToolUse) this.insListTool.stopListener();if (this.vars.varsStatus.flagNaviToolUse) this.insNaviTool.stopListener();this.insLayout.stopListener();}});var Code_Lib_TemplatePopup = Class.create({initialize : function(obj){this._iniAllot(obj);this.iniVars(obj);this.iniLock();this.iniWrap();this.iniTemplate();this.iniUnder();},insRoot : null, insCurrent : null, insSelf : null, idSelf : null, vars : null,iniVars : function(obj){this.eleInsert = obj.eleInsert;this.insRoot = obj.insRoot;this.insCurrent = obj.insCurrent;this.insSelf = this;this.idSelf = obj.idSelf;this.vars = obj.vars;},updateStyle : function(obj){this.updateStyle();},insUnder : null,iniUnder : function(){this.setUnder({vars : this.vars.varsFormat});},setUnder : function(obj){this.insUnder = new Code_Lib_TemplateUnder({eleInsert  : this.eleTemplate,insRoot    : this.insRoot,insCurrent : this.insSelf,idSelf     : this.idSelf + 'Under',allot      : this.getUnderAllot(),vars   : {flagBeforeBox  : 0,varsFormat : obj.vars}});},getUnderAllot : function(){var allot = function(obj){var insCurrent = obj.insCurrent;if (obj.from == 'eventLayout') {insCurrent.insUnder.updateStyle();}};return allot;},iniLock : function(){if (!this.vars.varsStatus.flagLockUse) return;this.templateLock();},insLock : null,templateLock : function(){this.insLock = new Code_Lib_LockTemp({idSelf     : this.idSelf + 'Lock',numZIndex  : this.insRoot.setZIndex(),idInsert   : this.insRoot.vars.varsSystem.id.root,insCurrent : this.insSelf,strFunc    : 'removeWrap'});},eleWrap : null,iniWrap : function(){var ele = $(document.createElement('div'));ele.id = this.idSelf;this.eleInsert.insert(ele);this.eleWrap = ele;this.eleWrap.setStyle({'zIndex' : this.insRoot.setZIndex()});},removeWrap : function(){if (this.insLock) this.insLock.insListener.stop();this.eleWrap.remove();},eleTemplate : null,iniTemplate : function(){this.setTemplate();},staticTemplate : {numMenu : 6},setTemplate : function(){var insTemplate = new Code_Lib_Template();var dataSha = insTemplate.get({flagType  : 'menuBox',numWidth  : this.vars.varsMenu.numWidth,numHeight : this.vars.varsMenu.numHeight,id        : ''});this.eleWrap.insert(dataSha);this.eleTemplate = this.eleWrap.down('.codeLibTemplateMenuBoxMiddleMiddle', 0);},allot : {},_iniAllot : function(obj){this.allot = obj.allot;}});var Code_Lib_TemplateUnder = Class.create({initialize : function(obj){this._iniAllot(obj);this.iniVars(obj);this.setWrap();this.templateUnder();this.setWrapFormat();this.setFormat();},iniReload : function(obj){this.removeWrap();this.setWrap();this.templateUnder();this.setWrapFormat();this.setFormat();},insRoot : null, idRoot : null, insCurrent : null, insSelf : null, idSelf : null, vars : null,iniVars : function(obj){this.eleInsert = obj.eleInsert;this.insRoot = obj.insRoot;this.insCurrent = obj.insCurrent;this.insSelf = this;this.idSelf = obj.idSelf;this.vars = obj.vars;},updateStyle : function(obj){this.updateUnderStyle();this.updateFormatStyle();},eleWrap : null,setWrap : function(){var ele = $(document.createElement('div'));ele.id = this.idSelf;this.eleInsert.insert(ele);this.eleWrap = ele;},removeWrap : function(){this.eleWrap.remove();},templateUnder : function(){var insTemplate = new Code_Lib_Template();var dataNor = insTemplate.get({flagType  : 'normalBox',numWidth  : this.getUnderWidth(),numHeight : this.getUnderHeight(),id        : this.idSelf + 'Under'});this.eleWrap.insert(dataNor);this.eleWrap.down('.codeLibTemplateNormalBoxMiddleMiddle', 0).addClassName('codeLibBaseBgFff');},_staticUnder : {numTemplateHeight : 6, numTemplateWidth : 6, numBeforeBox : 46},getUnderWidth : function(){var array = this.eleInsert.style.width.split('px');var data =  parseFloat(array[0]) - this._staticUnder.numTemplateWidth;return  data;},getUnderHeight : function(){var array = this.eleInsert.style.height.split('px');var data =  parseFloat(array[0]) - this._staticUnder.numTemplateHeight;if (this.vars.flagBeforeBox) {data -= this._staticUnder.numBeforeBox;}return data;},updateUnderStyle : function(){var insTemplate = new Code_Lib_Template();insTemplate.updateStyle({flagType  : 'normalBox',numWidth  : this.getUnderWidth(),numHeight : this.getUnderHeight(),id        : this.idSelf + 'Under'});},wrapFormat : null,setWrapFormat : function(){this.wrapFormat = this.eleWrap.down('.codeLibTemplateNormalBoxMiddleMiddle', 0);},eleFormat : {},setFormat : function(){this.vars.varsFormat.id = this.idSelf + 'Format';this.vars.varsFormat.numWidth = this.getFormatWidth();this.vars.varsFormat.numHeight = this.getFormatHeight();var insTemplate = new Code_Lib_Template();var data = insTemplate.get(this.vars.varsFormat);this.wrapFormat.insert(data);this.eleFormat = {};this.eleFormat.header = this.eleWrap.down('.codeLibTemplateNormalFormatHeader', 0);this.eleFormat.body = this.eleWrap.down('.codeLibTemplateNormalFormatBody', 0);this.eleFormat.fooder = this.eleWrap.down('.codeLibTemplateNormalFormatFooder', 0);},getFormatWidth : function(){var array = this.wrapFormat.style.width.split('px');var data = parseFloat(array[0]);return  data;},getFormatHeight : function(){var array = this.wrapFormat.style.height.split('px');var data = parseFloat(array[0]);return  data;},updateFormatStyle : function(){var cut = this.vars.varsFormat;cut.id = this.idSelf + 'Format';cut.numWidth = this.getFormatWidth();cut.numHeight = this.getFormatHeight();var insTemplate = new Code_Lib_Template();insTemplate.updateStyle(cut);},getEleLoading : function(){return this.eleFormat.header.down('.codeLibBaseMarginRightFive',0);},allot : {},_iniAllot : function(obj){this.allot = obj.allot;}});var Code_Lib_Thumbnail = Class.create({varsLoad : {"varsWhole":{"strTimeLength":"\u6642\u9593","strSize":"\u30b5\u30a4\u30ba","strTimeRegister":"\u8a18\u9332"}},initialize : function(obj){this._iniAllot(obj);this.iniVars(obj);this.iniListener();this.iniWrap();this.iniFormat();this.iniLog();this.iniRelay();this.iniPage();this.iniBtnBottom();},iniReload : function(){this.stopListener();$(this.idSelf).remove();this.iniWrap();this.iniFormat();this.iniLog();this.iniRelay();this.iniPage();this.iniBtnBottom();},iniRelay : function(){if (!this.vars.varsStatus.flagRelayUse) return;this.varsRelay.numTop = this.insFormat.eleTemplate.body.offsetHeight;this.varsRelay.height = this.insFormat.eleTemplate.body.scrollHeight;this.templateRelayListener();},templateRelayListener : function(){this.insListener.set({flagType15 : 1, bindAsEvent : 1, insCurrent : this, event : 'scroll',strFunc : 'scrollRelay', ele : this.insFormat.eleTemplate.body, vars : ''});},varsRelay : { numTop : 0, numHeight : 0, num : 0 },scrollRelay : function(){var numTopNow = this.insFormat.eleTemplate.body.scrollTop + this.insFormat.eleTemplate.body.offsetHeight;if (this.varsRelay.numTop >= this.varsRelay.numHeight) return;if (numTopNow > this.varsRelay.numTop) this.varsRelay.numTop = numTopNow;this.loadRelay({arr : this.vars.varsDetail});},loadRelay : function(obj){for (var i = this.varsRelay.num + 1; i < obj.arr.length; i++) {var ele = $(this.idSelf + 'Log' + i).down('.codeLibThumbnailLogImgWrap', 0);if (!obj.arr[i].varsThumbnailDetail.stampPath) {ele.innerHTML = '';var eleImg = $(document.createElement('span'));eleImg.addClassName('codeLibThumbnailLogImg');eleImg.title = obj.arr[i].varsThumbnailDetail.strTitle;eleImg.addClassName('codeLibThumbnailLogImg404');ele.insert(eleImg);} else {if (ele.offsetTop <= this.varsRelay.numTop) {var eleImg = $(document.createElement('img'));eleImg.addClassName('codeLibThumbnailLogImg');var str = '?';str += 'level=' + obj.arr[i].varsThumbnailDetail.strLevel + '&';str += 'type=' + obj.arr[i].varsThumbnailDetail.fileType + '&';str += 'stamp=' + obj.arr[i].varsThumbnailDetail.stampPath;eleImg.src = this.insRoot.vars.varsSystem.path.image + str;eleImg.addClassName('codeLibBaseCursorPointer');eleImg.title = obj.arr[i].varsThumbnailDetail.strTitle;this.insListener.set({flagType15 : 1, bindAsEvent : 0, insCurrent : this, event : 'load',strFunc : 'onloadRelay', ele : eleImg, vars : { ele : ele, eleImg : eleImg}});this.varsRelay.num = i;}}}},onloadRelay : function(obj){obj.ele.innerHTML = '';obj.ele.insert(obj.eleImg);},eleWrap : null,iniWrap : function(){var ele = $(document.createElement('div'));ele.id = this.idSelf;ele.addClassName('codeLibThumbnailWrap');this.eleInsert.insert(ele);this.eleWrap = ele;this.eleWrap.style.width = this.getWrapWidth() + 'px';this.eleWrap.style.height = this.getWrapHeight() + 'px';},getWrapHeight : function(){var array = this.eleInsert.style.height.split('px');var data = parseFloat(array[0] - 1);return  data;},getWrapWidth : function(obj){array = this.eleInsert.style.width.split('px');var data = parseFloat(array[0]);return  data;},removeWrap : function(){$(this.idSelf).remove();if (this.eleInsertBtnLeft) this.eleInsertBtnLeft.innerHTML = '';if (this.eleInsertBtnRight) this.eleInsertBtnRight.innerHTML = '';},eleInsert : null, insRoot : null, insCurrent : null, insSelf : null, idSelf : null,vars : null, eleInsertBtnLeft : null, eleInsertBtnRight : null,iniVars : function(obj){this.eleInsertBtnLeft = obj.eleInsertBtnLeft;this.eleInsertBtnRight = obj.eleInsertBtnRight;this.eleInsert = obj.eleInsert;this.insRoot = obj.insRoot;this.insCurrent = obj.insCurrent;this.insSelf = this;this.idSelf = obj.idSelf;this.vars = (Object.toJSON(obj.vars)).evalJSON();this.iniBtnVars();this.allot({insCurrent : this.insCurrent,from       : 'iniVars'});},updateVars : function(){this.allot({insCurrent : this.insCurrent,from       : 'updateVars',vars   : {vars       : this.vars,varsSelect : this.varsBtn}});},insFormat : null,iniFormat : function(){this.templateFormat();},templateFormat : function(obj){this.insFormat = new Code_Lib_TemplateFormat({eleInsert  : this.eleWrap,insRoot    : this.insRoot,insCurrent : this.insSelf,idSelf     : this.idSelf + 'Format',vars   : this.vars.varsFormat});},staticLog : {numMargin : 5, numHeight : 16, numHeightWrap : 127},varsLog : null,iniLog : function(obj){if (this.vars.varsStatus.flagRelayUse) {this.varsLog = {loadTop : (this.varsRelay.numTop > this.insFormat.eleTemplate.body.offsetHeight)?  this.varsRelay.numTop: this.insFormat.eleTemplate.body.offsetHeight};}this.templateLog({arr : this.vars.varsDetail});},templateLog : function(obj){var insDisplay = new Code_Lib_TimeDisplay();this.insFormat.eleTemplate.body.addClassName('codeLibThumbnailBodyWrap');for (var i = 0; i < obj.arr.length; i++) {var eleWrap = $(document.createElement('span'));eleWrap.addClassName('codeLibThumbnailLogWrap');eleWrap.id = this.idSelf + 'Log' + i;if (this.vars.varsStatus.flagBgUse) eleWrap.addClassName(obj.arr[i].strClassBg);this.insFormat.eleTemplate.body.insert(eleWrap);var numHeight = this.staticLog.numHeightWrap;if (this.vars.varsStatus.flagSizeUse) {numHeight += this.staticLog.numHeight;}if (this.vars.varsStatus.flagTimeLengthUse) {numHeight += this.staticLog.numHeight;}if (this.vars.varsStatus.flagTimeRegisterUse) {numHeight += this.staticLog.numHeight;}eleWrap.setStyle({height : numHeight + 'px'});var eleImgWrap = $(document.createElement('span'));eleImgWrap.addClassName('codeLibThumbnailLogImgWrap');eleImgWrap.addClassName('codeLibBaseCursorPointer');eleWrap.insert(eleImgWrap);if (!obj.arr[i].varsThumbnailDetail.stampPath) {var eleImg = $(document.createElement('span'));eleImg.addClassName('codeLibThumbnailLogImg');eleImg.title = obj.arr[i].varsThumbnailDetail.strTitle;eleImg.addClassName('codeLibThumbnailLogImg404');eleImgWrap.insert(eleImg);} else {if (this.vars.varsStatus.flagRelayUse) {if (eleWrap.offsetTop > this.varsLog.loadTop) {var eleImg = $(document.createElement('span'));eleImg.addClassName('codeLibThumbnailLogImgLoad');eleImg.addClassName('codeLibServerImgLoading');eleImgWrap.insert(eleImg);} else {var eleImg = $(document.createElement('img'));eleImg.addClassName('codeLibThumbnailLogImg');var str = '?';str += 'level=' + obj.arr[i].varsThumbnailDetail.strLevel + '&';str += 'type=' + obj.arr[i].varsThumbnailDetail.fileType + '&';str += 'stamp=' + obj.arr[i].varsThumbnailDetail.stampPath;eleImg.src = this.insRoot.vars.varsSystem.path.image + str;eleImg.addClassName('codeLibBaseCursorPointer');eleImg.title = obj.arr[i].varsThumbnailDetail.strTitle;eleImgWrap.insert(eleImg);this.varsRelay.num = i;}} else {var eleImg = $(document.createElement('img'));eleImg.addClassName('codeLibThumbnailLogImg');var str = '?';str += 'level=' + obj.arr[i].varsThumbnailDetail.strLevel + '&';str += 'type=' + obj.arr[i].varsThumbnailDetail.fileType + '&';str += 'stamp=' + obj.arr[i].varsThumbnailDetail.stampPath;eleImg.src = this.insRoot.vars.varsSystem.path.image + str;eleImg.addClassName('codeLibBaseCursorPointer');eleImg.title = obj.arr[i].varsThumbnailDetail.strTitle;eleImgWrap.insert(eleImg);this.varsRelay.num = i;}}var eleDetailWrap = $(document.createElement('span'));eleDetailWrap.addClassName('codeLibThumbnailLogDetailWrap');eleWrap.insert(eleDetailWrap);var eleTitleWrap = $(document.createElement('span'));eleTitleWrap.addClassName('codeLibThumbnailLogTitleWrap');eleDetailWrap.insert(eleTitleWrap);var eleTitleImg = $(document.createElement('span'));eleTitleImg.addClassName(obj.arr[i].strClass);eleTitleImg.addClassName('codeLibThumbnailLogBlock');if (this.vars.varsStatus.flagMoveUse) {eleTitleImg.addClassName('codeLibThumbnailLogMove');eleTitleImg.addClassName('codeLibBaseCursorMove');}eleTitleWrap.insert(eleTitleImg);var eleTitle = $(document.createElement('span'));eleTitle.addClassName('codeLibThumbnailLogTitle');eleTitle.addClassName('codeLibBaseMarginLeftFive');eleTitle.addClassName('codeLibBaseCursorPointer');eleTitle.title = obj.arr[i].varsThumbnailDetail.strTitle;var strTitle = obj.arr[i].varsThumbnailDetail.fileType+ '  : ' + obj.arr[i].varsThumbnailDetail.strTitle;var str = (obj.arr[i].varsThumbnailDetail.fileType)?  strTitle: obj.arr[i].varsThumbnailDetail.strTitle;eleTitle.insert(str);if (this.vars.varsStatus.flagFontUse) {eleTitle.addClassName(obj.arr[i].strClassFont);}if (this.vars.varsStatus.flagBoldUse && obj.arr[i].flagBoldNow) {eleTitle.addClassName('codeLibBaseFontBold');}eleTitleWrap.insert(eleTitle);if (this.vars.varsStatus.flagTimeRegisterUse) {var eleTimeRegister = $(document.createElement('span'));eleTimeRegister.addClassName('codeLibBaseCursorPointer');eleTimeRegister.addClassName('codeLibThumbnailLogTimeRegister');var objTime = this.insRoot.insTimeZone.adjustDate({stamp : obj.arr[i].varsThumbnailDetail.stampRegister * 1000});var strTime = insDisplay.get({flagType : 3,vars : objTime});var str = strTime;eleTimeRegister.insert(str);if (this.vars.varsStatus.flagFontUse) {eleTimeRegister.addClassName(obj.arr[i].strClassFont);}if (this.vars.varsStatus.flagBoldUse && obj.arr[i].flagBoldNow) {eleTimeRegister.addClassName('codeLibBaseFontBold');}eleDetailWrap.insert(eleTimeRegister);}if (this.vars.varsStatus.flagTimeLengthUse) {var eleTimeLength = $(document.createElement('span'));eleTimeLength.addClassName('codeLibBaseCursorPointer');eleTimeLength.addClassName('codeLibThumbnailLogTimeLength');var str = this.varsLoad.varsWhole.strTimeLength+ '  : ' + obj.arr[i].varsThumbnailDetail.numTimeLength;eleTimeLength.insert(str);if (this.vars.varsStatus.flagFontUse) {eleTimeLength.addClassName(obj.arr[i].strClassFont);}if (this.vars.varsStatus.flagBoldUse && obj.arr[i].flagBoldNow) {eleTimeLength.addClassName('codeLibBaseFontBold');}eleDetailWrap.insert(eleTimeLength);}if (this.vars.varsStatus.flagTimeLengthUse) {var eleSize = $(document.createElement('span'));eleSize.addClassName('codeLibThumbnailLogSize');eleSize.addClassName('codeLibBaseCursorPointer');var str = this.varsLoad.varsWhole.strSize+ '  : ' + obj.arr[i].varsThumbnailDetail.numSize;eleSize.insert(str);if (this.vars.varsStatus.flagFontUse) {eleSize.addClassName(obj.arr[i].strClassFont);}if (this.vars.varsStatus.flagBoldUse && obj.arr[i].flagBoldNow) {eleSize.addClassName('codeLibBaseFontBold');}eleDetailWrap.insert(eleSize);}this.templateLogMoveListener({ele      : eleTitleImg,eleWrap  : eleWrap,vars : obj.arr[i]});this.templateBtnListener({ele      : eleWrap,vars : obj.arr[i]});}},templateLogMoveListener : function(obj){if (!this.vars.varsStatus.flagMoveUse || !obj.vars.flagMoveUse) return;this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'mousedown',strFunc : 'mousedownMove', ele : obj.ele,vars : { vars : obj.vars, ele : obj.eleWrap }});},templateMoveListener : function(obj){this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'mousemove',strFunc : 'mousemoveMove', ele : document, vars : ''});this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'mouseup',strFunc : 'mouseupMove', ele : document, vars : ''});},varsMove : {},mousedownMove : function(evt, obj){this.templateMoveListener();this.varsMove = {};this.varsMove = {flag     : 1,ele      : evt.element(),vars : obj,eleNavi  : null};this.templateMoveNavi({vars : obj,evt      : evt});this.allot({insCurrent : this.insCurrent,from       : 'mousedownMove',vars   : obj.vars});},templateMoveNavi : function(obj){var zIndex = this.insRoot.setZIndex();var ele = obj.vars.ele.cloneNode(true);$(this.insRoot.vars.varsSystem.id.root).insert(ele);this.varsMove.eleNavi = ele;ele.addClassName('codeLibThumbnailNavi');ele.setStyle({left   : (obj.evt.pointerX() + this.staticMove.numNaviLeft) + 'px',top    : (obj.evt.pointerY() + this.staticMove.numNaviTop) + 'px',zIndex : zIndex});},staticMove : {numNaviLeft : 15, numNaviTop : 5},mousemoveMove : function(evt, obj){if (!this.varsMove.flag) return;if (obj) evt.stop();else obj = evt;this.varsMove.eleNavi.setStyle({top : (evt.pointerY() + this.staticMove.numNaviTop) + 'px',left : (evt.pointerX() + this.staticMove.numNaviLeft) + 'px'});},mouseupMove : function(evt, obj){if (obj) evt.stop();else obj = evt;if (!this.varsMove.flag) return;this.allot({insCurrent : this.insCurrent,from       : 'mouseupMove',vars   : this.varsMove.vars});this.varsMove.eleNavi.remove();this.varsMove = {};},iniBtnVars : function(){this.varsBtn = [];},varsBtn:[],templateBtnListener : function(obj){if (!obj.vars.flagBtnUse) return;this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'mousedown',strFunc : 'mousedownBtn', ele : obj.ele, vars : { vars : obj.vars, ele : obj.ele }});this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'dblclick',strFunc : 'dblclickBtn', ele : obj.ele, vars : { vars : obj.vars }});var cut = this.vars.varsStatus;this.templateBtnListenerChild({ele : obj.ele.down('.codeLibThumbnailLogTitle', 0)});if (cut.flagTimeRegisterUse) {this.templateBtnListenerChild({ele : obj.ele.down('.codeLibThumbnailLogTimeRegister', 0)});}if (cut.flagTimeLengthUse) {this.templateBtnListenerChild({ele : obj.ele.down('.codeLibThumbnailLogTimeLength', 0)});}if (cut.flagSizeUse) {this.templateBtnListenerChild({ele : obj.ele.down('.codeLibThumbnailLogSize', 0)});}},templateBtnListenerChild : function(obj){this.insListener.set({bindAsEvent : 0, insCurrent : this, event : 'mouseover',strFunc : 'mouseoverBtn', ele : obj.ele, vars : { ele : obj.ele }});this.insListener.set({bindAsEvent : 0, insCurrent : this, event : 'mouseout',strFunc : 'mouseoutBtn', ele : obj.ele, vars : { ele : obj.ele }});},dblclickBtn : function(evt, obj){if (obj) evt.stop();else obj = evt;this.allot({insCurrent : this.insCurrent,from       : 'dblclickBtn',vars   : obj.vars});},mousedownBtn : function(evt, obj){if (obj) evt.stop();else obj = evt;this.varsBtn = [];this.varsBtn.push(obj);this.iniBtnSelect({ele      : obj.ele,vars : obj.vars});this.allot({insCurrent : this.insCurrent,from       : 'mousedownBtn',vars   : obj.vars});},mouseoverBtn : function(obj){obj.ele.addClassName('codeLibBaseUnderline');},mouseoutBtn : function(obj){obj.ele.removeClassName('codeLibBaseUnderline');},iniBtnSelect : function(obj){if (!this.varsBtn) return;this.setBtnSelect({arr      : this.vars.varsDetail,ele      : obj.ele,vars : obj.vars});this.removeBtnSelectBold({ele      : obj.ele,vars : obj.vars});},setBtnSelect : function(obj){for (var i = 0; i < obj.arr.length; i++) {var id = this.idSelf + 'Log' + i;$(id).removeClassName('codeLibScheduleSelect');}obj.ele.addClassName('codeLibScheduleSelect');},removeBtnSelectBold : function(obj){if (!this.vars.varsStatus.flagBoldUse || !obj.vars.flagBoldNow) return;obj.vars.flagBoldNow = 0;this.updateVars();obj.ele.down('.codeLibThumbnailLogTitle',0).removeClassName('codeLibBaseFontBold');var cut = this.vars.varsStatus;if (cut.flagTimeRegisterUse) {obj.ele.down('.codeLibThumbnailLogTimeRegister',0).removeClassName('codeLibBaseFontBold');}if (cut.flagTimeLengthUse) {obj.ele.down('.codeLibThumbnailLogTimeLength',0).removeClassName('codeLibBaseFontBold');}if (cut.flagSizeUse) {obj.ele.down('.codeLibThumbnailLogSize',0).removeClassName('codeLibBaseFontBold');}},staticBtnBottom : {numMargin : 5},iniBtnBottom : function(){if (!this.vars.varsStatus.flagBtnBottomUse) return;if (!this.eleInsertBtnLeft && this.eleInsertBtnRight) return;if (this.eleInsertBtnLeft) {this.eleInsertBtnLeft.innerHTML = '';this.eleInsertBtnLeft.style.marginTop = this.staticBtnBottom.numMargin + 'px';}if (this.eleInsertBtnRight) {this.eleInsertBtnRight.innerHTML = '';this.eleInsertBtnRight.style.marginTop = this.staticBtnBottom.numMargin + 'px';}this.templateBtnBottom({arr : this.vars.varsBtn});},templateBtnBottom : function(obj){for (var i = 0; i < obj.arr.length; i++) {if (!obj.arr[i].flagUse) continue;if (obj.arr[i].flagBtnUse) this.templateBtnBottomBtn({vars : obj.arr[i]});}},templateBtnBottomBtn : function(obj){var insBtn = new Code_Lib_Btn();insBtn.iniBtn({eleInsert  : (obj.vars.flagLeftUse)? this.eleInsertBtnLeft : this.eleInsertBtnRight,id         : this.idSelf + 'BtnBottom' + obj.vars.id,strFunc    : obj.vars.strFunc,strTitle   : obj.vars.strTitle,insCurrent : this.insCurrent,vars   : obj.vars});this._setListener({ins : insBtn});$(this.idSelf + 'BtnBottom' + obj.vars.id).style.marginRight = this.staticBtnBottom.numMargin + 'px';},removeBtnBottom : function(){if (this.eleInsertBtnLeft) this.eleInsertBtnLeft.innerHTML = '';if (this.eleInsertBtnRight) this.eleInsertBtnRight.innerHTML = '';},insPage : null,iniPage : function(){if (!this.vars.varsStatus.flagPageUse) return;this.templatePage();},templatePage : function(){this.insPage = new Code_Lib_BtnPage({eleInsertBtnLeft : (this.vars.varsStatus.flagInnerPageUse)?  this.insFormat.eleTemplate.fooder.down('.codeLibBaseMarginLeftFive', 0): this.eleInsertBtnLeft ,eleInsertBtnRight : (this.vars.varsStatus.flagInnerPageUse)?  this.insFormat.eleTemplate.fooder.down('.codeLibBaseMarginRightFive',0): this.eleInsertBtnRight,insRoot          : this.insRoot,insCurrent       : this.insSelf,idSelf           : this.idSelf + 'Page',allot            : this.getPageAllot(),vars         : this.vars.varsPage});},getPageAllot : function(){var allot =  function(obj){var insCurrent = obj.insCurrent;if (obj.from == 'checkPage') {insCurrent.allot({insCurrent : insCurrent.insCurrent,from       : 'checkPage',vars   : obj.vars});}};return allot;},removePage : function(){if (this.vars.varsStatus.flagInnerPageUse) {this.insFormat.eleTemplate.fooder.down('.codeLibBaseMarginLeftFive',0).innerHTML = '';this.insFormat.eleTemplate.fooder.down('.codeLibBaseMarginRightFive',0).innerHTML = '';} else {if (this.eleInsertBtnLeft) this.eleInsertBtnLeft.innerHTML = '';if (this.eleInsertBtnRight) this.eleInsertBtnRight.innerHTML = '';}},insListener : null,iniListener : function(){this.insListener = new Code_Lib_Listener();this.varsListener = [];},varsListener : null,setListener : function(obj){var data = {ins : obj.ins};this.varsListener.push(data);},stopListener : function(){this.insListener.stop();this.stopListenerChild({arr : this.varsListener});if (this.insPage) this.insPage.stopListener();this.resetListener();},stopListenerChild : function(obj){if (obj.arr.length == 0) return;for (var i = 0; i < obj.arr.length; i++) {obj.arr[i].ins.insListener.stop();}},resetListener : function(){this.varsListener = [];},allot : {},_iniAllot : function(obj){this.allot = obj.allot;}});var Code_Lib_TimeDisplay = Class.create({varsLoad : {"strMonth":"\u6708","strYear":"\u5e74","strDate":"\u65e5","strHour":"\u6642","strMin":"\u5206","strSec":"\u79d2","arrayWeek":["\u65e5","\u6708","\u706b","\u6c34","\u6728","\u91d1","\u571f"],"strMeiji":"\u660e\u6cbb","strTaishou":"\u5927\u6b63","strShouwa":"\u662d\u548c","strHeisei":"\u5e73\u6210","strReiwa":"\u4ee4\u548c","strGan":"\u5143"},vars : null, posVars : null,get : function(obj){this.vars = (Object.toJSON(obj.vars)).evalJSON();this.vars.numMonth++;this.posVars = (Object.toJSON(this.vars)).evalJSON();var str = '';if (this.vars.numMonth < 10) this.vars.numMonth = '0' + this.vars.numMonth;if (this.vars.numDate < 10) this.vars.numDate = '0' + this.vars.numDate;if (this.vars.numHour < 10) this.vars.numHour = '0' + this.vars.numHour;if (this.vars.numMin < 10) this.vars.numMin = '0' + this.vars.numMin;if (this.vars.numSec < 10) this.vars.numSec = '0' + this.vars.numSec;if (obj.flagType == 1) {str = this.vars.numYear+ this.varsLoad.strYear+ this.vars.numMonth+ this.varsLoad.strMonth+ this.vars.numDate+ this.varsLoad.strDate+ '('+this.varsLoad.arrayWeek[this.vars.numDay]+') '+ this.vars.numHour+ this.varsLoad.strHour+ this.vars.numMin+ this.varsLoad.strMin;} else if (obj.flagType == 2) {str = this.vars.numYear+ this.varsLoad.strYear+ this.vars.numMonth+ this.varsLoad.strMonth+ this.vars.numDate+ this.varsLoad.strDate + '('+this.varsLoad.arrayWeek[this.vars.numDay]+')';} else if (obj.flagType == 3) {str = this.vars.numYear+ '/' + this.vars.numMonth+ '/' + this.vars.numDate+ '  ' + this.vars.numHour+ ':' + this.vars.numMin;} else if (obj.flagType == 4) {str = this.vars.numYear+ '/' + this.vars.numMonth+ '/' + this.vars.numDate;} else if (obj.flagType == 5) {str = this.vars.numHour+ this.varsLoad.strHour+ this.vars.numMin+ this.varsLoad.strMin + '(' +this.vars.numSec + this.varsLoad.strSec + ')';} else if (obj.flagType == 6) {str = this.vars.numYear+ this.varsLoad.strYear+ this.vars.numMonth+ this.varsLoad.strMonth+ this.vars.numDate+ this.varsLoad.strDate+ '('+this.varsLoad.arrayWeek[this.vars.numDay]+') '+ this.vars.numHour+ this.varsLoad.strHour+ this.vars.numMin+ this.varsLoad.strMin+ this.vars.numSec+ this.varsLoad.strSec;} else if (obj.flagType == 7) {str = this.posVars.numYear+ '/' + this.posVars.numMonth+ '/' + this.posVars.numDate;} else if (obj.flagType == 8) {str = this.vars.numYear+ this.varsLoad.strYear+ this.vars.numMonth+ this.varsLoad.strMonth+ this.vars.numDate+ this.varsLoad.strDate;} else if (obj.flagType == 9) {str = this.vars.numYear+ '/' + this.vars.numMonth+ '/' + this.vars.numDate+ '-' + this.vars.numHour+ ':' + this.vars.numMin;}return str;},getStrNengoYear : function(obj){var numYear = parseFloat(obj.numYear);var flag = this.getFlagNengo({stamp : obj.stamp});if (flag == 'Meiji') {numYear -= 1867;} else if (flag == 'Taishou') {numYear -= 1911;} else if (flag == 'Shouwa') {numYear -= 1925;} else if (flag == 'Heisei') {numYear -= 1988;} else if (flag == 'Reiwa') {numYear -= 2018;}var strYear = numYear;    if (numYear == 1) {        strYear = this.varsLoad.strGan;    }    var flagNengo = 'str' + flag;    var strNengoYear = this.varsLoad[flagNengo] + strYear;    return strNengoYear;},getNengoYear : function(obj){var numYear = parseFloat(obj.numYear);var flag = this.getFlagNengo({stamp : obj.stamp});if (flag == 'Meiji') {numYear -= 1867;} else if (flag == 'Taishou') {numYear -= 1911;} else if (flag == 'Shouwa') {numYear -= 1925;} else if (flag == 'Heisei') {numYear -= 1988;} else if (flag == 'Reiwa') {numYear -= 2018;}return numYear;},getStrNengo : function(obj){var flag = this.getFlagNengo({stamp : obj.stamp});if (!flag) return '';var strNengo = this.varsLoad['str' + flag];var strNengoYear = this.getNengoYear({stamp   : obj.stamp,numYear : obj.numYear});return strNengo + strNengoYear;},getFlagNengo : function(obj){var stamp = parseFloat(obj.stamp);if (-3197178000 <= stamp && stamp < -1812186000) {return 'Meiji';} else if (-1812186000 <= stamp && stamp < -1357635600) {return 'Taishou';} else if (-1357635600 <= stamp && stamp < 600188400) {return 'Shouwa';} else if (600188400 <= stamp && stamp < 1556636400) {return 'Heisei';} else if (1556636400 <= stamp) {return 'Reiwa';}return '';}});var Code_Lib_TimeZone = Class.create({numTimeZone : null, numTimeZoneDif : null,initialize : function(obj){this.numTimeZone = obj.numTimeZone;this.numTimeZoneDif = new Date().getTimezoneOffset() * 60 * 1000;},adjustStamp : function(obj){var stamp = (parseFloat(obj.stamp) - this.numTimeZoneDif) - this.numTimeZone * 60 * 60 * 1000;return stamp;},adjustDate : function(obj){var ins = new Date( (this.numTimeZoneDif + parseFloat(obj.stamp)) + this.numTimeZone * 60 * 60 * 1000 );var objTime = this.getObjTime({ins : ins});return objTime;},adjustTime : function(obj){var adjustStamp = this.adjustStamp({stamp : obj.stamp});var adjustDate = this.adjustDate({stamp : adjustStamp});adjustDate.stamp = adjustStamp;adjustDate.stampServer = Math.floor(adjustStamp/1000);return adjustDate;},getObjTime : function(obj){var ins = obj.ins;var arrDay = {'0' : 'Sun','1' : 'Mon','2' : 'Tue','3' : 'Wed','4' : 'Thu','5' : 'Fri','6' : 'Sat',};return {stamp          : ins.getTime(),numYear        : (new Date().getYear() > 1900) ? ins.getYear() + 0  : ins.getYear() + 1900,numMonth       : ins.getMonth(),numDate        : ins.getDate(),numDay         : ins.getDay(),strDay         : arrDay[ins.getDay()],numHour        : ins.getHours(),numMin         : ins.getMinutes(),numSec         : ins.getSeconds(),numMsec        : ins.getMilliseconds()};}});var Code_Lib_Tree = Class.create(Code_Lib_ExtLib,{_staticWhole : { numLength : 25 },initialize : function(obj){this._extAllot(obj);this._iniVars(obj);this._iniListener();this._iniWrap();this._iniFormat();this._iniBar();this._iniLine();this._iniFind();this._iniBtn();this._iniPage();this._iniBtnBottom();},iniReload : function(){this._resetEditVars();this._resetFindVars();this.stopListener();this.removeWrap();this._updateWrapStyle();this._updateFormatStyle();this._iniBar();this._iniLine();this._updateFindWidth();this._iniBtn();this._iniPage();this._iniBtnBottom();this.setScroll();},iniReloadFind : function(){this._resetEditVars();if (!this._checkFind()) {this.iniReload();return;}this.stopListener();this.removeWrap();this._iniBar();this._iniFindTemplate();},_iniVars : function(obj){this._extVars(obj);this._resetEditVars();this._iniCakeBar();this.allot({insCurrent : this.insCurrent,from       : '_iniVars'});},_iniWrap : function(){this._extWrap();this.eleWrap.style.width = this._getWrapWidth() + 'px';this.eleWrap.style.height = this._getWrapHeight() + 'px';},_updateWrapStyle : function(){this.eleWrap.style.width = this._getWrapWidth() + 'px';this.eleWrap.style.height = this._getWrapHeight() + 'px';},removeWrap : function(){if (this.insFormat.eleTemplate.header) {if (this.insFormat.eleTemplate.header.down('.codeLibBaseMarginLeftFive', 0)) {this.insFormat.eleTemplate.header.down('.codeLibBaseMarginLeftFive', 0).innerHTML = '';}if (this.insFormat.eleTemplate.header.down('.codeLibBaseMarginRightFive', 0)) {this.insFormat.eleTemplate.header.down('.codeLibBaseMarginRightFive', 0).innerHTML = '';}}this.insFormat.eleTemplate.body.innerHTML = '';if (!this.vars.varsStatus.flagInnerFindUse) {if (this.vars.varsStatus.flagInnerPageUse) {if (this.insFormat.eleTemplate.fooder.down('.codeLibBaseMarginLeftFive', 0)) {this.insFormat.eleTemplate.fooder.down('.codeLibBaseMarginLeftFive', 0).innerHTML = '';}if (this.insFormat.eleTemplate.fooder.down('.codeLibBaseMarginRightFive', 0)) {this.insFormat.eleTemplate.fooder.down('.codeLibBaseMarginRightFive', 0).innerHTML = '';}}if (!this.vars.varsStatus.flagFindUse) {if (this.eleInsertBtnLeft) this.eleInsertBtnLeft.innerHTML = '';if (this.eleInsertBtnRight) this.eleInsertBtnRight.innerHTML = '';}}},_iniPage : function(){this._extPage();},_iniListener : function(){this._extListener();},insFormat : null,_iniFormat : function(){this._extFormat();},_varsWidth : {numTree : 0, numFind : 0},_staticWidth : {numBar : 17, numIdle : 16, numBlock : 16, numMargin : 5},_setWidth : function(){var array = this.insFormat.eleTemplate.body.style.width.split('px');var width = parseFloat(array[0]);this._varsWidth.numTree = width - this._staticWidth.numMargin- this._staticWidth.numBar;this._getWidthTree({arr : this.vars.varsDetail});this.eleTree.setStyle({width : this._varsWidth.numTree + 'px'});},_getWidthTree : function(obj){for (var i = 0; i < obj.arr.length; i++) {if (!obj.arr[i].flagUse) continue;var array = (obj.arr[i].id).split(this.idSelf);var level = array[1];var arrayLevel = level.split('-');var num = (arrayLevel.length) - 1;num++;if (obj.arr[i].flagCheckUse && this.vars.varsStatus.flagCheckUse) {num++;numMargin++;}if (obj.arr[i].flagRemoveUse&& this.vars.varsStatus.flagRemoveUse&& this.vars.varsStatus.flagRemoveNow) {num++;}if (obj.arr[i].flagEditUse&& this.vars.varsStatus.flagEditUse&& this.vars.varsStatus.flagEditNow) {num++;}var numMargin = 1;var numWidth = numMargin * this._staticWidth.numMargin+ num * this._staticWidth.numBlock+ $(obj.arr[i].id).down('.codeLibTreeTitle', 0).offsetWidth+ this._staticWidth.numIdle+ this._staticWidth.numBar;if ( numWidth > this._varsWidth.numTree) {this._varsWidth.numTree = numWidth;}this._getWidthTree({arr:obj.arr[i].child});}},_setWidthFind : function(){this._varsWidth.numFind = $(this.eleInsert).offsetWidth - this._staticWidth.numMargin;this._getWidthFind({arr:this.vars.varsDetail});this.eleTree.setStyle({width : this._varsWidth.numFind + 'px'});},_getWidthFind : function(obj){for (var i = 0; i < obj.arr.length; i++) {if (!obj.arr[i].flagUse) continue;if ($(obj.arr[i].id)) {var num = 1;if (obj.arr[i].flagRemoveUse&& this.vars.varsStatus.flagRemoveUse&& this.vars.varsStatus.flagRemoveNow) {num++;}if (obj.arr[i].flagEditUse&& this.vars.varsStatus.flagEditUse&& this.vars.varsStatus.flagEditNow) {num++;}var numMargin = 1;var numWidth = numMargin * this._staticWidth.numMargin+ num * this._staticWidth.numBlock+ $(obj.arr[i].id).down('.codeLibTreeTitle', 0).offsetWidth+ this._staticWidth.numIdle+ this._staticWidth.numBar;if ( numWidth > this._varsWidth.numFind) {this._varsWidth.numFind = numWidth;}}this._getWidthFind({arr:obj.arr[i].child});}},_mousedownBarLink : function(evt, obj){evt.stop();this.allot({insCurrent : this.insCurrent,from       : '_mousedownBarLink'});},_mousedownBarAdd : function(evt, obj){evt.stop();this.allot({insCurrent : this.insCurrent,from       : '_mousedownBarAdd'});},_mousedownEdit : function(evt, obj){evt.stop();if (this._varsEdit.flag) return;this._varsEdit.flag = 1;this._setEdit({vars : obj.vars});this._setEditListener({vars : obj.vars});this.allot({insCurrent : this.insCurrent,from       : '_mousedownEdit',vars       : obj.vars});},_varsEdit : {flag : 0},_staticEdit : {numMargin : 5},_setEdit : function(obj){var ele = $(obj.vars.id);ele.removeClassName('unselect');var ele = $(obj.vars.id).down('.codeLibTreeTitle', 0);var numWidth = ele.offsetWidth;ele.hide();var ele = $(obj.vars.id).down('.codeLibTreeForm', 0);ele.show();var ele = $(obj.vars.id).down('.codeLibTreeFormTag', 0);ele.setStyle({width : (this._staticEdit.numMargin + numWidth) + 'px'});},_resetEditVars : function(){this._varsEdit.flag = 0;},_setEditListener : function(obj){var ele = $(obj.vars.id).down('.codeLibTreeFormTag', 0);ele.focus();if (this.vars.varsStatus.flagLockUse && this.vars.varsStatus.flagLockNow) return;this.insListener.set({flagType15 : 1, bindAsEvent : 1, insCurrent : this, event : 'blur',strFunc : '_blurEdit', ele : ele, vars : { vars : obj.vars }});},_blurEdit : function(obj, evt) {if (obj) evt.stop();else obj = evt;var ele = $(obj.vars.id).down('.codeLibTreeFormTag', 0);obj.vars.strTitle = this._escapeEditValue({value : ele.value});this.iniReload();this.allot({from       : '_blurEdit',insCurrent : this.insCurrent});},_escapeEditValue : function(obj){this.insEscape = new Code_Lib_Escape();obj.value = this.insEscape.get({data : obj.value, flagType : 'fromTag'});return obj.value;},_mousedownRemove : function(evt, obj){evt.stop();this._varsMove.numBlock = {};this._getBlock({arr      : this.vars.varsDetail,idTarget : obj.vars.id});this.vars.varsDetail = this._removeBlock({arr    : this.vars.varsDetail,idTarget : obj.vars.id});this.vars.varsDetail = this.getBlockLevel();this._varsMove = {};var flag = this.allot({insCurrent : this.insCurrent,from       : '_mousedownRemove',vars       : obj.vars});if (flag) this.iniReload();},_getBlock : function(obj){for (var i = 0; i < obj.arr.length; i++) {if (obj.arr[i].id == obj.idTarget) {var objTemp = {};objTemp = obj.arr[i];if (obj.arr[i].child.length) objTemp.child = this._getBlockChild({arr : obj.arr[i].child});else objTemp.child = [];this._varsMove.numBlock = objTemp;}else this._getBlock({arr : obj.arr[i].child, idTarget : obj.idTarget});}},_getBlockChild : function(obj){for (var i = 0; i < obj.arr.length; i++) {this._getBlockChild({arr : obj.arr[i].child});}return obj.arr;},_removeBlock : function(obj){var numTop = -1;for (var i = 0; i < obj.arr.length; i++) {if (obj.arr[i].id == obj.idTarget) {numTop = i;}var num = this._checkBlockArrayNum({arr:obj.arr[i].child,idTarget : obj.idTarget});if (num != -1) {obj.arr[i].child =obj.arr[i].child.slice(0, num).concat(obj.arr[i].child.slice((num + 1), obj.arr[i].child.length));}this._removeBlock({arr : obj.arr[i].child, idTarget : obj.idTarget});}if (numTop != -1) {obj.arr = obj.arr.slice(0, numTop).concat(obj.arr.slice((numTop + 1), obj.arr.length));}return obj.arr;},_checkBlockArrayNum : function(obj){for (var i = 0; i < obj.arr.length; i++) {if (obj.arr[i].id == obj.idTarget) return i;}return -1;},_setBlockInsert : function(obj){for (var i = 0; i < obj.arr.length; i++) {if (obj.arr[i].id == obj.idTarget) {obj.arr[i].child.push(obj.numBlock);break;}this._setBlockInsert({arr      : obj.arr[i].child,idTarget : obj.idTarget,numBlock : obj.numBlock});}return obj.arr;},_setBlockInsertInside : function(obj){for (var i = 0; i < obj.arr.length; i++) {if (obj.arr[i].id == obj.idTarget) {obj.arr[i].varsInside.unshift(obj.numBlock);break;}this._setBlockInsertInside({arr      : obj.arr[i].child,idTarget : obj.idTarget,numBlock : obj.numBlock});}return obj.arr;},_setBlockAfter : function(obj){var numTop = -1;for (var i = 0; i < obj.arr.length; i++) {if (obj.arr[i].id == obj.idTarget) {numTop = i;}var num = this._checkBlockArrayNum({arr      : obj.arr[i].child,idTarget : obj.idTarget});var array = [obj.numBlock];if (num != -1) {obj.arr[i].child =obj.arr[i].child.slice(0, num + 1).concat(array.concat(obj.arr[i].child.slice((num + 1),obj.arr[i].child.length)));}this._setBlockAfter({arr      : obj.arr[i].child,idTarget : obj.idTarget,numBlock : obj.numBlock});}if (numTop != -1) {var array = [obj.numBlock];obj.arr = obj.arr.slice(0, numTop + 1).concat(array.concat(obj.arr.slice((numTop + 1), obj.arr.length)));}return obj.arr;},_varsBlockFoldNow : null,getBlockLevel : function(){return this._setBlockLevel({arr    : this.vars.varsDetail,parent : this.idSelf});},_setBlockLevel : function(obj){this._varsBlockFoldNow = {};this._setBlockLevelFoldNow(obj);this._setBlockLevelId(obj);this.setCake({arr : obj.arr});return obj.arr;},_setBlockLevelId : function(obj){for (var i = 0; i < obj.arr.length; i++) {var temp = obj.parent + '-' + i;if (this._varsBlockFoldNow[temp]) obj.arr[i].flagFoldNow = 1;obj.arr[i].id = temp;this._setBlockLevelId({arr    : obj.arr[i].child,parent : temp});}},_setBlockLevelFoldNow : function(obj){for (var i = 0; i < obj.arr.length; i++) {if (obj.arr[i].flagFoldUse) {if (obj.arr[i].flagFoldNow) this._varsBlockFoldNow[obj.arr[i].id] = 1;}this._setBlockLevelFoldNow({arr    : obj.arr[i].child});}},updateBlockVars : function(obj){this._updateBlockVars({arr  : this.vars.varsDetail,vars : obj.vars});},_updateBlockVars : function(obj){for (var i = 0; i < obj.arr.length; i++) {if ( obj.vars.vars.idTarget == obj.arr[i].vars.idTarget ) {obj.vars.id = obj.arr[i].id;obj.arr[i] = obj.vars;return;}if (obj.arr[i].child.length) {this._updateBlockVars({arr  : obj.arr[i].child,vars : obj.vars,});}}},eventMove : function(obj){if (!this.vars.varsStatus.flagMoveUse) return;this._setMoveWrapListener();this._setMoveListener();var topMin = $(this.idSelf).up('.codeLibWindow', 0).offsetTop+ this.insFormat.eleTemplate.body.offsetTop+ this._staticMove.numAreaNone;var topMax = topMin+ this.insFormat.eleTemplate.body.offsetHeight- this._staticMove.numArea * 2;var leftMin = $(this.idSelf).up('.codeLibWindow', 0).offsetLeft+ this.insFormat.eleTemplate.body.offsetLeft+ this._staticMove.numAreaNone;var leftMax = leftMin+ this.insFormat.eleTemplate.body.offsetWidth- this._staticMove.numArea * 2;this._varsMove = {}; var array = (this.idSelf + '-').split(this.idSelf);var level = array[1];this._varsMove = {flag          : 1,flagEventMove : (obj.flag)? obj.flag : 1,flagMove      : 0,vars : obj.vars,arrayLevel : level.split('-'),mouseupId         : '',mouseupAction     : '',mouseupWrapAction : '',numNaviLeft : 0,numNaviTop  : 0,naviEle     : null,leftMax : leftMax,leftMin : leftMin,topMax  : topMax,topMin  : topMin,timerFlag : 0,timerVars : null,numBlock           : {}};var zIndex = this.insRoot.getZIndex();var ele = $(document.createElement('ele'));ele.removeClassName('codeLibTreeBtnOver');$(this.insRoot.vars.varsSystem.id.root).insert(ele);this._varsMove.naviEle = ele;this._removeImgStyleCursor({arr : this.vars.varsDetail});},_mouseoverMoveWrap : function(){if (!this.vars.varsStatus.flagMoveUse) return;if (this._varsMove.flag) {this._varsMove.mouseupWrapId = 'dummy';this._varsMove.mouseupWrapAction = 'add';}},_mouseoutMoveWrap : function(){if (!this.vars.varsStatus.flagMoveUse) return;if (this._varsMove.flag) {this._varsMove.mouseupWrapId = '';this._varsMove.mouseupWrapAction = '';}},_setMoveWrapListener : function(obj){if (this.vars.varsStatus.flagLockUse && this.vars.varsStatus.flagLockNow) return;this.insListener.set({bindAsEvent : 0, insCurrent : this, event : 'mouseover',strFunc : '_mouseoverMoveWrap', ele : this.insFormat.eleTemplate.body,vars : ''});this.insListener.set({bindAsEvent : 0, insCurrent : this, event : 'mouseout',strFunc : '_mouseoutMoveWrap', ele : this.insFormat.eleTemplate.body,vars : ''});},_setMoveListener : function(obj){if (this.vars.varsStatus.flagLockUse && this.vars.varsStatus.flagLockNow) return;this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'mousemove',strFunc : '_mousemoveMove', ele : document, vars : ''});this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'mouseup',strFunc : '_mouseupMove', ele : document, vars : ''});},_varsMove : {},_mousedownMove : function(evt, obj){if (!this.vars.varsStatus.flagMoveUse) return;this._setMoveListener();var topMin = $(this.idSelf).up('.codeLibWindow', 0).offsetTop+ this.insFormat.eleTemplate.body.offsetTop+ this._staticMove.numAreaNone;var topMax = topMin+ this.insFormat.eleTemplate.body.offsetHeight- this._staticMove.numArea * 2;var leftMin = $(this.idSelf).up('.codeLibWindow', 0).offsetLeft+ this.insFormat.eleTemplate.body.offsetLeft+ this._staticMove.numAreaNone;var leftMax = leftMin+ this.insFormat.eleTemplate.body.offsetWidth- this._staticMove.numArea * 2;this._varsMove = {};var array = (obj.vars.id).split(this.idSelf);var level = array[1];this._mouseoutBtn({vars : obj.vars});this._varsMove = {flag : 1,ele  : evt.element(),vars : obj.vars,arrayLevel : level.split('-'),mouseupId     : '',mouseupAction : '',numNaviLeft   : evt.pointerX(),numNaviTop    : evt.pointerY(),naviEle       : null,leftMax : leftMax,leftMin : leftMin,topMax  : topMax,topMin  : topMin,timerFlag : 0,timerVars : null,numBlock           : {}};this._setMoveNavi({vars : obj.vars,evt  : evt});this._removeImgStyleCursor({arr : this.vars.varsDetail});this.allot({insCurrent : this.insCurrent,from       : '_mousedownMove',vars       : obj.vars});evt.stop();},modifyVarsMove : function(obj){if (this._varsMove.flag) {if (obj.numLeftMax != undefined) {this._varsMove.leftMax += obj.numLeftMax;}if (obj.numLeftMin != undefined) {this._varsMove.leftMin += obj.numLeftMin;}if (obj.numTopMax != undefined) {this._varsMove.topMax += obj.numTopMax;}if (obj.numTopMin != undefined) {this._varsMove.topMin += obj.numTopMin;}}},_staticMove : {numArea : 25, numAreaNone : 16, numNaviLeft : 15, numNaviTop : 5, numPosShift : 5, numTimer : 2000},_mousemoveMove : function(evt, obj){if (obj) evt.stop();else obj = evt;if (!this.vars.varsStatus.flagMoveUse || !this._varsMove.flag) return;if (this._varsMove.flagEventMove && !this._varsMove.flagMove) {if (evt.pointerY() > this._varsMove.topMin&& evt.pointerY() < this._varsMove.topMax&& evt.pointerX() > this._varsMove.leftMin&& evt.pointerX() < this._varsMove.leftMax) {this._varsMove.flagMove = 1;}} else {if (evt.pointerY() < this._varsMove.topMin) {this.insFormat.eleTemplate.body.scrollTop -= this._staticMove.numPosShift;} else if (evt.pointerY() > this._varsMove.topMax) {this.insFormat.eleTemplate.body.scrollTop += this._staticMove.numPosShift;}if (evt.pointerX() < this._varsMove.leftMin) {this.insFormat.eleTemplate.body.scrollLeft -= this._staticMove.numPosShift;} else if (evt.pointerX() > this._varsMove.leftMax) {this.insFormat.eleTemplate.body.scrollLeft += this._staticMove.numPosShift;}}this._varsMove.naviEle.setStyle({left : (evt.pointerX() + this._staticMove.numNaviLeft) + 'px',top  : (evt.pointerY() + this._staticMove.numNaviTop) + 'px'});},_mouseupMove : function(evt){if (!this.vars.varsStatus.flagMoveUse || !this._varsMove.flag) return;if (this._varsMove.flagEventMove == 1) {if (this._varsMove.mouseupId) {this._varsMove.numBlock = this._varsMove.vars;if (this._varsMove.mouseupAction == 'insert') {this.vars.varsDetail = this._setBlockInsert({arr      : this.vars.varsDetail,idTarget : this._varsMove.mouseupId,numBlock : this._varsMove.numBlock});} else if (this._varsMove.mouseupAction == 'after') {this.vars.varsDetail = this._setBlockAfter({arr      : this.vars.varsDetail,idTarget : this._varsMove.mouseupId,numBlock : this._varsMove.numBlock});}this.vars.varsDetail = this.getBlockLevel();this.allot({insCurrent : this.insCurrent,from       : '_mouseupMoveEventMove',vars       : this.vars.varsDetail});} else if (this._varsMove.mouseupWrapId) {this._varsMove.numBlock = this._varsMove.vars;if (this._varsMove.mouseupWrapAction == 'add') {this.vars.varsDetail.unshift(this._varsMove.numBlock);}this.vars.varsDetail = this.getBlockLevel();this.allot({insCurrent : this.insCurrent,from       : '_mouseupMoveEventMove',vars       : this.vars.varsDetail});}this._setImgStyleCursor({arr : this.vars.varsDetail});} else if (this._varsMove.flagEventMove == 'varsInside') {if (this._varsMove.mouseupId) {this._varsMove.numBlock = this._varsMove.vars;var flag = 0;if (this._varsMove.mouseupAction == 'insert') {if (this._varsMove.vars.idTarget) {flag = this.allot({insCurrent : this.insCurrent,from       : '_preMouseupMoveEventMove',idTarget   : this._varsMove.vars.idTarget});}if (!flag) {this.vars.varsDetail = this._setBlockInsert({arr      : this.vars.varsDetail,idTarget : this._varsMove.mouseupId,numBlock : this._varsMove.numBlock});}} else if (this._varsMove.mouseupAction == 'after') {if (this._varsMove.vars.idTarget) {flag = this.allot({insCurrent : this.insCurrent,from       : '_preMouseupMoveEventMove',idTarget   : this._varsMove.vars.idTarget});}if (!flag) {this.vars.varsDetail = this._setBlockAfter({arr      : this.vars.varsDetail,idTarget : this._varsMove.mouseupId,numBlock : this._varsMove.numBlock});}}this.vars.varsDetail = this.getBlockLevel();this.allot({insCurrent : this.insCurrent,flag       : flag,from       : '_mouseupMoveEventMove',vars       : this.vars.varsDetail});} else if (this._varsMove.mouseupWrapId) {this._varsMove.numBlock = this._varsMove.vars;var flag = 0;if (this._varsMove.mouseupWrapAction == 'add') {if (this._varsMove.vars.idTarget) {flag = this.allot({insCurrent : this.insCurrent,from       : '_preMouseupMoveEventMove',idTarget   : this._varsMove.vars.idTarget});}if (!flag) {this.vars.varsDetail[0].child.unshift(this._varsMove.numBlock);}}this.vars.varsDetail = this.getBlockLevel();this.allot({insCurrent : this.insCurrent,flag       : flag,from       : '_mouseupMoveEventMove',vars       : this.vars.varsDetail});}this._setImgStyleCursor({arr : this.vars.varsDetail});} else if (this._varsMove.flagEventMove == 'varsOutside') {if (this._varsMove.mouseupId) {var flag = 0;if (this._varsMove.mouseupAction == 'insert') {this._getBlock({arr      : this.vars.varsDetail,idTarget : this._varsMove.mouseupId});if (this._varsMove.vars.idTarget) {flag = this.allot({insCurrent : this.insCurrent,from       : '_preMouseupMoveEventMove',idTarget   : this._varsMove.vars.idTarget,arr        : this._varsMove.numBlock.varsInside});}if (!flag) {this.vars.varsDetail = this._setBlockInsertInside({arr      : this.vars.varsDetail,idTarget : this._varsMove.mouseupId,numBlock : this._varsMove.vars});}}this.vars.varsDetail = this.getBlockLevel();this.allot({insCurrent : this.insCurrent,from       : '_mouseupMoveEventMove',flag       : flag,vars       : this.vars.varsDetail});}this._setImgStyleCursor({arr : this.vars.varsDetail});} else {if (this._varsMove.mouseupId) {this._varsMove.numBlock = {};var varsDetail = (Object.toJSON(this.vars.varsDetail)).evalJSON();this._getBlock({arr      : varsDetail,idTarget : this._varsMove.vars.id});varsDetail = this._removeBlock({arr      : varsDetail,idTarget : this._varsMove.vars.id});if (this._varsMove.mouseupAction == 'insert') {varsDetail = this._setBlockInsert({arr      : varsDetail,idTarget : this._varsMove.mouseupId,numBlock : this._varsMove.numBlock});} else if (this._varsMove.mouseupAction == 'after') {varsDetail = this._setBlockAfter({arr      : varsDetail,idTarget : this._varsMove.mouseupId,numBlock : this._varsMove.numBlock});}varsDetail = this._setBlockLevel({arr    : varsDetail,parent : this.idSelf});var flag = this.allot({insCurrent : this.insCurrent,from       : '_mouseupMove',vars       : varsDetail});if (!flag) {this.vars.varsDetail = varsDetail;this.iniReload();}} else {this._setImgStyleCursor({arr : this.vars.varsDetail});}var data = this._varsMove.vars;this._mouseoutBtn({vars : data});}this._varsMove.naviEle.remove();this._varsMove = {};evt.stop();},_checkMoveId : function(){},_setMoveNavi : function(obj){var zIndex = this.insRoot.setZIndex();var ele = $(obj.vars.id).cloneNode(true);ele.removeClassName('codeLibTreeBtnOver');$(this.insRoot.vars.varsSystem.id.root).insert(ele);this._varsMove.naviEle = ele;ele.addClassName('codeLibTreeNavi');var array = ele.childNodes;for (var j = 0; j < array.length; j++) {array[j].removeClassName('codeLibTreeBlock');}ele.setStyle({left   : (obj.evt.pointerX() + this._staticMove.numNaviLeft) + 'px',top    : (obj.evt.pointerY() + this._staticMove.numNaviTop) + 'px',zIndex : zIndex});},varsLineSelect : {id : null},_iniFind : function(){if (!this.vars.varsStatus.flagFindUse) return;this._setFind();},insFind : null,_setFind : function(){this.insFind = new Code_Lib_Btn();this.insFind.iniBtnSearch({eleInsert  : (this.vars.varsStatus.flagInnerFindUse)?  this.insFormat.eleTemplate.fooder.down('.codeLibBaseMarginLeftFive', 0): this.eleInsertBtnLeft,strFunc    : '_mousedownFind',insCurrent : this,id         : this.idSelf + 'Find',numWidth   : this._getFindWidth({numWidth : this.vars.varsFind.numWidth}),unitWidth  : 'px',strTitle   : this.vars.varsFind.strTitle});},_resetFindVars : function(){if(!this.vars.varsStatus.flagFindUse) return;this.vars.varsFind.num = 0;},_getFindWidth : function(obj){var array = this.eleInsert.style.width.split('px');var data =  Math.floor(parseFloat(array[0]) * obj.numWidth / 100);return  data;},_mousedownFind : function(obj){if (this.vars.varsStatus.flagLockUse && this.vars.varsStatus.flagLockNow) return;if (obj.value == '') {this.vars.varsFind.flag = 0;this.vars.varsFind.value = '';} else {this.vars.varsFind.flag = 1;this.vars.varsFind.value = obj.value;}this.iniReloadFind();},_updateFindWidth : function(){if (!this.vars.varsStatus.flagFindUse) return;$(this.idSelf + 'Find').down('.codeLibBtnSearchInput', 0).style.width = this._getFindWidth({numWidth : this.vars.varsFind.numWidth}) + 'px';},_checkFind : function(){this._resetFindVars();this._checkFindList({idParent : this.idSelf ,arr      : this.vars.varsDetail});return this.vars.varsFind.num;},_setFindMatch : function(obj){var cut = obj.vars;if (!this.vars.varsFind.flag) return;var flag = cut.strTitle.match(new RegExp( this.vars.varsFind.value ,'im'));return flag;},_checkFindList : function(obj){for (var i = 0; i < obj.arr.length; i++) {if (!obj.arr[i].flagUse) continue;obj.arr[i].id = obj.idParent + '-' + i;if (this.vars.varsStatus.flagBtnUse && !obj.arr[i].flagBtnUse) {if (obj.arr[i].child.length) {this._checkFindList({arr      : obj.arr[i].child,idParent : obj.arr[i].id});}continue;}var flag = this._setFindMatch({vars : obj.arr[i]});if (!flag) {if (obj.arr[i].child.length) {this._checkFindList({arr      : obj.arr[i].child,idParent : obj.arr[i].id});}} else {this.vars.varsFind.num++;if (obj.arr[i].child.length) {this._checkFindList({arr      : obj.arr[i].child,idParent : obj.arr[i].id});}}}},_iniFindTemplate : function(){this.eleTree = $(document.createElement('div'));this.eleTree.addClassName('codeLibBaseMarginLeftFive');$(this.insRoot.vars.varsSystem.id.root).insert(this.eleTree);this._setFindTemplate({idParent : this.idSelf ,arr      : this.vars.varsDetail});this._setWidthFind();this.insFormat.eleTemplate.body.insert(this.eleTree);},_setFindTemplate : function(obj){for (var i = 0; i < obj.arr.length; i++) {if (!obj.arr[i].flagUse) continue;obj.arr[i].id = obj.idParent + '-' + i;var array = (obj.arr[i].id).split(this.idSelf);var level = array[1];var arrayLevel = level.split('-');var num = (arrayLevel.length) - 2;if (this.vars.varsStatus.flagBtnUse && !obj.arr[i].flagBtnUse) {if (obj.arr[i].child.length) {this._setFindTemplate({arr      : obj.arr[i].child,idParent : obj.arr[i].id});}continue;}var flag = this._setFindMatch({vars : obj.arr[i]});if (!flag) {if (obj.arr[i].child.length) {this._setFindTemplate({arr      : obj.arr[i].child,idParent : obj.arr[i].id});}continue;}var eleSort = $(document.createElement('div'));eleSort.addClassName('codeLibTreeSort');eleSort.unselectable = 'on';var eleDiv = $(document.createElement('div'));eleDiv.unselectable = 'on';eleDiv.addClassName('codeLibTreeBtn');eleDiv.addClassName('unselect');eleDiv.id = obj.arr[i].id;var arrChild = obj.arr[i].child;var numChild = 0;for (var j = 0; j < arrChild.length; j++) {if (arrChild[j].flagUse) {numChild++;}}var children = ' (' + numChild.length + ')';var strInside = '';if (obj.arr[i].varsInside) strInside = ' [' + obj.arr[i].varsInside.length + ']';var eleTitle = $(document.createElement('span'));eleTitle.unselectable = 'on';eleTitle.addClassName('codeLibBaseMarginLeftFive');if (obj.arr[i].flagChildrenUse && obj.arr[i].flagInsideUse) eleTitle.title = obj.arr[i].strTitle + children + strInside;else if (obj.arr[i].flagInsideUse) eleTitle.title = obj.arr[i].strTitle + strInside;else if (obj.arr[i].flagChildrenUse) eleTitle.title = obj.arr[i].strTitle + children;else eleTitle.title = obj.arr[i].strTitle;if (this.vars.varsStatus.flagLockUse && this.vars.varsStatus.flagLockNow) {eleTitle.addClassName('codeLibBaseFontCcc');eleTitle.addClassName('codeLibBaseCursorDefault');} else {eleTitle.addClassName('codeLibBaseCursorPointer');}eleTitle.addClassName('codeLibTreeTitle');for (var j = 0; j < 1; j++) {var eleSpan = $(document.createElement('span'));eleSpan.unselectable = 'on';eleSpan.addClassName('codeLibTreeBlock');eleDiv.insert(eleSpan);}var eleImg = $(document.createElement('span'));eleImg.addClassName('codeLibTreeBlock');if (obj.arr[i].strClassLoad) {eleImg.addClassName(obj.arr[i].strClassLoad);} else {eleImg.addClassName(obj.arr[i].strClass);}eleImg.unselectable = 'on';eleImg.addClassName('codeLibTreeImg');eleImg.addClassName('unselect');eleDiv.insert(eleImg);if (obj.arr[i].flagRemoveUse&& this.vars.varsStatus.flagRemoveUse&& this.vars.varsStatus.flagRemoveNow) {var eleRemove = $(document.createElement('span'));eleRemove.addClassName('codeLibTreeRemove');if (this.vars.varsStatus.flagLockUse && this.vars.varsStatus.flagLockNow) {eleRemove.addClassName('codeLibBaseCursorDefault');} else {eleRemove.addClassName('codeLibBaseCursorPointer');}eleRemove.unselectable = 'on';eleRemove.addClassName('unselect');if (!(this.vars.varsStatus.flagLockUse && this.vars.varsStatus.flagLockNow)) {this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'mousedown',strFunc : '_mousedownRemove', ele : eleRemove, vars : { vars : obj.arr[i] }});}eleDiv.insert(eleRemove);}if (obj.arr[i].flagEditUse&& this.vars.varsStatus.flagEditUse&& this.vars.varsStatus.flagEditNow) {var eleEdit = $(document.createElement('span'));eleEdit.addClassName('codeLibTreeEdit');if (this.vars.varsStatus.flagLockUse && this.vars.varsStatus.flagLockNow) {eleEdit.addClassName('codeLibBaseCursorDefault');} else {eleEdit.addClassName('codeLibBaseCursorPointer');}eleEdit.unselectable = 'on';eleEdit.addClassName('unselect');if (!(this.vars.varsStatus.flagLockUse && this.vars.varsStatus.flagLockNow)) {this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'mousedown',strFunc : '_mousedownEdit', ele : eleEdit,vars : { vars : obj.arr[i] }});}eleDiv.insert(eleEdit);}if (obj.arr[i].strTitle.length > this._staticWhole.numLength) {var strTitle = obj.arr[i].strTitle.slice(0, this._staticWhole.numLength);eleTitle.insert(strTitle);}else eleTitle.insert(obj.arr[i].strTitle);var eleForm = $(document.createElement('form'));eleForm.addClassName('codeLibTreeForm');if (obj.arr[i].flagEditUse&& this.vars.varsStatus.flagEditUse&& this.vars.varsStatus.flagEditNow) {var eleTag = $(document.createElement('input'));eleTag.addClassName('codeLibBaseMarginLeftFive');eleTag.addClassName('codeLibTreeFormTag');eleTag.value = obj.arr[i].strTitle;eleTag.type = 'text';eleForm.insert(eleTag);eleForm.hide();}eleDiv.insert(eleTitle);eleDiv.insert(eleForm);this.eleTree.insert(eleDiv);this.eleTree.insert(eleSort);if (this.vars.varsStatus.flagBtnUse && obj.arr[i].flagBtnUse) {if (!(this.vars.varsStatus.flagLockUse && this.vars.varsStatus.flagLockNow)) {this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'dblclick',strFunc : '_dblclickBtn', ele : eleDiv, vars : { vars : obj.arr[i] }});this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'mousedown',strFunc : '_mousedownBtn', ele : eleDiv, vars : { vars : obj.arr[i] }});this.insListener.set({bindAsEvent : 0, insCurrent : this, event : 'mouseover',strFunc : '_mouseoverBtn', ele : eleDiv, vars : { vars : obj.arr[i] }});this.insListener.set({bindAsEvent : 0, insCurrent : this, event : 'mouseout',strFunc : '_mouseoutBtn', ele : eleDiv, vars : { vars : obj.arr[i] }});eleDiv.observe('contextmenu', Event.stop);this.insListener.set({bindAsEvent : 0, insCurrent : this, event : 'mouseover',strFunc : '_mouseoverTitle', ele : eleTitle, vars : { vars : obj.arr[i] }});this.insListener.set({bindAsEvent : 0, insCurrent : this, event : 'mouseout',strFunc : '_mouseoutTitle', ele : eleTitle, vars : { vars : obj.arr[i] }});}}if (obj.arr[i].child.length) {this._setFindTemplate({arr      : obj.arr[i].child,idParent : obj.arr[i].id});}}},_iniLine : function(){this.eleTree = $(document.createElement('div'));this.eleTree.addClassName('codeLibBaseMarginLeftFive');$(this.insRoot.vars.varsSystem.id.root).insert(this.eleTree);this.setLineId({idParent : this.idSelf ,arr      : this.vars.varsDetail});this._iniCake();this._setLine({idParent : this.idSelf ,arr      : this.vars.varsDetail});this._setWidth();this.insFormat.eleTemplate.body.insert(this.eleTree);},setLineId : function(obj){for (var i = 0; i < obj.arr.length; i++) {obj.arr[i].id = obj.idParent + '-' + i;if (obj.arr[i].child.length) {this.setLineId({arr      : obj.arr[i].child,idParent : obj.arr[i].id});}}},_setLine : function(obj){var eleTree;if (!obj.parent) {eleTree = $(document.createElement('ul'));eleTree.unselectable = 'on';eleTree.addClassName('codeLibBaseCursorDefault');this.eleTree.insert(eleTree);obj.parent = eleTree;}for (var i = 0; i < obj.arr.length; i++) {if (!obj.arr[i].flagUse) continue;obj.arr[i].id = obj.idParent + '-' + i;var array = (obj.arr[i].id).split(this.idSelf);var level = array[1];var arrayLevel = level.split('-');var num = (arrayLevel.length) - 2;var eleSort = $(document.createElement('div'));eleSort.addClassName('codeLibTreeSort');eleSort.unselectable = 'on';var eleDiv = $(document.createElement('div'));eleDiv.unselectable = 'on';eleDiv.addClassName('codeLibTreeBtn');eleDiv.addClassName('unselect');eleDiv.id = obj.arr[i].id;var arrChild = obj.arr[i].child;var numChild = 0;for (var j = 0; j < arrChild.length; j++) {if (arrChild[j].flagUse) {numChild++;}}var children = ' (' + numChild + ')';var strInside = '';if (obj.arr[i].varsInside) strInside = ' [' + obj.arr[i].varsInside.length + ']';var eleTitle = $(document.createElement('span'));eleTitle.unselectable = 'on';if (this.vars.varsStatus.flagLockUse && this.vars.varsStatus.flagLockNow) {eleTitle.addClassName('codeLibBaseFontCcc');eleTitle.addClassName('codeLibBaseCursorDefault');}if (obj.arr[i].flagChildrenUse && obj.arr[i].flagInsideUse) eleTitle.title = obj.arr[i].strTitle + children + strInside;else if (obj.arr[i].flagInsideUse) eleTitle.title = obj.arr[i].strTitle + strInside;else if (obj.arr[i].flagChildrenUse) eleTitle.title = obj.arr[i].strTitle + children;else eleTitle.title = obj.arr[i].strTitle;if (this.vars.varsStatus.flagBtnUse && obj.arr[i].flagBtnUse) {if (this.vars.varsStatus.flagLockUse && this.vars.varsStatus.flagLockNow) {eleTitle.addClassName('codeLibBaseCursorDefault');} else {eleTitle.addClassName('codeLibBaseCursorPointer');}}eleTitle.addClassName('codeLibTreeTitle');if (!obj.arr[i].flagCheckUse || !this.vars.varsStatus.flagCheckUse) {eleTitle.addClassName('codeLibBaseMarginLeftFive');}var eleUl = $(document.createElement('ul'));for (var j = 0; j < num; j++) {var eleSpan = $(document.createElement('span'));eleSpan.unselectable = 'on';eleSpan.addClassName('codeLibTreeBlock');eleDiv.insert(eleSpan);}var eleFold;if (obj.arr[i].flagFoldUse && this.vars.varsStatus.flagFoldUse && obj.arr[i].child.length) {if (obj.arr[i].flagFoldNow) {eleFold = $(document.createElement('span'));eleFold.unselectable = 'on';if (this.vars.varsStatus.flagLockUse && this.vars.varsStatus.flagLockNow) {eleFold.addClassName('codeLibBaseCursorDefault');} else {eleFold.addClassName('codeLibBaseCursorPointer');}eleFold.addClassName('codeLibTreeFold');eleFold.addClassName('codeLibTreeFoldOpen');} else {eleFold = $(document.createElement('span'));eleFold.unselectable = 'on';if (this.vars.varsStatus.flagLockUse && this.vars.varsStatus.flagLockNow) {eleFold.addClassName('codeLibBaseCursorDefault');} else {eleFold.addClassName('codeLibBaseCursorPointer');}eleUl.style.display = 'none';eleFold.addClassName('codeLibTreeFold');eleFold.addClassName('codeLibTreeFoldClose');}eleDiv.insert(eleFold);if (!(this.vars.varsStatus.flagLockUse && this.vars.varsStatus.flagLockNow)) {this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'mousedown',strFunc : '_mousedownFold', ele : eleFold, vars : { vars : obj.arr[i]}});}} else {if (this.vars.varsStatus.flagFoldUse) {var eleSpan = $(document.createElement('span'));eleSpan.unselectable = 'on';eleSpan.addClassName('codeLibTreeBlock');eleDiv.insert(eleSpan);}}var eleImg = $(document.createElement('span'));eleImg.addClassName('codeLibTreeBlock');if (obj.arr[i].strClassLoad) {eleImg.addClassName(obj.arr[i].strClassLoad);} else {eleImg.addClassName(obj.arr[i].strClass);}eleImg.unselectable = 'on';eleImg.addClassName('codeLibTreeImg');eleDiv.insert(eleImg);if (obj.arr[i].flagMoveUse && this.vars.varsStatus.flagMoveUse) {if (!(this.vars.varsStatus.flagLockUse && this.vars.varsStatus.flagLockNow)) {this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'mousedown',strFunc : '_mousedownMove', ele : eleImg, vars : { vars : obj.arr[i] }});this.insListener.set({bindAsEvent : 0, insCurrent : this, event : 'mouseover',strFunc : '_mouseoverSort', ele : eleSort, vars : { vars : obj.arr[i] }});this.insListener.set({bindAsEvent : 0, insCurrent : this, event : 'mouseout',strFunc : '_mouseoutSort', ele : eleSort, vars : { vars : obj.arr[i]}});this.insListener.set({bindAsEvent : 0, insCurrent : this, event : 'mouseup',strFunc : '_mouseupSort', ele : eleSort, vars : { vars : obj.arr[i]}});this.insListener.set({bindAsEvent : 0, insCurrent : this, event : 'mouseover',strFunc : '_mouseoverSort', ele : eleTitle, vars : { vars : obj.arr[i] }});this.insListener.set({bindAsEvent : 0, insCurrent : this, event : 'mouseout',strFunc : '_mouseoutSort', ele : eleTitle, vars : { vars : obj.arr[i]}});this.insListener.set({bindAsEvent : 0, insCurrent : this, event : 'mouseup',strFunc : '_mouseupSort', ele : eleTitle, vars : { vars : obj.arr[i]}});this.insListener.set({bindAsEvent : 0, insCurrent : this, event : 'mouseover',strFunc : '_mouseoverImg', ele : eleImg, vars : { vars : obj.arr[i] }});this.insListener.set({bindAsEvent : 0, insCurrent : this, event : 'mouseout',strFunc : '_mouseoutImg', ele : eleImg, vars : { vars : obj.arr[i] }});this.insListener.set({bindAsEvent : 0, insCurrent : this, event : 'mouseup',strFunc : '_mouseupImg', ele : eleImg, vars : { vars : obj.arr[i]}});}if (this.vars.varsStatus.flagLockUse && this.vars.varsStatus.flagLockNow) {eleImg.addClassName('codeLibBaseCursorDefault');} else {eleImg.addClassName('codeLibBaseCursorMove');}}var eleCheck = $(document.createElement('span'));eleCheck.addClassName('codeLibTreeCheck');if (obj.arr[i].flagCheckUse && this.vars.varsStatus.flagCheckUse) {eleCheck.addClassName('codeLibTreeBlock');eleCheck.addClassName('codeLibBaseMarginLeftFive');eleCheck.unselectable = 'on';eleCheck.addClassName('unselect');if (Prototype.Browser.IE) eleCheck.addClassName('ie');else if (Prototype.Browser.Gecko) eleCheck.addClassName('firefox');else if (navigator.userAgent.match("Chrome")) eleCheck.addClassName('chrome');var eleForm = $(document.createElement('form'));var eleTag = $(document.createElement('input'));eleTag.addClassName('codeLibTreeCheckTag');eleTag.value = obj.arr[i].flagCheckNow;eleTag.type = 'checkbox';if (obj.arr[i].flagCheckNow) eleTag.checked = true;eleForm.insert(eleTag);eleCheck.insert(eleForm);if (!(this.vars.varsStatus.flagLockUse && this.vars.varsStatus.flagLockNow)) {this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'mousedown',strFunc : '_mousedownCheck', ele : eleCheck, vars : { vars : obj.arr[i] }});}}eleDiv.insert(eleCheck);if (obj.arr[i].flagRemoveUse&& this.vars.varsStatus.flagRemoveUse&& this.vars.varsStatus.flagRemoveNow) {var eleRemove = $(document.createElement('span'));eleRemove.addClassName('codeLibTreeRemove');if (this.vars.varsStatus.flagLockUse && this.vars.varsStatus.flagLockNow) {eleRemove.addClassName('codeLibBaseCursorDefault');} else {eleRemove.addClassName('codeLibBaseCursorPointer');}eleRemove.unselectable = 'on';eleRemove.addClassName('unselect');if (!(this.vars.varsStatus.flagLockUse && this.vars.varsStatus.flagLockNow)) {this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'mousedown',strFunc : '_mousedownRemove', ele : eleRemove, vars : { vars : obj.arr[i] }});}eleDiv.insert(eleRemove);}if (obj.arr[i].flagEditUse&& this.vars.varsStatus.flagEditUse&& this.vars.varsStatus.flagEditNow) {var eleEdit = $(document.createElement('span'));eleEdit.addClassName('codeLibTreeEdit');if (this.vars.varsStatus.flagLockUse && this.vars.varsStatus.flagLockNow) {eleEdit.addClassName('codeLibBaseCursorDefault');} else {eleEdit.addClassName('codeLibBaseCursorPointer');}eleEdit.unselectable = 'on';eleEdit.addClassName('unselect');if (!(this.vars.varsStatus.flagLockUse && this.vars.varsStatus.flagLockNow)) {this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'mousedown',strFunc : '_mousedownEdit', ele : eleEdit, vars : { vars : obj.arr[i] }});}eleDiv.insert(eleEdit);}if (obj.arr[i].strTitle.length > this._staticWhole.numLength) {var strTitle = obj.arr[i].strTitle.slice(0, this._staticWhole.numLength);if (obj.arr[i].flagChildrenUse && obj.arr[i].flagInsideUse) eleTitle.insert(obj.arr[i].strTitle + children + strInside);else if (obj.arr[i].flagInsideUse) eleTitle.insert(obj.arr[i].strTitle + strInside);else if (obj.arr[i].flagChildrenUse) eleTitle.insert(obj.arr[i].strTitle + children);else eleTitle.insert(strTitle);} else {if (obj.arr[i].flagChildrenUse && obj.arr[i].flagInsideUse) eleTitle.insert(obj.arr[i].strTitle + children + strInside);else if (obj.arr[i].flagInsideUse) eleTitle.insert(obj.arr[i].strTitle + strInside);else if (obj.arr[i].flagChildrenUse) eleTitle.insert(obj.arr[i].strTitle + children);else eleTitle.insert(obj.arr[i].strTitle);}if (this.vars.varsStatus.flagFontUse) {eleTitle.addClassName(obj.arr[i].strClassFont);}if (this.vars.varsStatus.flagBoldUse && obj.arr[i].flagBoldNow) {eleTitle.addClassName('codeLibBaseFontBold');}var eleForm = $(document.createElement('form'));eleForm.addClassName('codeLibTreeForm');if (obj.arr[i].flagEditUse&& this.vars.varsStatus.flagEditUse&& this.vars.varsStatus.flagEditNow) {var eleTag = $(document.createElement('input'));eleTag.addClassName('codeLibBaseMarginLeftFive');eleTag.addClassName('codeLibTreeFormTag');eleTag.value = obj.arr[i].strTitle;eleTag.type = 'text';eleForm.insert(eleTag);eleForm.hide();}eleDiv.insert(eleTitle);eleDiv.insert(eleForm);obj.parent.insert(eleDiv);obj.parent.insert(eleSort);obj.parent.insert(eleUl);if (this.vars.varsStatus.flagBtnUse && obj.arr[i].flagBtnUse) {if (!(this.vars.varsStatus.flagLockUse && this.vars.varsStatus.flagLockNow)) {this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'dblclick',strFunc : '_dblclickBtn', ele : eleDiv, vars : { vars : obj.arr[i] }});this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'mousedown',strFunc : '_mousedownBtn', ele : eleDiv, vars : { vars : obj.arr[i] }});this.insListener.set({bindAsEvent : 0, insCurrent : this, event : 'mouseover',strFunc : '_mouseoverBtn', ele : eleDiv, vars : { vars : obj.arr[i] }});this.insListener.set({bindAsEvent : 0, insCurrent : this, event : 'mouseout',strFunc : '_mouseoutBtn', ele : eleDiv, vars : { vars : obj.arr[i] }});eleDiv.observe('contextmenu', Event.stop);this.insListener.set({bindAsEvent : 0, insCurrent : this, event : 'mouseover',strFunc : '_mouseoverTitle', ele : eleTitle, vars : { vars : obj.arr[i] }});this.insListener.set({bindAsEvent : 0, insCurrent : this, event : 'mouseout',strFunc : '_mouseoutTitle', ele : eleTitle, vars : { vars : obj.arr[i] }});}}if (obj.arr[i].child.length) {this._setLine({arr      : obj.arr[i].child,idParent : obj.arr[i].id,parent   : eleUl});}}},_varsBtn : null,_iniBtn : function(){this._setBtnListener();if (!this._varsBtn) return;this._removeBtnSelect({arr : this.vars.varsDetail});this._setBtnSelect({id  : this._varsBtn.id,arr : this.vars.varsDetail});},_setBtnListener : function(){if (this.vars.varsStatus.flagLockUse && this.vars.varsStatus.flagLockNow) return;this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'mousedown',strFunc : '_mousedownBtnRemove', ele : this.eleInsert, vars : ''});},_mousedownBtnRemove : function(evt){if (!this._varsBtn) return;this._varsBtn = null;this._removeBtnSelect({arr : this.vars.varsDetail});},_dblclickBtn : function(evt, obj){evt.stop();if (this._varsEdit.flag) return;this.allot({insCurrent : this.insCurrent,from       : '_dblclickBtn',evt        : evt,vars       : obj.vars});},setLock : function(){if (!this.vars.varsStatus.flagLockUse) return;this.vars.varsStatus.flagLockNow = 1;this.iniReload();},cancelLock : function(){if (!this.vars.varsStatus.flagLockUse) return;this.vars.varsStatus.flagLockNow = 0;this.iniReload();},getBtnSelect : function(){return this._varsBtn;},setBtnSelect : function(obj){this._varsBtn = obj.vars;this._setBtnSelect({id  : obj.vars.id,arr : this.vars.varsDetail});},_mousedownBtn : function(evt, obj){evt.stop();if (this._varsEdit.flag) return;this._varsBtn = obj.vars;this._removeBtnSelect({arr : this.vars.varsDetail});this._setBtnSelect({id  : obj.vars.id,arr : this.vars.varsDetail});this.setLock();var flag = this.allot({insCurrent : this.insCurrent,from       : '_mousedownBtn',evt        : evt,vars       : obj.vars});if(flag) this.cancelLock();},_mouseoverBtn : function(obj){if (this._varsMove.flag) return;$(obj.vars.id).addClassName('codeLibTreeBtnOver');},_mouseoutBtn : function(obj){if (this._varsMove.flag) return;$(obj.vars.id).removeClassName('codeLibTreeBtnOver');},_setBtnSelect : function(obj){for (var i = 0; i < obj.arr.length; i++) {if (!obj.arr[i].flagUse) continue;if (obj.arr[i].child.length) this._setBtnSelect({arr:obj.arr[i].child,id : obj.id});if (!$(obj.arr[i].id) || (this.vars.varsStatus.flagBtnUse && !obj.arr[i].flagBtnUse)) continue;if (obj.arr[i].id == obj.id) {this._removeBtnSelectLoad({vars : obj.arr[i]});$(obj.arr[i].id).addClassName('codeLibTreeBtnSelect');}}},removeBtnSelect : function(){this._varsBtn = null;this._removeBtnSelect({arr : this.vars.varsDetail});},_removeBtnSelectLoad : function(obj){if (!obj.vars.strClassLoad) return;$(obj.vars.id).down('.codeLibTreeImg', 0).removeClassName(obj.vars.strClassLoad);obj.vars.strClassLoad = '';$(obj.vars.id).down('.codeLibTreeImg', 0).addClassName(obj.vars.strClass);},_removeBtnSelect : function(obj){for (var i = 0; i < obj.arr.length; i++) {if (!obj.arr[i].flagUse) continue;if (obj.arr[i].child.length) this._removeBtnSelect({arr:obj.arr[i].child});if (!$(obj.arr[i].id) || (this.vars.varsStatus.flagBtnUse && !obj.arr[i].flagBtnUse)) continue;$(obj.arr[i].id).removeClassName('codeLibTreeBtnSelect');}},_setFoldUpdate : function(obj){for (var i = 0; i < obj.arr.length; i++) {if (!obj.arr[i].flagUse) continue;if (obj.arr[i].id == obj.vars.id) {if (obj.arr[i].flagFoldNow) obj.arr[i].flagFoldNow = 0;else obj.arr[i].flagFoldNow = 1;}if (obj.arr[i].child.length) this._setFoldUpdate({arr : obj.arr[i].child, vars : obj.vars});}return obj.arr;},_mousedownFold : function(evt, obj){if (obj) evt.stop();else obj = evt;this._setFoldUpdate({arr : this.vars.varsDetail, vars : obj.vars});this._varsFold.now = 0;this._checkFoldNow({arr  : this.vars.varsDetail,vars : obj.vars});if (this._varsFold.now) {this.getScroll();$(this.insRoot.vars.varsSystem.id.root).insert(this.eleTree);this._setFoldUpdateStyle({arr        : this.vars.varsDetail,vars       : obj.vars,flagEffect : 0});this._setWidth();this._setFoldRestoreStyle({arr  : this.vars.varsDetail,vars : obj.vars});this.insFormat.eleTemplate.body.insert(this.eleTree);this.setScroll();}this._setFoldUpdateStyle({arr        : this.vars.varsDetail,vars       : obj.vars,flagEffect : 1});this._mouseoutBtn({vars : obj.vars});this.setCake({arr : this.vars.varsDetail});},_varsFold : {now : 0, num : 0},_checkFoldNow : function(obj){for (var i = 0; i < obj.arr.length; i++) {if (!obj.arr[i].flagUse) continue;if (obj.arr[i].id == obj.vars.id) {this._varsFold.now = obj.arr[i].flagFoldNow;return;}if (obj.arr[i].child.length) this._checkFoldNow({arr : obj.arr[i].child, vars : obj.vars});}},_setFoldUpdateStyle : function(obj){for (var i = 0; i < obj.arr.length; i++) {if (!obj.arr[i].flagUse) continue;if (obj.arr[i].id == obj.vars.id) {var zIndex = this.insRoot.setZIndex();var idInsert = this.insRoot.vars.varsSystem.id.root;var insTree = this.insSelf;if (obj.flagEffect) {$(obj.arr[i].id).down('.codeLibTreeFold', 0).removeClassName('codeLibTreeFoldOpen');$(obj.arr[i].id).down('.codeLibTreeFold', 0).removeClassName('codeLibTreeFoldClose');if (obj.arr[i].flagFoldNow) {$(obj.arr[i].id).down('.codeLibTreeFold', 0).addClassName('codeLibTreeFoldOpen');new Effect.BlindDown($(obj.arr[i].id).next('ul', 0),{duration : 0.5});} else {$(obj.arr[i].id).down('.codeLibTreeFold', 0).addClassName('codeLibTreeFoldClose');new Effect.BlindUp($(obj.arr[i].id).next('ul', 0),{duration : 0.5});}} else {if (obj.arr[i].flagFoldNow) $(obj.arr[i].id).next('ul', 0).show();else $(obj.arr[i].id).next('ul', 0).hide();}}if (obj.arr[i].child.length) {this._setFoldUpdateStyle({arr        : obj.arr[i].child,vars       : obj.vars,flagEffect : obj.flagEffect});}}return obj.arr;},_setFoldUpdateStyleWrap : function(){$(this.insRoot.vars.varsSystem.id.root).insert(this.eleTree);this._setWidth();this.insFormat.eleTemplate.body.insert(this.eleTree);},_setFoldRestoreStyle : function(obj){for (var i = 0; i < obj.arr.length; i++) {if (!obj.arr[i].flagUse) continue;if (obj.arr[i].id == obj.vars.id) {if (!obj.arr[i].flagFoldNow) $(obj.vars.id).next('ul', 0).show();else $(obj.vars.id).next('ul', 0).hide();}if (obj.arr[i].child.length) {this._setFoldRestoreStyle({arr : obj.arr[i].child, vars : obj.vars});}}return obj.arr;},_updateFoldVarAll : function(obj){for (var i = 0; i < obj.arr.length; i++) {if (!obj.arr[i].flagUse) continue;if (obj.arr[i].flagFoldUse) {obj.arr[i].flagFoldNow = obj.flagFoldNow;}if (obj.arr[i].child.length) {this._updateFoldVarAll({arr : obj.arr[i].child, flagFoldNow : obj.flagFoldNow});}}},_setFoldUpdateStyleAll : function(obj){for (var i = 0; i < obj.arr.length; i++) {if (!obj.arr[i].flagUse) continue;if (obj.arr[i].flagFoldUse) {if (obj.flagEffect && $(obj.arr[i].id).down('.codeLibTreeFold', 0)) {$(obj.arr[i].id).down('.codeLibTreeFold', 0).removeClassName('codeLibTreeFoldOpen');$(obj.arr[i].id).down('.codeLibTreeFold', 0).removeClassName('codeLibTreeFoldClose');if (obj.arr[i].flagFoldNow) {$(obj.arr[i].id).down('.codeLibTreeFold', 0).addClassName('codeLibTreeFoldOpen');$(obj.arr[i].id).next('ul', 0).show();} else {$(obj.arr[i].id).down('.codeLibTreeFold', 0).addClassName('codeLibTreeFoldClose');$(obj.arr[i].id).next('ul', 0).hide();}} else {if (obj.arr[i].flagFoldNow) $(obj.arr[i].id).next('ul', 0).show();else $(obj.arr[i].id).next('ul', 0).hide();}}if (obj.arr[i].child.length) {this._setFoldUpdateStyleAll({arr        : obj.arr[i].child,flagEffect : obj.flagEffect});}}return obj.arr;},_setFoldRestoreStyleAll : function(obj){for (var i = 0; i < obj.arr.length; i++) {if (!obj.arr[i].flagUse) continue;if (!obj.arr[i].flagFoldNow) $(obj.arr[i].id).next('ul', 0).show();else $(obj.arr[i].id).next('ul', 0).hide();if (obj.arr[i].child.length) this._setFoldRestoreStyleAll({arr:obj.arr[i].child});}return obj.arr;},_setImgStyleCursor : function(obj){if (this.vars.varsStatus.flagLockUse && this.vars.varsStatus.flagLockNow) return;for (var i = 0; i < obj.arr.length; i++) {if (!obj.arr[i].flagUse) continue;if (!obj.arr[i].flagMoveUse || !$(obj.arr[i].id)) continue;$(obj.arr[i].id).down('.codeLibTreeImg', 0).addClassName('codeLibBaseCursorMove');if (obj.arr[i].child.length) this._setImgStyleCursor({arr:obj.arr[i].child});}},_removeImgStyleCursor : function(obj){for (var i = 0; i < obj.arr.length; i++) {if (!obj.arr[i].flagUse) continue;if (!obj.arr[i].flagMoveUse || !$(obj.arr[i].id)) continue;$(obj.arr[i].id).down('.codeLibTreeImg', 0).removeClassName('codeLibBaseCursorMove');if (obj.arr[i].child.length) this._removeImgStyleCursor({arr : obj.arr[i].child});}},_mouseoverImg : function(obj){if (!this.vars.varsStatus.flagMoveUse) return;if (this._varsMove.flag) {$(obj.vars.id).down('.codeLibTreeImg', 0).removeClassName('codeLibBaseCursorMove');var flag = this._checkChild({vars:obj.vars});if (this._varsMove.mousedownId == obj.vars.id || flag || !obj.vars.flagInsertUse) {this._varsMove.mouseupId = '';this._varsMove.mouseupAction = '';} else {$(obj.vars.id).down('.codeLibTreeTitle', 0).addClassName('codeLibTreeTitleInsert');this._varsMove.mouseupId = obj.vars.id;this._varsMove.mouseupAction = 'insert';this._setImgTime();}}},_mouseoutImg : function(obj){if (!this.vars.varsStatus.flagMoveUse) return;if (this._varsMove.flag) {this._removeImgTimer();this._varsMove.mouseupId = '';this._varsMove.mouseupAction = '';$(obj.vars.id).down('.codeLibTreeTitle', 0).removeClassName('codeLibTreeTitleInsert');}},_mouseupImg : function(obj){if (!this.vars.varsStatus.flagMoveUse) return;if (this._varsMove.flag) {this._removeImgTimer();$(obj.vars.id).down('.codeLibTreeTitle', 0).removeClassName('codeLibTreeTitleInsert');}},_getImgTimerVars : function(obj){for (var i = 0; i < obj.arr.length; i++) {if (!obj.arr[i].flagUse) continue;if (!obj.arr[i].flagMoveUse || !$(obj.arr[i].id)) continue;if (obj.arr[i].id == this._varsMove.mouseupId) {this._varsMove.timerVars = obj.arr[i];return;}if (obj.arr[i].child.length) this._getImgTimerVars({arr:obj.arr[i].child});}},_setImgTime : function(){this._getImgTimerVars({arr:this.vars.varsDetail});this._varsMove.timerFlag = 1;this._varsMove.timer = setInterval(this._setImgTimer.bind(this), this._staticMove.numTimer);},_setImgTimer : function(){if (!this._varsMove.timerFlag) return;if ($(this._varsMove.mouseupId).next('ul', 0).style.display != 'none') return;this._removeImgTimer();this._setFold({vars:this._varsMove.timerVars});},_removeImgTimer : function(){this._varsMove.timerFlag = 0;clearInterval(this._varsMove.timer);this._varsMove.timer = null;},_mouseoverSort : function(obj){if (!this.vars.varsStatus.flagMoveUse) return;if (!this.vars.varsStatus.flagSortUse) return;var cut = this._varsMove;if (cut.flag) {var flag = this._checkChild({vars : obj.vars});if (cut.vars.id == obj.vars.id || flag) {cut.mouseupId = '';cut.mouseupAction = '';$(obj.vars.id).next('.codeLibTreeSort', 0).removeClassName('codeLibTreeSortOver');} else {cut.mouseupId = obj.vars.id;cut.mouseupAction = 'after';$(obj.vars.id).next('.codeLibTreeSort', 0).addClassName('codeLibTreeSortOver');}}},_checkChild : function(obj){var array = (obj.vars.id).split(this.idSelf);var level = array[1];arrayLevel = level.split('-');var num = this._varsMove.arrayLevel.length;var flag = 0;for (var i = 0; i < this._varsMove.arrayLevel.length; i++) {if (arrayLevel[i] == this._varsMove.arrayLevel[i]) num--;}if (num==0) return 1;else return 0;},_mouseoutSort : function(obj){if (!this.vars.varsStatus.flagMoveUse) return;if (!this.vars.varsStatus.flagSortUse) return;var cut = this._varsMove;if (cut.flag) {cut.mouseupId = '';cut.mouseupAction = '';$(obj.vars.id).next('.codeLibTreeSort', 0).removeClassName('codeLibTreeSortOver');}},_mouseupSort : function(obj){if (!this.vars.varsStatus.flagMoveUse) return;if (!this.vars.varsStatus.flagSortUse) return;var cut = this._varsMove;if (cut.flag) {$(obj.vars.id).next('.codeLibTreeSort', 0).removeClassName('codeLibTreeSortOver');}},_mousedownBarEdit : function(evt, obj){if (obj) evt.stop();else obj = evt;this._updateBarEditVar();this._updateBarEditStyle();this.setCakeBar();this.iniReload();},_updateBarEditVar : function(){if (this.vars.varsStatus.flagEditNow) {this.vars.varsStatus.flagEditNow = 0;} else {this.vars.varsStatus.flagEditNow = 1;}},_updateBarEditStyle : function(){var ele = this.eleWrapBar.down('.codeLibTreeBarEdit', 0);ele.removeClassName('codeLibTreeBarEditOn');ele.removeClassName('codeLibTreeBarEditOff');if (!this.vars.varsStatus.flagEditNow) {ele.addClassName('codeLibTreeBarEditOff');} else {ele.addClassName('codeLibTreeBarEditOn');}},_mousedownBarRemove : function(evt, obj){if (obj) evt.stop();else obj = evt;this.vars.varsDetail = [];var flag = this.allot({insCurrent : this.insCurrent,from       : '_mousedownBarRemove'});this.iniReload();},_updateBarRemoveVar : function(){if (this.vars.varsStatus.flagRemoveNow) {this.vars.varsStatus.flagRemoveNow = 0;} else {this.vars.varsStatus.flagRemoveNow = 1;}},_updateBarRemoveStyle : function(){var ele = this.eleWrapBar.down('.codeLibTreeBarRemove', 0);ele.removeClassName('codeLibTreeBarRemoveOn');ele.removeClassName('codeLibTreeBarRemoveOff');if (!this.vars.varsStatus.flagRemoveNow) {ele.addClassName('codeLibTreeBarRemoveOff');} else {ele.addClassName('codeLibTreeBarRemoveOn');}},_mousedownBarCheck : function(evt, obj){if (obj) evt.stop();else obj = evt;this._updateBarCheckVar();this._updateBarCheckStyle();this.setCakeBar();},_updateBarCheckVar : function(){if (this.vars.varsStatus.flagCheckNow) {this.vars.varsStatus.flagCheckNow = 0;this._updateCheckVarAll({arr          : this.vars.varsDetail,flagCheckNow : 0});} else {this.vars.varsStatus.flagCheckNow = 1;this._updateCheckVarAll({arr          : this.vars.varsDetail,flagCheckNow : 1});}},_updateBarCheckStyle : function(){var ele = this.eleWrapBar.down('.codeLibTreeBarCheck', 0);ele.removeClassName('codeLibTreeBarCheckUnchecked');ele.removeClassName('codeLibTreeBarCheckChecked');if (!this.vars.varsStatus.flagCheckNow) {ele.addClassName('codeLibTreeBarCheckChecked');this._updateCheckStyleAll({arr          : this.vars.varsDetail,flagCheckNow : 0});} else {ele.addClassName('codeLibTreeBarCheckUnchecked');this._updateCheckStyleAll({arr          : this.vars.varsDetail,flagCheckNow : 1});}},_mousedownCheck : function(evt, obj){if (obj) evt.stop();else obj = evt;this._updateCheckVar({arr  : this.vars.varsDetail,vars : obj.vars});this.allot({insCurrent : this.insCurrent,from       : '_mousedownCheck',vars       : obj.vars});},setCheckAllValue : function(obj){this._setCheckAllValueChild({arr : this.vars.varsDetail});},_setCheckAllValueChild : function(obj){for (var i = 0; i < obj.arr.length; i++) {if (!obj.arr[i].flagUse) continue;if (obj.arr[i].flagCheckUse) {obj.arr[i].flagCheckNow = ($(obj.arr[i].id).down('.codeLibTreeCheckTag', 0).checked == true)? 1 : 0;}if (obj.arr[i].child.length) {this._setCheckAllValueChild({arr : obj.arr[i].child});}}return obj.arr;},_updateCheckStyleAll : function(obj){for (var i = 0; i < obj.arr.length; i++) {if (!obj.arr[i].flagUse) continue;if (obj.arr[i].flagCheckUse) {if (obj.flagCheckNow) {$(obj.arr[i].id).down('.codeLibTreeCheckTag', 0).value = 0;$(obj.arr[i].id).down('.codeLibTreeCheckTag', 0).checked = false;} else {$(obj.arr[i].id).down('.codeLibTreeCheckTag', 0).value = 1;$(obj.arr[i].id).down('.codeLibTreeCheckTag', 0).checked = true;}}if (obj.arr[i].child.length) {this._updateCheckStyleAll({arr : obj.arr[i].child, flagCheckNow : obj.flagCheckNow});}}},_updateCheckVarAll : function(obj){for (var i = 0; i < obj.arr.length; i++) {if (!obj.arr[i].flagUse) continue;if (obj.arr[i].flagCheckUse) {if (obj.flagCheckNow) obj.arr[i].flagCheckNow = 1;else obj.arr[i].flagCheckNow = 0;}if (obj.arr[i].child.length) {this._updateCheckVarAll({arr : obj.arr[i].child, flagCheckNow : obj.flagCheckNow});}}},_updateCheckVar : function(obj){for (var i = 0; i < obj.arr.length; i++) {if (!obj.arr[i].flagUse) continue;if (obj.arr[i].flagCheckUse) {if (obj.arr[i].id == obj.vars.id) {if (obj.arr[i].flagCheckNow) obj.arr[i].flagCheckNow = 0;else obj.arr[i].flagCheckNow = 1;}}if (obj.arr[i].child.length) {this._updateCheckVar({arr:obj.arr[i].child, vars : obj.vars});}}},_setBarFoldListener : function(obj){if (this.vars.varsStatus.flagLockUse && this.vars.varsStatus.flagLockNow) return;var ele = obj.ele;this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'mousedown',strFunc : '_mousedownBarFold', ele : ele, vars : ''});},_mousedownBarFold : function(evt, obj){if (obj) evt.stop();else obj = evt;if (this.vars.varsFind.num) return;this._updateBarFoldVar();this._updateBarFoldStyle();this.setCake({arr : this.vars.varsDetail});this.setCakeBar();},_updateBarFoldVar : function(){if (this.vars.varsStatus.flagFoldNow) {this.vars.varsStatus.flagFoldNow = 0;this._updateFoldVarAll({arr         : this.vars.varsDetail,flagFoldNow : 0});} else {this.vars.varsStatus.flagFoldNow = 1;this._updateFoldVarAll({arr         : this.vars.varsDetail,flagFoldNow : 1});}},_updateBarFoldStyle : function(){var ele = this.eleWrapBar.down('.codeLibTreeBarFold', 0);ele.removeClassName('codeLibTreeFoldOpen');ele.removeClassName('codeLibTreeFoldClose');if (this.vars.varsStatus.flagFoldNow) ele.addClassName('codeLibTreeFoldOpen');else ele.addClassName('codeLibTreeFoldClose');$(this.insRoot.vars.varsSystem.id.root).insert(this.eleTree);this._setFoldUpdateStyleAll({arr        : this.vars.varsDetail,flagEffect : 0});this._setWidth();this._setFoldRestoreStyleAll({arr : this.vars.varsDetail});this.insFormat.eleTemplate.body.insert(this.eleTree);this._setFoldUpdateStyleAll({arr        : this.vars.varsDetail,flagEffect : 1});},insBar : null,_iniBar : function(){if (!this.vars.varsStatus.flagBarUse) return;this._wrapBar();this._setBar();},_staticBar : {numHeight : 16, numWidth : 16},eleWrapBar : null,_wrapBar : function(){var ele = $(document.createElement('div'));ele.addClassName('codeLibTreeBarWrap');ele.unselectable = 'on';ele.addClassName('unselect');this.insFormat.eleTemplate.header.down('.codeLibBaseMarginLeftFive', 0).insert(ele);ele.setStyle({height : this._staticBar.numHeight + 'px'});this.eleWrapBar = ele;},_setBar : function(obj){if (this.vars.varsStatus.flagFoldUse) {var ele = $(document.createElement('span'));ele.addClassName('codeLibTreeBarFold');if (this.vars.varsStatus.flagFoldUse) {if (this.vars.varsStatus.flagLockUse && this.vars.varsStatus.flagLockNow) {ele.addClassName('codeLibBaseCursorDefault');} else {ele.addClassName('codeLibBaseCursorPointer');}if (!this.vars.varsStatus.flagFoldNow) ele.addClassName('codeLibTreeFoldClose');else  ele.addClassName('codeLibTreeFoldOpen');ele.setStyle({width  : this._staticBar.numWidth + 'px',height : this._staticBar.numHeight + 'px'});}ele.unselectable = 'on';ele.addClassName('unselect');this.eleWrapBar.insert(ele);if (this.vars.varsStatus.strFoldTitle) {var eleTitle = $(document.createElement('span'));eleTitle.unselectable = 'on';eleTitle.addClassName('unselect');eleTitle.addClassName('codeLibTreeColumnTitle');eleTitle.insert(this.vars.varsStatus.strFoldTitle);this.eleWrapBar.insert(eleTitle);}if (!(this.vars.varsStatus.flagLockUse && this.vars.varsStatus.flagLockNow)) {this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'mousedown',strFunc : '_mousedownBarFold', ele : ele, vars : ''});}}if (this.vars.varsStatus.flagCheckUse) {var ele = $(document.createElement('span'));ele.addClassName('codeLibTreeBarCheck');if (this.vars.varsStatus.flagCheckUse) {ele.addClassName('codeLibTreeBarCheckUnchecked');if (this.vars.varsStatus.flagLockUse && this.vars.varsStatus.flagLockNow) {ele.addClassName('codeLibBaseCursorDefault');} else {ele.addClassName('codeLibBaseCursorPointer');}ele.setStyle({width  : this._staticBar.numWidth + 'px',height : this._staticBar.numHeight + 'px'});}ele.unselectable = 'on';ele.addClassName('unselect');this.eleWrapBar.insert(ele);if (this.vars.varsStatus.strCheckTitle) {var eleTitle = $(document.createElement('span'));eleTitle.unselectable = 'on';eleTitle.addClassName('unselect');eleTitle.addClassName('codeLibTreeColumnTitle');eleTitle.insert(this.vars.varsStatus.strCheckTitle);this.eleWrapBar.insert(eleTitle);}if (!(this.vars.varsStatus.flagLockUse && this.vars.varsStatus.flagLockNow)) {this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'mousedown',strFunc : '_mousedownBarCheck', ele : ele, vars : ''});}}if (this.vars.varsStatus.flagLinkUse) {var ele = $(document.createElement('span'));ele.addClassName('codeLibTreeBarLink');if (this.vars.varsStatus.flagLinkUse) {if (this.vars.varsStatus.flagLockUse && this.vars.varsStatus.flagLockNow) {ele.addClassName('codeLibBaseCursorDefault');} else {ele.addClassName('codeLibBaseCursorPointer');}ele.setStyle({width  : this._staticBar.numWidth + 'px',height : this._staticBar.numHeight + 'px'});}ele.unselectable = 'on';ele.addClassName('unselect');this.eleWrapBar.insert(ele);if (this.vars.varsStatus.strLinkTitle) {var eleTitle = $(document.createElement('span'));eleTitle.unselectable = 'on';eleTitle.addClassName('unselect');eleTitle.addClassName('codeLibTreeColumnTitle');eleTitle.insert(this.vars.varsStatus.strLinkTitle);this.eleWrapBar.insert(eleTitle);}if (!(this.vars.varsStatus.flagLockUse && this.vars.varsStatus.flagLockNow)) {this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'mousedown',strFunc : '_mousedownBarLink', ele : ele, vars : ''});}}if (this.vars.varsStatus.flagAddUse) {var ele = $(document.createElement('span'));ele.addClassName('codeLibTreeBarAdd');if (this.vars.varsStatus.flagAddUse) {if (this.vars.varsStatus.flagLockUse && this.vars.varsStatus.flagLockNow) {ele.addClassName('codeLibBaseCursorDefault');} else {ele.addClassName('codeLibBaseCursorPointer');}ele.setStyle({width  : this._staticBar.numWidth + 'px',height : this._staticBar.numHeight + 'px'});}ele.unselectable = 'on';ele.addClassName('unselect');this.eleWrapBar.insert(ele);if (this.vars.varsStatus.strAddTitle) {var eleTitle = $(document.createElement('span'));eleTitle.unselectable = 'on';eleTitle.addClassName('unselect');eleTitle.addClassName('codeLibTreeColumnTitle');eleTitle.insert(this.vars.varsStatus.strAddTitle);this.eleWrapBar.insert(eleTitle);}if (!(this.vars.varsStatus.flagLockUse && this.vars.varsStatus.flagLockNow)) {this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'mousedown',strFunc : '_mousedownBarAdd', ele : ele, vars : ''});}}if (this.vars.varsStatus.flagRemoveUse && !this.vars.varsStatus.flagRemoveMenuNoneUse) {var ele = $(document.createElement('span'));ele.addClassName('codeLibTreeBarRemove');if (this.vars.varsStatus.flagRemoveUse) {if (this.vars.varsStatus.flagLockUse && this.vars.varsStatus.flagLockNow) {ele.addClassName('codeLibBaseCursorDefault');} else {ele.addClassName('codeLibBaseCursorPointer');}ele.setStyle({width  : this._staticBar.numWidth + 'px',height : this._staticBar.numHeight + 'px'});}if (this.vars.varsStatus.flagRemoveNow) ele.addClassName('codeLibTreeBarRemoveOn');else  ele.addClassName('codeLibTreeBarRemoveOff');ele.unselectable = 'on';ele.addClassName('unselect');this.eleWrapBar.insert(ele);if (this.vars.varsStatus.strRemoveTitle) {var eleTitle = $(document.createElement('span'));eleTitle.unselectable = 'on';eleTitle.addClassName('unselect');eleTitle.addClassName('codeLibTreeColumnTitle');eleTitle.insert(this.vars.varsStatus.strRemoveTitle);this.eleWrapBar.insert(eleTitle);}if (!(this.vars.varsStatus.flagLockUse && this.vars.varsStatus.flagLockNow)) {this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'mousedown',strFunc : '_mousedownBarRemove', ele : ele, vars : ''});}}if (this.vars.varsStatus.flagEditUse) {}},_iniCakeBar : function(){if (!this.insRoot.insCake) return;this.insRoot.insCake.getStorageCake({parentKey  : this.idSelf + 'Bar',funcReturn : this._getCakeBarVars,insReturn  : this.insSelf});},_getCakeBarVars : function(obj){var insCurrent = obj.insReturn;if (obj.data) {insCurrent._getCakeBarVarsUpdate({data : obj.data});}},_getCakeBarVarsUpdate : function(obj){if (!this.vars.varsStatus.flagCakeUse) return;var array = this._staticCakeBar;for (var i = 0; i < array.length; i++) {var str = array[i].capitalize();if (this.vars.varsStatus['flag' + str + 'Use']) {this.vars.varsStatus['flag' + str + 'Now'] = obj.data['flag' + str + 'Now'];}}},_staticCakeBar : ['edit','remove','check','fold'],_varsCakeBar : {},setCakeBar : function(){if (!this.insRoot.insCake) return;this._varsCakeBar= {};this._setCakeBarVars();this.insRoot.insCake.setStorageCake({parentKey  : this.idSelf + 'Bar',value      : this._varsCakeBar,numExpires : 0});},_setCakeBarVars : function(){if (!this.vars.varsStatus.flagCakeUse) return;var array = this._staticCakeBar;for (var i = 0; i < array.length; i++) {var str = array[i].capitalize();if (this.vars.varsStatus['flag' + str + 'Use']) {this._varsCakeBar['flag' + str + 'Now'] = this.vars.varsStatus['flag' + str + 'Now'];}}},_iniCake : function(){this._getCake();},_getCakeVars : function(obj){var insCurrent = obj.insReturn;if(obj.data) {insCurrent._getCakeVarsUpdate({arr  : insCurrent.vars.varsDetail,data : obj.data});}},_getCakeVarsUpdate : function(obj){if (!this.vars.varsStatus.flagCakeUse) return;var str;for (var i = 0; i < obj.arr.length; i++) {if (!obj.arr[i].flagUse) continue;str = 'flagFoldNow' + obj.arr[i].id;obj.arr[i].flagFoldNow = (obj.data[str])? 1 : 0;this._getCakeVarsUpdate({arr  : obj.arr[i].child,data : obj.data});}},setCake : function(obj){if (!this.insRoot.insCake) return;this._varsCake = {};this._setCakeVars({arr : obj.arr});this.insRoot.insCake.setStorageCake({parentKey  : this.idSelf,value      : this._varsCake,numExpires : 0});},_setCakeVars : function(obj){if (!this.vars.varsStatus.flagCakeUse) return;var str;for (var i = 0; i < obj.arr.length; i++) {if (!obj.arr[i].flagUse) continue;if (this.vars.varsStatus.flagFoldUse) {str = 'flagFoldNow' + obj.arr[i].id;this._varsCake[str] = (obj.arr[i].flagFoldNow) ? 1 : 0;}this._setCakeVars({arr : obj.arr[i].child});}},_iniBtnBottom : function(){if (!this.vars.varsStatus.flagBtnBottomUse) return;if (this.vars.varsStatus.flagInnerBtnBottomUse) {this.eleInsertBtnRight = (this.insFormat.eleTemplate.fooder.down('.codeLibBaseMarginRightFive', 0))?  this.insFormat.eleTemplate.fooder.down('.codeLibBaseMarginRightFive', 0): null;this.eleInsertBtnLeft = (this.insFormat.eleTemplate.fooder.down('.codeLibBaseMarginLeftFive', 0))?  this.insFormat.eleTemplate.fooder.down('.codeLibBaseMarginLeftFive', 0): null;}this._extBtnBottom();},_mouseoverTitle : function(obj){$(obj.vars.id).down('.codeLibTreeTitle', 0).addClassName('codeLibTreeTitleOver');},_mouseoutTitle : function(obj){$(obj.vars.id).down('.codeLibTreeTitle', 0).removeClassName('codeLibTreeTitleOver');}});var Code_Lib_View = Class.create(Code_Lib_ExtLib,{initialize : function(obj){this._extAllot(obj);this._iniVars(obj);this._iniListener();this._iniWrap();this._iniFormat();this._iniBar();this._iniLine();this._iniPage();this._resetFindVars();this._iniFind();this._iniBtnBottom();},iniReload : function(obj){this._updateFindValue();this.stopListener();this.removeWrap();this._iniWrap();this._iniFormat();this._iniBar();this._iniLine();this._iniPage();this._iniFind();this._iniBtnBottom();this.setScroll();},iniReloadFind : function(){this.stopListener();this.removeWrap();this._iniWrap();this._iniFormat();this._iniBar();this._iniLine();this._iniPage();this._iniFind();this._iniBtnBottom();this.setScroll();},_iniVars : function(obj){this._extVars(obj);},_varsFind : {flag : 0, value : ''},_iniFind : function(){if (!this.vars.varsStatus.flagFindUse) return;this._setFind();if (this._varsFind.value) {$(this.idSelf + 'Find').down('.codeLibBtnSearchInput', 0).value = this._varsFind.value;}},_resetFindVars : function(){this._varsFind = { flag : 0, value : '' };},_setFind : function(){var insBtn = new Code_Lib_Btn();insBtn.iniBtnSearch({eleInsert  : (this.vars.varsStatus.flagInnerFindUse)?  this.insFormat.eleTemplate.fooder.down('.codeLibBaseMarginLeftFive', 0): this.eleInsertBtnLeft,strFunc    : '_mousedownFind',insCurrent : this,id         : this.idSelf + 'Find',numWidth   : this._getFindWidth({numWidth : this.vars.varsFind.numWidth}),unitWidth  : 'px',strTitle   : this.vars.varsFind.strTitle});this._setListener({ins : insBtn});},_getFindWidth : function(obj){var array = this.eleInsert.style.width.split('px');var data =  Math.floor(parseFloat(array[0]) * obj.numWidth / 100);return  data;},_mousedownFind : function(obj){if (obj.value.empty()) {this._removeFindMark({arr : this.vars.varsDetail});this._varsFind = { flag : 0, value : '' };this.iniReloadFind();return;}if (this._varsFind.flag) this._removeFindMark({arr : this.vars.varsDetail});this._varsFind.flag = 1;this._varsFind.value = obj.value;this._updateFindMark({arr : this.vars.varsDetail,str : obj.value});this.iniReloadFind();},_removeFindMark : function(obj){for (var i = 0; i < obj.arr.length; i++) {obj.arr[i].strTitle = obj.arr[i].strTitle.replace(new RegExp('<span class=" codeLibViewFindMark" style="float : none;">(.*?)</span>','gm'),'$1');obj.arr[i].value = obj.arr[i].value.replace(new RegExp('<span class=" codeLibViewFindMark" style="float : none;">(.*?)</span>','gm'),'$1');}},_updateFindMark : function(obj){for (var i = 0; i < obj.arr.length; i++) {var str = obj.str;obj.arr[i].strTitle = obj.arr[i].strTitle.replace(new RegExp('('+str+')','gm'),'<span class=" codeLibViewFindMark" style="float : none;">$1</span>');obj.arr[i].value = obj.arr[i].value.replace(new RegExp('('+str+')','gm'),'<span class=" codeLibViewFindMark" style="float : none;">$1</span>');}},_updateFindValue : function(){if (!this.vars.varsStatus.flagFindUse) return;if (!$(this.idSelf + 'Find').down('.codeLibBtnSearchInput',0).value.empty()) {this._varsFind = {flag  : 1,value : $(this.idSelf + 'Find').down('.codeLibBtnSearchInput', 0).value};}},_staticLine : {numBlock : 16, numIdle : 5, numMargin : 5, numBar : 17, strDummy : '*', numContentIdle : 20},strLine : {},_iniLine : function(){this._setLineWrap();this._setLine({arr : this.vars.varsDetail});},eleWrapLine : null,_setLineWrap : function(){var ele = $(document.createElement('div'));ele.addClassName('codeLibViewLineWrap');this.insFormat.eleTemplate.body.insert(ele);this.eleWrapLine = ele;},_getLineWidth : function(){var array = this.eleWrap.style.width.split('px');var data = parseFloat(array[0] - this._staticLine.numBar);return data;},_setLine : function(obj){for (var i = 0; i < obj.arr.length; i++) {var eleLine = $(document.createElement('div'));eleLine.addClassName('codeLibViewLine');eleLine.id = this.idSelf + 'Line' + obj.arr[i].id;this.eleWrapLine.insert(eleLine);eleLine.setStyle({width : this._getLineWidth() + 'px'});var eleHeaderWrap = $(document.createElement('span'));eleHeaderWrap.addClassName('codeLibViewLineHeaderWrap');eleHeaderWrap.setStyle({width : this._getLineWidth() + 'px'});eleLine.insert(eleHeaderWrap);if (i > 0) {var eleHeaderSeparate = $(document.createElement('span'));eleHeaderSeparate.addClassName('codeLibViewLineSeparate');eleHeaderSeparate.setStyle({width : this._getLineWidth() + 'px'});eleHeaderWrap.insert(eleHeaderSeparate);}var eleHeader = $(document.createElement('span'));eleHeader.addClassName('codeLibViewLineHeader');eleHeader.setStyle({width : this._getLineWidth() + 'px'});eleHeaderWrap.insert(eleHeader);var eleFold = $(document.createElement('span'));eleFold.addClassName('codeLibViewLineFold');eleFold.addClassName('codeLibBaseMarginLeftFive');eleFold.addClassName('codeLibViewLineBlock');if (obj.arr[i].flagFoldUse && this.vars.varsStatus.flagFoldUse) {if (obj.arr[i].flagFoldNow) eleFold.addClassName('codeLibViewLineFoldClose');else eleFold.addClassName('codeLibViewLineFoldOpen');eleFold.addClassName('codeLibBaseCursorPointer');eleFold.unselectable = 'on';eleFold.addClassName('unselect');}eleHeader.insert(eleFold);if (obj.arr[i].flagFoldUse && this.vars.varsStatus.flagFoldUse) {this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'mousedown',strFunc : '_mousedownFold', ele : eleFold, vars : { vars : obj.arr[i] }});}var eleTitle = $(document.createElement('span'));eleTitle.addClassName('codeLibViewLineTitle');eleTitle.addClassName('codeLibBaseFontBold');eleTitle.addClassName('codeLibBaseMarginLeftFive');var numWidth = this._getLineWidth()- this._staticLine.numBlock- this._staticLine.numMargin- this._staticLine.numIdle;eleTitle.setStyle({width : numWidth + 'px'});eleTitle.title = obj.arr[i].strTitle.replace(new RegExp('<.*?>(.*?)</.*?>','gm'),'$1');eleTitle.insert(obj.arr[i].strTitle);eleHeader.insert(eleTitle);var eleBodyWrap = $(document.createElement('div'));eleBodyWrap.addClassName('codeLibViewLineBodyWrap');eleLine.insert(eleBodyWrap);if (obj.arr[i].flagFoldNow) eleBodyWrap.hide();var eleHeaderSeparate = $(document.createElement('span'));eleHeaderSeparate.addClassName('codeLibViewLineSeparate');eleHeaderSeparate.setStyle({width : this._getLineWidth() + 'px'});eleBodyWrap.insert(eleHeaderSeparate);var eleBody = $(document.createElement('span'));eleBody.addClassName('codeLibViewLineBody');eleBody.setStyle({width : this._getLineWidth() + 'px'});eleBodyWrap.insert(eleBody);var eleBodyValue;if ((obj.arr[i].flagTag == 'input' && obj.arr[i].flagType == 'checkbox') || obj.arr[i].flagTag == 'select') {eleBodyValue = $(document.createElement('form'));}else eleBodyValue = $(document.createElement('span'));eleBody.addClassName('codeLibViewLineBodyValue');eleBodyValue.setStyle({width : this._getLineWidth() + 'px'});eleBody.insert(eleBodyValue);if (this.vars.varsStatus.flagLineStatusUse) {var eleWrap = $(document.createElement('div'));eleWrap.addClassName('codeLibViewLineBodyStatusWrap');eleBody.insert(eleWrap);var eleSeparate = $(document.createElement('span'));eleSeparate.addClassName('codeLibViewLineSeparateDot');eleSeparate.setStyle({width : this._getLineWidth() + 'px'});eleWrap.insert(eleSeparate);var eleStatus = $(document.createElement('span'));eleStatus.addClassName('codeLibViewLineBodyStatus');eleStatus.setStyle({width : this._getLineWidth() + 'px'});eleWrap.insert(eleStatus);}if (obj.arr[i].flagContentUse) {var ele = $(document.createElement('div'));ele.addClassName('codeLibViewLineContent');ele.setStyle({width : (this._getLineWidth() - this._staticLine.numContentIdle) + 'px'});eleBodyValue.insert(ele);} else {var eleValue;if (obj.arr[i].flagTag == 'input' && obj.arr[i].flagType == 'checkbox') {eleValue = $(document.createElement('ul'));eleValue.addClassName('codeLibViewLineValue');eleValue.id = this.idSelf + 'Value' + obj.arr[i].id;this._setLineCheckbox({arr       : obj.arr[i].arrayOption,now       : obj.arr[i].value,eleInsert : eleTag});eleBodyValue.insert(eleValue);} else if (obj.arr[i].flagTag == 'select') {eleValue = $(document.createElement(obj.arr[i].flagTag));eleValue.addClassName('codeLibViewLineValue');eleValue.id = this.idSelf + 'Value' + obj.arr[i].id;eleValue.disabled = 'true';this._setLineSelect({arr       : obj.arr[i].arrayOption,now       : obj.arr[i].value,eleInsert : eleTag,vars      : obj.arr[i]});eleBodyValue.insert(eleValue);} else if (obj.arr[i].flagTag == 'input' && obj.arr[i].flagType == 'password') {eleValue = $(document.createElement('div'));eleValue.addClassName('codeLibViewLineValue');eleValue.id = this.idSelf + 'Value' + obj.arr[i].id;var strDummy = '';for (var j = 0; j < obj.arr[i].value.length; j++) {strDummy += this._staticLine.strDummy;}eleValue.insert(strDummy);eleBodyValue.insert(eleValue);} else {eleValue = $(document.createElement('div'));eleBodyValue.insert(eleValue);eleValue.id = this.idSelf + 'Value' + obj.arr[i].id;if (obj.arr[i].varsTextBtn) {var arrTextBtn = obj.arr[i].varsTextBtn;for (var j = 0; j < arrTextBtn.length; j++) {if (arrTextBtn[j].strTitle === '') {continue;}var insBtn = new Code_Lib_Btn();var id = this.idSelf + 'Value' + obj.arr[i].id + arrTextBtn[j].id;insBtn.iniBtnText({eleInsert  : eleValue,id         : id,strFunc    : 'checkTextBtn',strTitle   : arrTextBtn[j].strTitle,insCurrent : this,vars       : arrTextBtn[j].vars});$(id).addClassName('codeLibViewLineValue');this._setListener({ins : insBtn});}} else {eleValue.addClassName('codeLibViewLineValue');eleValue.insert(obj.arr[i].value);}}}if (i == obj.arr.length - 1) {var eleSeparate = $(document.createElement('span'));eleSeparate.addClassName('codeLibViewLineSeparate');eleSeparate.setStyle({width : this._getLineWidth() + 'px'});eleLine.insert(eleSeparate);}}},checkTextBtn : function(obj){this.allot({insCurrent : this.insCurrent,insSelf    : this,from       : 'checkTextBtn',vars       : obj.vars});},_setLineSelect : function(obj){for (var i = 0; i < obj.arr.length; i++) {var ele = $(document.createElement('option'));ele.value = obj.arr[i].value;if (obj.now == obj.arr[i].value) ele.selected = 'true';ele.insert(obj.arr[i].strTitle);obj.eleInsert.insert(ele);}},_setLineCheckbox : function(obj){var array = obj.now.split('-');for (var i = 0; i < obj.arr.length; i++) {var ele = $(document.createElement('li'));if (Prototype.Browser.IE) ele.addClassName('ie');else if (Prototype.Browser.Gecko) ele.addClassName('firefox');var eleTag = $(document.createElement('input'));eleTag.id = this.idSelf + obj.arr[i].id;eleTag.value = obj.arr[i].value;eleTag.disabled = 'true';for (var j = 0; j < array.length; j++) {if (array[j] == obj.arr[i].value) eleTag.selected = 'true';}ele.insert(obj.arr[i].strTitle);obj.eleInsert.insert(ele);}},insBar : null,_iniBar : function(){if (!this.vars.varsStatus.flagBarUse) return;this._setBarWrap();this._setBar();},_staticBar : {numHeight : 16, numWidth : 16},eleWrapBar : null,_setBarWrap : function(){var ele = $(document.createElement('div'));ele.addClassName('codeLibViewBarWrap');ele.unselectable = 'on';ele.addClassName('unselect');this.insFormat.eleTemplate.header.down('.codeLibBaseMarginLeftFive', 0).insert(ele);ele.setStyle({height : this._staticBar.numHeight + 'px'});this.eleWrapBar = ele;},_setBar : function(obj) {var eleFold = $(document.createElement('span'));eleFold.addClassName('codeLibViewBarFold');if (this.vars.varsStatus.flagFoldUse) {eleFold.addClassName('codeLibBaseCursorPointer');if (this.vars.varsStatus.flagFoldNow) eleFold.addClassName('codeLibViewLineFoldClose');else  eleFold.addClassName('codeLibViewLineFoldOpen');}eleFold.unselectable = 'on';eleFold.addClassName('unselect');this.eleWrapBar.insert(eleFold);this._setBarFoldListener({ele : eleFold});},_setBarFoldListener : function(obj){var ele = obj.ele;this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'mousedown',strFunc : '_mousedownBarFold', ele : ele, vars : ''});},_mousedownBarFold : function(evt, obj){if (obj) evt.stop();else obj = evt;this._updateBarFoldVar();this._updateBarFoldStyle();this._updateBarFoldStyleAll({arr : this.vars.varsDetail});},_updateBarFoldVar : function(){if (this.vars.varsStatus.flagFoldNow) {this.vars.varsStatus.flagFoldNow = 0;this._updateFoldVarAll({arr         : this.vars.varsDetail,flagFoldNow : 0});} else {this.vars.varsStatus.flagFoldNow = 1;this._updateFoldVarAll({arr         : this.vars.varsDetail,flagFoldNow : 1});}},_updateBarFoldStyle : function(){var ele = this.eleWrapBar.down('.codeLibViewBarFold', 0);ele.removeClassName('codeLibViewLineFoldOpen');ele.removeClassName('codeLibViewLineFoldClose');var cut = this.vars.varsStatus.flagFoldNow;if (!cut) ele.addClassName('codeLibViewLineFoldOpen');else ele.addClassName('codeLibViewLineFoldClose');},_updateBarFoldStyleAll : function(obj){for (var i = 0; i < obj.arr.length; i++) {if (!obj.arr[i].flagFoldUse) continue;var ele = $(this.idSelf + 'Line' + obj.arr[i].id).down('.codeLibViewLineFold', 0);ele.removeClassName('codeLibViewLineFoldOpen');ele.removeClassName('codeLibViewLineFoldClose');if (obj.arr[i].flagFoldNow) {$(this.idSelf + 'Line' + obj.arr[i].id).down('.codeLibViewLineBodyWrap', 0).hide();ele.addClassName('codeLibViewLineFoldClose');} else {$(this.idSelf + 'Line' + obj.arr[i].id).down('.codeLibViewLineBodyWrap', 0).show();ele.addClassName('codeLibViewLineFoldOpen');}}},_mousedownFold : function(evt, obj){if (obj) evt.stop();else obj = evt;this._updateFoldVar({arr : this.vars.varsDetail, vars : obj.vars});this._updateFoldStyle({arr : this.vars.varsDetail, vars : obj.vars});},_updateFoldVarAll : function(obj){for (var i = 0; i < obj.arr.length; i++) {if (!obj.arr[i].flagFoldUse) continue;obj.arr[i].flagFoldNow = obj.flagFoldNow;}},_updateFoldVar : function(obj){for (var i = 0; i < obj.arr.length; i++) {if (!obj.arr[i].flagFoldUse) continue;if (this.idSelf + 'Line' + obj.arr[i].id == this.idSelf + 'Line' + obj.vars.id) {if (obj.arr[i].flagFoldNow) obj.arr[i].flagFoldNow = 0;else obj.arr[i].flagFoldNow = 1;}}},_updateFoldStyle : function(obj){for (var i = 0; i < obj.arr.length; i++) {if (!obj.arr[i].flagFoldUse) continue;if (this.idSelf + 'Line' + obj.arr[i].id == this.idSelf + 'Line' + obj.vars.id) {var eleFold = $(this.idSelf + 'Line' + obj.arr[i].id).down('.codeLibViewLineFold', 0);eleFold.removeClassName('codeLibViewLineFoldOpen');eleFold.removeClassName('codeLibViewLineFoldClose');if (!obj.arr[i].flagFoldNow) {var ele = $(this.idSelf + 'Line' + obj.arr[i].id).down('.codeLibViewLineBodyWrap', 0);new Effect.BlindDown(ele, {duration : 0.5});eleFold.addClassName('codeLibViewLineFoldOpen');} else {var ele = $(this.idSelf + 'Line' + obj.arr[i].id).down('.codeLibViewLineBodyWrap', 0);new Effect.BlindUp(ele, {duration : 0.5});eleFold.addClassName('codeLibViewLineFoldClose');}}}},_iniListener : function(){this._extListener();},_iniBtnBottom : function(){this._extBtnBottom();},_iniPage : function(){this._extPage();},_getPageAllot : function(){var allot =  function(obj){var insCurrent = obj.insCurrent;if (obj.from == 'checkPage') {insCurrent.allot({insCurrent : insCurrent.insCurrent,from       : 'checkPage',vars       : obj.vars});}};return allot;},_iniFormat : function(){this._extFormat();},_iniWrap : function(){this._extWrap();this.eleWrap.style.width = this._getWrapWidth() + 'px';this.eleWrap.style.height = this._getWrapHeight() + 'px';}});var Code_Lib_Window = Class.create(Code_Lib_ExtLib,{varsLoad : {"varsWhole":{"str":{"removeTitle":"\u9589\u3058\u308b","foldRemoveTitle":"\u9589\u3058\u308b","foldOpenTitle":"\u958b\u304f","foldCloseTitle":"\u7573\u3080","coverMaxTitle":"\u6700\u5927\u5316","coverNormalTitle":"\u5143\u306b\u623b\u3059","hideTitle":"\u6700\u5c0f\u5316","boot":"\u30af\u30ea\u30c3\u30af\u3057\u305f\u3089\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u304c\u8d77\u52d5\u3057\u307e\u3059\u3002"},"path":{"boot":"front\/else\/lib\/img\/window\/boot.png"}}},iniLoad : function(obj){this._extAllot(obj);this._iniVars(obj);this._iniListener();this._iniLock();this._iniWrap();this._iniTemplate();this._iniCursor();this._iniZIndex();this._iniMove();this._iniHide();this._iniRemove();this._iniFold();this._iniSkeleton();this._iniResize();this._iniBoot();this._iniCover();this._iniMenu();},_iniMenu : function(){if (!this.vars.flagMenuUse) return;this._setMenu();this._updateMenuHide();},_setMenu : function(){this.insRoot.collectGlobalMenu({insWindow : this});},_updateMenuHide : function(){if (!this.vars.flagMenuUse) return;this.insRoot.updateGlobalMenu({insWindow : this});},eleInsert : null, vars : null,_iniVars : function(obj){this._extVars(obj);this.idWindow = this.idSelf + this.vars.id;this._iniCake();this.setCake();this.allot({insCurrent : this.insCurrent,from       : '_iniVars'});},_iniCake : function(){this._getCake();},_getCakeVarsUpdate : function(obj){var str = 'numLeft';this.vars.numLeft = obj.data[str];str = 'numTop';this.vars.numTop = obj.data[str];str = 'numHeight';this.vars.numHeight = obj.data[str];str = 'numWidth';this.vars.numWidth = obj.data[str];str = 'flagHideNow';this.vars.flagHideNow = obj.data[str];str = 'flagFoldNow';this.vars.flagFoldNow = obj.data[str];},_setCakeVars : function(){if (!this.vars.flagCakeUse) return;var str = 'numLeft';this._varsCake[str] = this.vars.numLeft;str = 'numTop';this._varsCake[str] = this.vars.numTop;str = 'numWidth';this._varsCake[str] = this.vars.numWidth;str = 'numHeight';this._varsCake[str] = this.vars.numHeight;str = 'flagHideNow';this._varsCake[str] = this.vars.flagHideNow;str = 'flagFoldNow';this._varsCake[str] = this.vars.flagFoldNow;str = 'numZIndex';this._varsCake[str] = this.vars.numZIndex;str = 'id';this._varsCake[str] = this.vars.id;},insListener : null,_iniListener : function(){this._extListener();},_iniCover : function(){if (!this.vars.flagCoverUse) return;this._setCover();this._setCoverListener();},_setCover : function(obj){$(this.idWindow).down('.codeLibWindowHeaderBottomMiddle', 1).addClassName('codeLibBaseCursorDefault');},_setCoverListener : function(obj){this.insListener.set({flagType15 : 1, bindAsEvent : 0, insCurrent : this, event : 'resize',strFunc : '_resizeCover', ele : window, vars : ''});this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'mousedown',strFunc : '_mousedownCover', ele : $(this.idWindow).down('.codeLibWindowNaviCoverMax', 0),vars : ''});this.insListener.set({bindAsEvent : 0, insCurrent : this, event : 'mouseover',strFunc : '_mouseoverCoverMax', ele : $(this.idWindow).down('.codeLibWindowNaviCoverMax', 0),vars : ''});this.insListener.set({bindAsEvent : 0, insCurrent : this, event : 'mouseout',strFunc : '_mouseoutCoverMax', ele : $(this.idWindow).down('.codeLibWindowNaviCoverMax', 0),vars : ''});this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'mousedown',strFunc : '_mousedownCover', ele : $(this.idWindow).down('.codeLibWindowNaviCoverNormal', 0),vars : ''});this.insListener.set({bindAsEvent : 0, insCurrent : this, event : 'mouseover',strFunc : '_mouseoverCoverNormal', ele : $(this.idWindow).down('.codeLibWindowNaviCoverNormal', 0),vars : ''});this.insListener.set({bindAsEvent : 0, insCurrent : this, event : 'mouseout',strFunc : '_mouseoutCoverNormal', ele : $(this.idWindow).down('.codeLibWindowNaviCoverNormal', 0),vars : ''});this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'dblclick',strFunc : '_mousedownCover', ele : $(this.idWindow).down('.codeLibWindowHeaderBottomMiddle', 0),vars : ''});this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'dblclick',strFunc : '_mousedownCover', ele : $(this.idWindow).down('.codeLibWindowHeaderBottomMiddle', 1),vars : ''});},_staticCover : {headerWidth : 12, headerHeight : 46, fooderHeight : 16},_varsCover : null,_mousedownCover : function(evt){evt.stop();if (this.vars.flagFoldNow) return;this._mousedownZIndex();if (!this.vars.flagCoverNow) {this.vars.flagCoverNow = 1;this._varsCover = {numLeft           : $(this.idWindow).offsetLeft,numTop            : $(this.idWindow).offsetTop,posVarsWindow : this.vars,varsWindow    : {id            : this.vars.id,numWidthMin   : this.vars.numWidthMin,numHeightMin  : this.vars.numHeightMin,flagRemoveUse : this.vars.flagRemoveUse,flagHideUse   : this.vars.flagHideUse,flagCoverUse  : this.vars.flagCoverUse,flagSwitchUse : this.vars.flagSwitchUse}};var numWidth = (document.viewport.getDimensions()).width- this._staticCover.headerWidth * 2;var numHeight = (document.viewport.getDimensions()).height- this._staticCover.headerHeight- this._staticCover.fooderHeight;this._varsCover.varsWindow.numWidth = (numWidth > this.vars.numWidthMin)?  numWidth: this.vars.numWidthMin;this._varsCover.varsWindow.numHeight = (numHeight > this.vars.numHeightMin)?  numHeight: this.vars.numHeightMin;this._setResizeWindowSize({numLeft : 0,numTop  : 0,vars    : this._varsCover.varsWindow,arr     : this._staticResize});this._removeCursor({arr : this._staticResize});$(this.idWindow).addClassName('codeLibWindowCover');$(this.idWindow).down('.codeLibWindowHeaderBottomMiddle', 0).hide();$(this.idWindow).down('.codeLibWindowHeaderBottomMiddle', 1).show();} else {this.vars.flagCoverNow = 0;$(this.idWindow).removeClassName('codeLibWindowCover');this._setResizeWindowSize({numLeft  : this._varsCover.numLeft,numTop   : this._varsCover.numTop,vars     : this._varsCover.posVarsWindow,arr      : this._staticResize});this._setCursor({arr : this._staticResize});this._varsCover = null;$(this.idWindow).down('.codeLibWindowHeaderBottomMiddle', 0).show();$(this.idWindow).down('.codeLibWindowHeaderBottomMiddle', 1).hide();}this.allot({from       : '_mousedownCover',insCurrent : this.insSelf});},_resizeCover : function(){if (!this._varsCover) return;var numWidth = (document.viewport.getDimensions()).width- this._staticCover.headerWidth * 2;var numHeight = (document.viewport.getDimensions()).height- this._staticCover.headerHeight- this._staticCover.fooderHeight;this._varsCover.varsWindow.numWidth = (numWidth > this._varsCover.varsWindow.numWidthMin)?   numWidth: this._varsCover.varsWindow.numWidthMin;this._varsCover.varsWindow.numHeight = (numHeight > this._varsCover.varsWindow.numHeightMin)?  numHeight: this._varsCover.varsWindow.numHeightMin;this._setResizeWindowSize({numLeft  : 0,numTop   : 0,vars     : this._varsCover.varsWindow,arr      : this._staticResize});this.allot({from       : '_resizeCover',insCurrent : this.insSelf});},_mouseoverCoverMax : function(obj){var ele = $(this.idWindow).down('.codeLibWindowNaviCoverMax', 0);ele.addClassName('codeLibWindowNaviCoverMaxOver');},_mouseoutCoverMax : function(obj){var ele = $(this.idWindow).down('.codeLibWindowNaviCoverMax', 0);ele.removeClassName('codeLibWindowNaviCoverMaxOver');},_mouseoverCoverNormal : function(obj){var ele = $(this.idWindow).down('.codeLibWindowNaviCoverNormal', 0);ele.addClassName('codeLibWindowNaviCoverNormalOver');},_mouseoutCoverNormal : function(obj){var ele = $(this.idWindow).down('.codeLibWindowNaviCoverNormal', 0);ele.removeClassName('codeLibWindowNaviCoverNormalOver');},_iniResize : function(){if (!this.vars.flagResizeUse) return;this._setResizeListener({arr : this._staticResize});},_setResizeListener : function(obj){for (var j = 0; j < obj.arr.length; j++) {if (obj.arr[j].flagListener) {this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'mousedown',strFunc : '_mousedownResize', ele : $(this.idWindow).down('.' + obj.arr[j].flagName, 0),vars : { className : obj.arr[j].flagName, arr : obj.arr }});}}this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'mousemove',strFunc : '_mousemoveResize', ele : document, vars : ''});this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'mouseup',strFunc : '_mouseupResize', ele : document, vars : ''});},_varsResize : {},_mousedownResize : function(evt, obj){evt.stop();this._mousedownZIndex();if (this._varsCover) return;if (this.vars.flagResizeIni == 'none' || this.vars.flagResizeNow == 'none') return;var objWindowClass = {};for (var j = 0; j < obj.arr.length; j++) {if (obj.arr[j].flagName == obj.className) {objWindowClass = obj.arr[j];break;}}this._varsResize = {};this._varsResize = {flag            : 1,ele             : evt.element(),window          : this.vars,windowClass     : objWindowClass,windowLeft      : $(this.idWindow).offsetLeft,windowTop       : $(this.idWindow).offsetTop,mouseLeft       : evt.pointerX(),mouseTop        : evt.pointerY(),naviBarXLeft    : evt.pointerX(),naviBarXTop     : evt.pointerY(),naviBarYLeft    : evt.pointerX(),naviBarYTop     : evt.pointerY(),eleBarX         : null,eleBarY         : null,endWindowWidth  : 0,endWindowHeight : 0,eleLockX        : null,eleLockY        : null};if (this._varsResize.windowClass.flagArrection == 'x') {this._setResizeNavi({evt : evt, navi : 'x'});} else if (this._varsResize.windowClass.flagArrection == 'y') {this._setResizeNavi({evt : evt, navi : 'y'});} else if (this._varsResize.windowClass.flagArrection == 'xy') {this._setResizeNavi({evt : evt, navi : 'x'});this._setResizeNavi({evt : evt, navi : 'y'});}},_setResizeNavi : function(obj){var viewSize = document.viewport.getDimensions();var scroll = document.viewport.getScrollOffsets();var numZIndex = this.insRoot.vars.varsSystem.num.zIndex;var eleLock = $(document.createElement('div'));eleLock.addClassName('codeLibLockView');eleLock.setStyle({zIndex : numZIndex});$(this.insRoot.vars.varsSystem.id.root).insert(eleLock);var ele = $(document.createElement('span'));if (obj.navi == 'x') {if (this._varsResize.window.flagResizeNow == 'all' || this._varsResize.window.flagResizeNow == 'x') {ele.setStyle({height : viewSize.height + scroll.top + 'px',top    : '0px',left   : obj.evt.pointerX() + 'px',zIndex : numZIndex});}ele.addClassName('codeLibWindowNaviX');this._varsResize.eleBarX = ele;this._varsResize.eleLockX = eleLock;} else if (obj.navi == 'y') {if (this._varsResize.window.flagResizeNow == 'all' || this._varsResize.window.flagResizeNow == 'y') {ele.setStyle({width  : viewSize.width + scroll.left + 'px',top    : obj.evt.pointerY() + 'px',left   : '0px',zIndex : numZIndex});}ele.addClassName('codeLibWindowNaviY');this._varsResize.eleBarY = ele;this._varsResize.eleLockY = eleLock;}$(this.insRoot.vars.varsSystem.id.root).insert(ele);},_mousemoveResize : function(evt){if (!this._varsResize.flag) return;if (this._varsResize.window.flagResizeNow == 'none') return;if (this._varsResize.windowClass.flagName == 'codeLibWindowHeaderTopLeft') {if (!this._checkResizeWindowMinLeft({evt : evt, window : this._varsResize.window })) {this._varsResize.eleBarX.setStyle({left : evt.pointerX() + 'px',top  : '0px'});this._varsResize.naviBarXLeft = evt.pointerX();this._varsResize.naviBarXTop = 0;}if (!this._checkResizeWindowMinTop({evt : evt, window : this._varsResize.window })) {this._varsResize.eleBarY.setStyle({left : '0px',top  : evt.pointerY() + 'px'});this._varsResize.naviBarYLeft = 0;this._varsResize.naviBarYTop = evt.pointerY();}} else if (this._varsResize.windowClass.flagName == 'codeLibWindowHeaderTopRight') {if (!this._checkResizeWindowMinRight({evt : evt, window : this._varsResize.window })) {this._varsResize.eleBarX.setStyle({left : evt.pointerX() + 'px',top  : '0px'});this._varsResize.naviBarXLeft = evt.pointerX();this._varsResize.naviBarXTop = 0;}if (!this._checkResizeWindowMinTop({evt : evt, window : this._varsResize.window })) {this._varsResize.eleBarY.setStyle({left : '0px',top  : evt.pointerY() + 'px'});this._varsResize.naviBarYLeft = 0;this._varsResize.naviBarYTop = evt.pointerY();}} else if (this._varsResize.windowClass.flagName == 'codeLibWindowBodyBottomLeft') {if (!this._checkResizeWindowMinLeft({evt : evt, window : this._varsResize.window })) {this._varsResize.eleBarX.setStyle({left : evt.pointerX() + 'px',top  : '0px'});this._varsResize.naviBarXLeft = evt.pointerX();this._varsResize.naviBarXTop = 0;}if (!this._checkResizeWindowMinBottom({evt : evt, window : this._varsResize.window })) {this._varsResize.eleBarY.setStyle({left : '0px',top  : evt.pointerY() + 'px'});this._varsResize.naviBarYLeft = 0;this._varsResize.naviBarYTop = evt.pointerY();}} else if (this._varsResize.windowClass.flagName == 'codeLibWindowBodyBottomRight') {if (!this._checkResizeWindowMinRight({evt : evt, window : this._varsResize.window })) {this._varsResize.eleBarX.setStyle({left : evt.pointerX() + 'px',top  : '0px'});this._varsResize.naviBarXLeft = evt.pointerX();this._varsResize.naviBarXTop = 0;}if (!this._checkResizeWindowMinBottom({evt : evt, window : this._varsResize.window })) {this._varsResize.eleBarY.setStyle({left : '0px',top  : evt.pointerY() + 'px'});this._varsResize.naviBarYLeft = 0;this._varsResize.naviBarYTop = evt.pointerY();}} else if (this._varsResize.windowClass.flagName == 'codeLibWindowHeaderTopMiddle') {if (this._checkResizeWindowMinTop({evt : evt, window : this._varsResize.window })) return;this._varsResize.eleBarY.setStyle({left : '0px',top  : evt.pointerY() + 'px'});this._varsResize.naviBarYLeft = 0;this._varsResize.naviBarYTop = evt.pointerY();} else if (this._varsResize.windowClass.flagName == 'codeLibWindowBodyBottomMiddle') {if (this._checkResizeWindowMinBottom({evt : evt, window : this._varsResize.window })) return;this._varsResize.eleBarY.setStyle({left : '0px',top  : evt.pointerY() + 'px'});this._varsResize.naviBarYLeft = 0;this._varsResize.naviBarYTop = evt.pointerY();} else if (this._varsResize.windowClass.flagName == 'codeLibWindowHeaderBottomLeft'|| this._varsResize.windowClass.flagName == 'codeLibWindowBodyTopLeft') {if (this._checkResizeWindowMinLeft({evt : evt, window : this._varsResize.window })) return;this._varsResize.eleBarX.setStyle({left : evt.pointerX() + 'px',top  : '0px'});this._varsResize.naviBarXLeft = evt.pointerX();this._varsResize.naviBarXTop = 0;} else if (this._varsResize.windowClass.flagName == 'codeLibWindowHeaderBottomRight'|| this._varsResize.windowClass.flagName == 'codeLibWindowBodyTopRight') {if (this._checkResizeWindowMinRight({evt : evt, window : this._varsResize.window })) return;this._varsResize.eleBarX.setStyle({left : evt.pointerX() + 'px',top  : '0px'});this._varsResize.naviBarXLeft = evt.pointerX();this._varsResize.naviBarXTop = 0;}evt.stop();},_mouseupResize : function(evt){if (!this._varsResize.flag) return;if (this._varsResize.window.flagResizeNow == 'none') return;if (this._varsResize.windowClass.flagName == 'codeLibWindowHeaderTopLeft') {if (this._varsResize.window.flagResizeNow == 'all' || this._varsResize.window.flagResizeNow == 'x') {this._setResizeWindowLeft(this._varsResize);}if (this._varsResize.window.flagResizeNow == 'all' || this._varsResize.window.flagResizeNow == 'y') {this._setResizeWindowTop(this._varsResize);}} else if (this._varsResize.windowClass.flagName == 'codeLibWindowHeaderTopRight') {if (this._varsResize.window.flagResizeNow == 'all' || this._varsResize.window.flagResizeNow == 'x') {this._setResizeWindowRight(this._varsResize);}if (this._varsResize.window.flagResizeNow == 'all' || this._varsResize.window.flagResizeNow == 'y') {this._setResizeWindowTop(this._varsResize);}} else if (this._varsResize.windowClass.flagName == 'codeLibWindowBodyBottomLeft') {if (this._varsResize.window.flagResizeNow == 'all' || this._varsResize.window.flagResizeNow == 'x') {this._setResizeWindowLeft(this._varsResize);}if (this._varsResize.window.flagResizeNow == 'all' || this._varsResize.window.flagResizeNow == 'y') {this._setResizeWindowBottom(this._varsResize);}} else if (this._varsResize.windowClass.flagName == 'codeLibWindowBodyBottomRight') {if (this._varsResize.window.flagResizeNow == 'all' || this._varsResize.window.flagResizeNow == 'x') {this._setResizeWindowRight(this._varsResize);}if (this._varsResize.window.flagResizeNow == 'all' || this._varsResize.window.flagResizeNow == 'y') {this._setResizeWindowBottom(this._varsResize);}} else if (this._varsResize.windowClass.flagName == 'codeLibWindowHeaderTopMiddle'&& (this._varsResize.window.flagResizeNow == 'all' || this._varsResize.window.flagResizeNow == 'y')) {this._setResizeWindowTop(this._varsResize);} else if (this._varsResize.windowClass.flagName == 'codeLibWindowBodyBottomMiddle'&& (this._varsResize.window.flagResizeNow == 'all' || this._varsResize.window.flagResizeNow == 'y')) {this._setResizeWindowBottom(this._varsResize);} else if ((this._varsResize.windowClass.flagName == 'codeLibWindowHeaderBottomLeft'|| this._varsResize.windowClass.flagName == 'codeLibWindowBodyTopLeft')&& (this._varsResize.window.flagResizeNow == 'all'|| this._varsResize.window.flagResizeNow == 'x')) {this._setResizeWindowLeft(this._varsResize);} else if ((this._varsResize.windowClass.flagName == 'codeLibWindowHeaderBottomRight'|| this._varsResize.windowClass.flagName == 'codeLibWindowBodyTopRight')&& (this._varsResize.window.flagResizeNow == 'all'|| this._varsResize.window.flagResizeNow == 'x')) {this._setResizeWindowRight(this._varsResize);}this._setResizeWindowSize({numLeft     : this._varsResize.windowLeft,numTop      : this._varsResize.windowTop,vars : this._varsResize.window,arr      : this._staticResize});this.vars.numTop = $(this.idWindow).offsetTop;this.vars.numLeft = $(this.idWindow).offsetLeft;this.setCake();this.allot({from       : '_mouseupResize',insCurrent : this.insSelf});if (this._varsResize.windowClass.flagArrection == 'x') {this._varsResize.eleBarX.remove();this._varsResize.eleLockX.remove();} else if (this._varsResize.windowClass.flagArrection == 'y') {this._varsResize.eleBarY.remove();this._varsResize.eleLockY.remove();} else if (this._varsResize.windowClass.flagArrection == 'xy') {this._varsResize.eleBarX.remove();this._varsResize.eleBarY.remove();this._varsResize.eleLockX.remove();this._varsResize.eleLockY.remove();}evt.stop();this._varsResize={};},_setResizeWindowSize : function(obj){var numWidth= obj.vars.numWidth;var numHeight= obj.vars.numHeight;for (var i = 0; i < obj.arr.length; i++) {if (obj.arr[i].flagWidth == 'width') {$(this.idWindow).down('.' + obj.arr[i].flagName, obj.arr[i].numPos).setStyle({'width' : numWidth + 'px'});} else if (obj.arr[i].flagWidth == 'bodyWidth') {$(this.idWindow).down('.' + obj.arr[i].flagName, obj.arr[i].numPos).setStyle({'width' : numWidth + 'px'});}if (obj.arr[i].flagHeight == 'height') {$(this.idWindow).down('.' + obj.arr[i].flagName, obj.arr[i].numPos).setStyle({'height' : numHeight + 'px'});}}var windowWidth = obj.vars.numWidth + this._staticTemplate.headerTopLeftWidth * 2;$(this.idWindow).setStyle({width : windowWidth + 'px',left  : obj.numLeft + 'px',top   : obj.numTop + 'px'});this._varWindowWidthTitle(obj.vars);$(this.idWindow).down('.codeLibWindowHeaderWidthTitle', 0).setStyle({width : obj.vars.numWidthTitle + 'px'});$(this.idWindow).down('.codeLibWindowHeaderWidthTitle', 1).setStyle({width : obj.vars.numWidthTitle + 'px'});},_setResizeWindowLeft : function(obj){var difX = this._varsResize.naviBarXLeft - this._varsResize.mouseLeft;var a = obj.window.numWidth - difX;if (a < obj.window.numWidthMin) {obj.window.numWidth = obj.window.numWidthMin;var dif = parseFloat(this._varsResize.naviBarXLeft) - this._varsResize.mouseLeft;this._varsResize.windowLeft = parseFloat(this._varsResize.windowLeft) + dif;} else {obj.window.numWidth -= difX;this._varsResize.windowLeft = parseFloat(this._varsResize.windowLeft) + difX;}this._varsResize.endWindowWidth = obj.window.numWidth;},_setResizeWindowRight : function(obj){var difX = this._varsResize.naviBarXLeft - this._varsResize.mouseLeft;var a = obj.window.numWidth + difX;if (a < obj.window.numWidthMin) {obj.window.numWidth = obj.window.numWidthMin;} else {obj.window.numWidth += difX;}this._varsResize.endWindowWidth = obj.window.numWidth;},_setResizeWindowTop : function(obj){var difY = this._varsResize.naviBarYTop - this._varsResize.mouseTop;var a = obj.window.numHeight - difY;if (a < obj.window.numHeightMin) {obj.window.numHeight = obj.window.numHeightMin;var dif = parseFloat(this._varsResize.naviBarYTop) - this._varsResize.mouseTop;this._varsResize.windowTop = parseFloat(this._varsResize.windowTop) + dif;} else {obj.window.numHeight-=difY;this._varsResize.windowTop = parseFloat(this._varsResize.windowTop) + difY;}this._varsResize.endWindowHeight = obj.window.numHeight;},_setResizeWindowBottom : function(obj){var difY = this._varsResize.naviBarYTop - this._varsResize.mouseTop;var a = obj.window.numHeight + difY;if (a < obj.window.numHeightMin) {obj.window.numHeight = obj.window.numHeightMin;} else {obj.window.numHeight += difY;}this._varsResize.endWindowHeight = obj.window.numHeight;},_checkResizeWindowMinLeft : function(obj){var a = obj.window.numWidth - (obj.evt.pointerX() - this._varsResize.mouseLeft);var data = (a < obj.window.numWidthMin)? 1  : 0;return  data;},_checkResizeWindowMinRight : function(obj){var a = obj.window.numWidth + (obj.evt.pointerX() - this._varsResize.mouseLeft);var data = (a < obj.window.numWidthMin)? 1  : 0;return  data;},_checkResizeWindowMinTop : function(obj){var a = obj.window.numHeight - (obj.evt.pointerY() - this._varsResize.mouseTop);var data = (a < obj.window.numHeightMin)? 1  : 0;return  data;},_checkResizeWindowMinBottom : function(obj){var a = obj.window.numHeight + (obj.evt.pointerY() - this._varsResize.mouseTop);var data = (a < obj.window.numHeightMin)? 1  : 0;return  data;},_iniSkeleton : function(){if (!this.vars.flagSkeletonUse) return;this._setSkeletonListener();},_setSkeletonListener : function(){this.insListener.set({bindAsEvent : 0, insCurrent : this, event : 'mouseover',strFunc : '_mouseoverSkeleton', ele : $(this.idWindow), vars : ''});this.insListener.set({bindAsEvent : 0, insCurrent : this, event : 'mouseout',strFunc : '_mouseoutSkeleton', ele : $(this.idWindow), vars : ''});this._mouseoutSkeleton();},_staticSkeleton : ['codeLibWindowHeaderTopLeft','codeLibWindowHeaderTopMiddle','codeLibWindowHeaderTopRight','codeLibWindowHeaderBottomLeft','codeLibWindowHeaderBottomMiddle','codeLibWindowHeaderBottomRight','codeLibWindowBodyTopLeft','codeLibWindowBodyTopRight','codeLibWindowBodyBottomLeft','codeLibWindowBodyBottomMiddle','codeLibWindowBodyBottomRight'],_mouseoverSkeleton : function(){for (var i = 0; i < this._staticSkeleton.length; i++) {$(this.idWindow).down('.' + this._staticSkeleton[i], 0).removeClassName('codeLibBaseOpacityZero');}},_mouseoutSkeleton : function(){for (var i = 0; i < this._staticSkeleton.length; i++) {$(this.idWindow).down('.' + this._staticSkeleton[i], 0).addClassName('codeLibBaseOpacityZero');}},_iniFold : function(){if (!this.vars.flagFoldUse) return;this._setFold();this._setFoldListener();this._removeCursor({arr : this._staticResize});this._setCursor({arr : this._staticResize});},_setFold : function(){if (this.vars.flagFoldNow) {$(this.idWindow).down('.codeLibWindowBodyTop', 0).hide();$(this.idWindow).down('.codeLibWindowNaviFold', 0).addClassName('codeLibWindowNaviFoldPlus');var data = this.varsLoad.varsWhole.str.foldOpenTitle;$(this.idWindow).down('.codeLibWindowNaviFold', 0).title = data;} else {$(this.idWindow).down('.codeLibWindowNaviFold', 0).addClassName('codeLibWindowNaviFoldMinus');var data = this.varsLoad.varsWhole.str.foldCloseTitle;$(this.idWindow).down('.codeLibWindowNaviFold', 0).title = data;}},_setFoldListener : function(){this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'mousedown',strFunc : '_mousedownFold', ele : $(this.idWindow).down('.codeLibWindowNaviFold', 0),vars : ''});this.insListener.set({bindAsEvent : 0, insCurrent : this, event : 'mouseover',strFunc : '_mouseoverFold', ele : $(this.idWindow).down('.codeLibWindowNaviFold', 0),vars : ''});this.insListener.set({bindAsEvent : 0, insCurrent : this, event : 'mouseout',strFunc : '_mouseoutFold', ele : $(this.idWindow).down('.codeLibWindowNaviFold', 0),vars : ''});},_mousedownFold : function(evt){evt.stop();this.updateFold();this._removeCursor({arr : this._staticResize});this._setCursor({arr : this._staticResize});this.setCake();},updateFold : function(obj){this._removeFold();if (!this.vars.flagFoldNow) this.vars.flagFoldNow = 1;else this.vars.flagFoldNow = 0;var idInsert = this.insRoot.vars.varsSystem.id.root;var numZIndex = this.insRoot.setZIndex();var insLock = new Code_Lib_Lock();if (this.vars.flagFoldNow) {if (this.vars.flagResizeIni == 'all') this.vars.flagResizeNow = 'x';else if (this.vars.flagResizeIni == 'y') this.vars.flagResizeNow = 'none';new Effect.BlindUp($(this.idWindow).down('.codeLibWindowBodyTop', 0),{beforeStart:function(){insLock.setLock({action    : 'wait',idInsert  : idInsert,numZIndex : numZIndex});},afterFinish:function(){insLock.removeLock();}});$(this.idWindow).down('.codeLibWindowNaviFold', 0).addClassName('codeLibWindowNaviFoldPlus');var data = this.varsLoad.varsWhole.str.foldOpenTitle;$(this.idWindow).down('.codeLibWindowNaviFold', 0).title = data;} else {if (this.vars.flagResizeIni == 'all') this.vars.flagResizeNow = 'all';else if (this.vars.flagResizeIni == 'y') this.vars.flagResizeNow = 'y';new Effect.BlindDown($(this.idWindow).down('.codeLibWindowBodyTop', 0),{beforeStart:function(){insLock.setLock({action    : 'wait',idInsert  : idInsert,numZIndex : numZIndex});},afterFinish:function(){insLock.removeLock();}});var ele = $(this.idWindow).down('.codeLibWindowNaviFold', 0);ele.addClassName('codeLibWindowNaviFoldMinus');ele.title=this.varsLoad.varsWhole.str.foldCloseTitle;}this._mouseoutFold();},_mouseoverFold : function(){this._removeFold();if (this.vars.flagFoldNow) {$(this.idWindow).down('.codeLibWindowNaviFold', 0).addClassName('codeLibWindowNaviFoldPlusOver');}else $(this.idWindow).down('.codeLibWindowNaviFold', 0).addClassName('codeLibWindowNaviFoldMinusOver');},_mouseoutFold : function(){this._removeFold();if (this.vars.flagFoldNow) {$(this.idWindow).down('.codeLibWindowNaviFold', 0).addClassName('codeLibWindowNaviFoldPlus');}else $(this.idWindow).down('.codeLibWindowNaviFold', 0).addClassName('codeLibWindowNaviFoldMinus');},_removeFold : function(){$(this.idWindow).down('.codeLibWindowNaviFold', 0).removeClassName('codeLibWindowNaviFoldPlus');$(this.idWindow).down('.codeLibWindowNaviFold', 0).removeClassName('codeLibWindowNaviFoldMinus');$(this.idWindow).down('.codeLibWindowNaviFold', 0).removeClassName('codeLibWindowNaviFoldPlusOver');$(this.idWindow).down('.codeLibWindowNaviFold', 0).removeClassName('codeLibWindowNaviFoldMinusOver');},_iniBoot : function(){this._setBoot();this._setBootListener();},_setBoot : function(){if (this.vars.flagBootUse == 0) {$(this.idWindow).down('.codeLibWindowBoot', 0).remove();$(this.idWindow).down('.codeLibWindowBodyTopMiddle', 0).removeClassName('codeLibBaseCursorPointer');} else if (this.vars.flagBootUse == 'auto') {this._mousedownBoot();}},_setBootListener : function(obj){if (this.vars.flagBootUse == 1) {this.insListener.set({bindAsEvent : 0, insCurrent : this, event : 'mousedown',strFunc : '_mousedownBoot', ele : $(this.idWindow).down('.codeLibWindowBoot', 0),vars : ''});}},_mousedownBoot : function(){this._mousedownZIndex();if (!$(this.idWindow).down('.codeLibWindowBoot', 0)) return;$(this.idWindow).down('.codeLibWindowBoot', 0).remove();$(this.idWindow).down('.codeLibWindowBodyTopMiddle', 0).removeClassName('codeLibBaseCursorPointer');this.allot({from       : '_mousedownBoot',insCurrent : this.insSelf});this.setCake();},setBoot : function(){this._mousedownBoot();},_iniRemove : function(){if (!this.vars.flagRemoveUse) return;this._setRemoveListener();},_setRemoveListener : function(){for (var j = 0; j < 2; j++) {this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'mousedown',strFunc : '_mousedownRemove', ele : $(this.idWindow).down('.codeLibWindowNaviRemove', j),vars : ''});this.insListener.set({bindAsEvent : 0, insCurrent : this, event : 'mouseover',strFunc : '_mouseoverRemove', ele : $(this.idWindow).down('.codeLibWindowNaviRemove', j),vars : ''});this.insListener.set({bindAsEvent : 0, insCurrent : this, event : 'mouseout',strFunc : '_mouseoutRemove', ele : $(this.idWindow).down('.codeLibWindowNaviRemove', j),vars : ''});}},_mousedownRemove : function(evt){if (evt) evt.stop();this.allot({from       : '_mousedownRemove',insCurrent : this.insSelf});},_mouseoverRemove : function(obj){$(this.idWindow).down('.codeLibWindowNaviRemove', 0).addClassName('codeLibWindowNaviRemoveOver');},_mouseoutRemove : function(obj){$(this.idWindow).down('.codeLibWindowNaviRemove', 0).removeClassName('codeLibWindowNaviRemoveOver');},_iniHide : function(){if (!this.vars.flagHideUse) return;this._setHideListener();},_setHideListener : function(){this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'mousedown',strFunc : '_mousedownHide', ele : $(this.idWindow).down('.codeLibWindowNaviHide', 0),vars : ''});this.insListener.set({bindAsEvent : 0, insCurrent : this, event : 'mouseover',strFunc : '_mouseoverHide', ele : $(this.idWindow).down('.codeLibWindowNaviHide', 0),vars : ''});this.insListener.set({bindAsEvent : 0, insCurrent : this, event : 'mouseout',strFunc : '_mouseoutHide', ele : $(this.idWindow).down('.codeLibWindowNaviHide', 0),vars : ''});if (this.vars.flagHideNow) $(this.idWindow).hide();},_mousedownHide : function(evt, obj){evt.stop();this._mousedownZIndex();var flag = this.allot({from       : '_mousedownHide',insCurrent : this,vars       : this.vars});if (flag) return;if (!this.vars.flagHideNow && this.vars.flagLockUse) {this.hideLockWindow();} else {this.updateHide({ flagEffect : 1 });this.setCake();}},checkHide : function(){return this.vars.flagHideNow;},updateHide : function(obj){var idInsert = this.insRoot.vars.varsSystem.id.root;var numZIndex = this.insRoot.setZIndex();var insLock = new Code_Lib_Lock();if (this.vars.flagHideNow) { this.vars.flagHideNow = 0;new Effect.Appear($(this.idWindow),{beforeStart:function(){insLock.setLock({action    : 'wait',idInsert  : idInsert,numZIndex : numZIndex});},afterFinish:function(){insLock.removeLock();}});this._setScroll({insLock : insLock});} else {this.vars.flagHideNow = 1;if (obj.flagEffect) {new Effect.Fade($(this.idWindow),{beforeStart:function(){insLock.setLock({action    : 'wait',idInsert  : idInsert,numZIndex : numZIndex});},afterFinish:function(){insLock.removeLock();}});} else {$(this.idWindow).hide();}}this._updateMenuHide();},_mouseoverHide : function(){$(this.idWindow).down('.codeLibWindowNaviHide', 0).addClassName('codeLibWindowNaviHideOver');},_mouseoutHide : function(){$(this.idWindow).down('.codeLibWindowNaviHide', 0).removeClassName('codeLibWindowNaviHideOver');},_staticScroll : {numTopbarHeight : 10, numSpeed : 5},_varsScroll : null,_setScroll : function(obj){this._varsScroll = {targetLeft : 0,targetTop  : 0,checkLeft  : 0,checkTop   : 0,flagLeft   : 0,flagTop    : 0,interval   : null,insLock    : obj.insLock};this._mousedownZIndex();this._varsScroll.targetLeft = parseFloat($(this.idWindow).getStyle('left') || '0');this._varsScroll.targetTop = parseFloat($(this.idWindow).getStyle('top') || '0')- this._staticScroll.numTopbarHeight;this._varsScroll.interval = setInterval(this.setScrollMove.bind(this), 15);},setScroll : function(){this._setScroll({insLock : null});},setScrollMove : function(){var nowTop = (document.viewport.getScrollOffsets()).top;var nowLeft = (document.viewport.getScrollOffsets()).left;var offsetWidth = this._varsScroll.targetLeft - nowLeft;nowLeft += offsetWidth / this._staticScroll.numSpeed;if ( Math.abs(offsetWidth) < 1 ) nowLeft = this._varsScroll.targetLeft;if ( nowLeft == this._varsScroll.checkLeft ) this._varsScroll.flagLeft++;else this._varsScroll.checkLeft = nowLeft;if ( nowLeft == this._varsScroll.targetLeft || this._varsScroll.flagLeft > 10 ) {var offsetHeight = this._varsScroll.targetTop - nowTop;nowTop += offsetHeight / this._staticScroll.numSpeed;if ( Math.abs(offsetHeight) < 1 ) nowTop = this._varsScroll.targetTop;if ( nowTop == this._varsScroll.checkTop ) this._varsScroll.flagTop++;else this._varsScroll.checkTop = nowTop;if ( nowTop == this._varsScroll.targetTop || this._varsScroll.flagTop > 10) {clearInterval(this._varsScroll.interval);if (this._varsScroll.insLock) this._varsScroll.insLock.removeLock();this._varsScroll = null;}else scrollTo( nowLeft, nowTop );}else scrollTo( nowLeft, nowTop );},eventGlobal : function(){var flag = this.allot({from       : 'eventGlobal',insCurrent : this});if (flag) return;this.updateHide({ flagEffect : 1 });this.setCake();},_iniMove : function(){if (!this.vars.flagMoveUse) return;this._setMoveListener();},_setMoveListener : function(obj){$(this.idWindow).down('.codeLibWindowHeaderBottomMiddle', 0).addClassName('codeLibBaseCursorMove');new Draggable(this.idWindow,{handle      : 'codeLibWindowHeaderBottomMiddle',starteffect : '',endeffect   : '',zIndex      : 100000000});this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'mousedown',strFunc : '_mousedownMove', ele : $(this.idWindow).down('.codeLibWindowHeaderBottomMiddle', 0),vars : ''});this.insListener.set({bindAsEvent : 1, insCurrent : this, event : 'mouseup',strFunc : '_mouseupMove', ele : document, vars : ''});},_varsMove : {},_mousedownMove : function(evt, obj){this._mousedownZIndex();this._varsMove = {};this._varsMove = {flag : 1};evt.stop();},_mouseupMove : function(evt, obj){if (!this._varsMove.flag) return;evt.stop();this.vars.numTop = ($(this.idWindow).offsetTop <= 0)? 0  : $(this.idWindow).offsetTop;this.vars.numLeft = ($(this.idWindow).offsetLeft <= 0)? 0  : $(this.idWindow).offsetLeft;this.setCake();this._varsMove = {};},_iniZIndex : function(){if (!this.vars.flagZIndexUse) return;this._setZIndexListener({arr : this.vars});},_setZIndexListener : function(obj){this.insListener.set({bindAsEvent : 0, insCurrent : this, event : 'mousedown',strFunc : '_mousedownZIndex', ele : $(this.idWindow), vars : ''});},_mousedownZIndex : function(){this.vars.numZIndex = this.insRoot.setZIndex();$(this.idWindow).setStyle({zIndex : this.vars.numZIndex});},setZIndex : function(){this._mousedownZIndex();},_iniCursor : function(){this._removeCursor({arr : this._staticResize});this._setCursor({arr : this._staticResize});},_setCursor : function(obj){if (!this.vars.flagResizeUse) return;if (this.vars.flagResizeNow == 'all') {for (var j = 0; j < obj.arr.length; j++) {$(this.idWindow).down('.' + obj.arr[j].flagName, 0).addClassName(obj.arr[j].flagCursor);}} else if (this.vars.flagResizeNow == 'x') {for (var j = 0; j < obj.arr.length; j++) {if (obj.arr[j].flagArrection == 'x') {$(this.idWindow).down('.' + obj.arr[j].flagName, 0).addClassName(obj.arr[j].flagCursor);}}} else if (this.vars.flagResizeNow == 'y') {for (var j = 0; j < obj.arr.length; j++) {if (obj.arr[j].flagArrection == 'y') {$(this.idWindow).down('.' + obj.arr[j].flagName, 0).addClassName(obj.arr[j].flagCursor);}}}},_removeCursor : function(obj){if (!this.vars.flagResizeUse) return;for (var j = 0; j < obj.arr.length; j++) {$(this.idWindow).down('.' + obj.arr[j].flagName, 0).removeClassName(obj.arr[j].flagCursor);}},_staticResize : [{flagListener : 1, numPos : 0, flagName : 'codeLibWindowHeaderTopLeft',flagCursor : 'codeLibBaseCursorSe-resize', flagArrection : 'xy', flagWidth : '', flagHeight : ''},{flagListener : 1, numPos : 0, flagName : 'codeLibWindowHeaderTopMiddle',flagCursor : 'codeLibBaseCursorS-resize', flagArrection : 'y', flagWidth : 'width', flagHeight : ''},{flagListener : 1, numPos : 0, flagName : 'codeLibWindowHeaderTopRight',flagCursor : 'codeLibBaseCursorNe-resize', flagArrection : 'xy', flagWidth : '', flagHeight : ''},{flagListener : 1, numPos : 0, flagName : 'codeLibWindowHeaderBottomLeft',flagCursor : 'codeLibBaseCursorE-resize', flagArrection : 'x', flagWidth : '', flagHeight : ''},{flagListener : 0, numPos : 0, flagName : 'codeLibWindowHeaderBottomMiddle',flagCursor : '', flagArrection : '', flagWidth : 'width', flagHeight : ''},{flagListener : 0, numPos : 1, flagName : 'codeLibWindowHeaderBottomMiddle',flagCursor : '', flagArrection : '', flagWidth : 'width', flagHeight : ''},{flagListener : 1, numPos : 0, flagName : 'codeLibWindowHeaderBottomRight',flagCursor : 'codeLibBaseCursorE-resize', flagArrection : 'x', flagWidth : '', flagHeight : ''},{flagListener : 1, numPos : 0, flagName : 'codeLibWindowBodyTopLeft',flagCursor : 'codeLibBaseCursorE-resize', flagArrection : 'x', flagWidth : '', flagHeight : 'height'},{flagListener : 0, numPos : 0, flagName : 'codeLibWindowBodyTopMiddle',flagCursor : '', flagArrection : '', flagWidth : 'bodyWidth', flagHeight : 'height'},{flagListener : 0, numPos : 0, flagName : 'codeLibWindowBodyTopMiddleWrap',flagCursor : '', flagArrection : '', flagWidth : 'bodyWidth', flagHeight : 'height'},{flagListener : 1, numPos : 0, flagName : 'codeLibWindowBodyTopRight',flagCursor : 'codeLibBaseCursorE-resize', flagArrection : 'x', flagWidth : '', flagHeight : 'height'},{flagListener : 1, numPos : 0, flagName : 'codeLibWindowBodyBottomLeft',flagCursor : 'codeLibBaseCursorNe-resize', flagArrection : 'xy', flagWidth : '', flagHeight : ''},{flagListener : 1, numPos : 0, flagName : 'codeLibWindowBodyBottomMiddle',flagCursor : 'codeLibBaseCursorS-resize', flagArrection : 'y', flagWidth : 'bodyWidth', flagHeight : ''},{flagListener : 1, numPos : 0, flagName : 'codeLibWindowBodyBottomRight',flagCursor : 'codeLibBaseCursorSe-resize', flagArrection : 'xy', flagWidth : '', flagHeight : ''}],_iniWrap : function(){var ele = $(document.createElement('div'));ele.id = this.idSelf;ele.addClassName('codeLibWindowWrap');this.eleInsert.insert(ele);},removeWrap : function(){this.insListener.stop();this._removeLock();$(this.idSelf).remove();},insLock : null,_iniLock : function(){if (!this.vars.flagLockUse) return;this.vars.numZIndex = this.insRoot.vars.varsSystem.num.zIndex;if (this.vars.flagLockNow == 'fixed') {this.insLock = new Code_Lib_Lock();this.insLock.setLock({action    : 'window',idInsert  : this.insRoot.vars.varsSystem.id.root,numZIndex : this.vars.numZIndex});} else if (this.vars.flagLockNow == 'temp') {this.insLock = new Code_Lib_LockTemp();this.insLock.iniLoad({idSelf      : this.idSelf + 'Lock',idInsert    : this.insRoot.vars.varsSystem.id.root,numZIndex   : this.vars.numZIndex,insCurrent  : this,flagHideUse : (this.vars.flagHideUse)? this.vars.flagHideUse : 0,strFunc     : (this.vars.flagHideUse)? 'hideLockWindow' : '_mousedownRemove'});}},hideLockWindow : function(){if (this.vars.flagLockNow == 'temp') {if (this.insLock) {this.insLock.hideLock();this.updateHide({ flagEffect : 1 });this.setCake();this.allot({from       : 'hideLockWindow',insCurrent : this});}}},showLockWindow : function(){if (this.vars.flagLockNow == 'temp') {if (this.insLock) {this.insLock.vars.numZIndex = this.insRoot.vars.varsSystem.num.zIndex;this.insLock.showLock();this.updateHide({ flagEffect : 1 });this.setCake();}}},_removeLock : function(){if (!this.vars.flagLockUse) return;if (this.vars.flagLockNow == 'fixed') {this.insLock._removeLock();} else if (this.vars.flagLockNow == 'temp') {if ($(this.idSelf + 'Lock')) {this.insLock.insListener.stop();this.insLock.eleLock.remove();}}},_iniTemplate : function(){this._setTemplate();},_setTemplate : function(){var windowWidth = this.vars.numWidth + this._staticTemplate.headerTopLeftWidth * 2;this.vars.strCoverMaxTitle = this.varsLoad.varsWhole.str.coverMaxTitle;this.vars.strCoverNormalTitle = this.varsLoad.varsWhole.str.coverNormalTitle;this.vars.strRemoveTitle = this.varsLoad.varsWhole.str.removeTitle;this.vars.strHideTitle = this.varsLoad.varsWhole.str.hideTitle;this.vars.strFoldOpenTitle =this.varsLoad.varsWhole.str.foldOpenTitle;this.vars.strFoldCloseTitle = this.varsLoad.varsWhole.str.foldCloseTitle;this.vars.windowBodyWidth = this.vars.numWidth;this.vars.windowWidth = windowWidth;var data = this._templateWindow( this.vars );$(this.idSelf).insert(data);},_staticTemplate : {headerTopLeftWidth : 12},_varWindowWidthTitle : function(obj){var numWidthIcon = 24;obj.numHeightIcon = 19;var numMargin = 8 * 2;var numPadding = 30 * 2;var numWidthTitle = obj.numWidth - numMargin - numPadding;if (obj.flagRemoveUse) { numWidthTitle -= numWidthIcon; }if (obj.flagHideUse) { numWidthTitle -= numWidthIcon; }if (obj.flagCoverUse) { numWidthTitle -= numWidthIcon; }if (obj.flagFoldUse) { numWidthTitle -= numWidthIcon; }if (obj.flagSwitchUse) { numWidthTitle -= numWidthIcon; }obj.numWidthTitle = numWidthTitle;},addStrWindowTitle : function(obj){$(this.idWindow).down('.codeLibWindowHeaderWidthTitle', 0).innerHTML = this.vars.strTitle + obj.strTitle;$(this.idWindow).down('.codeLibWindowHeaderWidthTitle', 1).innerHTML = this.vars.strTitle + obj.strTitle;},_templateWindow : function(obj){this._varWindowWidthTitle(obj);var tmplstr='<div class="codeLibWindow" id="' + this.idWindow + '" style="top : #{numTop}px; left : #{numLeft}px; width : #{windowWidth}px; z-index : #{numZIndex};">';tmplstr += '<div class="codeLibWindowHeader">';tmplstr += '<div class="codeLibWindowHeaderTop clearfix">';tmplstr += '<span class="codeLibWindowHeaderTopLeft unselect"></span>';tmplstr += '<span class="codeLibWindowHeaderTopMiddle unselect" style="width : #{numWidth}px; "></span>';tmplstr += '<span class="codeLibWindowHeaderTopRight unselect"></span>';tmplstr += '</div>';tmplstr += '<div class="codeLibWindowHeaderBottom clearfix" >';tmplstr += '<span class="codeLibWindowHeaderBottomLeft unselect"></span>';tmplstr += '<span class="codeLibWindowHeaderBottomMiddle unselect" style="width : #{numWidth}px;">';tmplstr += '<div class="codeLibWindowAreaLeft">';tmplstr += '<ul>';if (obj.strClass) tmplstr += '<li class="codeLibWindowHeaderTitleImg codeLibWindowHeaderWidthTitle #{strClass}" style="width : #{numWidthTitle}px; height : #{numHeightIcon}px;">#{strTitle}</li>';else tmplstr += '<li class="codeLibWindowHeaderTitle codeLibWindowHeaderWidthTitle codeLibBaseCursorDefault" style="width : #{numWidthTitle}px;">#{strTitle}</li>';tmplstr += '</ul>';tmplstr += '</div>';tmplstr += '<div class="codeLibWindowAreaRight">';if (obj.flagHideUse || obj.flagCoverUse || obj.flagFoldUse || obj.flagRemoveUse) {tmplstr += '<ul class="codeLibWindowNavi">';if (obj.flagRemoveUse) {tmplstr += '<li class="codeLibWindowNaviRemove codeLibBaseCursorPointer" title="#{strRemoveTitle}"></li>';}if (obj.flagHideUse) {tmplstr += '<li class="codeLibWindowNaviHide codeLibBaseCursorPointer" title="#{strHideTitle}"></li>';}if (obj.flagCoverUse) { tmplstr += '<li class="codeLibWindowNaviCover codeLibWindowNaviCoverMax codeLibBaseCursorPointer" title="#{strCoverMaxTitle}"></li>'; }if (obj.flagFoldUse) {tmplstr += '<li class="codeLibWindowNaviFold codeLibBaseCursorPointer" title="#{strFoldCloseTitle}"></li>';}tmplstr += '</ul>';}tmplstr += '</div>';tmplstr += '</span>';tmplstr += '<span class="codeLibWindowHeaderBottomMiddle unselect" style="width : #{numWidth}px; display : none;">';tmplstr += '<div class="codeLibWindowAreaLeft">';tmplstr += '<ul>';if (obj.strClass) tmplstr += '<li class="codeLibWindowHeaderTitleImg codeLibWindowHeaderWidthTitle #{strClass}" style="width : #{numWidthTitle}px; height : #{numHeightIcon}px;">#{strTitle}</li>';else tmplstr += '<li class="codeLibWindowHeaderTitle codeLibWindowHeaderWidthTitle codeLibBaseCursorDefault" style="width : #{numWidthTitle}px;">#{strTitle}</li>';tmplstr += '</ul>';tmplstr += '</div>';tmplstr += '<div class="codeLibWindowAreaRight">';if (obj.flagCoverUse || obj.flagRemoveUse) {tmplstr += '<ul class="codeLibWindowNavi">';if (obj.flagRemoveUse) {tmplstr += '<li class="codeLibWindowNaviRemove codeLibBaseCursorPointer" title="#{strRemoveTitle}"></li>';}if (obj.flagCoverUse) {tmplstr += '<li class="codeLibWindowNaviCover codeLibWindowNaviCoverNormal codeLibBaseCursorPointer" title="#{strCoverNormalTitle}"></li>';}tmplstr += '</ul>';}tmplstr += '</div>';tmplstr += '</span>';tmplstr += '<span class="codeLibWindowHeaderBottomRight unselect"></span>';tmplstr += '</div>';tmplstr += '</div>';tmplstr += '<div class="codeLibWindowBody">';tmplstr += '<div class="codeLibWindowBodyTop clearfix">';tmplstr += '<span class="codeLibWindowBodyTopLeft unselect" style="height : #{numHeight}px;"></span>';tmplstr += '<span class="codeLibWindowBodyTopMiddle codeLibBaseCursorPointer" style="width : #{windowBodyWidth}px; height : #{numHeight}px;"><span class="codeLibWindowBodyTopMiddleWrap" style="width : #{windowBodyWidth}px; height : #{numHeight}px;"><span class="codeLibWindowBoot" style="width : #{windowBodyWidth}px; height : #{numHeight}px;"></span></span></span>';tmplstr += '<span class="codeLibWindowBodyTopRight unselect" style="height : #{numHeight}px;"></span>';tmplstr += '</div>';tmplstr += '<div class="codeLibWindowBodyBottom clearfix">';tmplstr += '<span class="codeLibWindowBodyBottomLeft unselect"></span>';tmplstr += '<span class="codeLibWindowBodyBottomMiddle unselect" style="width : #{windowBodyWidth}px;"></span>';tmplstr += '<span class="codeLibWindowBodyBottomRight unselect"></span>';tmplstr += '</div>';tmplstr += '</div>';tmplstr += '</div>';var data=tmplstr.interpolate(obj);return data;}});